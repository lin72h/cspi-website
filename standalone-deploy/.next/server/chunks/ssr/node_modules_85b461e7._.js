module.exports=[940337,(a,b,c)=>{function d(a,b,c){function d(){var j=Date.now()-h;j<b&&j>=0?e=setTimeout(d,b-j):(e=null,c||(i=a.apply(g,f),g=f=null))}null==b&&(b=100);var e,f,g,h,i,j=function(){g=this,f=arguments,h=Date.now();var j=c&&!e;return e||(e=setTimeout(d,b)),j&&(i=a.apply(g,f),g=f=null),i};return j.clear=function(){e&&(clearTimeout(e),e=null)},j.flush=function(){e&&(i=a.apply(g,f),g=f=null,clearTimeout(e),e=null)},j}d.debounce=d,b.exports=d},175920,(a,b,c)=>{"use strict";b.exports=function(a){for(var b=function(a){var b,c=(a.length+8>>6)+1,d=Array(16*c);for(b=0;b<16*c;b++)d[b]=0;for(b=0;b<a.length;b++)d[b>>2]|=a.charCodeAt(b)<<(8*a.length+b)%4*8;d[b>>2]|=128<<(8*a.length+b)%4*8;var e=8*a.length;return d[16*c-2]=255&e,d[16*c-2]|=(e>>>8&255)<<8,d[16*c-2]|=(e>>>16&255)<<16,d[16*c-2]|=(e>>>24&255)<<24,d}(a),c=0x67452301,d=-0x10325477,e=-0x67452302,f=0x10325476,g=0;g<b.length;g+=16){var j=c,o=d,p=e,q=f;c=k(c,d,e,f,b[g+0],7,-0x28955b88),f=k(f,c,d,e,b[g+1],12,-0x173848aa),e=k(e,f,c,d,b[g+2],17,0x242070db),d=k(d,e,f,c,b[g+3],22,-0x3e423112),c=k(c,d,e,f,b[g+4],7,-0xa83f051),f=k(f,c,d,e,b[g+5],12,0x4787c62a),e=k(e,f,c,d,b[g+6],17,-0x57cfb9ed),d=k(d,e,f,c,b[g+7],22,-0x2b96aff),c=k(c,d,e,f,b[g+8],7,0x698098d8),f=k(f,c,d,e,b[g+9],12,-0x74bb0851),e=k(e,f,c,d,b[g+10],17,-42063),d=k(d,e,f,c,b[g+11],22,-0x76a32842),c=k(c,d,e,f,b[g+12],7,0x6b901122),f=k(f,c,d,e,b[g+13],12,-0x2678e6d),e=k(e,f,c,d,b[g+14],17,-0x5986bc72),d=k(d,e,f,c,b[g+15],22,0x49b40821),c=l(c,d,e,f,b[g+1],5,-0x9e1da9e),f=l(f,c,d,e,b[g+6],9,-0x3fbf4cc0),e=l(e,f,c,d,b[g+11],14,0x265e5a51),d=l(d,e,f,c,b[g+0],20,-0x16493856),c=l(c,d,e,f,b[g+5],5,-0x29d0efa3),f=l(f,c,d,e,b[g+10],9,0x2441453),e=l(e,f,c,d,b[g+15],14,-0x275e197f),d=l(d,e,f,c,b[g+4],20,-0x182c0438),c=l(c,d,e,f,b[g+9],5,0x21e1cde6),f=l(f,c,d,e,b[g+14],9,-0x3cc8f82a),e=l(e,f,c,d,b[g+3],14,-0xb2af279),d=l(d,e,f,c,b[g+8],20,0x455a14ed),c=l(c,d,e,f,b[g+13],5,-0x561c16fb),f=l(f,c,d,e,b[g+2],9,-0x3105c08),e=l(e,f,c,d,b[g+7],14,0x676f02d9),d=l(d,e,f,c,b[g+12],20,-0x72d5b376),c=m(c,d,e,f,b[g+5],4,-378558),f=m(f,c,d,e,b[g+8],11,-0x788e097f),e=m(e,f,c,d,b[g+11],16,0x6d9d6122),d=m(d,e,f,c,b[g+14],23,-0x21ac7f4),c=m(c,d,e,f,b[g+1],4,-0x5b4115bc),f=m(f,c,d,e,b[g+4],11,0x4bdecfa9),e=m(e,f,c,d,b[g+7],16,-0x944b4a0),d=m(d,e,f,c,b[g+10],23,-0x41404390),c=m(c,d,e,f,b[g+13],4,0x289b7ec6),f=m(f,c,d,e,b[g+0],11,-0x155ed806),e=m(e,f,c,d,b[g+3],16,-0x2b10cf7b),d=m(d,e,f,c,b[g+6],23,0x4881d05),c=m(c,d,e,f,b[g+9],4,-0x262b2fc7),f=m(f,c,d,e,b[g+12],11,-0x1924661b),e=m(e,f,c,d,b[g+15],16,0x1fa27cf8),d=m(d,e,f,c,b[g+2],23,-0x3b53a99b),c=n(c,d,e,f,b[g+0],6,-0xbd6ddbc),f=n(f,c,d,e,b[g+7],10,0x432aff97),e=n(e,f,c,d,b[g+14],15,-0x546bdc59),d=n(d,e,f,c,b[g+5],21,-0x36c5fc7),c=n(c,d,e,f,b[g+12],6,0x655b59c3),f=n(f,c,d,e,b[g+3],10,-0x70f3336e),e=n(e,f,c,d,b[g+10],15,-1051523),d=n(d,e,f,c,b[g+1],21,-0x7a7ba22f),c=n(c,d,e,f,b[g+8],6,0x6fa87e4f),f=n(f,c,d,e,b[g+15],10,-0x1d31920),e=n(e,f,c,d,b[g+6],15,-0x5cfebcec),d=n(d,e,f,c,b[g+13],21,0x4e0811a1),c=n(c,d,e,f,b[g+4],6,-0x8ac817e),f=n(f,c,d,e,b[g+11],10,-0x42c50dcb),e=n(e,f,c,d,b[g+2],15,0x2ad7d2bb),d=n(d,e,f,c,b[g+9],21,-0x14792c6f),c=h(c,j),d=h(d,o),e=h(e,p),f=h(f,q)}return i(c)+i(d)+i(e)+i(f)};var d="0123456789abcdef";function e(a,b){return 1&a|1&b|(a>>>1|b>>>1)<<1}function f(a,b){return(a>>>1^b>>>1)<<1|1&a^1&b}function g(a,b){return(a>>>1&b>>>1)<<1|1&a&(1&b)}function h(a,b){var c=(65535&a)+(65535&b);return(a>>16)+(b>>16)+(c>>16)<<16|65535&c}function i(a){var b,c="";for(b=0;b<=3;b++)c+=d.charAt(a>>8*b+4&15)+d.charAt(a>>8*b&15);return c}function j(a,b,c,d,e,f){var g;return h((g=h(h(b,a),h(d,f)))<<e|g>>>32-e,c)}function k(a,b,c,d,f,h,i){return j(e(g(b,c),g(~b,d)),a,b,f,h,i)}function l(a,b,c,d,f,h,i){return j(e(g(b,d),g(c,~d)),a,b,f,h,i)}function m(a,b,c,d,e,g,h){return j(f(f(b,c),d),a,b,e,g,h)}function n(a,b,c,d,g,h,i){return j(f(c,e(b,~d)),a,b,g,h,i)}},416905,306978,a=>{"use strict";let b,c,d,e;var f,g=a.i(187924),h=a.i(826088),i=a.i(572131),j=a.i(904986),k=a.i(32274),l=a.i(433697),m=a.i(109071),n=a.i(547663),o=a.i(471085),p=a.i(893108),q=(0,p.default)(function(a,b,c){return b=b.toLowerCase(),a+(c?(0,o.default)(b):b)}),r=a.i(445312),s=(0,p.default)(function(a,b,c){return a+(c?"-":"")+b.toLowerCase()}),t=a.i(954803),u=a.i(896200),v=a.i(417),w=a.i(641881),x=a.i(849055);let y="structure",z=(0,j.defineLocaleResourceBundle)({locale:"en-US",namespace:y,resources:()=>a.A(335668)}),A=["_id","_type","_createdAt","_updatedAt","_rev"];function B(a,b,c=!1){return b.map(b=>(function a(b,c,d=!1){let[e,...f]=c;if(!("fields"in b))return"";let g=b.fields.find(a=>a.name===e);if(!g){if(!A.includes(e)){let a=`The current ordering config targeted the nonexistent field "${e}" on schema type "${b.name}". It should be one of ${b.fields.map(a=>a.name).join(", ")}`;if(d)throw Error(a);console.warn(a)}return""}if("to"in g.type&&"reference"===g.type.name){let b=g.type.to;return`${e}->{${b.map(b=>a(b,f)).join(",")}}`}let h=f.length>0&&a(g.type,f),i=h?`{${h}}`:"";return f.length>0?`${e}${i}`:e})(a,b.field.split("."),c)).join(", ")}class C extends Error{constructor(a,b,c,d){super(a),this.name="SerializeError";const e=typeof c>"u"?"<unknown>":`${c}`;this.path=(b||[]).concat(d?`${e} (${d})`:e)}withHelpUrl(a){return this.helpId=a,this}}let D={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",DOCUMENT_TYPE_REQUIRED:"structure-document-type-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},E={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:y}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},F=[E,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:y}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function G(a,b,c){return a instanceof H?a.serialize({path:c,index:b}):a}class H{constructor(a,b){this._context=a,this.spec=b||{}}action(a){return this.clone({action:a})}getAction(){return this.spec.action}intent(a){return this.clone({intent:a})}getIntent(){return this.spec.intent}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}group(a){return this.clone({group:a})}getGroup(){return this.spec.group}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}params(a){return this.clone({params:a})}getParams(){return this.spec.params}showAsAction(a=!0){return this.clone({showAsAction:!!a})}getShowAsAction(){return this.spec.showAsAction}serialize(a={path:[]}){let{title:b,action:c,intent:d}=this.spec;if(!b){let b="string"==typeof c?`action: "${c}"`:void 0;throw new C("`title` is required for menu item",a.path,a.index,b).withHelpUrl(D.TITLE_REQUIRED)}if(!c&&!d)throw new C(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,a.path,a.index,`"${b}"`).withHelpUrl(D.ACTION_OR_INTENT_REQUIRED);if(d&&c)throw new C("cannot set both `action` AND `intent`",a.path,a.index,`"${b}"`).withHelpUrl(D.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:b}}clone(a){let b=new H(this._context);return b.spec={...this.spec,...a},b}}function I(a,{by:b,title:c,i18n:d},e){let f=new H(a).group("sorting").title(a.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:c}})).icon(n.SortIcon).action("setSortOrder").params({by:b,extendedProjection:e});return d&&(f=f.i18n(d)),f}function J(a,b){let{schema:c}=a,d="string"==typeof b?c.get(b):b;return d&&"orderings"in d?(d.orderings?d.orderings.concat(F):F).map(b=>I(a,b,B(d,b.by))):[]}function K(a,b,c){return a instanceof L?a.serialize({path:c,index:b}):a}class L{constructor(a,b){this._context=a,this._id=b?b.id:"",this._title=b?b.title:"",this._i18n=b?b.i18n:void 0}id(a){return new L(this._context,{id:a,title:this._title,i18n:this._i18n})}getId(){return this._id}title(a){return new L(this._context,{title:a,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(a){return new L(this._context,{i18n:a,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(a={path:[]}){if(!this._id)throw new C("`id` is required for a menu item group",a.path,a.index,this._title).withHelpUrl(D.ID_REQUIRED);if(!this._title)throw new C("`title` is required for a menu item group",a.path,this._id).withHelpUrl(D.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let M=/([^A-Za-z0-9-_.])/;function N(a,b,c){if("string"!=typeof a)throw new C(`Structure node id must be of type string, got ${typeof a}`,b,c);let[d]=a.match(M)||[];if(d)throw new C(`Structure node id cannot contain character "${d}"`,b,c);if(a.startsWith("__edit__"))throw new C("Structure node id cannot start with __edit__",b,c);return a}function O(a,b){if(b)return b;let c=q(a);return M.test(c)?q((0,w.default)(a)):c}class P{constructor(a){this.spec={options:{},...a||{}}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:O(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(a){return this.clone({canHandleIntent:a})}serialize(a={path:[]}){let{id:b,title:c,child:d,options:e,component:f}=this.spec;if(!b)throw new C("`id` is required for `component` structure item",a.path,a.index).withHelpUrl(D.ID_REQUIRED);if(!f)throw new C("`component` is required for `component` structure item",a.path,a.index).withHelpUrl(D.ID_REQUIRED);return{id:N(b,a.path,a.index),title:c,type:"component",child:d,component:f,canHandleIntent:this.spec.canHandleIntent,options:e||{},menuItems:(this.spec.menuItems||[]).map((b,c)=>G(b,c,a.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((b,c)=>K(b,c,a.path))}}clone(a){let b=new P;return b.spec={...this.spec,...a},b}}class Q{constructor(a){this.spec={id:(0,r.uniqueId)("__divider__"),type:"divider",...a}}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(a){let b=new Q;return b.spec={...this.spec,...a},b}}async function R(a,b){return await a(j.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,k.getPublishedId)(b)},{tag:"structure.resolve-type"})}class S{spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:this.spec.id||s(a)})}getTitle(){return this.spec.title}icon(a){return this.clone({icon:a})}getIcon(){return this.spec.icon}serialize(a={path:[]}){let{id:b,title:c,icon:d}=this.spec;if(!b)throw new C("`id` is required for view item",a.path,a.index).withHelpUrl(D.ID_REQUIRED);if(!c)throw new C("`title` is required for view item",a.path,a.index).withHelpUrl(D.TITLE_REQUIRED);return{id:N(b,a.path,a.index),title:c,icon:d}}}function T(a,b,c){return"function"==typeof a.serialize?a.serialize({path:c,index:b}):a}class U extends S{constructor(a){const b=(a=>(0,j.isRecord)(a)&&"component"===a.type)(a)?{...a}:{options:{}};super(),this.spec=b;const c="function"==typeof a?a:this.spec.component;c&&(this.spec=this.component(c).spec)}component(a){return this.clone({component:a})}getComponent(){return this.spec.component}options(a){return this.clone({options:a})}getOptions(){return this.spec.options||{}}serialize(a={path:[]}){let b=super.serialize(a),c=this.spec.component;if("function"!=typeof c)throw new C("`component` is required and must be a function for `component()` view item",a.path,a.index).withHelpUrl(D.COMPONENT_REQUIRED);return{...b,component:c,options:this.spec.options||{},type:"component"}}clone(a){let b=new U;return b.spec={...this.spec,...a},b}}class V extends S{constructor(a){super(),this.spec={id:"editor",title:"Editor",...a||{}}}serialize(a={path:[]}){return{...super.serialize(a),type:"form"}}clone(a){let b=new V;return b.spec={...this.spec,...a},b}}let W=a=>new V(a),X=a=>new U(a);var Y=Object.freeze({__proto__:null,ComponentViewBuilder:U,FormViewBuilder:V,GenericViewBuilder:S,component:X,form:W,maybeSerializeView:T});class Z{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:O(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}child(a){return this.clone({child:a})}getChild(){return this.spec.child}documentId(a){let b=this.spec.id||a;return this.clone({id:b,options:{...this.spec.options,id:a}})}getDocumentId(){return this.spec.options?.id}schemaType(a){return this.clone({options:{...this.spec.options,type:"string"==typeof a?a:a.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(a,b){return this.clone({options:{...this.spec.options,template:a,templateParameters:b}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(a){return this.clone({views:a})}getViews(){return this.spec.views||[]}serialize({path:a=[],index:b,hint:c}={path:[]}){var d;let e,f=a[b||a.length-1],g=this.spec.id||f&&`${f}`||"",h={id:g,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof g||!g)throw new C("`id` is required for document nodes",a,b,c).withHelpUrl(D.ID_REQUIRED);if(!h||!h.id)throw new C("document id (`id`) is required for document nodes",a,g,c).withHelpUrl(D.DOCUMENT_ID_REQUIRED);if(!h||!h.type)throw new C("document type (`schemaType`) is required for document nodes",a,g,c);let i=(this.spec.views&&this.spec.views.length>0?this.spec.views:[W()]).map((b,c)=>T(b,c,a)),j=i.map(a=>a.id),k=(0,t.uniq)(j.filter((a,b)=>j.includes(a,b+1)));if(k.length>0)throw new C(`document node has views with duplicate IDs: ${k.join(",  ")}`,a,g,c);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:a,getClient:b})=>async(c,{params:d,path:e})=>{let f=d.type,g=e.slice(0,e.length-1),h=e[e.length-1];if(f||(f=await R(b,c)),!f)throw new C("Failed to resolve document, and no type provided in parameters.",g,h);return a({documentId:c,schemaType:f})})(this._context),id:N(g,a,b),type:"document",options:(e={id:(d=h).id||"",type:d.type||"*"},d.template&&(e.template=d.template),d.templateParameters&&(e.templateParameters=d.templateParameters),e),views:i}}clone(a={}){let b=new Z(this._context),c={...this.spec.options,...a.options};return b.spec={...this.spec,...a,options:c},b}}function $(a,b){let c=b?.type?a.resolveDocumentNode({schemaType:b.type}):new Z(a);if(!b)return c;let{id:d,type:e,template:f,templateParameters:g}=b.options;return c=c.id(b.id).documentId(d),e&&(c=c.schemaType(e)),f&&(c=c.initialValueTemplate(f,g)),b.child&&(c=c.child(b.child)),c}function _({resolveDocumentNode:a,templates:b},c,d){let e=b.find(a=>a.id===c);if(!e)throw Error(`Template with ID "${c}" not defined`);return a({schemaType:e.schemaType}).initialValueTemplate(c,d)}class aa{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a})}getTitle(){return this.spec.title}description(a){return this.clone({description:a})}getDescription(){return this.spec.description}templateId(a){let b=this.spec.id||a;return this.clone({id:b,templateId:a})}getTemplateId(){return this.spec.templateId}parameters(a){return this.clone({parameters:a})}getParameters(){return this.spec.parameters}serialize({path:a=[],index:b,hint:c}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new C("`id` is required for initial value template item nodes",a,b,c).withHelpUrl(D.ID_REQUIRED);if(!this.spec.templateId)throw new C("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(D.ID_REQUIRED);let d=this._context.templates.find(a=>a.id===this.spec.templateId);if(!d)throw new C("template id (`templateId`) is required for initial value template item nodes",a,this.spec.id,c).withHelpUrl(D.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:d.schemaType,type:"initialValueTemplateItem",description:this.spec.description||d.description,title:this.spec.title||d.title,subtitle:this.spec.subtitle,icon:this.spec.icon||d.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(a={}){let b=new aa(this._context);return b.spec={...this.spec,...a},b}}function ab(a){let{schema:b,getStructureBuilder:c,templates:d}=a,e=b.getTypeNames();return d.filter(a=>!a.parameters?.length).sort((a,b)=>e.indexOf(a.schemaType)-e.indexOf(b.schemaType)).map(a=>c().initialValueTemplateItem(a.id))}function ac(a,b,c){return a instanceof aa?a.serialize({path:c,index:b}):a}function ad(a,b){let{schema:c,templates:d}=a;return b.map(b=>{let e=d.find(a=>a.id===b.templateId),f=b.title||e?.title||"Create",g={};e&&e.schemaType&&(g.type=e.schemaType),b.templateId&&(g.template=b.templateId);let h=b.parameters?[g,b.parameters]:g,i=e&&c.get(e.schemaType),j=b.i18n||e?.i18n,k=new H(a).title(f).icon(e&&e.icon||i?.icon||n.AddIcon).intent({type:"create",params:h});return j&&(k=k.i18n(j)),k.serialize()})}let ae=Symbol("Document type list canHandleIntent"),af=(a,b,{pane:c})=>{let d="create"===a,e=c.options?.filter||"",f=c.options?.params||{},g=c.schemaTypeName?[c.schemaTypeName]:al(e,f),h=c.initialValueTemplates||[];return d&&b.template?h.some(a=>a.templateId===b.template):"edit"===a&&b.id&&g.includes(b.type)||d&&g.includes(b.type)};af.identity=ae;let ag=["default","card","media","detail","block"];function ah(){}let ai=(a,b,{pane:c,index:d})=>d<=1&&af(a,b,{pane:c});class aj{initialValueTemplatesSpecified=!1;spec={};id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:O(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}defaultLayout(a){return this.clone({defaultLayout:a})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(a){return this.clone({menuItems:a})}getMenuItems(){return this.spec.menuItems}menuItemGroups(a){return this.clone({menuItemGroups:a})}getMenuItemGroups(){return this.spec.menuItemGroups}child(a){return this.clone({child:a})}getChild(){return this.spec.child}canHandleIntent(a){return this.clone({canHandleIntent:a})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:a}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(a){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(a)?a:[a]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(a={path:[]}){let b=this.spec.id||"",c=a.path,d=this.spec.defaultLayout;if(d&&!ag.includes(d))throw new C(`\`layout\` must be one of ${ag.map(a=>`"${a}"`).join(", ")}`,c,b||a.index,this.spec.title);let e=(this.spec.initialValueTemplates||[]).map((a,b)=>ac(a,b,c));return{id:N(b,a.path,b||a.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:d,child:this.spec.child||ah,canHandleIntent:this.spec.canHandleIntent||ai,displayOptions:this.spec.displayOptions,initialValueTemplates:e,menuItems:(this.spec.menuItems||[]).map((a,b)=>G(a,b,c)),menuItemGroups:(this.spec.menuItemGroups||[]).map((a,b)=>K(a,b,c))}}}class ak extends aj{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!b?.initialValueTemplates}apiVersion(a){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:a}})}getApiVersion(){return this.spec.options?.apiVersion}filter(a){return this.clone({options:{...this.spec.options,filter:a}})}getFilter(){return this.spec.options?.filter}schemaType(a){let b="string"==typeof a?a:a.name;return this.clone({schemaTypeName:b})}getSchemaType(){return this.spec.schemaTypeName}params(a){return this.clone({options:{...this.spec.options||{filter:""},params:a}})}getParams(){return this.spec.options?.params}defaultOrdering(a){if(!Array.isArray(a))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:a}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(a={path:[]}){let b;if("string"!=typeof this.spec.id||!this.spec.id)throw new C("`id` is required for document lists",a.path,a.index,this.spec.title).withHelpUrl(D.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new C("`filter` is required for document lists",a.path,this.spec.id,this.spec.title).withHelpUrl(D.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,x.generateHelpUrl)(D.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(a),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(b=this._context,(a,c)=>{let d=c.parent,e=c.params?.template?b.templates.find(a=>a.id===c.params.template):void 0;return Promise.resolve(e?e.schemaType:d.schemaTypeName||R(b.getClient,a)).then(c=>c?b.resolveDocumentNode({schemaType:c,documentId:a}):new Z(b).id("editor").documentId(a).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||j.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((a,b)=>{let c=a.options?.filter.trim()||"";if(["*","{"].includes(c[0]))throw new C(`\`filter\` cannot start with \`${c[0]}\` - looks like you are providing a query, not a filter`,b.path,a.id,a.title).withHelpUrl(D.QUERY_PROVIDED_FOR_FILTER);return c})(this.spec,a)}}}clone(a){let b=new ak(this._context);return b.spec={...this.spec,...a},this.initialValueTemplatesSpecified||(b.spec.initialValueTemplates=function(a,b){let{document:c}=a,{schemaTypeName:d,options:e}=b,{filter:f,params:g}=e||{filter:"",params:{}},h=d?[d]:Array.from(new Set(al(f,g)));if(0!==h.length)return h.flatMap(a=>c.resolveNewDocumentOptions({type:"structure",schemaType:a})).map(a=>({...a,icon:n.AddIcon}))}(this._context,b.spec)),b.spec.schemaTypeName||(b.spec.schemaTypeName=function(a){let{options:b}=a,{filter:c,params:d}=b||{filter:"",params:{}},e=al(c,d);return 1===e.length?e[0]:void 0}(b.spec)),b}getSpec(){return this.spec}}function al(a,b={}){let c=function(a,b={}){let c,d=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,e=[];for(;null!==(c=d.exec(a));)e.push(c[1]||c[2]);return e.map(a=>(("$"===a[0]?b[a.slice(1)]:a)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(a,b);return 0===c.length&&(c=function(a,b={}){let c=a.match(/\b_type\s+in\s+\[(.*?)\]/);return c?c[1].split(/,\s*/).map(a=>a.trim().replace(/^["']+|["']+$/g,"")).map(a=>"$"===a[0]?b[a.slice(1)]:a).filter(Boolean):[]}(a,b)),c}let am=a=>"listItem"===a.type,an=(a,b,c)=>(c.pane.items||[]).filter(as).some(a=>a.schemaType.name===b.type&&a._id===b.id)||ai(a,b,c),ao=(a,b)=>{let c=(b.parent.items.filter(am).find(b=>b.id===a)||{child:void 0}).child;return c&&"function"==typeof c&&"function"==typeof c?c(a,b):c};class ap extends aj{constructor(a,b){super(),this._context=a,this.spec=b||{},this.initialValueTemplatesSpecified=!!(b&&b.initialValueTemplates)}items(a){return this.clone({items:a})}getItems(){return this.spec.items}serialize(a={path:[]}){let b=this.spec.id;if("string"!=typeof b||!b)throw new C("`id` is required for lists",a.path,a.index).withHelpUrl(D.ID_REQUIRED);let c=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(c))throw new C("`items` must be an array of items",a.path,a.index).withHelpUrl(D.LIST_ITEMS_MUST_BE_ARRAY);let d=(a.path||[]).concat(b),e=c.map((a,b)=>(function(a,b,c){if(a instanceof aq)return a.serialize({path:c,index:b});if(a instanceof Q)return a.serialize();if(a&&"divider"===a.type)return a;if(!a||"listItem"!==a.type){var d;let e=a&&a.type||(a instanceof ap?"ListBuilder":(d=a,(0,j.isRecord)(d)&&"function"==typeof d.then)?"Promise":Array.isArray(a)?"array":typeof a);throw new C(`List items must be of type "listItem", got "${e}"${"array"===e?" - did you forget to spread (...moreItems)?":""}`,c,b).withHelpUrl(D.INVALID_LIST_ITEM)}return a})(a,b,d)),f=e.filter((a,b)=>(0,u.find)(e,{id:a.id},b+1));if(f.length>0){let b=f.map(a=>a.id).slice(0,5),c=f.length>5?`${b.join(", ")}...`:b.join(", ");throw new C(`List items with same ID found (${c})`,a.path,a.index).withHelpUrl(D.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(a),type:"list",canHandleIntent:this.spec.canHandleIntent||an,child:this.spec.child||ao,items:e}}clone(a){let b=new ap(this._context);return b.spec={...this.spec,...a},b}}class aq{constructor(a,b){this._context=a,this.spec=b||{}}id(a){return this.clone({id:a})}getId(){return this.spec.id}title(a){return this.clone({title:a,id:O(a,this.spec.id)})}getTitle(){return this.spec.title}i18n(a){return this.clone({i18n:a})}getI18n(){return this.spec.i18n}icon(a){return this.clone({icon:a})}showIcon(a=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:a}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(a){return this.clone({child:a})}getChild(){return this.spec.child}schemaType(a){return this.clone({schemaType:a})}getSchemaType(){let a=this.spec.schemaType;return"string"==typeof a?this._context.schema.get(a):this.spec.schemaType}serialize(a={path:[]}){let{id:b,title:c,child:d}=this.spec;if("string"!=typeof b||!b)throw new C("`id` is required for list items",a.path,a.index).withHelpUrl(D.ID_REQUIRED);if(!a.titleIsOptional&&("string"!=typeof c||!c))throw new C("`title` is required for list items",a.path,b).withHelpUrl(D.TITLE_REQUIRED);let e=this.spec.schemaType;if("string"==typeof e){let c=this._context.schema.get(e);if(!c)throw new C(`Could not find type "${e}" in schema`,a.path,b).withHelpUrl(D.SCHEMA_TYPE_NOT_FOUND);e=c}let f={path:a.path.concat(b),hint:"child"},g=d instanceof P||d instanceof ak||d instanceof Z||d instanceof ap?d.serialize(f):d;if("function"==typeof g){let a=g;g=(b,c)=>a(b,{...c,serializeOptions:f})}return{...this.spec,id:N(b,a.path,a.index),schemaType:e,child:g,title:c,type:"listItem"}}clone(a){let b=new aq(this._context);return b.spec={...this.spec,...a},b}}class ar extends aq{constructor(a,b){super(a,b),this._context=a,this.spec=b||{}}serialize(a={path:[]}){let b,c=super.serialize({...a,titleIsOptional:!0});if(!c.schemaType)throw new C("`schemaType` is required for document list items",a.path,a.index).withHelpUrl(D.SCHEMA_TYPE_REQUIRED);let d=c.child||(b=this._context,a=>{let d=c.schemaType&&("string"==typeof c.schemaType?c.schemaType:c.schemaType.name);return d?b.resolveDocumentNode({schemaType:d,documentId:a}):new Z(b).id("documentEditor").documentId(a)});return{...c,child:d,schemaType:c.schemaType,_id:c.id}}clone(a){let b=new ar(this._context);return b.spec={...this.spec,...a},b}}function as(a){return(0,j.isRecord)(a)&&"u">typeof a.schemaType&&"string"==typeof a._id}class at extends ak{constructor(a,b){super(a),this._context=a,this.spec=b||{}}child(a){return this.cloneWithoutDefaultIntentHandler({child:a})}clone(a){let b=super.clone(a),c=new at(this._context);return c.spec={...this.spec,...b.getSpec(),...a},c}cloneWithoutDefaultIntentHandler(a){let b=super.clone(a),c=new at(this._context),d=this.spec.canHandleIntent,e=d&&d.identity===ae?{canHandleIntent:void 0}:{};return c.spec={...b.getSpec(),...this.spec,...a,...e},c}}let au=["sanity.imageAsset","sanity.fileAsset"];function av(a){return(function({schema:a}){return a.getTypeNames().filter(b=>{let c=a.get(b);return c&&c.type?.name==="document"}).filter(a=>!au.includes(a))})(a).map(b=>aw(a,b))}function aw(a,b){let{schema:c}=a,d=c.get(b);if(!d)throw Error(`Schema type with name "${b}" not found`);let e=d.title||(0,v.startCase)(b);return new aq(a).id(b).title(e).schemaType(d).child((c,d)=>{let e=d.parent,f="list"===e.type?e.items.find(a=>a.id===c):null,g=ax(a,b);return f&&f.title&&(g=g.title(f.title)),g})}function ax(a,b){let{schema:c,resolveDocumentNode:d}=a,e="string"==typeof b?b:b.schemaType,f="string"==typeof e?e:e.name,g="string"==typeof b?{}:b,h=c.get(f);if(!h)throw Error(`Schema type with name "${f}" not found`);let i=h.title||(0,v.startCase)(f);return new at(a).id(g.id||f).title(g.title||i).filter("_type == $type").params({type:f}).schemaType(h).defaultOrdering(E.by).menuItemGroups(g.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:y}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:y}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:y}}}]).child(g.child||(a=>d({schemaType:f,documentId:a}))).canHandleIntent(g.canHandleIntent||af).menuItems(g.menuItems||[...J(a,h),new H(a).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:y}}).title("Compact view").icon(n.StackCompactIcon).action("setLayout").params({layout:"default"}),new H(a).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:y}}).title("Detailed view").icon(n.StackIcon).action("setLayout").params({layout:"detail"})])}function ay({defaultDocumentNode:a,source:b,perspectiveStack:c}){let d=(0,j.getConfigContextFromSource)(b),e={...b,getStructureBuilder:()=>f,resolveDocumentNode:b=>{let c=a?.(f,{...b,...d})||new Z(e);return c.getId()||(c=c.id("documentEditor")),b.documentId&&(c=c.documentId((0,k.getPublishedId)(b.documentId))),c.schemaType(b.schemaType)},perspectiveStack:c},f={defaults:()=>{let a;return a=av(e),new ap(e).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:y}}).items(a).showIcons(a.some(a=>{var b;return!!(b=a.getSchemaType())&&"string"!=typeof b&&!!b.icon}))},documentTypeList:(...a)=>ax(e,...a),documentTypeListItem:(...a)=>aw(e,...a),documentTypeListItems:(...a)=>av(e,...a),document:(...a)=>new Z(e,...a),documentWithInitialValueTemplate:(...a)=>_(e,...a),defaultDocument:e.resolveDocumentNode,list:(...a)=>new ap(e,...a),listItem:(...a)=>new aq(e,...a),menuItem:(...a)=>new H(e,...a),menuItemGroup:(...a)=>new L(e,...a),menuItemsFromInitialValueTemplateItems:(...a)=>ad(e,...a),documentList:(...a)=>new ak(e,...a),documentListItem:(...a)=>new ar(e,...a),orderingMenuItem:(...a)=>I(e,...a),orderingMenuItemsForType:(...a)=>J(e,...a),editor:(...a)=>$(e,...a),defaultInitialValueTemplateItems:(...a)=>ab(e,...a),initialValueTemplateItem:(a,b)=>new aa(e,{id:a,parameters:b,templateId:a}),component:a=>(0,m.isValidElementType)(a)?new P().component(a):new P(a),divider:a=>new Q(a),view:Y,context:e};return f}function az(a){let b,c,d,e,f,k=(0,h.c)(26),{defaultDocumentNode:m,structure:n,children:o}=a,[p,q]=(0,i.useState)(!1),r=(0,j.useSource)(),s=(0,j.useConfigContextFromSource)(r),t=(0,j.useDocumentStore)(),{perspectiveStack:u}=(0,j.usePerspective)();k[0]!==m||k[1]!==u||k[2]!==r?(b=ay({defaultDocumentNode:m,source:r,perspectiveStack:u}),k[0]=m,k[1]=u,k[2]=r,k[3]=b):b=k[3];let v=b;a:{let a;if(n){let a;k[4]!==v||k[5]!==s||k[6]!==t||k[7]!==u||k[8]!==n?(a=n(v,{...s,documentStore:t,perspectiveStack:u}),k[4]=v,k[5]=s,k[6]=t,k[7]=u,k[8]=n,k[9]=a):a=k[9],c=a;break a}k[10]!==v?(a=v.defaults(),k[10]=v,k[11]=a):a=k[11],c=a}let w=c,x=!p,y=!p,z=!p,A=!p;k[12]!==p||k[13]!==x||k[14]!==y||k[15]!==z||k[16]!==A?(d={backButton:p,resizablePanes:x,reviewChanges:y,splitPanes:z,splitViews:A},k[12]=p,k[13]=x,k[14]=y,k[15]=z,k[16]=A,k[17]=d):d=k[17];let B=d;k[18]!==v.context||k[19]!==B||k[20]!==p||k[21]!==w?(e={features:B,layoutCollapsed:p,setLayoutCollapsed:q,rootPaneNode:w,structureContext:v.context},k[18]=v.context,k[19]=B,k[20]=p,k[21]=w,k[22]=e):e=k[22];let C=e;return k[23]!==o||k[24]!==C?(f=(0,g.jsx)(l.StructureToolContext.Provider,{value:C,children:o}),k[23]=o,k[24]=C,k[25]=f):f=k[25],f}a.s(["ComponentBuilder",()=>P,"ComponentViewBuilder",()=>U,"DEFAULT_INTENT_HANDLER",()=>ae,"DocumentBuilder",()=>Z,"DocumentListBuilder",()=>ak,"DocumentListItemBuilder",()=>ar,"DocumentTypeListBuilder",()=>at,"FormViewBuilder",()=>V,"GenericListBuilder",()=>aj,"GenericViewBuilder",()=>S,"HELP_URL",()=>D,"InitialValueTemplateItemBuilder",()=>aa,"ListBuilder",()=>ap,"ListItemBuilder",()=>aq,"MenuItemBuilder",()=>H,"MenuItemGroupBuilder",()=>L,"SerializeError",()=>C,"StructureToolProvider",()=>az,"component",()=>X,"createStructureBuilder",()=>ay,"defaultInitialValueTemplateItems",()=>ab,"defaultIntentChecker",()=>af,"documentFromEditor",()=>$,"documentFromEditorWithInitialValue",()=>_,"form",()=>W,"getExtendedProjection",()=>B,"getOrderingMenuItem",()=>I,"getOrderingMenuItemsForSchemaType",()=>J,"getTypeNamesFromFilter",()=>al,"isDocumentListItem",()=>as,"maybeSerializeInitialValueTemplateItem",()=>ac,"maybeSerializeMenuItem",()=>G,"maybeSerializeMenuItemGroup",()=>K,"maybeSerializeView",()=>T,"menuItemsFromInitialValueTemplateItems",()=>ad,"shallowIntentChecker",()=>ai,"structureLocaleNamespace",()=>y,"structureUsEnglishLocaleBundle",()=>z],306978);var aA=a.i(15256),aB=a.i(64179),aC=a.i(566482),aD=a.i(535576),aE=a.i(331004),aF=a.i(775716),aG=a.i(738242),aH=a.i(346271),aI=a.i(262036),aJ=a.i(311315),aK=a.i(977647),aL=a.i(842611),aM=a.i(241664),aN=a.i(765768),aO=a.i(779454),aO=aO,aP=a.i(934103),aQ=a.i(866407),aR=a.i(875730),aS=a.i(130379),aT=a.i(272036),aU=a.i(952535),aV=a.i(395224),aW=a.i(155733),aX=a.i(953113),aY=a.i(727500);let aZ=({clientWidth:a,clientHeight:b,scrollWidth:c,scrollHeight:d})=>d>b||c>a,a$=a=>{let b=window.getComputedStyle(a).overflow;return b.includes("auto")||b.includes("scroll")},a_=a=>{if(null==a)return{x:0,y:0};let{scrollTop:b,scrollHeight:c,clientHeight:d,scrollLeft:e,scrollWidth:f,clientWidth:g}=a;return{x:e?e/Math.max(1e-5,f-g):0,y:b?b/Math.max(1e-5,c-d):0}};function a0(){return(a0=Object.assign.bind()).apply(null,arguments)}function a1(a){return a.matches("body *")?a:window}class a2{constructor(a,b={}){var c,d=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(a){if(d.paused||!a.currentTarget)return;let b=d.getScrollContainer(a.currentTarget);await new Promise(a=>{requestAnimationFrame(()=>a())}),d.mirrorScrollPositions(a_(b),b)},this.elements=[...a].filter(Boolean).map(a=>this.getScrollContainer(a)),this.elements=[...new Set(this.elements)],this.options=a0({},this.defaults,b),this.options.debug&&(this.logger=(c="[scroll-mirror]",{log:(...a)=>console.log(c,...a),warn:(...a)=>console.warn(c,...a),error:(...a)=>console.error(c,...a)}),function(a,b){if(a.length<1)null==b||b.warn("No elements provided.");else for(let c of(a.length<2&&(null==b||b.warn("Only one element provided.",a)),a.some(a=>!a)&&(null==b||b.error("Some elements are not defined.",a)),a))c instanceof HTMLElement&&!aZ(c)&&(null==b||b.warn("Element doesn't have overflow:",c)),c instanceof HTMLElement&&c.matches("body *")&&!a$(c)&&(null==b||b.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',c))}(this.elements,this.logger)),this.elements.forEach(a=>this.addScrollHandler(a)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(a_(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(a=>this.removeScrollHandler(a))}addScrollHandler(a){this.removeScrollHandler(a),a1(a).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(a){a1(a).removeEventListener("scroll",this.handleScroll)}getScrollContainer(a){return a instanceof HTMLElement&&a.matches("body *")?a:document.documentElement}mirrorScrollPositions(a,b){this.elements.forEach(c=>{b!==c&&(this.removeScrollHandler(c),this.setScrollPosition(a,c),window.requestAnimationFrame(()=>{this.addScrollHandler(c)}))})}setScrollPosition(a,b){let{vertical:c,horizontal:d}=this.options,e=b.scrollWidth-b.clientWidth,f=b.scrollHeight-b.clientHeight;c&&f&&b.scrollTo({top:f*a.y,behavior:"instant"}),d&&e&&b.scrollTo({left:e*a.x,behavior:"instant"})}get progress(){return a_(this.elements.find(a=>aZ(a)))}set progress(a){"number"==typeof a&&(a={x:a,y:a});let b=a0({},this.progress,a);(function(a,b){let c=!0;for(let[d,e]of Object.entries(a))("number"!=typeof e||e<0||e>1)&&(null==b||b.error(`progress.${d} must be a number between 0-1`),c=!1);return c})(b,this.logger)&&this.mirrorScrollPositions(b)}}var a3=a.i(630407),a4=a.i(348074),a5=i,a6=a.i(940337),a7=a.i(175920);let a8=Math.ceil(10*Math.random());function a9(a){return Object.prototype.toString.call(a).slice(8,-1)}function ba(a){let b=a9(a);return"Object"!==b&&"Array"!==b}class bb extends a5.Component{shouldComponentUpdate(a){return a.highlight!==this.props.highlight}render(){let a=this.props.string||"",b=this.props.highlight||"",c=a.search(b);if(!b||-1===c)return(0,g.jsx)("span",{children:a});let d=b.source.length,e=a.slice(c,c+d);return(0,g.jsx)("span",{children:a.split(b).map(function(a,b){return(0,g.jsxs)("span",{children:[b>0?(0,g.jsx)("span",{className:"json-inspector__hl",children:e}):null,a]},b)})})}}function bc(a){return"object"==typeof a&&null!==a&&!Array.isArray(a)}class bd extends a5.Component{constructor(a){super(a),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:a,data:b,root:c,id:d}=this.props,e="id_"+ ++a8,f={path:this.keypath(),key:a.toString(),value:b},h=this._onClick.bind(this,f);return(0,g.jsxs)("div",{"data-testid":c?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":c||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,g.jsx)("input",{className:"json-inspector__radio",type:"radio",name:e,id:d,tabIndex:-1}),(0,g.jsxs)("label",{className:"json-inspector__line",htmlFor:e,onClick:h,children:[(0,g.jsx)("div",{className:"json-inspector__flatpath",children:f.path}),(0,g.jsxs)("span",{className:"json-inspector__key",children:[this.format(f.key),":",this.renderInteractiveLabel(f.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var a,b;let c=this.data(),d=a9(c);if(Array.isArray(c)){let b=c.length;return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[b>0?"[…] ":"[] ",(a=b)+(1===a?" item":" items")]})}if("object"==typeof c&&null!==c){let a=Object.keys(c).length;return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[a>0?"{…} ":"{} ",(b=a)+(1===b?" property":" properties")]})}return(0,g.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+d.toLowerCase(),children:[this.format(String(c)),this.renderInteractiveLabel(c,!1)]})}renderChildren(){let{verboseShowOriginal:a,query:b,id:c,isExpanded:d,interactiveLabel:e,onClick:f,getOriginal:h}=this.props,i=this._rootPath(),j=this.data();return this.state.expanded&&(bc(j)||Array.isArray(j))?Object.keys(j).map(k=>{var l,m;let n=j[k],o=!this.state.original||!!a&&b;return(0,g.jsx)(bd,{data:n,label:k,prefix:i,onClick:f,id:c,query:b,getOriginal:o?h:void 0,isExpanded:d,interactiveLabel:e,verboseShowOriginal:a},(l=k,ba(m=n)?l+":"+(0,a7.default)(String(m)):l+"["+a9(m)+"]"))}):null}renderShowOriginalButton(){let{data:a,getOriginal:b,query:c}=this.props;return ba(a)||this.state.original||!b||!c||c.test(this.keypath())?null:(0,g.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(a,b){let c=this.props.interactiveLabel;return"function"==typeof c?(0,g.jsx)(c,{value:String(a),originalValue:a,isKey:b,keypath:this.keypath()}):null}static getDerivedStateFromProps(a,b){return a.query?{expanded:!a.query.test(a.label)}:null}componentDidUpdate(a){a.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(a){return(0,g.jsx)(bb,{string:a,highlight:this.props.query})}getClassName(){let a="json-inspector__leaf";return this.props.root&&(a+=" json-inspector__leaf_root"),this.state.expanded&&(a+=" json-inspector__leaf_expanded"),ba(this.props.data)||(a+=" json-inspector__leaf_composite"),a}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(a,b){this.toggle(),this.props.onClick&&this.props.onClick(a),b.stopPropagation()}_onShowOriginalClick=a=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),a.stopPropagation()};_isInitiallyExpanded(a){if(a.root)return!0;let b=this.keypath();return a.query?!a.query.test(b)&&"function"==typeof a.getOriginal:!!a.isExpanded&&a.isExpanded(b,a.data)}}let be=(...a)=>{},bf=({onChange:a=be})=>{let b=(0,a5.useCallback)(b=>a(b.target.value),[a]);return(0,g.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:b})};function bg(a){return bc(a)?0===Object.keys(a).length:Array.isArray(a)?0===a.length:null===a||"string"!=typeof a||"number"!=typeof a||0===Object.keys(a).length}let bh=(f=(a,b)=>{let c=b||{cacheResults:!0},d={};return function(b){let e;if(!c.cacheResults)return bi(a,b,c);if(!d[b]){for(var f=b.length-1;f>0;f-=1)if(d[e=b.slice(0,f)]){d[b]=bi(d[e],b,c);break}}return d[b]||(d[b]=bi(a,b,c)),d[b]}},(a,b)=>(e&&a===c&&b===d||(c=a,d=b,e=f(a,b)),e));function bi(a,b,c){return bc(a)||Array.isArray(a)?Object.keys(a).reduce(function(d,e){let f,g=a[e];return g&&("object"!=typeof g?(bj(b,e,c)||bj(b,g,c))&&(d[e]=g):bj(b,e,c)?d[e]=g:bg(f=bi(g,b,c))||Object.assign(d,{[e]:f})),d},{}):{}}function bj(a,b,c){if(!b)return!1;var d=String(b),e=a;return c?.ignoreCase&&(d=d.toLowerCase(),e=e.toLowerCase()),-1!==d.indexOf(e)}function bk(a){return parseInt(a,10)}let bl=a=>a.length>=2,bm={cacheResults:!0,ignoreCase:!1};class bn extends a5.Component{static defaultProps={data:null,search:bf,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:be,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(a){return a.length>=2},isExpanded:function(a,b){return!1},verboseShowOriginal:!1};constructor(a){super(a),this.state={query:"",filterer:bh(a.data,a.filterOptions)}}render(){let{data:a,className:b,onClick:c,id:d,isExpanded:e,interactiveLabel:f,verboseShowOriginal:h,filterOptions:i=bm,validateQuery:j=bl}=this.props,k=""!==this.state.query&&j(this.state.query),l=k?this.state.filterer(this.state.query):a,m=k&&bg(l);return(0,g.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+b,children:[this.renderToolbar(),m?(0,g.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,g.jsx)(bd,{data:l,onClick:c,id:d,getOriginal:this.getOriginal,query:k?new RegExp(this.state.query,i.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:e,interactiveLabel:f,verboseShowOriginal:h})]})}renderToolbar(){let a=this.props.search;return a?(0,g.jsx)("div",{className:"json-inspector__toolbar",children:(0,g.jsx)(a,{onChange:(0,a6.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=a=>{this.setState({query:a})};static getDerivedStateFromProps(a,b){let c=bh(a.data,a.filterOptions);return c===b.filterer?null:{...b,filterer:c}}shouldComponentUpdate(a,b){return b.query!==this.state.query||a.data!==this.props.data||a.onClick!==this.props.onClick}createFilterer=(a,b)=>{this.setState({filterer:bh(a,b)})};getOriginal=a=>(function a(b,c){var d=c.split("."),e=d.shift();return e?Array.isArray(b)&&b[bk(e)]?a(b[bk(e)],d.join(".")):bc(b)&&e in b?a(b[e],d.join(".")):void 0:b})(this.props.data,a)}var bo=a.i(135027),bp=a.i(831751),bq=a.i(448220),br=a.i(192069),bs=a.i(103034),bt=a.i(800724),bu=a.i(547497),bv=a.i(564416),bw=a.i(113028),bx=a.i(586276);function by(a,b){return"function"==typeof a?a(b):a}function bz(a,b){return c=>{b.setState(b=>({...b,[a]:by(c,b[a])}))}}function bA(a){return a instanceof Function}function bB(a,b,c){let d,e=[];return f=>{let g,h;c.key&&c.debug&&(g=Date.now());let i=a(f);if(!(i.length!==e.length||i.some((a,b)=>e[b]!==a)))return d;if(e=i,c.key&&c.debug&&(h=Date.now()),d=b(...i),null==c||null==c.onChange||c.onChange(d),c.key&&c.debug&&null!=c&&c.debug()){let a=Math.round((Date.now()-g)*100)/100,b=Math.round((Date.now()-h)*100)/100,d=b/16,e=(a,b)=>{for(a=String(a);a.length<b;)a=" "+a;return a};console.info(`%c⏱ ${e(b,5)} /${e(a,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*d,120))}deg 100% 31%);`,null==c?void 0:c.key)}return d}}function bC(a,b,c,d){return{debug:()=>{var c;return null!=(c=null==a?void 0:a.debugAll)?c:a[b]},key:!1,onChange:d}}let bD="debugHeaders";function bE(a,b,c){var d;let e={id:null!=(d=c.id)?d:b.id,column:b,index:c.index,isPlaceholder:!!c.isPlaceholder,placeholderId:c.placeholderId,depth:c.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let a=[],b=c=>{c.subHeaders&&c.subHeaders.length&&c.subHeaders.map(b),a.push(c)};return b(e),a},getContext:()=>({table:a,header:e,column:b})};return a._features.forEach(b=>{null==b.createHeader||b.createHeader(e,a)}),e}function bF(a,b,c,d){var e,f;let g=0,h=function(a,b){void 0===b&&(b=1),g=Math.max(g,b),a.filter(a=>a.getIsVisible()).forEach(a=>{var c;null!=(c=a.columns)&&c.length&&h(a.columns,b+1)},0)};h(a);let i=[],j=(a,b)=>{let e={depth:b,id:[d,`${b}`].filter(Boolean).join("_"),headers:[]},f=[];a.forEach(a=>{let g,h=[...f].reverse()[0],i=a.column.depth===e.depth,j=!1;if(i&&a.column.parent?g=a.column.parent:(g=a.column,j=!0),h&&(null==h?void 0:h.column)===g)h.subHeaders.push(a);else{let e=bE(c,g,{id:[d,b,g.id,null==a?void 0:a.id].filter(Boolean).join("_"),isPlaceholder:j,placeholderId:j?`${f.filter(a=>a.column===g).length}`:void 0,depth:b,index:f.length});e.subHeaders.push(a),f.push(e)}e.headers.push(a),a.headerGroup=e}),i.push(e),b>0&&j(f,b-1)};j(b.map((a,b)=>bE(c,a,{depth:g,index:b})),g-1),i.reverse();let k=a=>a.filter(a=>a.column.getIsVisible()).map(a=>{let b=0,c=0,d=[0];return a.subHeaders&&a.subHeaders.length?(d=[],k(a.subHeaders).forEach(a=>{let{colSpan:c,rowSpan:e}=a;b+=c,d.push(e)})):b=1,c+=Math.min(...d),a.colSpan=b,a.rowSpan=c,{colSpan:b,rowSpan:c}});return k(null!=(e=null==(f=i[0])?void 0:f.headers)?e:[]),i}let bG=(a,b,c,d,e,f,g)=>{let h={id:b,index:d,original:c,depth:e,parentId:g,_valuesCache:{},_uniqueValuesCache:{},getValue:b=>{if(h._valuesCache.hasOwnProperty(b))return h._valuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return h._valuesCache[b]=c.accessorFn(h.original,d),h._valuesCache[b]},getUniqueValues:b=>{if(h._uniqueValuesCache.hasOwnProperty(b))return h._uniqueValuesCache[b];let c=a.getColumn(b);if(null!=c&&c.accessorFn)return c.columnDef.getUniqueValues?h._uniqueValuesCache[b]=c.columnDef.getUniqueValues(h.original,d):h._uniqueValuesCache[b]=[h.getValue(b)],h._uniqueValuesCache[b]},renderValue:b=>{var c;return null!=(c=h.getValue(b))?c:a.options.renderFallbackValue},subRows:null!=f?f:[],getLeafRows:()=>{var a,b;let c,d;return a=h.subRows,b=a=>a.subRows,c=[],(d=a=>{a.forEach(a=>{c.push(a);let e=b(a);null!=e&&e.length&&d(e)})})(a),c},getParentRow:()=>h.parentId?a.getRow(h.parentId,!0):void 0,getParentRows:()=>{let a=[],b=h;for(;;){let c=b.getParentRow();if(!c)break;a.push(c),b=c}return a.reverse()},getAllCells:bB(()=>[a.getAllLeafColumns()],b=>b.map(b=>{var c;let d;return c=b.id,d={id:`${h.id}_${b.id}`,row:h,column:b,getValue:()=>h.getValue(c),renderValue:()=>{var b;return null!=(b=d.getValue())?b:a.options.renderFallbackValue},getContext:bB(()=>[a,b,h,d],(a,b,c,d)=>({table:a,column:b,row:c,cell:d,getValue:d.getValue,renderValue:d.renderValue}),bC(a.options,"debugCells","cell.getContext"))},a._features.forEach(c=>{null==c.createCell||c.createCell(d,b,h,a)},{}),d}),bC(a.options,"debugRows","getAllCells")),_getAllCellsByColumnId:bB(()=>[h.getAllCells()],a=>a.reduce((a,b)=>(a[b.column.id]=b,a),{}),bC(a.options,"debugRows","getAllCellsByColumnId"))};for(let b=0;b<a._features.length;b++){let c=a._features[b];null==c||null==c.createRow||c.createRow(h,a)}return h},bH=(a,b,c)=>{var d,e;let f=null==c||null==(d=c.toString())?void 0:d.toLowerCase();return!!(null==(e=a.getValue(b))||null==(e=e.toString())||null==(e=e.toLowerCase())?void 0:e.includes(f))};bH.autoRemove=a=>bR(a);let bI=(a,b,c)=>{var d;return!!(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.includes(c))};bI.autoRemove=a=>bR(a);let bJ=(a,b,c)=>{var d;return(null==(d=a.getValue(b))||null==(d=d.toString())?void 0:d.toLowerCase())===(null==c?void 0:c.toLowerCase())};bJ.autoRemove=a=>bR(a);let bK=(a,b,c)=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)};bK.autoRemove=a=>bR(a);let bL=(a,b,c)=>!c.some(c=>{var d;return!(null!=(d=a.getValue(b))&&d.includes(c))});bL.autoRemove=a=>bR(a)||!(null!=a&&a.length);let bM=(a,b,c)=>c.some(c=>{var d;return null==(d=a.getValue(b))?void 0:d.includes(c)});bM.autoRemove=a=>bR(a)||!(null!=a&&a.length);let bN=(a,b,c)=>a.getValue(b)===c;bN.autoRemove=a=>bR(a);let bO=(a,b,c)=>a.getValue(b)==c;bO.autoRemove=a=>bR(a);let bP=(a,b,c)=>{let[d,e]=c,f=a.getValue(b);return f>=d&&f<=e};bP.resolveFilterValue=a=>{let[b,c]=a,d="number"!=typeof b?parseFloat(b):b,e="number"!=typeof c?parseFloat(c):c,f=null===b||Number.isNaN(d)?-1/0:d,g=null===c||Number.isNaN(e)?1/0:e;if(f>g){let a=f;f=g,g=a}return[f,g]},bP.autoRemove=a=>bR(a)||bR(a[0])&&bR(a[1]);let bQ={includesString:bH,includesStringSensitive:bI,equalsString:bJ,arrIncludes:bK,arrIncludesAll:bL,arrIncludesSome:bM,equals:bN,weakEquals:bO,inNumberRange:bP};function bR(a){return null==a||""===a}function bS(a,b,c){return!!a&&!!a.autoRemove&&a.autoRemove(b,c)||void 0===b||"string"==typeof b&&!b}let bT={sum:(a,b,c)=>c.reduce((b,c)=>{let d=c.getValue(a);return b+("number"==typeof d?d:0)},0),min:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d>c||void 0===d&&c>=c)&&(d=c)}),d},max:(a,b,c)=>{let d;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(d<c||void 0===d&&c>=c)&&(d=c)}),d},extent:(a,b,c)=>{let d,e;return c.forEach(b=>{let c=b.getValue(a);null!=c&&(void 0===d?c>=c&&(d=e=c):(d>c&&(d=c),e<c&&(e=c)))}),[d,e]},mean:(a,b)=>{let c=0,d=0;if(b.forEach(b=>{let e=b.getValue(a);null!=e&&(e*=1)>=e&&(++c,d+=e)}),c)return d/c},median:(a,b)=>{if(!b.length)return;let c=b.map(b=>b.getValue(a));if(!(Array.isArray(c)&&c.every(a=>"number"==typeof a)))return;if(1===c.length)return c[0];let d=Math.floor(c.length/2),e=c.sort((a,b)=>a-b);return c.length%2!=0?e[d]:(e[d-1]+e[d])/2},unique:(a,b)=>Array.from(new Set(b.map(b=>b.getValue(a))).values()),uniqueCount:(a,b)=>new Set(b.map(b=>b.getValue(a))).size,count:(a,b)=>b.length},bU=()=>({left:[],right:[]}),bV={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},bW=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),bX=null;function bY(a){return"touchstart"===a.type}function bZ(a,b){return b?"center"===b?a.getCenterVisibleLeafColumns():"left"===b?a.getLeftVisibleLeafColumns():a.getRightVisibleLeafColumns():a.getVisibleLeafColumns()}let b$=()=>({pageIndex:0,pageSize:10}),b_=()=>({top:[],bottom:[]}),b0=(a,b,c,d,e)=>{var f;let g=e.getRow(b,!0);c?(g.getCanMultiSelect()||Object.keys(a).forEach(b=>delete a[b]),g.getCanSelect()&&(a[b]=!0)):delete a[b],d&&null!=(f=g.subRows)&&f.length&&g.getCanSelectSubRows()&&g.subRows.forEach(b=>b0(a,b.id,c,d,e))};function b1(a,b){let c=a.getState().rowSelection,d=[],e={},f=function(a,b){return a.map(a=>{var b;let g=b2(a,c);if(g&&(d.push(a),e[a.id]=a),null!=(b=a.subRows)&&b.length&&(a={...a,subRows:f(a.subRows)}),g)return a}).filter(Boolean)};return{rows:f(b.rows),flatRows:d,rowsById:e}}function b2(a,b){var c;return null!=(c=b[a.id])&&c}function b3(a,b,c){var d;if(!(null!=(d=a.subRows)&&d.length))return!1;let e=!0,f=!1;return a.subRows.forEach(a=>{if((!f||e)&&(a.getCanSelect()&&(b2(a,b)?f=!0:e=!1),a.subRows&&a.subRows.length)){let c=b3(a,b);"all"===c?f=!0:("some"===c&&(f=!0),e=!1)}}),e?"all":!!f&&"some"}let b4=/([0-9]+)/gm;function b5(a,b){return a===b?0:a>b?1:-1}function b6(a){return"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?"":String(a):"string"==typeof a?a:""}function b7(a,b){let c=a.split(b4).filter(Boolean),d=b.split(b4).filter(Boolean);for(;c.length&&d.length;){let a=c.shift(),b=d.shift(),e=parseInt(a,10),f=parseInt(b,10),g=[e,f].sort();if(isNaN(g[0])){if(a>b)return 1;if(b>a)return -1;continue}if(isNaN(g[1]))return isNaN(e)?-1:1;if(e>f)return 1;if(f>e)return -1}return c.length-d.length}let b8={alphanumeric:(a,b,c)=>b7(b6(a.getValue(c)).toLowerCase(),b6(b.getValue(c)).toLowerCase()),alphanumericCaseSensitive:(a,b,c)=>b7(b6(a.getValue(c)),b6(b.getValue(c))),text:(a,b,c)=>b5(b6(a.getValue(c)).toLowerCase(),b6(b.getValue(c)).toLowerCase()),textCaseSensitive:(a,b,c)=>b5(b6(a.getValue(c)),b6(b.getValue(c))),datetime:(a,b,c)=>{let d=a.getValue(c),e=b.getValue(c);return d>e?1:d<e?-1:0},basic:(a,b,c)=>b5(a.getValue(c),b.getValue(c))},b9=[{createTable:a=>{a.getHeaderGroups=bB(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>{var f,g;let h=null!=(f=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?f:[],i=null!=(g=null==e?void 0:e.map(a=>c.find(b=>b.id===a)).filter(Boolean))?g:[];return bF(b,[...h,...c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),...i],a)},bC(a.options,bD,"getHeaderGroups")),a.getCenterHeaderGroups=bB(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(b,c,d,e)=>bF(b,c=c.filter(a=>!(null!=d&&d.includes(a.id))&&!(null!=e&&e.includes(a.id))),a,"center"),bC(a.options,bD,"getCenterHeaderGroups")),a.getLeftHeaderGroups=bB(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.left],(b,c,d)=>{var e;return bF(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"left")},bC(a.options,bD,"getLeftHeaderGroups")),a.getRightHeaderGroups=bB(()=>[a.getAllColumns(),a.getVisibleLeafColumns(),a.getState().columnPinning.right],(b,c,d)=>{var e;return bF(b,null!=(e=null==d?void 0:d.map(a=>c.find(b=>b.id===a)).filter(Boolean))?e:[],a,"right")},bC(a.options,bD,"getRightHeaderGroups")),a.getFooterGroups=bB(()=>[a.getHeaderGroups()],a=>[...a].reverse(),bC(a.options,bD,"getFooterGroups")),a.getLeftFooterGroups=bB(()=>[a.getLeftHeaderGroups()],a=>[...a].reverse(),bC(a.options,bD,"getLeftFooterGroups")),a.getCenterFooterGroups=bB(()=>[a.getCenterHeaderGroups()],a=>[...a].reverse(),bC(a.options,bD,"getCenterFooterGroups")),a.getRightFooterGroups=bB(()=>[a.getRightHeaderGroups()],a=>[...a].reverse(),bC(a.options,bD,"getRightFooterGroups")),a.getFlatHeaders=bB(()=>[a.getHeaderGroups()],a=>a.map(a=>a.headers).flat(),bC(a.options,bD,"getFlatHeaders")),a.getLeftFlatHeaders=bB(()=>[a.getLeftHeaderGroups()],a=>a.map(a=>a.headers).flat(),bC(a.options,bD,"getLeftFlatHeaders")),a.getCenterFlatHeaders=bB(()=>[a.getCenterHeaderGroups()],a=>a.map(a=>a.headers).flat(),bC(a.options,bD,"getCenterFlatHeaders")),a.getRightFlatHeaders=bB(()=>[a.getRightHeaderGroups()],a=>a.map(a=>a.headers).flat(),bC(a.options,bD,"getRightFlatHeaders")),a.getCenterLeafHeaders=bB(()=>[a.getCenterFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bC(a.options,bD,"getCenterLeafHeaders")),a.getLeftLeafHeaders=bB(()=>[a.getLeftFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bC(a.options,bD,"getLeftLeafHeaders")),a.getRightLeafHeaders=bB(()=>[a.getRightFlatHeaders()],a=>a.filter(a=>{var b;return!(null!=(b=a.subHeaders)&&b.length)}),bC(a.options,bD,"getRightLeafHeaders")),a.getLeafHeaders=bB(()=>[a.getLeftHeaderGroups(),a.getCenterHeaderGroups(),a.getRightHeaderGroups()],(a,b,c)=>{var d,e,f,g,h,i;return[...null!=(d=null==(e=a[0])?void 0:e.headers)?d:[],...null!=(f=null==(g=b[0])?void 0:g.headers)?f:[],...null!=(h=null==(i=c[0])?void 0:i.headers)?h:[]].map(a=>a.getLeafHeaders()).flat()},bC(a.options,bD,"getLeafHeaders"))}},{getInitialState:a=>({columnVisibility:{},...a}),getDefaultOptions:a=>({onColumnVisibilityChange:bz("columnVisibility",a)}),createColumn:(a,b)=>{a.toggleVisibility=c=>{a.getCanHide()&&b.setColumnVisibility(b=>({...b,[a.id]:null!=c?c:!a.getIsVisible()}))},a.getIsVisible=()=>{var c,d;let e=a.columns;return null==(c=e.length?e.some(a=>a.getIsVisible()):null==(d=b.getState().columnVisibility)?void 0:d[a.id])||c},a.getCanHide=()=>{var c,d;return(null==(c=a.columnDef.enableHiding)||c)&&(null==(d=b.options.enableHiding)||d)},a.getToggleVisibilityHandler=()=>b=>{null==a.toggleVisibility||a.toggleVisibility(b.target.checked)}},createRow:(a,b)=>{a._getAllVisibleCells=bB(()=>[a.getAllCells(),b.getState().columnVisibility],a=>a.filter(a=>a.column.getIsVisible()),bC(b.options,"debugRows","_getAllVisibleCells")),a.getVisibleCells=bB(()=>[a.getLeftVisibleCells(),a.getCenterVisibleCells(),a.getRightVisibleCells()],(a,b,c)=>[...a,...b,...c],bC(b.options,"debugRows","getVisibleCells"))},createTable:a=>{let b=(b,c)=>bB(()=>[c(),c().filter(a=>a.getIsVisible()).map(a=>a.id).join("_")],a=>a.filter(a=>null==a.getIsVisible?void 0:a.getIsVisible()),bC(a.options,"debugColumns",b));a.getVisibleFlatColumns=b("getVisibleFlatColumns",()=>a.getAllFlatColumns()),a.getVisibleLeafColumns=b("getVisibleLeafColumns",()=>a.getAllLeafColumns()),a.getLeftVisibleLeafColumns=b("getLeftVisibleLeafColumns",()=>a.getLeftLeafColumns()),a.getRightVisibleLeafColumns=b("getRightVisibleLeafColumns",()=>a.getRightLeafColumns()),a.getCenterVisibleLeafColumns=b("getCenterVisibleLeafColumns",()=>a.getCenterLeafColumns()),a.setColumnVisibility=b=>null==a.options.onColumnVisibilityChange?void 0:a.options.onColumnVisibilityChange(b),a.resetColumnVisibility=b=>{var c;a.setColumnVisibility(b?{}:null!=(c=a.initialState.columnVisibility)?c:{})},a.toggleAllColumnsVisible=b=>{var c;b=null!=(c=b)?c:!a.getIsAllColumnsVisible(),a.setColumnVisibility(a.getAllLeafColumns().reduce((a,c)=>({...a,[c.id]:b||!(null!=c.getCanHide&&c.getCanHide())}),{}))},a.getIsAllColumnsVisible=()=>!a.getAllLeafColumns().some(a=>!(null!=a.getIsVisible&&a.getIsVisible())),a.getIsSomeColumnsVisible=()=>a.getAllLeafColumns().some(a=>null==a.getIsVisible?void 0:a.getIsVisible()),a.getToggleAllColumnsVisibilityHandler=()=>b=>{var c;a.toggleAllColumnsVisible(null==(c=b.target)?void 0:c.checked)}}},{getInitialState:a=>({columnOrder:[],...a}),getDefaultOptions:a=>({onColumnOrderChange:bz("columnOrder",a)}),createColumn:(a,b)=>{a.getIndex=bB(a=>[bZ(b,a)],b=>b.findIndex(b=>b.id===a.id),bC(b.options,"debugColumns","getIndex")),a.getIsFirstColumn=c=>{var d;return(null==(d=bZ(b,c)[0])?void 0:d.id)===a.id},a.getIsLastColumn=c=>{var d;let e=bZ(b,c);return(null==(d=e[e.length-1])?void 0:d.id)===a.id}},createTable:a=>{a.setColumnOrder=b=>null==a.options.onColumnOrderChange?void 0:a.options.onColumnOrderChange(b),a.resetColumnOrder=b=>{var c;a.setColumnOrder(b?[]:null!=(c=a.initialState.columnOrder)?c:[])},a._getOrderColumnsFn=bB(()=>[a.getState().columnOrder,a.getState().grouping,a.options.groupedColumnMode],(a,b,c)=>d=>{let e=[];if(null!=a&&a.length){let b=[...a],c=[...d];for(;c.length&&b.length;){let a=b.shift(),d=c.findIndex(b=>b.id===a);d>-1&&e.push(c.splice(d,1)[0])}e=[...e,...c]}else e=d;var f=e;if(!(null!=b&&b.length)||!c)return f;let g=f.filter(a=>!b.includes(a.id));return"remove"===c?g:[...b.map(a=>f.find(b=>b.id===a)).filter(Boolean),...g]},bC(a.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:a=>({columnPinning:bU(),...a}),getDefaultOptions:a=>({onColumnPinningChange:bz("columnPinning",a)}),createColumn:(a,b)=>{a.pin=c=>{let d=a.getLeafColumns().map(a=>a.id).filter(Boolean);b.setColumnPinning(a=>{var b,e,f,g,h,i;return"right"===c?{left:(null!=(f=null==a?void 0:a.left)?f:[]).filter(a=>!(null!=d&&d.includes(a))),right:[...(null!=(g=null==a?void 0:a.right)?g:[]).filter(a=>!(null!=d&&d.includes(a))),...d]}:"left"===c?{left:[...(null!=(h=null==a?void 0:a.left)?h:[]).filter(a=>!(null!=d&&d.includes(a))),...d],right:(null!=(i=null==a?void 0:a.right)?i:[]).filter(a=>!(null!=d&&d.includes(a)))}:{left:(null!=(b=null==a?void 0:a.left)?b:[]).filter(a=>!(null!=d&&d.includes(a))),right:(null!=(e=null==a?void 0:a.right)?e:[]).filter(a=>!(null!=d&&d.includes(a)))}})},a.getCanPin=()=>a.getLeafColumns().some(a=>{var c,d,e;return(null==(c=a.columnDef.enablePinning)||c)&&(null==(d=null!=(e=b.options.enableColumnPinning)?e:b.options.enablePinning)||d)}),a.getIsPinned=()=>{let c=a.getLeafColumns().map(a=>a.id),{left:d,right:e}=b.getState().columnPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"left":!!g&&"right"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();return e?null!=(c=null==(d=b.getState().columnPinning)||null==(d=d[e])?void 0:d.indexOf(a.id))?c:-1:0}},createRow:(a,b)=>{a.getCenterVisibleCells=bB(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left,b.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.column.id))},bC(b.options,"debugRows","getCenterVisibleCells")),a.getLeftVisibleCells=bB(()=>[a._getAllVisibleCells(),b.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"left"})),bC(b.options,"debugRows","getLeftVisibleCells")),a.getRightVisibleCells=bB(()=>[a._getAllVisibleCells(),b.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.column.id===b)).filter(Boolean).map(a=>({...a,position:"right"})),bC(b.options,"debugRows","getRightVisibleCells"))},createTable:a=>{a.setColumnPinning=b=>null==a.options.onColumnPinningChange?void 0:a.options.onColumnPinningChange(b),a.resetColumnPinning=b=>{var c,d;return a.setColumnPinning(b?bU():null!=(c=null==(d=a.initialState)?void 0:d.columnPinning)?c:bU())},a.getIsSomeColumnsPinned=b=>{var c,d,e;let f=a.getState().columnPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.left)?void 0:d.length)||(null==(e=f.right)?void 0:e.length))},a.getLeftLeafColumns=bB(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),bC(a.options,"debugColumns","getLeftLeafColumns")),a.getRightLeafColumns=bB(()=>[a.getAllLeafColumns(),a.getState().columnPinning.right],(a,b)=>(null!=b?b:[]).map(b=>a.find(a=>a.id===b)).filter(Boolean),bC(a.options,"debugColumns","getRightLeafColumns")),a.getCenterLeafColumns=bB(()=>[a.getAllLeafColumns(),a.getState().columnPinning.left,a.getState().columnPinning.right],(a,b,c)=>{let d=[...null!=b?b:[],...null!=c?c:[]];return a.filter(a=>!d.includes(a.id))},bC(a.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(a,b)=>{a._getFacetedRowModel=b.options.getFacetedRowModel&&b.options.getFacetedRowModel(b,a.id),a.getFacetedRowModel=()=>a._getFacetedRowModel?a._getFacetedRowModel():b.getPreFilteredRowModel(),a._getFacetedUniqueValues=b.options.getFacetedUniqueValues&&b.options.getFacetedUniqueValues(b,a.id),a.getFacetedUniqueValues=()=>a._getFacetedUniqueValues?a._getFacetedUniqueValues():new Map,a._getFacetedMinMaxValues=b.options.getFacetedMinMaxValues&&b.options.getFacetedMinMaxValues(b,a.id),a.getFacetedMinMaxValues=()=>{if(a._getFacetedMinMaxValues)return a._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:a=>({columnFilters:[],...a}),getDefaultOptions:a=>({onColumnFiltersChange:bz("columnFilters",a),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(a,b)=>{a.getAutoFilterFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"string"==typeof d?bQ.includesString:"number"==typeof d?bQ.inNumberRange:"boolean"==typeof d||null!==d&&"object"==typeof d?bQ.equals:Array.isArray(d)?bQ.arrIncludes:bQ.weakEquals},a.getFilterFn=()=>{var c,d;return bA(a.columnDef.filterFn)?a.columnDef.filterFn:"auto"===a.columnDef.filterFn?a.getAutoFilterFn():null!=(c=null==(d=b.options.filterFns)?void 0:d[a.columnDef.filterFn])?c:bQ[a.columnDef.filterFn]},a.getCanFilter=()=>{var c,d,e;return(null==(c=a.columnDef.enableColumnFilter)||c)&&(null==(d=b.options.enableColumnFilters)||d)&&(null==(e=b.options.enableFilters)||e)&&!!a.accessorFn},a.getIsFiltered=()=>a.getFilterIndex()>-1,a.getFilterValue=()=>{var c;return null==(c=b.getState().columnFilters)||null==(c=c.find(b=>b.id===a.id))?void 0:c.value},a.getFilterIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().columnFilters)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.setFilterValue=c=>{b.setColumnFilters(b=>{var d,e;let f=a.getFilterFn(),g=null==b?void 0:b.find(b=>b.id===a.id),h=by(c,g?g.value:void 0);if(bS(f,h,a))return null!=(d=null==b?void 0:b.filter(b=>b.id!==a.id))?d:[];let i={id:a.id,value:h};return g?null!=(e=null==b?void 0:b.map(b=>b.id===a.id?i:b))?e:[]:null!=b&&b.length?[...b,i]:[i]})}},createRow:(a,b)=>{a.columnFilters={},a.columnFiltersMeta={}},createTable:a=>{a.setColumnFilters=b=>{let c=a.getAllLeafColumns();null==a.options.onColumnFiltersChange||a.options.onColumnFiltersChange(a=>{var d;return null==(d=by(b,a))?void 0:d.filter(a=>{let b=c.find(b=>b.id===a.id);return!(b&&bS(b.getFilterFn(),a.value,b))&&!0})})},a.resetColumnFilters=b=>{var c,d;a.setColumnFilters(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.columnFilters)?c:[])},a.getPreFilteredRowModel=()=>a.getCoreRowModel(),a.getFilteredRowModel=()=>(!a._getFilteredRowModel&&a.options.getFilteredRowModel&&(a._getFilteredRowModel=a.options.getFilteredRowModel(a)),a.options.manualFiltering||!a._getFilteredRowModel)?a.getPreFilteredRowModel():a._getFilteredRowModel()}},{createTable:a=>{a._getGlobalFacetedRowModel=a.options.getFacetedRowModel&&a.options.getFacetedRowModel(a,"__global__"),a.getGlobalFacetedRowModel=()=>a.options.manualFiltering||!a._getGlobalFacetedRowModel?a.getPreFilteredRowModel():a._getGlobalFacetedRowModel(),a._getGlobalFacetedUniqueValues=a.options.getFacetedUniqueValues&&a.options.getFacetedUniqueValues(a,"__global__"),a.getGlobalFacetedUniqueValues=()=>a._getGlobalFacetedUniqueValues?a._getGlobalFacetedUniqueValues():new Map,a._getGlobalFacetedMinMaxValues=a.options.getFacetedMinMaxValues&&a.options.getFacetedMinMaxValues(a,"__global__"),a.getGlobalFacetedMinMaxValues=()=>{if(a._getGlobalFacetedMinMaxValues)return a._getGlobalFacetedMinMaxValues()}}},{getInitialState:a=>({globalFilter:void 0,...a}),getDefaultOptions:a=>({onGlobalFilterChange:bz("globalFilter",a),globalFilterFn:"auto",getColumnCanGlobalFilter:b=>{var c;let d=null==(c=a.getCoreRowModel().flatRows[0])||null==(c=c._getAllCellsByColumnId()[b.id])?void 0:c.getValue();return"string"==typeof d||"number"==typeof d}}),createColumn:(a,b)=>{a.getCanGlobalFilter=()=>{var c,d,e,f;return(null==(c=a.columnDef.enableGlobalFilter)||c)&&(null==(d=b.options.enableGlobalFilter)||d)&&(null==(e=b.options.enableFilters)||e)&&(null==(f=null==b.options.getColumnCanGlobalFilter?void 0:b.options.getColumnCanGlobalFilter(a))||f)&&!!a.accessorFn}},createTable:a=>{a.getGlobalAutoFilterFn=()=>bQ.includesString,a.getGlobalFilterFn=()=>{var b,c;let{globalFilterFn:d}=a.options;return bA(d)?d:"auto"===d?a.getGlobalAutoFilterFn():null!=(b=null==(c=a.options.filterFns)?void 0:c[d])?b:bQ[d]},a.setGlobalFilter=b=>{null==a.options.onGlobalFilterChange||a.options.onGlobalFilterChange(b)},a.resetGlobalFilter=b=>{a.setGlobalFilter(b?void 0:a.initialState.globalFilter)}}},{getInitialState:a=>({sorting:[],...a}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:a=>({onSortingChange:bz("sorting",a),isMultiSortEvent:a=>a.shiftKey}),createColumn:(a,b)=>{a.getAutoSortingFn=()=>{let c=b.getFilteredRowModel().flatRows.slice(10),d=!1;for(let b of c){let c=null==b?void 0:b.getValue(a.id);if("[object Date]"===Object.prototype.toString.call(c))return b8.datetime;if("string"==typeof c&&(d=!0,c.split(b4).length>1))return b8.alphanumeric}return d?b8.text:b8.basic},a.getAutoSortDir=()=>{let c=b.getFilteredRowModel().flatRows[0];return"string"==typeof(null==c?void 0:c.getValue(a.id))?"asc":"desc"},a.getSortingFn=()=>{var c,d;if(!a)throw Error();return bA(a.columnDef.sortingFn)?a.columnDef.sortingFn:"auto"===a.columnDef.sortingFn?a.getAutoSortingFn():null!=(c=null==(d=b.options.sortingFns)?void 0:d[a.columnDef.sortingFn])?c:b8[a.columnDef.sortingFn]},a.toggleSorting=(c,d)=>{let e=a.getNextSortingOrder(),f=null!=c;b.setSorting(g=>{let h,i=null==g?void 0:g.find(b=>b.id===a.id),j=null==g?void 0:g.findIndex(b=>b.id===a.id),k=[],l=f?c:"desc"===e;if("toggle"!=(h=null!=g&&g.length&&a.getCanMultiSort()&&d?i?"toggle":"add":null!=g&&g.length&&j!==g.length-1?"replace":i?"toggle":"replace")||f||e||(h="remove"),"add"===h){var m;(k=[...g,{id:a.id,desc:l}]).splice(0,k.length-(null!=(m=b.options.maxMultiSortColCount)?m:Number.MAX_SAFE_INTEGER))}else k="toggle"===h?g.map(b=>b.id===a.id?{...b,desc:l}:b):"remove"===h?g.filter(b=>b.id!==a.id):[{id:a.id,desc:l}];return k})},a.getFirstSortDir=()=>{var c,d;return(null!=(c=null!=(d=a.columnDef.sortDescFirst)?d:b.options.sortDescFirst)?c:"desc"===a.getAutoSortDir())?"desc":"asc"},a.getNextSortingOrder=c=>{var d,e;let f=a.getFirstSortDir(),g=a.getIsSorted();return g?(g===f||null!=(d=b.options.enableSortingRemoval)&&!d||!!c&&null!=(e=b.options.enableMultiRemove)&&!e)&&("desc"===g?"asc":"desc"):f},a.getCanSort=()=>{var c,d;return(null==(c=a.columnDef.enableSorting)||c)&&(null==(d=b.options.enableSorting)||d)&&!!a.accessorFn},a.getCanMultiSort=()=>{var c,d;return null!=(c=null!=(d=a.columnDef.enableMultiSort)?d:b.options.enableMultiSort)?c:!!a.accessorFn},a.getIsSorted=()=>{var c;let d=null==(c=b.getState().sorting)?void 0:c.find(b=>b.id===a.id);return!!d&&(d.desc?"desc":"asc")},a.getSortIndex=()=>{var c,d;return null!=(c=null==(d=b.getState().sorting)?void 0:d.findIndex(b=>b.id===a.id))?c:-1},a.clearSorting=()=>{b.setSorting(b=>null!=b&&b.length?b.filter(b=>b.id!==a.id):[])},a.getToggleSortingHandler=()=>{let c=a.getCanSort();return d=>{c&&(null==d.persist||d.persist(),null==a.toggleSorting||a.toggleSorting(void 0,!!a.getCanMultiSort()&&(null==b.options.isMultiSortEvent?void 0:b.options.isMultiSortEvent(d))))}}},createTable:a=>{a.setSorting=b=>null==a.options.onSortingChange?void 0:a.options.onSortingChange(b),a.resetSorting=b=>{var c,d;a.setSorting(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.sorting)?c:[])},a.getPreSortedRowModel=()=>a.getGroupedRowModel(),a.getSortedRowModel=()=>(!a._getSortedRowModel&&a.options.getSortedRowModel&&(a._getSortedRowModel=a.options.getSortedRowModel(a)),a.options.manualSorting||!a._getSortedRowModel)?a.getPreSortedRowModel():a._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:a=>{var b,c;return null!=(b=null==(c=a.getValue())||null==c.toString?void 0:c.toString())?b:null},aggregationFn:"auto"}),getInitialState:a=>({grouping:[],...a}),getDefaultOptions:a=>({onGroupingChange:bz("grouping",a),groupedColumnMode:"reorder"}),createColumn:(a,b)=>{a.toggleGrouping=()=>{b.setGrouping(b=>null!=b&&b.includes(a.id)?b.filter(b=>b!==a.id):[...null!=b?b:[],a.id])},a.getCanGroup=()=>{var c,d;return(null==(c=a.columnDef.enableGrouping)||c)&&(null==(d=b.options.enableGrouping)||d)&&(!!a.accessorFn||!!a.columnDef.getGroupingValue)},a.getIsGrouped=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.includes(a.id)},a.getGroupedIndex=()=>{var c;return null==(c=b.getState().grouping)?void 0:c.indexOf(a.id)},a.getToggleGroupingHandler=()=>{let b=a.getCanGroup();return()=>{b&&a.toggleGrouping()}},a.getAutoAggregationFn=()=>{let c=b.getCoreRowModel().flatRows[0],d=null==c?void 0:c.getValue(a.id);return"number"==typeof d?bT.sum:"[object Date]"===Object.prototype.toString.call(d)?bT.extent:void 0},a.getAggregationFn=()=>{var c,d;if(!a)throw Error();return bA(a.columnDef.aggregationFn)?a.columnDef.aggregationFn:"auto"===a.columnDef.aggregationFn?a.getAutoAggregationFn():null!=(c=null==(d=b.options.aggregationFns)?void 0:d[a.columnDef.aggregationFn])?c:bT[a.columnDef.aggregationFn]}},createTable:a=>{a.setGrouping=b=>null==a.options.onGroupingChange?void 0:a.options.onGroupingChange(b),a.resetGrouping=b=>{var c,d;a.setGrouping(b?[]:null!=(c=null==(d=a.initialState)?void 0:d.grouping)?c:[])},a.getPreGroupedRowModel=()=>a.getFilteredRowModel(),a.getGroupedRowModel=()=>(!a._getGroupedRowModel&&a.options.getGroupedRowModel&&(a._getGroupedRowModel=a.options.getGroupedRowModel(a)),a.options.manualGrouping||!a._getGroupedRowModel)?a.getPreGroupedRowModel():a._getGroupedRowModel()},createRow:(a,b)=>{a.getIsGrouped=()=>!!a.groupingColumnId,a.getGroupingValue=c=>{if(a._groupingValuesCache.hasOwnProperty(c))return a._groupingValuesCache[c];let d=b.getColumn(c);return null!=d&&d.columnDef.getGroupingValue?(a._groupingValuesCache[c]=d.columnDef.getGroupingValue(a.original),a._groupingValuesCache[c]):a.getValue(c)},a._groupingValuesCache={}},createCell:(a,b,c,d)=>{a.getIsGrouped=()=>b.getIsGrouped()&&b.id===c.groupingColumnId,a.getIsPlaceholder=()=>!a.getIsGrouped()&&b.getIsGrouped(),a.getIsAggregated=()=>{var b;return!a.getIsGrouped()&&!a.getIsPlaceholder()&&!!(null!=(b=c.subRows)&&b.length)}}},{getInitialState:a=>({expanded:{},...a}),getDefaultOptions:a=>({onExpandedChange:bz("expanded",a),paginateExpandedRows:!0}),createTable:a=>{let b=!1,c=!1;a._autoResetExpanded=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetExpanded)?d:!a.options.manualExpanding){if(c)return;c=!0,a._queue(()=>{a.resetExpanded(),c=!1})}},a.setExpanded=b=>null==a.options.onExpandedChange?void 0:a.options.onExpandedChange(b),a.toggleAllRowsExpanded=b=>{(null!=b?b:!a.getIsAllRowsExpanded())?a.setExpanded(!0):a.setExpanded({})},a.resetExpanded=b=>{var c,d;a.setExpanded(b?{}:null!=(c=null==(d=a.initialState)?void 0:d.expanded)?c:{})},a.getCanSomeRowsExpand=()=>a.getPrePaginationRowModel().flatRows.some(a=>a.getCanExpand()),a.getToggleAllRowsExpandedHandler=()=>b=>{null==b.persist||b.persist(),a.toggleAllRowsExpanded()},a.getIsSomeRowsExpanded=()=>{let b=a.getState().expanded;return!0===b||Object.values(b).some(Boolean)},a.getIsAllRowsExpanded=()=>{let b=a.getState().expanded;return"boolean"==typeof b?!0===b:!(!Object.keys(b).length||a.getRowModel().flatRows.some(a=>!a.getIsExpanded()))},a.getExpandedDepth=()=>{let b=0;return(!0===a.getState().expanded?Object.keys(a.getRowModel().rowsById):Object.keys(a.getState().expanded)).forEach(a=>{let c=a.split(".");b=Math.max(b,c.length)}),b},a.getPreExpandedRowModel=()=>a.getSortedRowModel(),a.getExpandedRowModel=()=>(!a._getExpandedRowModel&&a.options.getExpandedRowModel&&(a._getExpandedRowModel=a.options.getExpandedRowModel(a)),a.options.manualExpanding||!a._getExpandedRowModel)?a.getPreExpandedRowModel():a._getExpandedRowModel()},createRow:(a,b)=>{a.toggleExpanded=c=>{b.setExpanded(d=>{var e;let f=!0===d||!!(null!=d&&d[a.id]),g={};if(!0===d?Object.keys(b.getRowModel().rowsById).forEach(a=>{g[a]=!0}):g=d,c=null!=(e=c)?e:!f,!f&&c)return{...g,[a.id]:!0};if(f&&!c){let{[a.id]:b,...c}=g;return c}return d})},a.getIsExpanded=()=>{var c;let d=b.getState().expanded;return!!(null!=(c=null==b.options.getIsRowExpanded?void 0:b.options.getIsRowExpanded(a))?c:!0===d||(null==d?void 0:d[a.id]))},a.getCanExpand=()=>{var c,d,e;return null!=(c=null==b.options.getRowCanExpand?void 0:b.options.getRowCanExpand(a))?c:(null==(d=b.options.enableExpanding)||d)&&!!(null!=(e=a.subRows)&&e.length)},a.getIsAllParentsExpanded=()=>{let c=!0,d=a;for(;c&&d.parentId;)c=(d=b.getRow(d.parentId,!0)).getIsExpanded();return c},a.getToggleExpandedHandler=()=>{let b=a.getCanExpand();return()=>{b&&a.toggleExpanded()}}}},{getInitialState:a=>({...a,pagination:{...b$(),...null==a?void 0:a.pagination}}),getDefaultOptions:a=>({onPaginationChange:bz("pagination",a)}),createTable:a=>{let b=!1,c=!1;a._autoResetPageIndex=()=>{var d,e;if(!b)return void a._queue(()=>{b=!0});if(null!=(d=null!=(e=a.options.autoResetAll)?e:a.options.autoResetPageIndex)?d:!a.options.manualPagination){if(c)return;c=!0,a._queue(()=>{a.resetPageIndex(),c=!1})}},a.setPagination=b=>null==a.options.onPaginationChange?void 0:a.options.onPaginationChange(a=>by(b,a)),a.resetPagination=b=>{var c;a.setPagination(b?b$():null!=(c=a.initialState.pagination)?c:b$())},a.setPageIndex=b=>{a.setPagination(c=>{let d=by(b,c.pageIndex);return d=Math.max(0,Math.min(d,void 0===a.options.pageCount||-1===a.options.pageCount?Number.MAX_SAFE_INTEGER:a.options.pageCount-1)),{...c,pageIndex:d}})},a.resetPageIndex=b=>{var c,d;a.setPageIndex(b?0:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageIndex)?c:0)},a.resetPageSize=b=>{var c,d;a.setPageSize(b?10:null!=(c=null==(d=a.initialState)||null==(d=d.pagination)?void 0:d.pageSize)?c:10)},a.setPageSize=b=>{a.setPagination(a=>{let c=Math.max(1,by(b,a.pageSize)),d=Math.floor(a.pageSize*a.pageIndex/c);return{...a,pageIndex:d,pageSize:c}})},a.setPageCount=b=>a.setPagination(c=>{var d;let e=by(b,null!=(d=a.options.pageCount)?d:-1);return"number"==typeof e&&(e=Math.max(-1,e)),{...c,pageCount:e}}),a.getPageOptions=bB(()=>[a.getPageCount()],a=>{let b=[];return a&&a>0&&(b=[...Array(a)].fill(null).map((a,b)=>b)),b},bC(a.options,"debugTable","getPageOptions")),a.getCanPreviousPage=()=>a.getState().pagination.pageIndex>0,a.getCanNextPage=()=>{let{pageIndex:b}=a.getState().pagination,c=a.getPageCount();return -1===c||0!==c&&b<c-1},a.previousPage=()=>a.setPageIndex(a=>a-1),a.nextPage=()=>a.setPageIndex(a=>a+1),a.firstPage=()=>a.setPageIndex(0),a.lastPage=()=>a.setPageIndex(a.getPageCount()-1),a.getPrePaginationRowModel=()=>a.getExpandedRowModel(),a.getPaginationRowModel=()=>(!a._getPaginationRowModel&&a.options.getPaginationRowModel&&(a._getPaginationRowModel=a.options.getPaginationRowModel(a)),a.options.manualPagination||!a._getPaginationRowModel)?a.getPrePaginationRowModel():a._getPaginationRowModel(),a.getPageCount=()=>{var b;return null!=(b=a.options.pageCount)?b:Math.ceil(a.getRowCount()/a.getState().pagination.pageSize)},a.getRowCount=()=>{var b;return null!=(b=a.options.rowCount)?b:a.getPrePaginationRowModel().rows.length}}},{getInitialState:a=>({rowPinning:b_(),...a}),getDefaultOptions:a=>({onRowPinningChange:bz("rowPinning",a)}),createRow:(a,b)=>{a.pin=(c,d,e)=>{let f=d?a.getLeafRows().map(a=>{let{id:b}=a;return b}):[],g=new Set([...e?a.getParentRows().map(a=>{let{id:b}=a;return b}):[],a.id,...f]);b.setRowPinning(a=>{var b,d,e,f,h,i;return"bottom"===c?{top:(null!=(e=null==a?void 0:a.top)?e:[]).filter(a=>!(null!=g&&g.has(a))),bottom:[...(null!=(f=null==a?void 0:a.bottom)?f:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)]}:"top"===c?{top:[...(null!=(h=null==a?void 0:a.top)?h:[]).filter(a=>!(null!=g&&g.has(a))),...Array.from(g)],bottom:(null!=(i=null==a?void 0:a.bottom)?i:[]).filter(a=>!(null!=g&&g.has(a)))}:{top:(null!=(b=null==a?void 0:a.top)?b:[]).filter(a=>!(null!=g&&g.has(a))),bottom:(null!=(d=null==a?void 0:a.bottom)?d:[]).filter(a=>!(null!=g&&g.has(a)))}})},a.getCanPin=()=>{var c;let{enableRowPinning:d,enablePinning:e}=b.options;return"function"==typeof d?d(a):null==(c=null!=d?d:e)||c},a.getIsPinned=()=>{let c=[a.id],{top:d,bottom:e}=b.getState().rowPinning,f=c.some(a=>null==d?void 0:d.includes(a)),g=c.some(a=>null==e?void 0:e.includes(a));return f?"top":!!g&&"bottom"},a.getPinnedIndex=()=>{var c,d;let e=a.getIsPinned();if(!e)return -1;let f=null==(c="top"===e?b.getTopRows():b.getBottomRows())?void 0:c.map(a=>{let{id:b}=a;return b});return null!=(d=null==f?void 0:f.indexOf(a.id))?d:-1}},createTable:a=>{a.setRowPinning=b=>null==a.options.onRowPinningChange?void 0:a.options.onRowPinningChange(b),a.resetRowPinning=b=>{var c,d;return a.setRowPinning(b?b_():null!=(c=null==(d=a.initialState)?void 0:d.rowPinning)?c:b_())},a.getIsSomeRowsPinned=b=>{var c,d,e;let f=a.getState().rowPinning;return b?!!(null==(c=f[b])?void 0:c.length):!!((null==(d=f.top)?void 0:d.length)||(null==(e=f.bottom)?void 0:e.length))},a._getPinnedRows=(b,c,d)=>{var e;return(null==(e=a.options.keepPinnedRows)||e?(null!=c?c:[]).map(b=>{let c=a.getRow(b,!0);return c.getIsAllParentsExpanded()?c:null}):(null!=c?c:[]).map(a=>b.find(b=>b.id===a))).filter(Boolean).map(a=>({...a,position:d}))},a.getTopRows=bB(()=>[a.getRowModel().rows,a.getState().rowPinning.top],(b,c)=>a._getPinnedRows(b,c,"top"),bC(a.options,"debugRows","getTopRows")),a.getBottomRows=bB(()=>[a.getRowModel().rows,a.getState().rowPinning.bottom],(b,c)=>a._getPinnedRows(b,c,"bottom"),bC(a.options,"debugRows","getBottomRows")),a.getCenterRows=bB(()=>[a.getRowModel().rows,a.getState().rowPinning.top,a.getState().rowPinning.bottom],(a,b,c)=>{let d=new Set([...null!=b?b:[],...null!=c?c:[]]);return a.filter(a=>!d.has(a.id))},bC(a.options,"debugRows","getCenterRows"))}},{getInitialState:a=>({rowSelection:{},...a}),getDefaultOptions:a=>({onRowSelectionChange:bz("rowSelection",a),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:a=>{a.setRowSelection=b=>null==a.options.onRowSelectionChange?void 0:a.options.onRowSelectionChange(b),a.resetRowSelection=b=>{var c;return a.setRowSelection(b?{}:null!=(c=a.initialState.rowSelection)?c:{})},a.toggleAllRowsSelected=b=>{a.setRowSelection(c=>{b=void 0!==b?b:!a.getIsAllRowsSelected();let d={...c},e=a.getPreGroupedRowModel().flatRows;return b?e.forEach(a=>{a.getCanSelect()&&(d[a.id]=!0)}):e.forEach(a=>{delete d[a.id]}),d})},a.toggleAllPageRowsSelected=b=>a.setRowSelection(c=>{let d=void 0!==b?b:!a.getIsAllPageRowsSelected(),e={...c};return a.getRowModel().rows.forEach(b=>{b0(e,b.id,d,!0,a)}),e}),a.getPreSelectedRowModel=()=>a.getCoreRowModel(),a.getSelectedRowModel=bB(()=>[a.getState().rowSelection,a.getCoreRowModel()],(b,c)=>Object.keys(b).length?b1(a,c):{rows:[],flatRows:[],rowsById:{}},bC(a.options,"debugTable","getSelectedRowModel")),a.getFilteredSelectedRowModel=bB(()=>[a.getState().rowSelection,a.getFilteredRowModel()],(b,c)=>Object.keys(b).length?b1(a,c):{rows:[],flatRows:[],rowsById:{}},bC(a.options,"debugTable","getFilteredSelectedRowModel")),a.getGroupedSelectedRowModel=bB(()=>[a.getState().rowSelection,a.getSortedRowModel()],(b,c)=>Object.keys(b).length?b1(a,c):{rows:[],flatRows:[],rowsById:{}},bC(a.options,"debugTable","getGroupedSelectedRowModel")),a.getIsAllRowsSelected=()=>{let b=a.getFilteredRowModel().flatRows,{rowSelection:c}=a.getState(),d=!!(b.length&&Object.keys(c).length);return d&&b.some(a=>a.getCanSelect()&&!c[a.id])&&(d=!1),d},a.getIsAllPageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows.filter(a=>a.getCanSelect()),{rowSelection:c}=a.getState(),d=!!b.length;return d&&b.some(a=>!c[a.id])&&(d=!1),d},a.getIsSomeRowsSelected=()=>{var b;let c=Object.keys(null!=(b=a.getState().rowSelection)?b:{}).length;return c>0&&c<a.getFilteredRowModel().flatRows.length},a.getIsSomePageRowsSelected=()=>{let b=a.getPaginationRowModel().flatRows;return!a.getIsAllPageRowsSelected()&&b.filter(a=>a.getCanSelect()).some(a=>a.getIsSelected()||a.getIsSomeSelected())},a.getToggleAllRowsSelectedHandler=()=>b=>{a.toggleAllRowsSelected(b.target.checked)},a.getToggleAllPageRowsSelectedHandler=()=>b=>{a.toggleAllPageRowsSelected(b.target.checked)}},createRow:(a,b)=>{a.toggleSelected=(c,d)=>{let e=a.getIsSelected();b.setRowSelection(f=>{var g;if(c=void 0!==c?c:!e,a.getCanSelect()&&e===c)return f;let h={...f};return b0(h,a.id,c,null==(g=null==d?void 0:d.selectChildren)||g,b),h})},a.getIsSelected=()=>{let{rowSelection:c}=b.getState();return b2(a,c)},a.getIsSomeSelected=()=>{let{rowSelection:c}=b.getState();return"some"===b3(a,c)},a.getIsAllSubRowsSelected=()=>{let{rowSelection:c}=b.getState();return"all"===b3(a,c)},a.getCanSelect=()=>{var c;return"function"==typeof b.options.enableRowSelection?b.options.enableRowSelection(a):null==(c=b.options.enableRowSelection)||c},a.getCanSelectSubRows=()=>{var c;return"function"==typeof b.options.enableSubRowSelection?b.options.enableSubRowSelection(a):null==(c=b.options.enableSubRowSelection)||c},a.getCanMultiSelect=()=>{var c;return"function"==typeof b.options.enableMultiRowSelection?b.options.enableMultiRowSelection(a):null==(c=b.options.enableMultiRowSelection)||c},a.getToggleSelectedHandler=()=>{let b=a.getCanSelect();return c=>{var d;b&&a.toggleSelected(null==(d=c.target)?void 0:d.checked)}}}},{getDefaultColumnDef:()=>bV,getInitialState:a=>({columnSizing:{},columnSizingInfo:bW(),...a}),getDefaultOptions:a=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:bz("columnSizing",a),onColumnSizingInfoChange:bz("columnSizingInfo",a)}),createColumn:(a,b)=>{a.getSize=()=>{var c,d,e;let f=b.getState().columnSizing[a.id];return Math.min(Math.max(null!=(c=a.columnDef.minSize)?c:bV.minSize,null!=(d=null!=f?f:a.columnDef.size)?d:bV.size),null!=(e=a.columnDef.maxSize)?e:bV.maxSize)},a.getStart=bB(a=>[a,bZ(b,a),b.getState().columnSizing],(b,c)=>c.slice(0,a.getIndex(b)).reduce((a,b)=>a+b.getSize(),0),bC(b.options,"debugColumns","getStart")),a.getAfter=bB(a=>[a,bZ(b,a),b.getState().columnSizing],(b,c)=>c.slice(a.getIndex(b)+1).reduce((a,b)=>a+b.getSize(),0),bC(b.options,"debugColumns","getAfter")),a.resetSize=()=>{b.setColumnSizing(b=>{let{[a.id]:c,...d}=b;return d})},a.getCanResize=()=>{var c,d;return(null==(c=a.columnDef.enableResizing)||c)&&(null==(d=b.options.enableColumnResizing)||d)},a.getIsResizing=()=>b.getState().columnSizingInfo.isResizingColumn===a.id},createHeader:(a,b)=>{a.getSize=()=>{let b=0,c=a=>{if(a.subHeaders.length)a.subHeaders.forEach(c);else{var d;b+=null!=(d=a.column.getSize())?d:0}};return c(a),b},a.getStart=()=>{if(a.index>0){let b=a.headerGroup.headers[a.index-1];return b.getStart()+b.getSize()}return 0},a.getResizeHandler=c=>{let d=b.getColumn(a.column.id),e=null==d?void 0:d.getCanResize();return f=>{if(!d||!e||(null==f.persist||f.persist(),bY(f)&&f.touches&&f.touches.length>1))return;let g=a.getSize(),h=a?a.getLeafHeaders().map(a=>[a.column.id,a.column.getSize()]):[[d.id,d.getSize()]],i=bY(f)?Math.round(f.touches[0].clientX):f.clientX,j={},k=(a,c)=>{"number"==typeof c&&(b.setColumnSizingInfo(a=>{var d,e;let f="rtl"===b.options.columnResizeDirection?-1:1,g=(c-(null!=(d=null==a?void 0:a.startOffset)?d:0))*f,h=Math.max(g/(null!=(e=null==a?void 0:a.startSize)?e:0),-.999999);return a.columnSizingStart.forEach(a=>{let[b,c]=a;j[b]=Math.round(100*Math.max(c+c*h,0))/100}),{...a,deltaOffset:g,deltaPercentage:h}}),("onChange"===b.options.columnResizeMode||"end"===a)&&b.setColumnSizing(a=>({...a,...j})))},l=a=>{k("end",a),b.setColumnSizingInfo(a=>({...a,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},m=c||("undefined"!=typeof document?document:null),n={moveHandler:a=>k("move",a.clientX),upHandler:a=>{null==m||m.removeEventListener("mousemove",n.moveHandler),null==m||m.removeEventListener("mouseup",n.upHandler),l(a.clientX)}},o={moveHandler:a=>(a.cancelable&&(a.preventDefault(),a.stopPropagation()),k("move",a.touches[0].clientX),!1),upHandler:a=>{var b;null==m||m.removeEventListener("touchmove",o.moveHandler),null==m||m.removeEventListener("touchend",o.upHandler),a.cancelable&&(a.preventDefault(),a.stopPropagation()),l(null==(b=a.touches[0])?void 0:b.clientX)}},p=!!function(){if("boolean"==typeof bX)return bX;let a=!1;try{let b=()=>{};window.addEventListener("test",b,{get passive(){return a=!0,!1}}),window.removeEventListener("test",b)}catch(b){a=!1}return bX=a}()&&{passive:!1};bY(f)?(null==m||m.addEventListener("touchmove",o.moveHandler,p),null==m||m.addEventListener("touchend",o.upHandler,p)):(null==m||m.addEventListener("mousemove",n.moveHandler,p),null==m||m.addEventListener("mouseup",n.upHandler,p)),b.setColumnSizingInfo(a=>({...a,startOffset:i,startSize:g,deltaOffset:0,deltaPercentage:0,columnSizingStart:h,isResizingColumn:d.id}))}}},createTable:a=>{a.setColumnSizing=b=>null==a.options.onColumnSizingChange?void 0:a.options.onColumnSizingChange(b),a.setColumnSizingInfo=b=>null==a.options.onColumnSizingInfoChange?void 0:a.options.onColumnSizingInfoChange(b),a.resetColumnSizing=b=>{var c;a.setColumnSizing(b?{}:null!=(c=a.initialState.columnSizing)?c:{})},a.resetHeaderSizeInfo=b=>{var c;a.setColumnSizingInfo(b?bW():null!=(c=a.initialState.columnSizingInfo)?c:bW())},a.getTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getLeftTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getLeftHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getCenterTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getCenterHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0},a.getRightTotalSize=()=>{var b,c;return null!=(b=null==(c=a.getRightHeaderGroups()[0])?void 0:c.headers.reduce((a,b)=>a+b.getSize(),0))?b:0}}}];function ca(a,b){var c,d,e;let f;return a?"function"==typeof(d=c=a)&&(f=Object.getPrototypeOf(d)).prototype&&f.prototype.isReactComponent||"function"==typeof c||"object"==typeof(e=c)&&"symbol"==typeof e.$$typeof&&["react.memo","react.forward_ref"].includes(e.$$typeof.description)?i.createElement(a,b):a:null}let cb="diffView",cc="previousDocument",cd="nextDocument";function ce(){let a,b,c,d=(0,h.c)(9),{navigate:e,state:f}=(0,aK.useRouter)();d[0]!==e||d[1]!==f?(a=a=>{let{mode:b,previousDocument:c,nextDocument:d}=a,g={...(0,aL.fromPairs)(f._searchParams),...b?{[cb]:b}:{},...c?{[cc]:[c.type,c.id].join(",")}:{},...d?{[cd]:[d.type,d.id].join(",")}:{}};e({...f,_searchParams:(0,aM.toPairs)(g)})},d[0]=e,d[1]=f,d[2]=a):a=d[2];let g=a;d[3]!==e||d[4]!==f?(b=()=>{e({...f,_searchParams:(f._searchParams??[]).filter(cf)})},d[3]=e,d[4]=f,d[5]=b):b=d[5];let i=b;return d[6]!==i||d[7]!==g?(c={navigateDiffView:g,exitDiffView:i},d[6]=i,d[7]=g,d[8]=c):c=d[8],c}function cf(a){let[b]=a;return![cb,cc,cd].includes(b)}let cg=["version"];function ch(a){let b,c,d,e,f,g,j,k,l=(0,h.c)(22);l[0]!==a?(b=void 0===a?{}:a,l[0]=a,l[1]=b):b=l[1];let{onParamsError:m}=b,{state:n}=(0,aK.useRouter)();if(l[2]!==n._searchParams){let a=new URLSearchParams(n._searchParams);d=a.get(cc),c=a.get(cd),e=a.get(cb),l[2]=n._searchParams,l[3]=c,l[4]=d,l[5]=e}else c=l[3],d=l[4],e=l[5];let o=e,p=[d,c,o].some(ci),q=d??"",r=c??"",s=o??"";l[6]!==q||l[7]!==r||l[8]!==s?(f=function({previousDocument:a,nextDocument:b,mode:c}){let d=[],[e,f]=a.split(",").filter(Boolean),[g,h]=b.split(",").filter(Boolean);return cg.includes(c)||d.push(["invalidModeParam",c]),(typeof e>"u"||typeof f>"u")&&d.push(["invalidPreviousDocumentParam",a]),(typeof g>"u"||typeof h>"u")&&d.push(["invalidNextDocumentParam",b]),0!==d.length?{result:"error",errors:d}:{result:"success",params:{mode:c,documents:{previous:{type:e,id:f},next:{type:g,id:h}}}}}({previousDocument:q,nextDocument:r,mode:s}),l[6]=q,l[7]=r,l[8]=s,l[9]=f):f=l[9];let t=f;if(l[10]!==p||l[11]!==m||l[12]!==t.errors||l[13]!==t.result?(g=()=>{"error"===t.result&&p&&m?.(t.errors)},l[10]=p,l[11]=m,l[12]=t.errors,l[13]=t.result,l[14]=g):g=l[14],l[15]!==p||l[16]!==m||l[17]!==t?(j=[p,m,t],l[15]=p,l[16]=m,l[17]=t,l[18]=j):j=l[18],(0,i.useEffect)(g,j),"error"===t.result){let a;return l[19]===Symbol.for("react.memo_cache_sentinel")?(a={isActive:!1},l[19]=a):a=l[19],a}return l[20]!==t.params?(k={state:"ready",isActive:!0,...t.params},l[20]=t.params,l[21]=k):k=l[21],k}function ci(a){return null!==a}function cj(a){return null!==a}function ck(a,b){return(0,k.isPublishedId)(a)?"published":(0,k.isDraftId)(a)?"draft":b.find(({_id:b})=>(0,j.getReleaseIdFromReleaseDocumentId)(b)===(0,k.getVersionFromId)(a))}let cl=aF.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,cm=aF.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,cn=a=>{let b,c,d,e,f,i,k,l,m,o,p,q,r,s,t,u=(0,h.c)(44),{documentId:v,state:w}=a,{t:x}=(0,j.useTranslation)(y);u[0]!==v?(b={documentId:v},u[0]=v,u[1]=b):b=u[1];let{data:z}=(0,j.useDocumentVersions)(b),{exitDiffView:A,navigateDiffView:B}=ce(),{documents:C}=ch(),D=(0,j.useActiveReleases)();u[2]!==z?(c=z.flatMap(cq),u[2]=z,u[3]=c):c=u[3];let E=c;if(u[4]!==D.data||u[5]!==E){let a;u[7]!==E?(a=a=>{let b=(0,j.getReleaseIdFromReleaseDocumentId)(a._id);return"u">typeof b&&E.includes(b)},u[7]=E,u[8]=a):a=u[8],d=D.data.filter(a),u[4]=D.data,u[5]=E,u[6]=d}else d=u[6];let F=d;u[9]!==C||u[10]!==B?(e=a=>{"u">typeof C?.previous&&B({previousDocument:{...C.previous,id:a}})},u[9]=C,u[10]=B,u[11]=e):e=u[11];let G=e;u[12]!==C||u[13]!==B?(f=a=>{"u">typeof C?.next&&B({nextDocument:{...C.next,id:a}})},u[12]=C,u[13]=B,u[14]=f):f=u[14];let H=f;return u[15]!==x?(i=x("compare-versions.title"),u[15]=x,u[16]=i):i=u[16],u[17]!==i?(k=(0,g.jsx)(aB.Box,{padding:4,children:(0,g.jsx)(aB.Text,{as:"h1",size:1,muted:!0,children:i})}),u[17]=i,u[18]=k):k=u[18],u[19]!==v||u[20]!==C||u[21]!==G||u[22]!==F||u[23]!==w?(l="u">typeof C?.previous&&(0,g.jsx)(co,{releases:F,onSelectRelease:G,role:"previous",documentId:v,state:w,document:C.previous}),u[19]=v,u[20]=C,u[21]=G,u[22]=F,u[23]=w,u[24]=l):l=u[24],u[25]!==k||u[26]!==l?(m=(0,g.jsxs)(cm,{children:[k,l]}),u[25]=k,u[26]=l,u[27]=m):m=u[27],u[28]===Symbol.for("react.memo_cache_sentinel")?(o=(0,g.jsx)(aB.Flex,{align:"center",paddingX:3,children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(n.TransferIcon,{})})}),u[28]=o):o=u[28],u[29]!==v||u[30]!==C||u[31]!==H||u[32]!==F||u[33]!==w?(p="u">typeof C?.next&&(0,g.jsx)(co,{releases:F,onSelectRelease:H,role:"next",documentId:v,state:w,document:C.next}),u[29]=v,u[30]=C,u[31]=H,u[32]=F,u[33]=w,u[34]=p):p=u[34],u[35]===Symbol.for("react.memo_cache_sentinel")?(q={justifySelf:"end"},u[35]=q):q=u[35],u[36]!==A?(r=(0,g.jsx)(aB.Box,{padding:3,style:q,children:(0,g.jsx)(aB.Button,{icon:n.CloseIcon,mode:"bleed",onClick:A,padding:2})}),u[36]=A,u[37]=r):r=u[37],u[38]!==p||u[39]!==r?(s=(0,g.jsxs)(cm,{children:[p,r]}),u[38]=p,u[39]=r,u[40]=s):s=u[40],u[41]!==s||u[42]!==m?(t=(0,g.jsxs)(cl,{children:[m,o,s]}),u[41]=s,u[42]=m,u[43]=t):t=u[43],t},co=a=>{let b,c,d,e,f,i,l,m,o,p,q=(0,h.c)(41),{releases:r,onSelectRelease:s,role:t,documentId:u,document:v}=a;q[0]!==r?(b=void 0===r?[]:r,q[0]=r,q[1]=b):b=q[1];let w=b;q[2]!==v.id?(c=(0,k.getPublishedId)(v.id),q[2]=v.id,q[3]=c):c=q[3];let{published:x,draft:z}=(0,j.useEditState)(c,v.type);q[4]!==v.id||q[5]!==w?(d=ck(v.id,w),q[4]=v.id,q[5]=w,q[6]=d):d=q[6];let A=d,{t:B}=(0,j.useTranslation)(y),{t:C}=(0,j.useTranslation)(),{document:D}=(0,j.useWorkspace)(),{drafts:E}=D,{enabled:F}=E;if(q[7]!==A||q[8]!==C||q[9]!==B?(e=function({selected:a,tCore:b,tStructure:c}){if(typeof a>"u")return{text:b("common.loading"),tone:"neutral",disabled:!0};if((0,j.isReleaseDocument)(a)){let c=a?(0,j.getReleaseTone)(a):"neutral";return{text:a?.metadata.title||b("release.placeholder-untitled-release"),icon:(0,g.jsx)(j.ReleaseAvatar,{padding:1,tone:c}),iconRight:a&&(0,j.isReleaseScheduledOrScheduling)(a)?(0,g.jsx)(n.LockIcon,{}):void 0,tone:c}}let d="published"===a?"positive":"caution";return{text:c(["compare-versions.status",a].join(".")),icon:(0,g.jsx)(j.ReleaseAvatar,{padding:1,tone:d}),tone:d}}({selected:A,tCore:C,tStructure:B}),q[7]=A,q[8]=C,q[9]=B,q[10]=e):e=q[10],q[11]!==e?(f=(0,g.jsx)(aB.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...e}),q[11]=e,q[12]=f):f=q[12],q[13]!==u||q[14]!==s||q[15]!==x||q[16]!==A?(i=x&&(0,g.jsx)(cp,{type:"published",onSelect:s,isSelected:"published"===A,documentId:u}),q[13]=u,q[14]=s,q[15]=x,q[16]=A,q[17]=i):i=q[17],q[18]!==u||q[19]!==z||q[20]!==F||q[21]!==s||q[22]!==A?(l=F&&z&&(0,g.jsx)(cp,{type:"draft",onSelect:s,isSelected:"draft"===A,documentId:u}),q[18]=u,q[19]=z,q[20]=F,q[21]=s,q[22]=A,q[23]=l):l=q[23],q[24]!==u||q[25]!==s||q[26]!==w||q[27]!==A){let a;q[29]!==u||q[30]!==s||q[31]!==A?(a=a=>(0,g.jsx)(cp,{release:a,onSelect:s,isSelected:"string"!=typeof A&&A?._id===a._id,documentId:u},a._id),q[29]=u,q[30]=s,q[31]=A,q[32]=a):a=q[32],m=w.map(a),q[24]=u,q[25]=s,q[26]=w,q[27]=A,q[28]=m}else m=q[28];return q[33]!==l||q[34]!==m||q[35]!==i?(o=(0,g.jsxs)(aB.Menu,{children:[i,l,m]}),q[33]=l,q[34]=m,q[35]=i,q[36]=o):o=q[36],q[37]!==t||q[38]!==o||q[39]!==f?(p=(0,g.jsx)(aA.MenuButton,{id:t,button:f,menu:o}),q[37]=t,q[38]=o,q[39]=f,q[40]=p):p=q[40],p},cp=a=>{let b,c,d,e,f,i,l,m,o,p,q,r,s=(0,h.c)(51),{type:t,release:u,onSelect:v,isSelected:w,documentId:x}=a,{t:z}=(0,j.useTranslation)(),{t:A}=(0,j.useTranslation)(y);s[0]!==x||s[1]!==v||s[2]!==u||s[3]!==t?(b=()=>{"draft"===t?v((0,k.getDraftId)(x)):"published"===t?v((0,k.getPublishedId)(x)):"u">typeof u?._id&&v((0,k.getVersionId)(x,(0,j.getReleaseIdFromReleaseDocumentId)(u._id)))},s[0]=x,s[1]=v,s[2]=u,s[3]=t,s[4]=b):b=s[4];let B=b;if(t){let a,b,c,d,e,f,h="published"===t?"positive":"caution";s[5]!==h?(a=(0,g.jsx)(j.ReleaseAvatar,{padding:2,tone:h}),s[5]=h,s[6]=a):a=s[6],s[7]!==t?(b=["compare-versions.status",t],s[7]=t,s[8]=b):b=s[8];let i=b.join(".");return s[9]!==i||s[10]!==A?(c=A(i),s[9]=i,s[10]=A,s[11]=c):c=s[11],s[12]!==c?(d=(0,g.jsx)(aB.Box,{paddingY:2,children:(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:c})}),s[12]=c,s[13]=d):d=s[13],s[14]!==a||s[15]!==d?(e=(0,g.jsxs)(aB.Flex,{gap:1,children:[a,d]}),s[14]=a,s[15]=d,s[16]=e):e=s[16],s[17]!==w||s[18]!==B||s[19]!==e?(f=(0,g.jsx)(aB.MenuItem,{padding:1,paddingRight:3,onClick:B,pressed:w,children:e}),s[17]=w,s[18]=B,s[19]=e,s[20]=f):f=s[20],f}s[21]!==u?(c=u?(0,j.getReleaseTone)(u):"neutral",s[21]=u,s[22]=c):c=s[22];let C=c;return s[23]!==C?(d=(0,g.jsx)(j.ReleaseAvatar,{padding:2,tone:C}),s[23]=C,s[24]=d):d=s[24],s[25]!==u.metadata.title||s[26]!==z?(e=u.metadata.title||z("release.placeholder-untitled-release"),s[25]=u.metadata.title,s[26]=z,s[27]=e):e=s[27],s[28]!==e?(f=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:e}),s[28]=e,s[29]=f):f=s[29],s[30]!==u.metadata.releaseType||s[31]!==z?(i=["asap","undecided"].includes(u.metadata.releaseType)&&(0,g.jsx)(aB.Text,{muted:!0,size:1,children:z(`release.type.${u.metadata.releaseType}`)}),s[30]=u.metadata.releaseType,s[31]=z,s[32]=i):i=s[32],s[33]!==u?(l="scheduled"===u.metadata.releaseType&&(0,g.jsx)(aB.Text,{muted:!0,size:1,children:(0,j.formatRelativeLocalePublishDate)(u)}),s[33]=u,s[34]=l):l=s[34],s[35]!==f||s[36]!==i||s[37]!==l?(m=(0,g.jsxs)(aB.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[f,i,l]}),s[35]=f,s[36]=i,s[37]=l,s[38]=m):m=s[38],s[39]!==u?(o=(0,j.isReleaseScheduledOrScheduling)(u)&&(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(n.LockIcon,{})})}),s[39]=u,s[40]=o):o=s[40],s[41]!==o?(p=(0,g.jsx)(aB.Flex,{flex:"none",children:o}),s[41]=o,s[42]=p):p=s[42],s[43]!==p||s[44]!==d||s[45]!==m?(q=(0,g.jsxs)(aB.Flex,{gap:1,children:[d,m,p]}),s[43]=p,s[44]=d,s[45]=m,s[46]=q):q=s[46],s[47]!==w||s[48]!==B||s[49]!==q?(r=(0,g.jsx)(aB.MenuItem,{padding:1,paddingRight:3,onClick:B,pressed:w,children:q}),s[47]=w,s[48]=B,s[49]=q,s[50]=r):r=s[50],r};function cq(a){return(0,k.getVersionFromId)(a)??[]}let cr=aF.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function cs(a){return a.document?.components?.unstable_layout}function ct(a){return a.path}function cu(a,b){return(0,a3.default)(a.path,b.path)}let cv=aF.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,cw=(0,aF.styled)(aB.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,cx=(0,aF.styled)(aB.Container)`
  width: auto;
`,cy=(0,i.forwardRef)(function(a,b){let c,d,e,f,k,m,n,o,p,q,r,s,t=(0,h.c)(36),{role:u,documentType:v,documentId:w,scrollElement:x,syncChannel:y,compareDocument:z}=a,A=(0,i.useRef)(null),[B,C]=(0,i.useState)(null),[D,E]=(0,i.useState)(null);t[0]!==z||t[1]!==w||t[2]!==v||t[3]!==u||t[4]!==x||t[5]!==y?(c=()=>(0,g.jsx)(cz,{compareDocument:z,documentId:w,documentType:v,role:u,scrollElement:x,syncChannel:y}),t[0]=z,t[1]=w,t[2]=v,t[3]=u,t[4]=x,t[5]=y,t[6]=c):c=t[6];let F=c;t[7]!==F?(d={pick:cs,defaultComponent:F},t[7]=F,t[8]=d):d=t[8];let G=(0,j.useMiddlewareComponents)(d);t[9]===Symbol.for("react.memo_cache_sentinel")?(e={isInteractive:!1,onOpenReviewChanges:aN.noop,onSetFocus:aN.noop,isReviewChangesOpen:!1},t[9]=e):e=t[9];let H=`${u}-document`;t[10]!==H?(f={"--grid-area":H},t[10]=H,t[11]=f):f=t[11];let I=f,J="next"===u,K="next"!==u&&"none";t[12]!==K?(k={"--scrollbar-width":K},t[12]=K,t[13]=k):k=t[13];let L=k;return t[14]!==G||t[15]!==w||t[16]!==v?(m=(0,g.jsx)(aC.DialogProvider,{position:"absolute",children:(0,g.jsx)(cx,{ref:A,padding:4,width:1,children:(0,g.jsx)(G,{documentId:w,documentType:v})})}),t[14]=G,t[15]=w,t[16]=v,t[17]=m):m=t[17],t[18]!==B||t[19]!==m?(n=(0,g.jsx)(aB.PortalProvider,{element:B,children:m}),t[18]=B,t[19]=m,t[20]=n):n=t[20],t[21]!==b||t[22]!==L||t[23]!==n?(o=(0,g.jsx)(cv,{ref:b,style:L,children:n}),t[21]=b,t[22]=L,t[23]=n,t[24]=o):o=t[24],t[25]===Symbol.for("react.memo_cache_sentinel")?(p=(0,g.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:C}),t[25]=p):p=t[25],t[26]!==o||t[27]!==I||t[28]!==J?(q=(0,g.jsxs)(cw,{ref:E,style:I,borderLeft:J,children:[o,p]}),t[26]=o,t[27]=I,t[28]=J,t[29]=q):q=t[29],t[30]!==D||t[31]!==q?(r=(0,g.jsx)(aB.BoundaryElementProvider,{element:D,children:q}),t[30]=D,t[31]=q,t[32]=r):r=t[32],t[33]!==x||t[34]!==r?(s=(0,g.jsx)(l.ReviewChangesContext.Provider,{value:e,children:(0,g.jsx)(j.ChangeIndicatorsTracker,{children:(0,g.jsx)(j.VirtualizerScrollInstanceProvider,{scrollElement:x,containerElement:A,children:r})})}),t[33]=x,t[34]=r,t[35]=s):s=t[35],s}),cz=a=>{var b,c;let d,e,f,m,n,o,p,q,r,s,t,u=(0,h.c)(52),{role:v,documentType:w,documentId:x,syncChannel:y,compareDocument:z}=a;u[0]!==z?(d={compareDocument:z},u[0]=z,u[1]=d):d=u[1];let A=function(a){let b,c,d,e=(0,h.c)(4),{compareDocument:f}=a;e[0]!==f.id?(b=(0,k.getPublishedId)(f.id),e[0]=f.id,e[1]=b):b=e[1];let g=f.type;e[2]!==f.id?(c=(0,k.getVersionFromId)(f.id),e[2]=f.id,e[3]=c):c=e[3];let i=(0,j.useEditState)(b,g,"low",c);a:{if((0,k.isVersionId)(f.id)){d=i.version??void 0;break a}if((0,k.isDraftId)(f.id)){d=i.draft??void 0;break a}if((0,k.isPublishedId)(f.id)){d=i.published??void 0;break a}d=void 0}return d}(d),{data:B}=(0,j.useActiveReleases)(),[C]=(0,i.useState)(cA);u[2]!==x||u[3]!==B?(e=ck(x,B),u[2]=x,u[3]=B,u[4]=e):e=u[4];let D=e;u[5]!==x?(f=(0,k.getPublishedId)(x),u[5]=x,u[6]=f):f=u[6],u[7]!==x?(b=x,m=(0,k.isVersionId)(b)?(0,k.getVersionFromId)(b):(0,k.isPublishedId)(b)?"published":void 0,u[7]=x,u[8]=m):m=u[8],u[9]!==x?(n=(0,k.getVersionFromId)(x),u[9]=x,u[10]=n):n=u[10],u[11]!==A||u[12]!==w||u[13]!==f||u[14]!==m||u[15]!==n?(o={documentId:f,documentType:w,selectedPerspectiveName:m,releaseId:n,comparisonValue:A,displayInlineChanges:!0},u[11]=A,u[12]=w,u[13]=f,u[14]=m,u[15]=n,u[16]=o):o=u[16];let{formState:E,onChange:F,onFocus:G,onBlur:H,onSetActiveFieldGroup:I,onSetCollapsedFieldSet:J,onSetCollapsedPath:K,collapsedFieldSets:L,ready:M,collapsedPaths:N,schemaType:O,value:P,onProgrammaticFocus:Q,openPath:R,onPathOpen:S}=(0,j.useDocumentForm)(o),T=null===E||!M;u[17]!==v||u[18]!==y?(p={id:v,syncChannel:y},u[17]=v,u[18]=y,u[19]=p):p=u[19];let U=function(a){let b,c,d,e=(0,h.c)(11),{syncChannel:f,id:g}=a;e[0]!==g||e[1]!==f?(b=a=>f.next({...a,source:g}),e[0]=g,e[1]=f,e[2]=b):b=e[2];let i=b;if(e[3]!==g||e[4]!==f){let a;e[6]!==g?(a=a=>{let{source:b}=a;return b!==g},e[6]=g,e[7]=a):a=e[7],c=f.pipe((0,aU.distinctUntilChanged)(cu),(0,aU.filter)(a),(0,aU.map)(ct)),e[3]=g,e[4]=f,e[5]=c}else c=e[5];let j=c;return e[8]!==j||e[9]!==i?(d={path:j,push:i},e[8]=j,e[9]=i,e[10]=d):d=e[10],d}(p);u[20]!==S||u[21]!==U||u[22]!==v?(q=a=>{S(a),U.push({source:v,path:a})},u[20]=S,u[21]=U,u[22]=v,u[23]=q):q=u[23];let V=q;return u[24]!==S||u[25]!==Q||u[26]!==U.path?(r=()=>{let a=U.path.subscribe(a=>{S(a),Q(a)});return()=>a.unsubscribe()},u[24]=S,u[25]=Q,u[26]=U.path,u[27]=r):r=u[27],u[28]!==S||u[29]!==Q||u[30]!==U.path||u[31]!==v?(s=[S,Q,U.path,v],u[28]=S,u[29]=Q,u[30]=U.path,u[31]=v,u[32]=s):s=u[32],(0,i.useEffect)(r,s),u[33]!==L||u[34]!==N||u[35]!==A||u[36]!==E||u[37]!==T||u[38]!==H||u[39]!==F||u[40]!==G||u[41]!==V||u[42]!==I||u[43]!==J||u[44]!==K||u[45]!==R||u[46]!==C||u[47]!==D||u[48]!==v||u[49]!==O||u[50]!==P?(t=T?(0,g.jsx)(j.LoadingBlock,{showText:!0}):(0,g.jsx)(l.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,g.jsx)(j.FormBuilder,{__internal_patchChannel:C,id:`diffView-pane-${v}`,onChange:F,onPathFocus:G,onPathOpen:V,onPathBlur:H,onFieldGroupSelect:I,onSetFieldSetCollapsed:J,onSetPathCollapsed:K,collapsedPaths:N,collapsedFieldSets:L,focusPath:E.focusPath,openPath:R,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(c=D)?"drafts":c,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:O,value:P,compareValue:A})}),u[33]=L,u[34]=N,u[35]=A,u[36]=E,u[37]=T,u[38]=H,u[39]=F,u[40]=G,u[41]=V,u[42]=I,u[43]=J,u[44]=K,u[45]=R,u[46]=C,u[47]=D,u[48]=v,u[49]=O,u[50]=P,u[51]=t):t=u[51],t};function cA(){return(0,j.createPatchChannel)()}let cB=aF.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,cC=a=>{let b,c,d=(0,h.c)(6),{children:e,documentId:f,documentType:i}=a;d[0]!==f||d[1]!==i?(b={intent:"edit",params:{id:f,type:i}},d[0]=f,d[1]=i,d[2]=b):b=d[2];let{href:j}=(0,aK.useIntentLink)(b);return d[3]!==e||d[4]!==j?(c=(0,g.jsx)(cB,{href:j,target:"_blank",rel:"noopener noreferrer",children:e}),d[3]=e,d[4]=j,d[5]=c):c=d[5],c},cD=a=>{var b;let c,d,e,f,j,k,m,n,o,p,q,r,s=(0,h.c)(24),{documentId:t}=a,{documents:u,state:v,mode:w}=ch(),{exitDiffView:x}=ce(),y=((o=(0,h.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(n=new aU.Subject,o[0]=n):n=o[0],n),[z,A]=(0,i.useState)(null),[B,C]=(0,i.useState)(null),D=(0,i.useContext)(l.ReferenceInputOptionsContext);s[0]!==D?(c={...D,disableNew:!0,EditReferenceLinkComponent:cC},s[0]=D,s[1]=c):c=s[1];let E=c;return s[2]!==B||s[3]!==z?(d=[z,B],s[2]=B,s[3]=z,s[4]=d):d=s[4],b=d,(r=(0,h.c)(3))[0]!==b?(p=()=>{let a=b.filter(cj);if(0===a.length)return;let c=new a2(a);return()=>c.destroy()},q=[b],r[0]=b,r[1]=p,r[2]=q):(p=r[1],q=r[2]),(0,i.useEffect)(p,q),s[5]!==t||s[6]!==w||s[7]!==v?(e="version"===w&&(0,g.jsx)(cn,{documentId:t,state:v}),s[5]=t,s[6]=w,s[7]=v,s[8]=e):e=s[8],s[9]!==u||s[10]!==B||s[11]!==z||s[12]!==v||s[13]!==y?(f="ready"===v&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(cy,{documentType:u.previous.type,documentId:u.previous.id,role:"previous",ref:A,scrollElement:z,syncChannel:y,compareDocument:u.previous}),(0,g.jsx)(cy,{documentType:u.next.type,documentId:u.next.id,role:"next",ref:C,scrollElement:B,syncChannel:y,compareDocument:u.previous})]}),s[9]=u,s[10]=B,s[11]=z,s[12]=v,s[13]=y,s[14]=f):f=s[14],s[15]!==e||s[16]!==f?(j=(0,g.jsxs)(cr,{children:[e,f]}),s[15]=e,s[16]=f,s[17]=j):j=s[17],s[18]!==x||s[19]!==j?(k=(0,g.jsx)(aA.Dialog,{id:"diffView",width:"auto",onClose:x,padding:!1,__unstable_hideCloseButton:!0,children:j}),s[18]=x,s[19]=j,s[20]=k):k=s[20],s[21]!==E||s[22]!==k?(m=(0,g.jsx)(l.ReferenceInputOptionsContext.Provider,{value:E,children:k}),s[21]=E,s[22]=k,s[23]=m):m=s[23],m},cE=a=>{let b,c,d,e=(0,h.c)(9),{children:f,documentId:i}=a,k=(0,aC.useToast)(),{t:l}=(0,j.useTranslation)(y);e[0]!==l||e[1]!==k?(b={onParamsError:a=>{k.push({id:"diffViewParamsParsingError",status:"error",title:l("compare-version.error.invalidParams.title"),description:(0,g.jsx)("ul",{children:a.map(a=>{let[b,c]=a;return(0,g.jsx)("li",{children:l(`compare-version.error.${b}`,{input:c})},b)})})})}},e[0]=l,e[1]=k,e[2]=b):b=e[2];let{isActive:m}=ch(b);return e[3]!==i||e[4]!==m?(c=m&&(0,g.jsx)(cD,{documentId:i}),e[3]=i,e[4]=m,e[5]=c):c=e[5],e[6]!==f||e[7]!==c?(d=(0,g.jsxs)(g.Fragment,{children:[f,c]}),e[6]=f,e[7]=c,e[8]=d):d=e[8],d};function cF(){let a=(0,i.useContext)(l.PaneLayoutContext);if(!a)throw Error("PaneLayout: missing context value");return a}let cG=(0,aF.styled)(aB.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function cH(a){let b,c,d=(0,h.c)(7),{disabled:e,element:f}=a,{resize:j}=cF(),[k,l]=(0,i.useState)(!1);d[0]!==f||d[1]!==j?(b=a=>{if(!f)return;l(!0),a.preventDefault();let b=a.pageX;j("start",f,0);let c=a=>{a.preventDefault(),j("move",f,a.pageX-b)},d=a=>{a.preventDefault(),l(!1),window.removeEventListener("mousemove",c),window.removeEventListener("mouseup",d),j("end",f,0)};window.addEventListener("mousemove",c),window.addEventListener("mouseup",d)},d[0]=f,d[1]=j,d[2]=b):b=d[2];let m=b,n=e?"":void 0,o=k?"":void 0;return d[3]!==m||d[4]!==n||d[5]!==o?(c=(0,g.jsx)(cG,{"data-disabled":n,"data-dragging":o,onMouseDown:m}),d[3]=m,d[4]=n,d[5]=o,d[6]=c):c=d[6],c}let cI=(0,aF.styled)(aB.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,cJ=(0,i.forwardRef)(function(a,b){let c,d,e,f,k,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K=(0,h.c)(86);K[0]!==a?({children:c,currentMinWidth:e,currentMaxWidth:d,flex:o,id:f,minWidth:m,maxWidth:k,selected:p,...n}=a,K[0]=a,K[1]=c,K[2]=d,K[3]=e,K[4]=f,K[5]=k,K[6]=m,K[7]=n,K[8]=o,K[9]=p):(c=K[1],d=K[2],e=K[3],f=K[4],k=K[5],m=K[6],n=K[7],o=K[8],p=K[9]);let L=void 0===o?1:o,M=void 0!==p&&p,[N,O]=(0,i.useState)(null),{collapse:P,collapsed:Q,expand:R,expandedElement:S,mount:T,panes:U}=cF();if(K[10]!==U||K[11]!==N){let a;K[14]!==N?(a=a=>a.element===N,K[14]=N,K[15]=a):a=K[15],r=(q=U.find(a))&&U.indexOf(q),K[10]=U,K[11]=N,K[12]=q,K[13]=r}else q=K[12],r=K[13];let V=r,W="number"==typeof V?U[V+1]:void 0,X=V===U.length-1,Y=S===N,Z=!Q&&(q?.collapsed||!1),$=W?.collapsed||!1,_=(0,i.useRef)(null),aa=q?.flex??L,ab=q?.currentMinWidth??e,ac=q?.currentMaxWidth??d;K[16]===Symbol.for("react.memo_cache_sentinel")?(s=()=>_.current,K[16]=s):s=K[16],(0,i.useImperativeHandle)(b,s),K[17]===Symbol.for("react.memo_cache_sentinel")?(t=a=>{O(a),_.current=a},K[17]=t):t=K[17];let ad=t;K[18]!==d||K[19]!==e||K[20]!==L||K[21]!==f||K[22]!==k||K[23]!==m||K[24]!==T||K[25]!==N?(u=()=>{if(N)return T(N,{currentMinWidth:e,currentMaxWidth:d,flex:L,id:f,minWidth:m,maxWidth:k})},v=[e,d,L,f,m,k,T,N],K[18]=d,K[19]=e,K[20]=L,K[21]=f,K[22]=k,K[23]=m,K[24]=T,K[25]=N,K[26]=u,K[27]=v):(u=K[26],v=K[27]),(0,i.useLayoutEffect)(u,v),K[28]!==P||K[29]!==N?(w=()=>{N&&P(N)},K[28]=P,K[29]=N,K[30]=w):w=K[30];let ae=w;K[31]!==R||K[32]!==N?(x=()=>{N&&R(N)},K[31]=R,K[32]=N,K[33]=x):x=K[33];let af=x,ag=!Q&&Z;K[34]!==ae||K[35]!==af||K[36]!==X||K[37]!==V||K[38]!==N||K[39]!==ag?(y={collapse:ae,collapsed:ag,expand:af,index:V,isLast:X,rootElement:N},K[34]=ae,K[35]=af,K[36]=X,K[37]=V,K[38]=N,K[39]=ag,K[40]=y):y=K[40];let ah=y;a:{if(Q){z=void 0;break a}if(Z){z=51;break a}if(0===ab||X){z=m||204;break a}z=ab||m||204}let ai=z;b:{if(Z){A=51;break b}if(Q&&X){A=void 0;break b}if(X){if(k){A=ac??k;break b}A=void 0;break b}A=ac??k}let aj=A,ak=Q&&!X;K[41]!==Z||K[42]!==X||K[43]!==Q||K[44]!==$||K[45]!==N?(B=!X&&!Q&&(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,g.jsx)(cH,{disabled:Z||$,element:N})}),K[41]=Z,K[42]=X,K[43]=Q,K[44]=$,K[45]=N,K[46]=B):B=K[46];let al=B,am=aj===1/0?void 0:aj;K[47]!==aa||K[48]!==ai||K[49]!==am?(C={flex:aa,minWidth:ai,maxWidth:am},K[47]=aa,K[48]=ai,K[49]=am,K[50]=C):C=K[50];let an=C,ao=Q?void 0:"hidden",ap=Z?"":void 0,aq=M?"":void 0;return K[51]!==Z||K[52]!==ac||K[53]!==ab||K[54]!==Y||K[55]!==aa||K[56]!==aj||K[57]!==ai||K[58]!==V?(D=!1,K[51]=Z,K[52]=ac,K[53]=ab,K[54]=Y,K[55]=aa,K[56]=aj,K[57]=ai,K[58]=V,K[59]=D):D=K[59],K[60]!==c||K[61]!==ak?(E=!ak&&(0,g.jsx)(aB.Flex,{direction:"column",height:"fill",children:c}),K[60]=c,K[61]=ak,K[62]=E):E=K[62],K[63]!==N||K[64]!==E?(F=(0,g.jsx)(aB.BoundaryElementProvider,{element:N,children:E}),K[63]=N,K[64]=E,K[65]=F):F=K[65],K[66]!==ak||K[67]!==f||K[68]!==V||K[69]!==n||K[70]!==an||K[71]!==ao||K[72]!==ap||K[73]!==aq||K[74]!==D||K[75]!==F?(G=(0,g.jsxs)(cI,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ak,id:f,overflow:ao,...n,"data-pane-collapsed":ap,"data-pane-index":V,"data-pane-selected":aq,ref:ad,style:an,children:[D,F]}),K[66]=ak,K[67]=f,K[68]=V,K[69]=n,K[70]=an,K[71]=ao,K[72]=ap,K[73]=aq,K[74]=D,K[75]=F,K[76]=G):G=K[76],K[77]!==X||K[78]!==G?(H=(0,g.jsx)(j.IsLastPaneProvider,{isLastPane:X,children:G}),K[77]=X,K[78]=G,K[79]=H):H=K[79],K[80]!==ah||K[81]!==H?(I=(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"pane",children:(0,g.jsx)(l.PaneContext.Provider,{value:ah,children:H})}),K[80]=ah,K[81]=H,K[82]=I):I=K[82],K[83]!==al||K[84]!==I?(J=(0,g.jsxs)(g.Fragment,{children:[I,al]}),K[83]=al,K[84]=I,K[85]=J):J=K[85],J}),cK=(0,aF.styled)(aB.Card)`
  position: relative;
  outline: none;
`;function cL(){let a=(0,i.useContext)(l.PaneContext);if(!a)throw Error("Pane: missing context value");return a}cK.displayName="PaneContent__root";let cM=(0,i.forwardRef)(function(a,b){let c,d,e,f,i,j,k=(0,h.c)(14);k[0]!==a?({as:c,children:d,overflow:e,padding:f,...i}=a,k[0]=a,k[1]=c,k[2]=d,k[3]=e,k[4]=f,k[5]=i):(c=k[1],d=k[2],e=k[3],f=k[4],i=k[5]);let{collapsed:l}=cL(),{collapsed:m}=cF(),n=m?void 0:e;return k[6]!==c||k[7]!==d||k[8]!==l||k[9]!==f||k[10]!==b||k[11]!==i||k[12]!==n?(j=(0,g.jsx)(cK,{"data-testid":"pane-content",forwardedAs:c,...i,flex:1,hidden:l,overflow:n,padding:f,ref:b,tone:"inherit",children:d}),k[6]=c,k[7]=d,k[8]=l,k[9]=f,k[10]=b,k[11]=i,k[12]=n,k[13]=j):j=k[13],j});function cN(a){return a?a.toLocaleLowerCase().replaceAll(" ",""):""}let cO={constrainSize:!0,placement:"left-start",portal:!0};function cP(a){let b,c,d,e,f=(0,h.c)(35),{disabled:i,isAfterGroup:k,node:l}=a,m=(0,j.useGetI18nText)("i18n"in l?l:void 0);if("divider"===l.type){let a;return f[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(aB.MenuDivider,{}),f[0]=a):a=f[0],a}f[1]!==m||f[2]!==l?(b=m(l),f[1]=m,f[2]=l,f[3]=b):b=f[3];let{title:n}=b;if("group"===l.type){let a,b,c,d;if(0===l.children.length)return null;if(l.expanded){let a,b,c;return f[4]!==k?(a=k&&(0,g.jsx)(aB.MenuDivider,{}),f[4]=k,f[5]=a):a=f[5],f[6]!==i||f[7]!==l.children||f[8]!==l.disabled?(b=l.children.map((a,b)=>(0,g.jsx)(cP,{disabled:i||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),f[6]=i,f[7]=l.children,f[8]=l.disabled,f[9]=b):b=f[9],f[10]!==a||f[11]!==b?(c=(0,g.jsxs)(g.Fragment,{children:[a,b]}),f[10]=a,f[11]=b,f[12]=c):c=f[12],c}f[13]!==k?(a=k&&(0,g.jsx)(aB.MenuDivider,{}),f[13]=k,f[14]=a):a=f[14];let e=l.icon;return f[15]!==i||f[16]!==l.children||f[17]!==l.disabled?(b=l.children.map((a,b)=>(0,g.jsx)(cP,{disabled:i||!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),f[15]=i,f[16]=l.children,f[17]=l.disabled,f[18]=b):b=f[18],f[19]!==i||f[20]!==l.icon||f[21]!==b||f[22]!==n?(c=(0,g.jsx)(aW.MenuGroup,{disabled:i,icon:e,popover:cO,text:n,children:b}),f[19]=i,f[20]=l.icon,f[21]=b,f[22]=n,f[23]=c):c=f[23],f[24]!==a||f[25]!==c?(d=(0,g.jsxs)(g.Fragment,{children:[a,c]}),f[24]=a,f[25]=c,f[26]=d):d=f[26],d}return f[27]!==k?(c=k&&(0,g.jsx)(aB.MenuDivider,{}),f[27]=k,f[28]=c):c=f[28],f[29]!==i||f[30]!==l?(d=(0,g.jsx)(cQ,{disabled:i,node:l}),f[29]=i,f[30]=l,f[31]=d):d=f[31],f[32]!==c||f[33]!==d?(e=(0,g.jsxs)(g.Fragment,{children:[c,d]}),f[32]=c,f[33]=d,f[34]=e):e=f[34],e}function cQ(a){let b,c=(0,h.c)(5),{node:d}=a;if(d.intent){let b;return c[0]!==d.intent||c[1]!==a?(b=(0,g.jsx)(cS,{...a,intent:d.intent}),c[0]=d.intent,c[1]=a,c[2]=b):b=c[2],b}return c[3]!==a?(b=(0,g.jsx)(cR,{...a}),c[3]=a,c[4]=b):b=c[4],b}function cR(a){let b,c,d,e,f,i=(0,h.c)(19),{disabled:k,node:l}=a;i[0]!==l.disabled?(b="object"==typeof l.disabled&&(0,g.jsx)(aB.Text,{size:1,children:l.disabled.reason}),i[0]=l.disabled,i[1]=b):b=i[1];let m=b,{title:o}=(0,j.useI18nText)(l),p=k||!!l.disabled;i[2]!==l.hotkey?(c=l.hotkey?.split("+"),i[2]=l.hotkey,i[3]=c):c=i[3];let q=l.icon,r=l.iconRight||l.selected&&n.CheckmarkIcon,s=l.onAction,t=l.selected,u=l.tone;i[4]!==l.title?(d=cN(l.title),i[4]=l.title,i[5]=d):d=i[5];let v=`action-${d}`;return i[6]!==l.icon||i[7]!==l.onAction||i[8]!==l.selected||i[9]!==l.tone||i[10]!==p||i[11]!==c||i[12]!==r||i[13]!==v||i[14]!==o?(e=(0,g.jsx)(aA.MenuItem,{disabled:p,hotkeys:c,icon:q,iconRight:r,onClick:s,pressed:t,text:o,tone:u,"data-testid":v}),i[6]=l.icon,i[7]=l.onAction,i[8]=l.selected,i[9]=l.tone,i[10]=p,i[11]=c,i[12]=r,i[13]=v,i[14]=o,i[15]=e):e=i[15],i[16]!==e||i[17]!==m?(f=(0,g.jsx)(j.TooltipOfDisabled,{content:m,placement:"left",children:e}),i[16]=e,i[17]=m,i[18]=f):f=i[18],f}function cS(a){let b,c,d,e,f,i,k=(0,h.c)(23),{disabled:l,intent:m,node:o}=a;k[0]!==o.disabled?(b="object"==typeof o.disabled&&(0,g.jsx)(aB.Text,{size:1,children:o.disabled.reason}),k[0]=o.disabled,k[1]=b):b=k[1];let p=b;k[2]!==m.params||k[3]!==m.type?(c={intent:m.type,params:m.params},k[2]=m.params,k[3]=m.type,k[4]=c):c=k[4];let q=(0,aK.useIntentLink)(c);k[5]!==q||k[6]!==o?(d=a=>{q.onClick(a),o.onAction()},k[5]=q,k[6]=o,k[7]=d):d=k[7];let r=d,{title:s}=(0,j.useI18nText)(o),t=l||!!o.disabled;k[8]!==o.hotkey?(e=o.hotkey?.split("+"),k[8]=o.hotkey,k[9]=e):e=k[9];let u=o.selected?n.CheckmarkIcon:void 0;return k[10]!==r||k[11]!==q.href||k[12]!==o.icon||k[13]!==o.selected||k[14]!==o.tone||k[15]!==t||k[16]!==e||k[17]!==u||k[18]!==s?(f=(0,g.jsx)(aA.MenuItem,{as:"a",disabled:t,hotkeys:e,href:q.href,icon:o.icon,iconRight:u,onClick:r,pressed:o.selected,text:s,tone:o.tone}),k[10]=r,k[11]=q.href,k[12]=o.icon,k[13]=o.selected,k[14]=o.tone,k[15]=t,k[16]=e,k[17]=u,k[18]=s,k[19]=f):f=k[19],k[20]!==f||k[21]!==p?(i=(0,g.jsx)(j.TooltipOfDisabled,{content:p,placement:"left",children:f}),k[20]=f,k[21]=p,k[22]=i):i=k[22],i}let cT={constrainSize:!0,placement:"bottom",portal:!0};function cU(a,b){return a.some(a=>"item"===a.type&&a.tone===b||"group"===a.type&&cU(a.children,b))}function cV(a){let b,c,d,e,f,k=(0,h.c)(13),{nodes:l,actionsNodes:m}=a,n=(0,i.useId)(),o=cU(l,"critical"),p=cU(l,"caution"),q=o?"critical":p?"caution":void 0;return k[0]!==q?(b=(0,g.jsx)(j.ContextMenuButton,{tone:q,"data-testid":"pane-context-menu-button"}),k[0]=q,k[1]=b):b=k[1],k[2]!==m?(c=m&&(0,g.jsxs)(g.Fragment,{children:[m,(0,g.jsx)(aB.MenuDivider,{})]}),k[2]=m,k[3]=c):c=k[3],k[4]!==l?(d=l.map((a,b)=>{let c=l[b-1]?.type==="group";return(0,g.jsx)(cP,{isAfterGroup:c,node:a},a.key)}),k[4]=l,k[5]=d):d=k[5],k[6]!==c||k[7]!==d?(e=(0,g.jsxs)(aB.Menu,{children:[c,d]}),k[6]=c,k[7]=d,k[8]=e):e=k[8],k[9]!==n||k[10]!==b||k[11]!==e?(f=(0,g.jsx)(aA.MenuButton,{button:b,id:n,menu:e,popover:cT}),k[9]=n,k[10]=b,k[11]=e,k[12]=f):f=k[12],f}let cW=(0,aF.styled)(aB.Layer)`
  position: sticky;
  bottom: 0;
`,cX=(0,aF.styled)(aB.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,cY=(0,i.forwardRef)(function(a,b){let c,d,e=(0,h.c)(7),{children:f,padding:i}=a,{collapsed:k}=cL();return e[0]!==f||e[1]!==i?(c=(0,g.jsx)(cX,{tone:"inherit",children:(0,g.jsx)(aB.Box,{padding:i,children:f})}),e[0]=f,e[1]=i,e[2]=c):c=e[2],e[3]!==k||e[4]!==b||e[5]!==c?(d=(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(cW,{"data-testid":"pane-footer",hidden:k,ref:b,children:c})}),e[3]=k,e[4]=b,e[5]=c,e[6]=d):d=e[6],d}),cZ=(0,aF.styled)(aB.Layer)(({$border:a})=>aF.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${a?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),c$=(0,aF.styled)(aB.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,c_=(0,aF.styled)(aB.Card)(({theme:a})=>{let{fg:b,bg:c}=a.sanity.color.card.enabled;return aF.css`
    background-color: ${c};

    [data-ui='Text'] {
      color: ${b};
    }
  `}),c0=(0,aF.styled)(aC.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,c1=(0,aF.styled)(aB.Text)`
  cursor: default;
  outline: none;
`,c2=(0,i.forwardRef)(function(a,b){let c,d,e,f,i,k,l,m,n,o,p,q,r,s=(0,h.c)(48),{actions:t,backButton:u,border:v,contentAfter:w,loading:x,subActions:y,tabs:z,tabIndex:A,title:B,appendTitle:C}=a,{collapse:D,collapsed:E,expand:F,rootElement:G}=cL(),H=(0,aC.useElementRect)(G||null),I=E?H?.height||window.innerHeight:void 0;s[0]!==I?(c={width:I},s[0]=I,s[1]=c):c=s[1];let J=c;s[2]!==D||s[3]!==E?(d=()=>{E||D()},s[2]=D,s[3]=E,s[4]=d):d=s[4];let K=d;s[5]!==E||s[6]!==F?(e=()=>{E&&F()},s[5]=E,s[6]=F,s[7]=e):e=s[7];let L=e,M=!!(!E&&(z||y)),N=E?"":void 0,O=E?"":void 0;s[8]!==u?(f=u&&(0,g.jsx)(aB.Box,{flex:"none",children:u}),s[8]=u,s[9]=f):f=s[9];let P=u?1:2;s[10]!==x?(i=x&&(0,g.jsx)(aB.Box,{children:(0,g.jsx)(c0,{animated:!0,radius:1,size:1})}),s[10]=x,s[11]=i):i=s[11],s[12]!==C||s[13]!==x||s[14]!==B?(k=!x&&(0,g.jsxs)(aB.Flex,{align:"center",gap:1,children:[(0,g.jsx)(c1,{size:1,textOverflow:"ellipsis",weight:"semibold",children:B}),C]}),s[12]=C,s[13]=x,s[14]=B,s[15]=k):k=s[15],s[16]!==K||s[17]!==P||s[18]!==i||s[19]!==k||s[20]!==A?(l=(0,g.jsxs)(c_,{__unstable_focusRing:!0,flex:1,onClick:K,paddingLeft:P,padding:2,tabIndex:A,children:[i,k]}),s[16]=K,s[17]=P,s[18]=i,s[19]=k,s[20]=A,s[21]=l):l=s[21],s[22]!==t||s[23]!==E?(m=t&&(0,g.jsx)(aB.Box,{hidden:E,children:(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneHeader",children:t})}),s[22]=t,s[23]=E,s[24]=m):m=s[24],s[25]!==l||s[26]!==m||s[27]!==f?(n=(0,g.jsxs)(aB.Flex,{align:"flex-start",gap:3,children:[f,l,m]}),s[25]=l,s[26]=m,s[27]=f,s[28]=n):n=s[28],s[29]!==E||s[30]!==M||s[31]!==y||s[32]!==z?(o=M&&(0,g.jsxs)(aB.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,g.jsx)(aB.Box,{flex:1,marginRight:3*!!y,children:z}),y]}),s[29]=E,s[30]=M,s[31]=y,s[32]=z,s[33]=o):o=s[33],s[34]!==L||s[35]!==J||s[36]!==n||s[37]!==o?(p=(0,g.jsxs)(c$,{direction:"column",gap:3,onClick:L,padding:3,sizing:"border",style:J,children:[n,o]}),s[34]=L,s[35]=J,s[36]=n,s[37]=o,s[38]=p):p=s[38];let Q=!E&&w;return s[39]!==p||s[40]!==Q||s[41]!==O?(q=(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,g.jsxs)(aB.Card,{"data-collapsed":O,tone:"inherit",children:[p,Q]})}),s[39]=p,s[40]=Q,s[41]=O,s[42]=q):q=s[42],s[43]!==v||s[44]!==b||s[45]!==q||s[46]!==N?(r=(0,g.jsx)(aB.LayerProvider,{zOffset:100,children:(0,g.jsx)(cZ,{$border:v,"data-collapsed":N,"data-testid":"pane-header",ref:b,children:q})}),s[43]=v,s[44]=b,s[45]=q,s[46]=N,s[47]=r):r=s[47],r});function c3(a){return a.disabled?{disabledReason:"object"==typeof a.disabled?a.disabled.reason:void 0,ariaLabel:"object"==typeof a.disabled&&"string"==typeof a.disabled?.reason?a.disabled.reason:"This is disabled",isDisabled:!!a.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function c4(a){let b=(0,h.c)(4),{node:c}=a;if("item"===c.type){let a;return b[0]!==c?(a=(0,g.jsx)(c5,{node:c}),b[0]=c,b[1]=a):a=b[1],a}if("group"===c.type){let a;return b[2]!==c?(a=(0,g.jsx)(c7,{node:c}),b[2]=c,b[3]=a):a=b[3],a}return console.warn('unknown menu node (expected `type: "item" | "group"`):',c),null}function c5(a){let b,c,d,e,f,i=(0,h.c)(23),{node:k}=a,{title:l}=(0,j.useI18nText)(k),{t:m}=(0,j.useTranslation)();if(k.intent){let b;return i[0]!==k.intent||i[1]!==a?(b=(0,g.jsx)(c6,{...a,intent:k.intent}),i[0]=k.intent,i[1]=a,i[2]=b):b=i[2],b}i[3]!==k?(b=c3(k),i[3]=k,i[4]=b):b=i[4];let{disabledReason:n,ariaLabel:o,isDisabled:p}=b;i[5]!==o||i[6]!==m||i[7]!==l?(c=o||l||m("status-button.aria-label"),i[5]=o,i[6]=m,i[7]=l,i[8]=c):c=i[8],i[9]!==p||i[10]!==k.hotkey?(d=!p&&k.hotkey?k.hotkey.split("+"):void 0,i[9]=p,i[10]=k.hotkey,i[11]=d):d=i[11];let q=p?n:l;return i[12]!==d||i[13]!==q?(e={hotkeys:d,content:q},i[12]=d,i[13]=q,i[14]=e):e=i[14],i[15]!==p||i[16]!==k.icon||i[17]!==k.onAction||i[18]!==k.selected||i[19]!==k.tone||i[20]!==c||i[21]!==e?(f=(0,g.jsx)(j.StatusButton,{disabled:p,icon:k.icon,onClick:k.onAction,selected:k.selected,tone:k.tone,"aria-label":c,tooltipProps:e}),i[15]=p,i[16]=k.icon,i[17]=k.onAction,i[18]=k.selected,i[19]=k.tone,i[20]=c,i[21]=e,i[22]=f):f=i[22],f}function c6(a){let b,c,d,e,f,i,k,l=(0,h.c)(27),{intent:m,node:n}=a;l[0]!==m.params||l[1]!==m.type?(b={intent:m.type,params:m.params},l[0]=m.params,l[1]=m.type,l[2]=b):b=l[2];let o=(0,aK.useIntentLink)(b),{t:p}=(0,j.useTranslation)();l[3]!==o||l[4]!==n?(c=a=>{o.onClick(a),n.onAction()},l[3]=o,l[4]=n,l[5]=c):c=l[5];let q=c;l[6]!==n?(d=c3(n),l[6]=n,l[7]=d):d=l[7];let{disabledReason:r,ariaLabel:s,isDisabled:t}=d;l[8]!==s||l[9]!==n.title||l[10]!==p?(e=s||n.title||p("status-button.aria-label"),l[8]=s,l[9]=n.title,l[10]=p,l[11]=e):e=l[11],l[12]!==t||l[13]!==n.hotkey?(f=!t&&n.hotkey?n.hotkey.split("+"):void 0,l[12]=t,l[13]=n.hotkey,l[14]=f):f=l[14];let u=t?r:n.title;return l[15]!==f||l[16]!==u?(i={hotkeys:f,content:u,placement:"bottom",portal:!0},l[15]=f,l[16]=u,l[17]=i):i=l[17],l[18]!==q||l[19]!==o.href||l[20]!==t||l[21]!==n.icon||l[22]!==n.selected||l[23]!==n.tone||l[24]!==e||l[25]!==i?(k=(0,g.jsx)(j.StatusButton,{forwardedAs:"a",disabled:t,href:o.href,icon:n.icon,onClick:q,selected:n.selected,tone:n.tone,"aria-label":e,tooltipProps:i}),l[18]=q,l[19]=o.href,l[20]=t,l[21]=n.icon,l[22]=n.selected,l[23]=n.tone,l[24]=e,l[25]=i,l[26]=k):k=l[26],k}function c7(a){let b,c,d,e,f,k=(0,h.c)(16),{node:l}=a,{title:m}=(0,j.useI18nText)(l),o=!!l.disabled,p=l.icon??n.UnknownIcon;k[0]!==l.title?(b={content:l.title,portal:!0},k[0]=l.title,k[1]=b):b=k[1],k[2]!==o||k[3]!==p||k[4]!==b||k[5]!==m?(c=(0,g.jsx)(aA.Button,{disabled:o,icon:p,label:m,mode:"bleed",tooltipProps:b}),k[2]=o,k[3]=p,k[4]=b,k[5]=m,k[6]=c):c=k[6];let q=(0,i.useId)();return k[7]!==l.children||k[8]!==l.disabled?(d=l.children.map((a,b)=>(0,g.jsx)(cP,{disabled:!!l.disabled,isAfterGroup:l.children[b-1]?.type==="group",node:a},a.key)),k[7]=l.children,k[8]=l.disabled,k[9]=d):d=k[9],k[10]!==d?(e=(0,g.jsx)(aB.Menu,{children:d}),k[10]=d,k[11]=e):e=k[11],k[12]!==c||k[13]!==q||k[14]!==e?(f=(0,g.jsx)(aA.MenuButton,{button:c,id:q,menu:e}),k[12]=c,k[13]=q,k[14]=e,k[15]=f):f=k[15],f}let c8=(0,aF.styled)(aB.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,c9=[];function da(a){let b,c,d,e,f,j,k,m,n,o,p,q,r,s,t,u,v,w=(0,h.c)(41);w[0]!==a?({children:b,minWidth:c,onCollapse:d,onExpand:e,...f}=a,w[0]=a,w[1]=b,w[2]=c,w[3]=d,w[4]=e,w[5]=f):(b=w[1],c=w[2],d=w[3],e=w[4],f=w[5]);let[x]=(0,i.useState)(db),[y,z]=(0,i.useState)(null),A=(0,aC.useElementRect)(y)?.width||0,B=void 0!==A&&c?A<c:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(j={expandedElement:null,panes:[],resizing:!1},w[6]=j):j=w[6];let[C,D]=(0,i.useState)(j);w[7]!==x||w[8]!==y?(k=()=>x.setRootElement(y),m=[x,y],w[7]=x,w[8]=y,w[9]=k,w[10]=m):(k=w[9],m=w[10]),(0,i.useEffect)(k,m),w[11]!==x||w[12]!==A?(n=()=>x.setRootWidth(A),o=[x,A],w[11]=x,w[12]=A,w[13]=n,w[14]=o):(n=w[13],o=w[14]),(0,i.useEffect)(n,o),w[15]!==x?(p=()=>x.subscribe(D),q=[x],w[15]=x,w[16]=p,w[17]=q):(p=w[16],q=w[17]),(0,i.useEffect)(p,q),w[18]!==B||w[19]!==d||w[20]!==e?(r=()=>{void 0!==B&&(B&&d&&d(),!B&&e&&e())},s=[B,d,e],w[18]=B,w[19]=d,w[20]=e,w[21]=r,w[22]=s):(r=w[21],s=w[22]),(0,i.useEffect)(r,s),w[23]!==B||w[24]!==x.collapse||w[25]!==x.expand||w[26]!==x.mount||w[27]!==x.resize||w[28]!==C.expandedElement||w[29]!==C.panes||w[30]!==C.resizing?(t={collapse:x.collapse,collapsed:B,expand:x.expand,expandedElement:C.expandedElement,mount:x.mount,panes:C.panes,resize:x.resize,resizing:C.resizing},w[23]=B,w[24]=x.collapse,w[25]=x.expand,w[26]=x.mount,w[27]=x.resize,w[28]=C.expandedElement,w[29]=C.panes,w[30]=C.resizing,w[31]=t):t=w[31];let E=t,F=B?"":void 0,G=C.resizing?"":void 0,H=A?"":void 0;return w[32]!==b||w[33]!==f||w[34]!==F||w[35]!==G||w[36]!==H?(u=(0,g.jsx)(c8,{"data-ui":"PaneLayout",...f,"data-collapsed":F,"data-resizing":G,"data-mounted":H,ref:z,children:b}),w[32]=b,w[33]=f,w[34]=F,w[35]=G,w[36]=H,w[37]=u):u=w[37],w[38]!==E||w[39]!==u?(v=(0,g.jsx)(l.PaneLayoutContext.Provider,{value:E,children:u}),w[38]=E,w[39]=u,w[40]=v):v=w[40],v}function db(){return function(){let a=[],b=[],c=new WeakMap,d=new Set,e={},f=null,g=0,h=null,i=null,j=new Map,k=!1;function l(a){d.delete(a),h=a,m()}return{collapse:function(a){d.add(a),h===a&&(h=null),m()},expand:l,maximize:function(a){i=a,m()},mount:function(a,d){return c.set(a,{...d,original:d}),b.push(a),f&&function(a,b){let c=new WeakMap;for(let d of b)c.set(d,function(a,b){let c=[],d=b;for(;d!==a;){let b=d.parentElement;if(!b)break;let e=Array.from(b.childNodes).indexOf(d);if(c.unshift(e),b===a)break;d=b}return c}(a,d));b.sort((a,b)=>{let d=c.get(a)||c9,e=c.get(b)||c9,f=Math.max(d.length,e.length);for(let a=0;a<f;a+=1){let b=d[a]||-1,c=e[a]||-1;if(b!==c)return b-c}return 0})}(f,b),l(a),()=>{let d=b.indexOf(a);d>-1&&b.splice(d,1),c.delete(a),i===a&&(i=null),m()}},resize:function(a,d,f){let g=b.indexOf(d),h=c.get(d);if(!h)return;let i=b[g+1],l=c.get(i);if(l){if("start"===a&&(k=!0,e.left={element:d,flex:h.flex||1,width:d.offsetWidth},e.right={element:i,flex:l.flex||1,width:i.offsetWidth},m()),"move"===a&&e.left&&e.right){let a,b,c,g,k,n,o,p,q,r,s,t;j=new Map;let{leftW:u,rightW:v,leftFlex:w,rightFlex:x}=(a={flex:e.left.flex+e.right.flex,width:e.left.width+e.right.width},b=h.minWidth??204,c=l.minWidth??204,g=Math.min(h.maxWidth||1/0,a.width-c),k=Math.min(l.maxWidth||1/0,a.width-b),n=b-e.left.width,n<(o=e.right.width-k)&&(n=o),p=e.right.width-c,p>(q=g-e.left.width)&&(p=q),r=Math.min(Math.max(f,n),p),s=e.left.width+r,t=e.right.width-r,{leftFlex:s/a.width*a.flex,leftW:s,rightFlex:t/a.width*a.flex,rightW:t});j.set(d,{flex:w,width:u}),j.set(i,{flex:x,width:v}),m()}if("end"===a){k=!1;let a=j.get(d),b=j.get(i);c.set(d,{...h,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:a?.flex??h.flex}),c.set(i,{...l,currentMinWidth:0,currentMaxWidth:h.maxWidth??1/0,flex:b?.flex??l.flex}),j=new Map,delete e.left,delete e.right,m()}}},setRootElement:function(a){f=a},setRootWidth:function(a){g=a,m()},subscribe:function(b){return a.push(b),()=>{let c=a.push(b);c>-1&&a.splice(c,1)}}};function m(){if(!g)return;let e=[];for(let a of b)a!==h&&e.unshift(a);h&&e.unshift(h);let f=new WeakMap,l=e.length,m=e[0],n=g-(l-1)*51;for(let a of e){let b=c.get(a);if(!b)continue;let e=b.currentMinWidth||b.minWidth||204,g=a===m,h=d.has(a),k=e>n,l=!g&&(h||k),o=j.get(a);f.set(a,{element:a,collapsed:l,currentMinWidth:o?.width??b.currentMinWidth,currentMaxWidth:o?.width??b.currentMaxWidth,flex:o?.flex??b.flex??1,maximized:a===i}),l?n-=51:n-=e-51}let o=[];for(let a of b){let b=f.get(a);b&&o.push(b)}for(let c of a)c({expandedElement:h||b[b.length-1]||null,panes:o,resizing:k})}}()}function dc(a){let b,c,d,e=(0,h.c)(12),{children:f,currentMinWidth:i,flex:j,minWidth:k,paneKey:l,title:m,tone:n}=a,o=void 0===m?"Error":m,p=void 0===n?"critical":n;return e[0]!==o?(b=(0,g.jsx)(c2,{title:o}),e[0]=o,e[1]=b):b=e[1],e[2]!==f?(c=(0,g.jsx)(cM,{overflow:"auto",children:(0,g.jsx)(aB.Box,{paddingX:4,paddingY:5,children:f})}),e[2]=f,e[3]=c):c=e[3],e[4]!==i||e[5]!==j||e[6]!==k||e[7]!==l||e[8]!==b||e[9]!==c||e[10]!==p?(d=(0,g.jsxs)(cJ,{currentMinWidth:i,flex:j,id:l,minWidth:k,tone:p,children:[b,c]}),e[4]=i,e[5]=j,e[6]=k,e[7]=l,e[8]=b,e[9]=c,e[10]=p,e[11]=d):d=e[11],d}function dd(a){let b,c,d,e=(0,h.c)(6),{children:f,ms:j}=a,k=void 0===j?0:j,[l,m]=(0,i.useState)(k<=0);if(e[0]!==k?(b=()=>{if(k<=0)return;let a=setTimeout(()=>m(!0),k);return()=>{clearTimeout(a)}},c=[k],e[0]=k,e[1]=b,e[2]=c):(b=e[1],c=e[2]),(0,i.useEffect)(b,c),!l||!f){let a;return e[3]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(g.Fragment,{}),e[3]=a):a=e[3],a}return e[4]!==f?(d="function"==typeof f?f():f,e[4]=f,e[5]=d):d=e[5],d}function de(a){let b=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(j.isDev){let c=["Check console for errors?","Is your observable/promise resolving?",a.length>0?`Structure path: ${a.join(" ➝ ")}`:""];b.push({ms:1e4,message:c.join(`
`)})}let c=(0,aU.of)(null);return(0,aU.merge)(...b.map(a=>c.pipe((0,aT.mapTo)("messageKey"in a?{messageKey:a.messageKey}:{message:a.message}),(0,aT.delay)(a.ms))))}let df=(0,aF.styled)(aB.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,dg=(0,i.memo)(a=>{let b,c,d,e,f,k,l,m,n,o,p=(0,h.c)(28),{delay:q,flex:r,message:s,minWidth:t,paneKey:u,path:v,selected:w,title:x,tone:z}=a,A=void 0===q?300:q,B=void 0===s?de:s,{t:C}=(0,j.useTranslation)(y);a:{if("function"==typeof B){let a;p[0]!==B||p[1]!==v?(a=B(v?v.split(";"):[]),p[0]=B,p[1]=v,p[2]=a):a=p[2],b=a;break a}b=B}let D=b;p[3]!==D||p[4]!==C?(c=()=>"string"==typeof D?D:C("panes.resolving.default-message"),p[3]=D,p[4]=C,p[5]=c):c=p[5];let[E,F]=(0,i.useState)(c);p[6]!==D||p[7]!==C?(d=()=>{if("object"!=typeof D||"function"!=typeof D.subscribe)return;let a=D.subscribe(a=>{F("messageKey"in a?C(a.messageKey):a.message)});return()=>a.unsubscribe()},e=[D,C],p[6]=D,p[7]=C,p[8]=d,p[9]=e):(d=p[8],e=p[9]),(0,i.useEffect)(d,e);let[G,H]=(0,i.useState)(null),[I,J]=(0,i.useState)(!1);p[10]!==G?(f=()=>{if(G)return(0,aC._raf2)(()=>J(!0))},k=[G],p[10]=G,p[11]=f,p[12]=k):(f=p[11],k=p[12]),(0,i.useEffect)(f,k);let K=I?"":void 0,L=x||E;p[13]!==L?(l=(0,g.jsx)(j.LoadingBlock,{showText:!0,title:L}),p[13]=L,p[14]=l):l=p[14],p[15]!==l||p[16]!==K?(m=(0,g.jsx)(df,{align:"center","data-mounted":K,direction:"column",height:"fill",justify:"center",ref:H,children:l}),p[15]=l,p[16]=K,p[17]=m):m=p[17];let M=m;return p[18]!==M||p[19]!==A?(n=(0,g.jsx)(cM,{children:M}),p[18]=M,p[19]=A,p[20]=n):n=p[20],p[21]!==r||p[22]!==t||p[23]!==u||p[24]!==w||p[25]!==n||p[26]!==z?(o=(0,g.jsx)(cJ,{flex:r,id:u,minWidth:t,selected:w,tone:z,children:n}),p[21]=r,p[22]=t,p[23]=u,p[24]=w,p[25]=n,p[26]=z,p[27]=o):o=p[27],o});function dh(){let a=(0,i.useContext)(l.DocumentPaneContext);if(!a)throw Error("DocumentPane: missing context value");return a}function di(a){let b,c,d=(0,h.c)(8),{children:e,documentId:f,documentType:i}=a;return d[0]!==e||d[1]!==f||d[2]!==i?(b=(0,g.jsx)(dj,{documentId:f,documentType:i,children:e}),d[0]=e,d[1]=f,d[2]=i,d[3]=b):b=d[3],d[4]!==f||d[5]!==i||d[6]!==b?(c=(0,g.jsx)(j.CommentsEnabledProvider,{documentId:f,documentType:i,children:b}),d[4]=f,d[5]=i,d[6]=b,d[7]=c):c=d[7],c}function dj(a){let b,c,d,e,f,k,l=(0,h.c)(26),{children:m,documentId:n,documentType:o}=a,{enabled:p}=(0,j.useCommentsEnabled)(),{connectionState:q,onPathOpen:r,inspector:s,openInspector:t}=dh(),{selectedReleaseId:u}=(0,j.usePerspective)(),{params:v,setParams:w}=d9(),{resolveIntentLink:x}=(0,aK.useRouter)(),y=v?.comment,z=(0,i.useRef)(v);l[0]!==v?(b=()=>{z.current=v},c=[v],l[0]=v,l[1]=b,l[2]=c):(b=l[1],c=l[2]),(0,i.useLayoutEffect)(b,c),l[3]!==n||l[4]!==o||l[5]!==x?(d=a=>{let b=x("edit",{id:n,type:o,inspect:j.COMMENTS_INSPECTOR_NAME,comment:a});return`${window.location.origin}${b}`},l[3]=n,l[4]=o,l[5]=x,l[6]=d):d=l[6];let A=d;l[7]!==w?(e=()=>{w({...z.current,comment:void 0})},l[7]=w,l[8]=e):e=l[8];let B=e;l[9]!==s?.name||l[10]!==t?(f=()=>{s?.name!==j.COMMENTS_INSPECTOR_NAME&&t(j.COMMENTS_INSPECTOR_NAME)},l[9]=s?.name,l[10]=t,l[11]=f):f=l[11];let C=f;if(!p){let a;return l[12]!==m?(a=(0,g.jsx)(g.Fragment,{children:m}),l[12]=m,l[13]=a):a=l[13],a}let D=s?.name===j.COMMENTS_INSPECTOR_NAME,E="connecting"===q;return l[14]!==m||l[15]!==n||l[16]!==o||l[17]!==A||l[18]!==B||l[19]!==C||l[20]!==r||l[21]!==y||l[22]!==u||l[23]!==D||l[24]!==E?(k=(0,g.jsx)(j.CommentsProvider,{documentId:n,documentType:o,getCommentLink:A,isCommentsOpen:D,isConnecting:E,onClearSelectedComment:B,onCommentsOpen:C,onPathOpen:r,selectedCommentId:y,sortOrder:"desc",type:"field",releaseId:u,children:m}),l[14]=m,l[15]=n,l[16]=o,l[17]=A,l[18]=B,l[19]=C,l[20]=r,l[21]=y,l[22]=u,l[23]=D,l[24]=E,l[25]=k):k=l[25],k}function dk(a){let b,c,d,e,f,k,l=(0,h.c)(20),{children:m}=a,{data:n}=(0,j.useActiveReleases)(),{actions:o,editState:p,isInitialValueLoading:q,revisionId:r}=dh(),s=(0,i.useRef)(null);if(l[0]!==n||l[1]!==p?.release){let a;l[3]!==p?.release?(a=a=>a===p?.release,l[3]=p?.release,l[4]=a):a=l[4],b=n.map(dl).find(a),l[0]=n,l[1]=p?.release,l[2]=b}else b=l[2];let t=b;l[5]!==p||l[6]!==q||l[7]!==t||l[8]!==r?(c=p?{...p,release:t,revision:r||void 0,initialValueResolved:!q}:null,l[5]=p,l[6]=q,l[7]=t,l[8]=r,l[9]=c):c=l[9];let u=c;if(!u)return null;l[10]===Symbol.for("react.memo_cache_sentinel")?(d=()=>s.current?.(),l[10]=d):d=l[10],l[11]!==u?(e={...u,onComplete:d},l[11]=u,l[12]=e):e=l[12];let v=o||j.EMPTY_ARRAY;return l[13]!==u||l[14]!==m?(f=a=>{let{states:b}=a;return(0,g.jsx)(dn,{states:b,actionProps:u,children:m})},l[13]=u,l[14]=m,l[15]=f):f=l[15],l[16]!==e||l[17]!==v||l[18]!==f?(k=(0,g.jsx)(j.GetHookCollectionState,{args:e,hooks:v,resetRef:s,children:f}),l[16]=e,l[17]=v,l[18]=f,l[19]=k):k=l[19],k}function dl(a){return(0,j.getReleaseIdFromReleaseDocumentId)(a._id)}dg.displayName="Memo(LoadingPane)";let dm=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function dn(a){let b,c,d,e=(0,h.c)(9),{states:f,children:i,actionProps:k}=a,{t:m}=(0,j.useTranslation)(y);e[0]!==k?(b=(0,j.getDocumentIdForCanvasLink)(k),e[0]=k,e[1]=b):b=e[1];let{isLinked:n}=(0,j.useCanvasCompanionDoc)(b);return e[2]!==n||e[3]!==f||e[4]!==m?(c=n?f.map(a=>a.action&&dm.includes(a.action)?a:{...a,disabled:!0,title:m("action.disabled-by-canvas.tooltip")}):f,e[2]=n,e[3]=f,e[4]=m,e[5]=c):c=e[5],e[6]!==i||e[7]!==c?(d=(0,g.jsx)(l.DocumentActionsStateContext.Provider,{value:c,children:i}),e[6]=i,e[7]=c,e[8]=d):d=e[8],d}function dp(){let a=(0,i.useContext)(l.StructureToolContext);if(!a)throw Error("StructureTool: missing context value");return a}let dq={},dr="inspect:",ds=[{id:"inspectors"},{id:"links"}],dt="sanity/structure/history";function du(a){let b,c,d,e,f,k,l,m,n,o=(0,h.c)(22),{documentId:p,documentType:q,inspectors:r,onMenuItems:s}=a,t=r.length;o[0]!==t?(b=()=>Array.from(Array(t)),o[0]=t,o[1]=b):b=o[1];let[u,v]=(0,i.useState)(b);o[2]!==t||o[3]!==u?(c=()=>{if(u.length!==t){let a=Array.from(Array(t));for(let b=0;b<t;b++)a[b]=u[b];v(a)}},d=[t,u],o[2]=t,o[3]=u,o[4]=c,o[5]=d):(c=o[4],d=o[5]),(0,i.useEffect)(c,d),o[6]===Symbol.for("react.memo_cache_sentinel")?(e=(a,b)=>{v(c=>{let d=[...c];return d[a]=b,d})},o[6]=e):e=o[6];let w=e;if(o[7]!==u||o[8]!==s?(f=()=>{s(u.filter(Boolean))},k=[u,s],o[7]=u,o[8]=s,o[9]=f,o[10]=k):(f=o[9],k=o[10]),(0,i.useEffect)(f,k),o[11]!==p||o[12]!==q||o[13]!==r){let a;o[15]!==p||o[16]!==q?(a=(a,b)=>a.useMenuItem?[function({documentId:a,documentType:b,index:c,setMenuItem:d,useMenuItem:e}){return(0,i.memo)(function(){let f,g,k,l=(0,h.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(f={documentId:a,documentType:b},l[0]=f):f=l[0];let m=e(f),n=(0,j.useUnique)(m);return l[1]!==n?(g=()=>{d(c,n)},k=[n],l[1]=n,l[2]=g,l[3]=k):(g=l[2],k=l[3]),(0,i.useEffect)(g,k),null})}({documentId:p,documentType:q,index:b,setMenuItem:w,useMenuItem:a.useMenuItem}),a.name]:[dw,""],o[15]=p,o[16]=q,o[17]=a):a=o[17],l=r.map(a),o[11]=p,o[12]=q,o[13]=r,o[14]=l}else l=o[14];let x=l;return o[18]!==x?(m=x.map(dv),o[18]=x,o[19]=m):m=o[19],o[20]!==m?(n=(0,g.jsx)(g.Fragment,{children:m}),o[20]=m,o[21]=n):n=o[21],n}function dv(a){let[b,c]=a;return c&&(0,g.jsx)(b,{},c)}function dw(){return null}function dx(){let a,b,c,d,e=(0,h.c)(22),{connectionState:f,schemaType:g,editState:i,isDeleted:k,lastRevisionDocument:l}=dh(),{selectedPerspectiveName:m}=(0,j.usePerspective)(),{t:n}=(0,j.useTranslation)(y);a:{if(k){a=l;break a}if(m&&(0,j.isPublishedPerspective)(m)){a=i?.published;break a}a=i?.version||i?.draft||i?.published}let o=a,p=!!o;b:{if(k&&l&&g)try{let a;e[0]!==l||e[1]!==g?(a=(0,j.prepareForPreview)(l,g),e[0]=l,e[1]=g,e[2]=a):a=e[2],b=a;break b}catch(a){console.warn("Failed to prepare preview for deleted document:",a),b=null;break b}b=null}let q=b,r=p&&!k;e[3]!==o||e[4]!==g||e[5]!==r?(c={enabled:r,schemaType:g,value:o},e[3]=o,e[4]=g,e[5]=r,e[6]=c):c=e[6];let{error:s,value:t}=(0,j.unstable_useValuePreview)(c);if("connecting"===f&&!p){let a;return e[7]===Symbol.for("react.memo_cache_sentinel")?(a={error:void 0,title:void 0},e[7]=a):a=e[7],a}if(k&&q){let a;return e[8]!==q.title?(a={error:void 0,title:q.title},e[8]=q.title,e[9]=a):a=e[9],a}if(!t&&!k){let a,b,c=g?.title||g?.name;return e[10]!==n||e[11]!==c?(a=n("panes.document-header-title.new.text",{schemaType:c}),e[10]=n,e[11]=c,e[12]=a):a=e[12],e[13]!==a?(b={error:void 0,title:a},e[13]=a,e[14]=b):b=e[14],b}if(s){let a,b;return e[15]!==s.message||e[16]!==n?(a=n("panes.document-list-pane.error.text",{error:s.message}),e[15]=s.message,e[16]=n,e[17]=a):a=e[17],e[18]!==a?(b={error:a,title:void 0},e[18]=a,e[19]=b):b=e[19],b}let u=t?.title;return e[20]!==u?(d={error:void 0,title:u},e[20]=u,e[21]=d):d=e[21],d}du.displayName="DocumentInspectorMenuItemsResolver";let dy=["patch","commit"],dz=(0,i.memo)(function(){let a,b,c,d,e,f=(0,h.c)(13),{push:k}=(0,aC.useToast)(),{documentId:l,documentType:m,value:n}=dh(),o=dx(),p=o.error,q=(0,j.useDocumentOperationEvent)(l,m),r=(0,i.useRef)(q),s=d9(),{t}=(0,j.useTranslation)(y),{handleOpenDialog:u}=(0,j.useDocumentLimitsUpsellContext)();a:{if(!o.title&&!p&&!dy.includes(q?.op)&&"string"==typeof n.title&&q?.type==="success"){a=n.title;break a}a=o.title}let v=a;f[0]!==t||f[1]!==v?(b=v||t("panes.document-operation-results.operation-undefined-title"),f[0]=t,f[1]=v,f[2]=b):b=f[2];let w=b;f[3]!==w?(c=w.length>25?`${w.slice(0,25)}...`:w,f[3]=w,f[4]=c):c=f[4];let x=c;return f[5]!==x||f[6]!==q||f[7]!==u||f[8]!==s||f[9]!==k||f[10]!==t?(d=()=>{let a;if(q&&q!==r.current){if("error"===q.type){if((0,j.isDocumentLimitError)(q.error))return void u("document_action");k({closable:!0,duration:3e4,status:"error",title:t("panes.document-operation-results.operation-error",{context:q.op}),description:(0,g.jsxs)("details",{children:[(0,g.jsx)("summary",{children:t("panes.document-operation-results.error.summary.title")}),q.error.message]})})}return"success"!==q.type||dy.includes(q.op)||k({closable:!0,status:"success",title:(0,g.jsx)(j.Translate,{context:q.op,i18nKey:"panes.document-operation-results.operation-success",t,values:{op:q.op,title:x},components:{Strong:"strong"}})}),"success"===q.type&&"delete"===q.op&&(a=setTimeout(()=>s.closeCurrentAndAfter(),0)),r.current=q,()=>clearTimeout(a)}},e=[q,s,k,t,x,u],f[5]=x,f[6]=q,f[7]=u,f[8]=s,f[9]=k,f[10]=t,f[11]=d,f[12]=e):(d=f[11],e=f[12]),(0,i.useEffect)(d,e),null}),dA=(0,aF.styled)(aB.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function dB(a){let b,c,d,e,f,i,k,l,m,o,p,q,r=(0,h.c)(25);r[0]!==a?({as:d,children:b,closeButtonLabel:c,onClose:e,title:i,...f}=a,r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=f,r[6]=i):(b=r[1],c=r[2],d=r[3],e=r[4],f=r[5],i=r[6]);let{t:s}=(0,j.useTranslation)(y);return r[7]!==i?(k=(0,g.jsx)(aB.Box,{flex:1,padding:3,children:(0,g.jsx)(aB.Text,{as:"h1",size:1,weight:"medium",children:i})}),r[7]=i,r[8]=k):k=r[8],r[9]!==s?(l=s("document-inspector.close-button.tooltip"),r[9]=s,r[10]=l):l=r[10],r[11]!==l?(m={content:l},r[11]=l,r[12]=m):m=r[12],r[13]!==c||r[14]!==e||r[15]!==m?(o=(0,g.jsx)(aB.Box,{flex:"none",padding:1,children:(0,g.jsx)(aA.Button,{"aria-label":c,icon:n.CloseIcon,mode:"bleed",onClick:e,tooltipProps:m})}),r[13]=c,r[14]=e,r[15]=m,r[16]=o):o=r[16],r[17]!==k||r[18]!==o?(p=(0,g.jsxs)(aB.Flex,{padding:2,children:[k,o]}),r[17]=k,r[18]=o,r[19]=p):p=r[19],r[20]!==b||r[21]!==d||r[22]!==f||r[23]!==p?(q=(0,g.jsxs)(dA,{...f,as:d,children:[p,b]}),r[20]=b,r[21]=d,r[22]=f,r[23]=p,r[24]=q):q=r[24],q}function dC(a){let b,c,d,e=(0,h.c)(14),{documentId:f,documentType:i,flex:k}=a,{collapsed:l}=cL(),{closeInspector:m,inspector:n}=dh(),{features:o}=dp();e[0]!==m||e[1]!==n?(b=()=>{n&&m(n.name)},e[0]=m,e[1]=n,e[2]=b):b=e[2];let p=b;if(l||!n)return null;let q=n.component;e[3]!==q||e[4]!==f||e[5]!==i||e[6]!==p?(c=(0,g.jsx)(q,{onClose:p,documentId:f,documentType:i}),e[3]=q,e[4]=f,e[5]=i,e[6]=p,e[7]=c):c=e[7];let r=c;if(o.resizablePanes){let a;return e[8]!==r||e[9]!==k?(a=(0,g.jsx)(j.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,resizerPosition:"left",maxWidth:540,minWidth:320,children:r}),e[8]=r,e[9]=k,e[10]=a):a=e[10],a}return e[11]!==r||e[12]!==k?(d=(0,g.jsx)(aB.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:k,children:r}),e[11]=r,e[12]=k,e[13]=d):d=e[13],d}function dD(a,b,c){let d,e,f,g,i=(0,h.c)(16),k=(0,j.useKeyValueStore)();i[0]!==b||i[1]!==a?(d=["studio.structure-tool",a,b].filter(Boolean),i[0]=b,i[1]=a,i[2]=d):d=i[2];let l=d.join(".");if(i[3]!==c||i[4]!==k||i[5]!==l){let a;i[7]!==c?(a=a=>null===a?c:a,i[7]=c,i[8]=a):a=i[8],e=k.getKey(l).pipe((0,aT.map)(a)),i[3]=c,i[4]=k,i[5]=l,i[6]=e}else e=i[6];let m=(0,aJ.useObservable)(e,c);i[9]!==k||i[10]!==l||i[11]!==m?(f=async a=>{a!==m&&await k.setKey(l,a)},i[9]=k,i[10]=l,i[11]=m,i[12]=f):f=i[12];let n=f;return i[13]!==n||i[14]!==m?(g=[m,n],i[13]=n,i[14]=m,i[15]=g):g=i[15],g}let dE={id:"parsed",title:"document-inspector.view-mode.parsed"},dF={id:"raw",title:"document-inspector.view-mode.raw-json"},dG=[dE,dF],dH=new bo.default({maxSize:1e3});function dI(a){let{path:b}=a,c=dH.get(b);void 0!==c&&dH.set(b,!c)}function dJ(a){let b=window.getSelection();if(b){let c=document.createRange();b.removeAllRanges(),c.selectNodeContents(a),b.addRange(c)}}function dK(a){dJ(a.target)}function dL(a){65===a.keyCode&&(a.metaKey||a.ctrlKey)&&(a.preventDefault(),dJ(a.currentTarget))}let dM=aF.styled.div(({theme:a})=>{let{color:b,fonts:c,space:d}=a.sanity;return aF.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${c.code.family};
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,aB.rem)(d[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,aB.rem)(d[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,aB.rem)(d[4])} + 3px);
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${c.code.sizes[1].fontSize}px;
      line-height: ${c.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,aB.rem)(d[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${b.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${b.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,aB.rem)(d[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${b.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${b.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${b.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function dN(a){let b,c,d,e=(0,h.c)(8),{onChange:f,query:i}=a;e[0]!==f?(b=a=>f(a.target.value),e[0]=f,e[1]=b):b=e[1];let k=b,{t:l}=(0,j.useTranslation)(y);e[2]!==l?(c=l("document-inspector.search.placeholder"),e[2]=l,e[3]=c):c=e[3];let m=i||"";return e[4]!==k||e[5]!==c||e[6]!==m?(d=(0,g.jsx)(aB.TextInput,{icon:n.SearchIcon,onChange:k,placeholder:c,radius:2,value:m}),e[4]=k,e[5]=c,e[6]=m,e[7]=d):d=e[7],d}function dO(a){let b,c,d,e,f,i,k,l,m,n,o,p,q,r,s,t,u=(0,h.c)(49),{value:v}=a,{onInspectClose:w,paneKey:x}=dh(),z=`${x}_inspect_`,[A,B]=dD("inspect-view-mode",null,"parsed");u[0]!==A?(b=dG.find(a=>a.id===A),u[0]=A,u[1]=b):b=u[1];let C=b;u[2]!==B?(c=async()=>{await B(dE.id)},u[2]=B,u[3]=c):c=u[3];let D=c;u[4]!==B?(d=async()=>{await B(dF.id)},u[4]=B,u[5]=d):d=u[5];let E=d,{t:F}=(0,j.useTranslation)(y),G=`${z}dialog`;u[6]!==F||u[7]!==v?(e=(0,j.isRecord)(v)&&(0,j.isString)(v._id)&&(0,j.isString)(v._type)?(0,g.jsx)(j.Translate,{t:F,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,g.jsx)("em",{children:(0,g.jsx)(hm,{document:v})})}}):(0,g.jsx)("em",{children:F("document-inspector.dialog.title-no-value")}),u[6]=F,u[7]=v,u[8]=e):e=u[8],u[9]===Symbol.for("react.memo_cache_sentinel")?(f={position:"sticky",bottom:0,zIndex:3},u[9]=f):f=u[9];let H=`${z}tabpanel`,I=`${z}tab-${dE.id}`;u[10]!==F?(i=F(dE.title),u[10]=F,u[11]=i):i=u[11];let J=C===dE;u[12]!==D||u[13]!==H||u[14]!==I||u[15]!==i||u[16]!==J?(k=(0,g.jsx)(aA.Tab,{"aria-controls":H,id:I,label:i,onClick:D,selected:J}),u[12]=D,u[13]=H,u[14]=I,u[15]=i,u[16]=J,u[17]=k):k=u[17];let K=`${z}tabpanel`,L=`${z}tab-${dF.id}`;u[18]!==F?(l=F(dF.title),u[18]=F,u[19]=l):l=u[19];let M=C===dF;u[20]!==E||u[21]!==K||u[22]!==L||u[23]!==l||u[24]!==M?(m=(0,g.jsx)(aA.Tab,{"aria-controls":K,id:L,label:l,onClick:E,selected:M}),u[20]=E,u[21]=K,u[22]=L,u[23]=l,u[24]=M,u[25]=m):m=u[25],u[26]!==k||u[27]!==m?(n=(0,g.jsx)(aB.Card,{padding:3,paddingTop:0,shadow:1,style:f,children:(0,g.jsxs)(aB.TabList,{space:1,children:[k,m]})}),u[26]=k,u[27]=m,u[28]=n):n=u[28];let N=`${z}tab-${A}`,O=`${z}tabpanel`;return u[29]===Symbol.for("react.memo_cache_sentinel")?(o={outline:"none"},u[29]=o):o=u[29],u[30]!==v||u[31]!==C?(p=C===dE&&(0,g.jsx)(dM,{children:(0,g.jsx)(bn,{data:v,isExpanded:function a(b,c){let d=dH.get(b);return void 0===d?(dH.set(b,Array.isArray(c)||(0,j.isRecord)(c)),a(b,c)):d},onClick:dI,search:dN,filterOptions:{ignoreCase:!0}})}),u[30]=v,u[31]=C,u[32]=p):p=u[32],u[33]!==v||u[34]!==C?(q=C===dF&&(0,g.jsx)(aB.Code,{language:"json",tabIndex:0,onKeyDown:dL,onDoubleClick:dK,size:1,children:JSON.stringify(v,null,2)}),u[33]=v,u[34]=C,u[35]=q):q=u[35],u[36]!==N||u[37]!==O||u[38]!==p||u[39]!==q?(r=(0,g.jsxs)(aC.TabPanel,{"aria-labelledby":N,flex:1,id:O,overflow:"auto",padding:4,style:o,children:[p,q]}),u[36]=N,u[37]=O,u[38]=p,u[39]=q,u[40]=r):r=u[40],u[41]!==n||u[42]!==r?(s=(0,g.jsxs)(aB.Flex,{direction:"column",height:"fill",children:[n,r]}),u[41]=n,u[42]=r,u[43]=s):s=u[43],u[44]!==w||u[45]!==s||u[46]!==G||u[47]!==e?(t=(0,g.jsx)(aA.Dialog,{bodyHeight:"fill",id:G,header:e,onClose:w,onClickOutside:w,padding:!1,width:2,children:s}),u[44]=w,u[45]=s,u[46]=G,u[47]=e,u[48]=t):t=u[48],t}function dP(a){let b,c,d,e,f,i,j,k,l,m,n,o=(0,h.c)(22);o[0]!==a?({action:c,content:d,icon:b,tone:f,paddingY:i,...e}=a,o[0]=a,o[1]=b,o[2]=c,o[3]=d,o[4]=e,o[5]=f,o[6]=i):(b=o[1],c=o[2],d=o[3],e=o[4],f=o[5],i=o[6]);let p=void 0===f?"transparent":f,q=void 0===i?2:i;return o[7]!==b?(j=b&&(0,g.jsx)(aB.Text,{size:0,children:(0,g.jsx)(b,{})}),o[7]=b,o[8]=j):j=o[8],o[9]!==d?(k=(0,g.jsx)(aB.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:d}),o[9]=d,o[10]=k):k=o[10],o[11]!==c?(l=c&&(0,g.jsx)(aA.Button,{...c,mode:c.mode||"ghost",tone:c.tone||"default"}),o[11]=c,o[12]=l):l=o[12],o[13]!==j||o[14]!==k||o[15]!==l?(m=(0,g.jsxs)(aB.Flex,{align:"center",gap:3,paddingX:2,children:[j,k,l]}),o[13]=j,o[14]=k,o[15]=l,o[16]=m):m=o[16],o[17]!==q||o[18]!==e||o[19]!==m||o[20]!==p?(n=(0,g.jsx)(aB.Box,{padding:1,children:(0,g.jsx)(aB.Card,{radius:3,paddingX:2,paddingY:q,tone:p,...e,children:m})}),o[17]=q,o[18]=e,o[19]=m,o[20]=p,o[21]=n):n=o[21],n}function dQ(){let a=(0,h.c)(3),{isDeleted:b,isDeleting:c,ready:d}=dh(),{selectedPerspective:e}=(0,j.usePerspective)();if(!d)return null;if(!(0,j.isPublishedPerspective)(e)&&!(0,j.isDraftPerspective)(e)&&(0,j.isReleaseDocument)(e)&&"archived"===e.state){let b;return a[0]!==e?(b=(0,g.jsx)(dS,{release:e}),a[0]=e,a[1]=b):b=a[1],b}if(b&&!c){let b;return a[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(dR,{}),a[2]=b):b=a[2],b}}function dR(){let a,b,c,d,e,f,i=(0,h.c)(17),{documentId:k,documentType:l}=dh(),{restore:m}=(0,j.useDocumentOperation)(k,l),{navigateIntent:o}=(0,aK.useRouter)();i[0]!==k||i[1]!==l||i[2]!==o||i[3]!==m?(a=()=>{m.execute("lastRevision"),o("edit",{id:k,type:l})},i[0]=k,i[1]=l,i[2]=o,i[3]=m,i[4]=a):a=i[4];let p=a,{t:q}=(0,j.useTranslation)(y);return i[5]!==q?(b=q("banners.deleted-document-banner.restore-button.text"),i[5]=q,i[6]=b):b=i[6],i[7]!==p||i[8]!==b?(c={onClick:p,text:b},i[7]=p,i[8]=b,i[9]=c):c=i[9],i[10]!==q?(d=q("banners.deleted-document-banner.text"),i[10]=q,i[11]=d):d=i[11],i[12]!==d?(e=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:d}),i[12]=d,i[13]=e):e=i[13],i[14]!==c||i[15]!==e?(f=(0,g.jsx)(dP,{action:c,content:e,"data-testid":"deleted-document-banner",icon:n.ReadOnlyIcon}),i[14]=c,i[15]=e,i[16]=f):f=i[16],f}let dS=a=>{let b,c,d,e=(0,h.c)(8),{release:f}=a,{t:i}=(0,j.useTranslation)();return e[0]!==f.metadata?.title||e[1]!==i?(b=f.metadata?.title||i("release.placeholder-untitled-release"),e[0]=f.metadata?.title,e[1]=i,e[2]=b):b=e[2],e[3]!==b?(c={title:b},e[3]=b,e[4]=c):c=e[4],e[5]!==i||e[6]!==c?(d=(0,g.jsx)(dP,{tone:"caution",content:(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:(0,g.jsx)(j.Translate,{t:i,i18nKey:"banners.deleted-release-banner.text",values:c})}),"data-testid":"deleted-release-banner",icon:n.DocumentRemoveIcon}),e[5]=i,e[6]=c,e[7]=d):d=e[7],d};function dT(){let a,b,c=(0,h.c)(5),{schemaType:d}=dh(),{t:e}=(0,j.useTranslation)(y);return(0,aD.isDeprecatedSchemaType)(d)?(c[0]!==e?(a=(0,g.jsx)(j.Translate,{t:e,i18nKey:"banners.deprecated-document-type-banner.text"}),c[0]=e,c[1]=a):a=c[1],c[2]!==d.deprecated.reason||c[3]!==a?(b=(0,g.jsx)(dP,{content:(0,g.jsxs)(aB.Text,{size:1,weight:"medium",children:[a," ",d.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:n.ErrorOutlineIcon}),c[2]=d.deprecated.reason,c[3]=a,c[4]=b):b=c[4],b):null}let dU=(0,aY.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),dV=(0,aY.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),dW=(0,aF.styled)(aB.Box)`
  box-sizing: border-box;
`;function dX(a){let b,c,d,e,f,k,l,m,n,o,p,q,r,s,t,u=(0,h.c)(56),{onClose:v,onRequestSubmitted:w}=a,{t:x}=(0,j.useTranslation)(y),z=(0,aX.useTelemetry)(),A=`request-permissions-${(0,i.useId)()}`,B=(0,j.useProjectId)();u[0]===Symbol.for("react.memo_cache_sentinel")?(b={apiVersion:"2024-09-26"},u[0]=b):b=u[0];let C=(0,j.useClient)(b),D=(0,aC.useToast)(),E=(0,j.useZIndex)(),[F,G]=(0,i.useState)(!1),[H,I]=(0,i.useState)(""),[J,K]=(0,i.useState)(),[L,M]=(0,i.useState)(!1),[N,O]=(0,i.useState)(!1);a:{let a,b="administrator";if(!B||!C){let a;u[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aU.of)(b),u[1]=a):a=u[1],c=a;break a}if(u[2]!==C.observable||u[3]!==B){let c,d;u[5]===Symbol.for("react.memo_cache_sentinel")?(c=a=>a.filter(dZ).find(dY)?"editor":b,u[5]=c):c=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(0,aU.of)(b),u[6]=d):d=u[6],a=C.observable.request({url:`/projects/${B}/roles`}).pipe((0,aU.map)(c),(0,aU.startWith)(b),(0,aU.catchError)(d)),u[2]=C.observable,u[3]=B,u[4]=a}else a=u[4];c=a}let P=(0,aJ.useObservable)(c);u[7]!==C||u[8]!==H||u[9]!==w||u[10]!==B||u[11]!==P||u[12]!==z||u[13]!==D?(d=()=>{G(!0),C.request({url:`/access/project/${B}/requests`,method:"post",body:{note:H,requestUrl:window?.location.href,requestedRole:P,type:"role"}}).then(a=>{a&&(w&&w(),z.log(dV),D.push({title:"Edit access requested"}))}).catch(a=>{let b=a?.response?.statusCode,c=a?.response?.body?.message;429===b&&(M(!0),K(c)),409===b?(O(!0),K(c)):D.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{G(!1)})},u[7]=C,u[8]=H,u[9]=w,u[10]=B,u[11]=P,u[12]=z,u[13]=D,u[14]=d):d=u[14];let Q=d,R=E.fullscreen;u[15]!==x?(e=x("request-permission-dialog.header.text"),u[15]=x,u[16]=e):e=u[16],u[17]!==x?(f=x("confirm-dialog.cancel-button.fallback-text"),u[17]=x,u[18]=f):f=u[18],u[19]!==v||u[20]!==f?(k={onClick:v,text:f},u[19]=v,u[20]=f,u[21]=k):k=u[21];let S=L||N;return u[22]!==x?(l=x("request-permission-dialog.confirm-button.text"),u[22]=x,u[23]=l):l=u[23],u[24]!==F||u[25]!==Q||u[26]!==S||u[27]!==l?(m={onClick:Q,loading:F,disabled:S,text:l,tone:"primary",type:"submit"},u[24]=F,u[25]=Q,u[26]=S,u[27]=l,u[28]=m):m=u[28],u[29]!==m||u[30]!==k?(n={cancelButton:k,confirmButton:m},u[29]=m,u[30]=k,u[31]=n):n=u[31],u[32]!==x?(o=x("request-permission-dialog.description.text"),u[32]=x,u[33]=o):o=u[33],u[34]!==o?(p=(0,g.jsx)(aB.Text,{children:o}),u[34]=o,u[35]=p):p=u[35],u[36]!==N||u[37]!==L||u[38]!==F||u[39]!==J||u[40]!==H||u[41]!==Q||u[42]!==x?(q=L||N?(0,g.jsx)(aB.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,g.jsxs)(aB.Text,{size:1,children:[L&&(0,g.jsx)(g.Fragment,{children:J??x("request-permission-dialog.warning.limit-reached.text")}),N&&(0,g.jsx)(g.Fragment,{children:J??x("request-permission-dialog.warning.denied.text")})]})}):(0,g.jsxs)(aB.Stack,{space:3,paddingBottom:0,children:[(0,g.jsx)(aB.TextInput,{placeholder:x("request-permission-dialog.note-input.placeholder.text"),disabled:F,onKeyDown:a=>{"Enter"===a.key&&Q()},maxLength:150,value:H,onChange:a=>{I(a.currentTarget.value)}}),(0,g.jsx)(aB.Text,{align:"right",muted:!0,size:1,children:`${H.length}/150`})]}),u[36]=N,u[37]=L,u[38]=F,u[39]=J,u[40]=H,u[41]=Q,u[42]=x,u[43]=q):q=u[43],u[44]!==p||u[45]!==q?(r=(0,g.jsx)(dW,{children:(0,g.jsxs)(aB.Stack,{space:4,children:[p,q]})}),u[44]=p,u[45]=q,u[46]=r):r=u[46],u[47]!==A||u[48]!==v||u[49]!==n||u[50]!==r||u[51]!==e?(s=(0,g.jsx)(aA.Dialog,{width:1,id:A,header:e,footer:n,onClose:v,onClickOutside:v,children:r}),u[47]=A,u[48]=v,u[49]=n,u[50]=r,u[51]=e,u[52]=s):s=u[52],u[53]!==s||u[54]!==E.fullscreen?(t=(0,g.jsx)(aC.DialogProvider,{position:"fixed",zOffset:R,children:s}),u[53]=s,u[54]=E.fullscreen,u[55]=t):t=u[55],t}function dY(a){return"editor"===a.name}function dZ(a){return a?.appliesToUsers}(0,aF.styled)(aB.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let d$={loading:!0,error:!1,status:void 0},d_={loading:!1,error:!1,status:"none"},d0={loading:!1,error:!1,status:"declined"},d1={loading:!1,error:!1,status:"pending"},d2={loading:!1,error:!1,status:"expired"};function d3(a){let b,c,d,e,f,k,l,m,o=(0,h.c)(29),{requiredPermission:p}=a,q=(0,j.useCurrentUser)(),{data:r,loading:s,error:t}=(()=>{let a,b,c,d=(0,h.c)(9);d[0]===Symbol.for("react.memo_cache_sentinel")?(a={apiVersion:"2024-07-01"},d[0]=a):a=d[0];let e=(0,j.useClient)(a),f=(0,j.useProjectId)();a:{var g,i;let a;if(!e||!f){let a;d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aU.of)(d_),d[1]=a):a=d[1],b=a;break a}d[2]!==e||d[3]!==f?(g=e,i=f,a=g.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,aT.map)(a=>{if(!a||0===a.length)return d_;let b=a.filter(a=>a.resourceId===i&&"role"===a.type),c=b.find(a=>"declined"===a.status);return c&&(0,bp.isAfter)((0,bq.addWeeks)(new Date(c.createdAt),2),new Date)?d0:b.find(a=>"pending"===a.status&&(0,bp.isAfter)((0,bq.addWeeks)(new Date(a.createdAt),2),new Date))?d1:b.find(a=>"pending"===a.status&&(0,br.isBefore)((0,bq.addWeeks)(new Date(a.createdAt),2),new Date))?d2:d_}),(0,aT.catchError)(a=>(console.error("Failed to fetch access requests",a),(0,aU.of)({loading:!1,error:!0,status:void 0}))),(0,aT.startWith)(d$)),d[2]=e,d[3]=f,d[4]=a):a=d[4],b=a}let k=b,{loading:l,error:m,status:n}=(0,aJ.useObservable)(k,d$);return d[5]!==m||d[6]!==l||d[7]!==n?(c={data:n,loading:l,error:m},d[5]=m,d[6]=l,d[7]=n,d[8]=c):c=d[8],c})(),[u,v]=(0,i.useState)(!1),w="pending"===r||"declined"===r||u,x=q?.roles||[],z=1===x.length&&"viewer"===x[0].name,[A,B]=(0,i.useState)(!1);o[0]===Symbol.for("react.memo_cache_sentinel")?(b={style:"short"},o[0]=b):b=o[0];let C=(0,j.useListFormat)(b),{t:D}=(0,j.useTranslation)(y),E=(0,aX.useTelemetry)(),F=x.map(d5),G=C.formatToParts(F).map(d4);return o[1]!==G?(c={Roles:()=>(0,g.jsx)(g.Fragment,{children:G})},o[1]=G,o[2]=c):c=o[2],o[3]!==F||o[4]!==G.length?(d={count:G.length,roles:F},o[3]=F,o[4]=G.length,o[5]=d):d=o[5],o[6]!==p||o[7]!==D||o[8]!==c||o[9]!==d?(e=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:(0,g.jsx)(j.Translate,{t:D,i18nKey:"banners.permission-check-banner.missing-permission",components:c,values:d,context:p})}),o[6]=p,o[7]=D,o[8]=c,o[9]=d,o[10]=e):e=o[10],o[11]!==z||o[12]!==w||o[13]!==t||o[14]!==s||o[15]!==r||o[16]!==B||o[17]!==D||o[18]!==E?(f=z&&r&&!t&&!s?{onClick:w?void 0:()=>{B(!0),E.log(dU)},text:D(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,o[11]=z,o[12]=w,o[13]=t,o[14]=s,o[15]=r,o[16]=B,o[17]=D,o[18]=E,o[19]=f):f=o[19],o[20]!==e||o[21]!==f?(k=(0,g.jsx)(dP,{content:e,action:f,"data-testid":"permission-check-banner",icon:n.ReadOnlyIcon}),o[20]=e,o[21]=f,o[22]=k):k=o[22],o[23]!==B||o[24]!==A?(l=A&&(0,g.jsx)(dX,{onClose:()=>B(!1),onRequestSubmitted:()=>{v(!0),B(!1)}}),o[23]=B,o[24]=A,o[25]=l):l=o[25],o[26]!==k||o[27]!==l?(m=(0,g.jsxs)(g.Fragment,{children:[k,l]}),o[26]=k,o[27]=l,o[28]=m):m=o[28],m}function d4(a){return"element"===a.type?(0,g.jsx)("code",{children:a.value},a.value):a.value}function d5(a){return a.title}let d6=(0,i.memo)(()=>{let a,b,c,d,e,f,i,l,m=(0,h.c)(30),o=(0,j.useDocumentPreviewStore)(),{selectedPerspectiveName:p}=(0,j.usePerspective)(),{params:q,groupIndex:r,routerPanesState:s,replaceCurrent:t,BackLink:u}=d9(),v=s[r]?.[0].id,w=s[r-1]?.[0],x=w?.id,z=!!w?.params?.rev;m[0]!==q?(a=q?.parentRefPath&&(0,aV.fromString)(q.parentRefPath)||null,m[0]=q,m[1]=a):a=m[1];let A=a,{t:B}=(0,j.useTranslation)(y);a:{let a,c=A?.[0];if(!x||!c||!A){let a;m[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aU.of)({loading:!1}),m[2]=a):a=m[2],b=a;break a}if(m[3]!==o||m[4]!==x||m[5]!==A||m[6]!==c||m[7]!==p){let b,d=(0,k.getPublishedId)(x),e=(0,aV.fromString)(c),f=e.findIndex(d7);m[9]!==A?(b=a=>{let{draft:b,published:c,version:d}=a;return{loading:!1,result:{availability:{draft:b.availability,published:c.availability,...d?.availability?{version:d.availability}:{}},refValue:(0,aV.get)(d?.snapshot||b.snapshot||c.snapshot,A)?._ref}}},m[9]=A,m[10]=b):b=m[10],a=(0,aU.concat)((0,aU.of)({loading:!0}),o.unstable_observePathsDocumentPair(d,-1===f?e:e.slice(0,f),{version:p}).pipe((0,aT.debounceTime)(750),(0,aT.map)(b))),m[3]=o,m[4]=x,m[5]=A,m[6]=c,m[7]=p,m[8]=a}else a=m[8];b=a}let C=b;m[11]===Symbol.for("react.memo_cache_sentinel")?(c={loading:!0},m[11]=c):c=m[11];let D=(0,aJ.useObservable)(C,c);m[12]!==q||m[13]!==D.loading||m[14]!==D.result||m[15]!==t?(d=()=>{D.loading||D.result?.refValue&&t({id:D.result.refValue,params:q})},m[12]=q,m[13]=D.loading,m[14]=D.result,m[15]=t,m[16]=d):d=m[16];let E=d;return x&&A&&!z&&!D.loading&&(D.result?.availability.draft.available||D.result?.availability.published.available)&&D.result?.refValue!==v?(m[17]!==u||m[18]!==E||m[19]!==D.result?.refValue||m[20]!==B?(e=D.result?.refValue?{onClick:E,icon:n.SyncIcon,text:B("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:u,icon:n.CloseIcon,text:B("banners.reference-changed-banner.reason-removed.close-button.text")},m[17]=u,m[18]=E,m[19]=D.result?.refValue,m[20]=B,m[21]=e):e=m[21],m[22]!==D.result?.refValue||m[23]!==B?(f=B(D.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),m[22]=D.result?.refValue,m[23]=B,m[24]=f):f=m[24],m[25]!==f?(i=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:f}),m[25]=f,m[26]=i):i=m[26],m[27]!==e||m[28]!==i?(l=(0,g.jsx)(dP,{action:e,"data-testid":"reference-changed-banner",content:i,icon:n.WarningOutlineIcon,tone:"caution"}),m[27]=e,m[28]=i,m[29]=l):l=m[29],l):null});function d7(a){return"object"==typeof a&&"_key"in a}function d8(){let a,b=(0,h.c)(2),{t:c}=(0,j.useTranslation)(y);return b[0]!==c?(a=(0,g.jsx)(dP,{tone:"caution",icon:n.WarningOutlineIcon,content:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:c,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),b[0]=c,b[1]=a):a=b[1],a}function d9(){return(0,i.useContext)(l.PaneRouterContext)}function ea(){let a,b,c,d,e,f,i,k,l,m,n=(0,h.c)(28),{t:o}=(0,j.useTranslation)(y),{t:p}=(0,j.useTranslation)(),{data:q}=(0,j.useArchivedReleases)(),{params:r,setParams:s}=d9();n[0]!==r||n[1]!==s?(a=()=>{s({...r,rev:r?.historyEvent||void 0,since:void 0,historyVersion:void 0})},n[0]=r,n[1]=s,n[2]=a):a=n[2];let t=a;if(n[3]!==q||n[4]!==r?.historyVersion){let a;n[6]!==r?.historyVersion?(a=a=>(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===r?.historyVersion,n[6]=r?.historyVersion,n[7]=a):a=n[7],b=q.find(a),n[3]=q,n[4]=r?.historyVersion,n[5]=b}else b=n[5];let u=b;a:{if(u?.state==="published"){c="banners.published-release.description";break a}if(u&&(0,j.isCardinalityOneRelease)(u)){c="banners.archived-scheduled-draft.description";break a}c="banners.archived-release.description"}let v=c;n[8]!==u?.metadata.title||n[9]!==p?(d=u?.metadata.title||p("release.placeholder-untitled-release"),n[8]=u?.metadata.title,n[9]=p,n[10]=d):d=n[10];let w=d;return n[11]!==w?(e={title:w},n[11]=w,n[12]=e):e=n[12],n[13]!==u?(f=(0,j.getVersionInlineBadge)(u),n[13]=u,n[14]=f):f=n[14],n[15]!==f?(i={VersionBadge:f},n[15]=f,n[16]=i):i=n[16],n[17]!==v||n[18]!==o||n[19]!==e||n[20]!==i?(k=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:o,i18nKey:v,values:e,components:i})}),n[17]=v,n[18]=o,n[19]=e,n[20]=i,n[21]=k):k=n[21],n[22]!==t||n[23]!==r?.archivedRelease?(l=r?.archivedRelease?void 0:{text:"Go back to published version",onClick:t},n[22]=t,n[23]=r?.archivedRelease,n[24]=l):l=n[24],n[25]!==k||n[26]!==l?(m=(0,g.jsx)(dP,{tone:"caution",content:k,action:l}),n[25]=k,n[26]=l,n[27]=m):m=n[27],m}d6.displayName="Memo(ReferenceChangedBanner)";let eb=aF.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,ec=a=>{let b,c,d,e,f,k,l,m,o,p,q,r,s=(0,h.c)(24),{onClose:t,isLockedByCanvas:u}=a,{t:v}=(0,j.useTranslation)(y),w=(0,i.useRef)(null);s[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>[w.current],s[0]=b):b=s[0],(0,aB.useClickOutsideEvent)(t,b),s[1]!==u||s[2]!==v?(c=v(u?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),s[1]=u,s[2]=v,s[3]=c):c=s[3];let x=c;s[4]!==u||s[5]!==v?(d=v(u?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),s[4]=u,s[5]=v,s[6]=d):d=s[6];let z=d;return s[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(eb,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),s[7]=e):e=s[7],s[8]===Symbol.for("react.memo_cache_sentinel")?(f=(0,g.jsx)(aB.Text,{size:1,weight:"semibold",children:"Canvas"}),s[8]=f):f=s[8],s[9]===Symbol.for("react.memo_cache_sentinel")?(k=(0,g.jsxs)(aB.Flex,{paddingY:1,gap:2,children:[f,(0,g.jsx)(aB.Text,{size:1,muted:!0,children:(0,g.jsx)(n.ComposeSparklesIcon,{})})]}),s[9]=k):k=s[9],s[10]!==x?(l=(0,g.jsx)(aB.Box,{paddingTop:3,children:(0,g.jsx)(aB.Heading,{size:1,children:x})}),s[10]=x,s[11]=l):l=s[11],s[12]!==z?(m=(0,g.jsx)(aB.Box,{paddingTop:4,children:(0,g.jsx)(aB.Text,{size:1,children:z})}),s[12]=z,s[13]=m):m=s[13],s[14]!==l||s[15]!==m?(o=(0,g.jsxs)(aB.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[k,l,m]}),s[14]=l,s[15]=m,s[16]=o):o=s[16],s[17]!==v?(p=v("canvas.banner.popover-button-text"),s[17]=v,s[18]=p):p=s[18],s[19]!==p?(q=(0,g.jsx)(aB.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,g.jsx)(aA.Button,{mode:"bleed",text:p,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:n.LaunchIcon})}),s[19]=p,s[20]=q):q=s[20],s[21]!==q||s[22]!==o?(r=(0,g.jsx)(aB.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,g.jsxs)(aB.Container,{width:0,children:[e,o,q]})}),s[21]=q,s[22]=o,s[23]=r):r=s[23],r},ed=a=>{let b,c,d,e,f,k,l,m,o=(0,h.c)(21),{documentId:p}=a,{t:q}=(0,j.useTranslation)(y),[r,s]=(0,i.useState)(!1),t=(0,j.getDocumentVariantType)(p),{isLockedByCanvas:u}=(0,j.useCanvasCompanionDoc)(p);a:{let a;if(!u){let a;o[0]!==q?(a=q("canvas.banner.editable.linked-text"),o[0]=q,o[1]=a):a=o[1],b=a;break a}if("published"===t){let a;o[2]!==q?(a=q("canvas.banner.linked-text.published"),o[2]=q,o[3]=a):a=o[3],b=a;break a}if("draft"===t){let a;o[4]!==q?(a=q("canvas.banner.linked-text.draft"),o[4]=q,o[5]=a):a=o[5],b=a;break a}o[6]!==q?(a=q("canvas.banner.linked-text.version"),o[6]=q,o[7]=a):a=o[7],b=a}let v=b;o[8]===Symbol.for("react.memo_cache_sentinel")?(c=()=>s(ef),o[8]=c):c=o[8];let w=c;o[9]===Symbol.for("react.memo_cache_sentinel")?(d=()=>s(!1),o[9]=d):d=o[9];let x=d;return o[10]!==v?(e=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:v}),o[10]=v,o[11]=e):e=o[11],o[12]!==u?(f=(0,g.jsx)(ec,{onClose:x,isLockedByCanvas:u}),o[12]=u,o[13]=f):f=o[13],o[14]===Symbol.for("react.memo_cache_sentinel")?(k=(0,g.jsx)(aA.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:n.InfoOutlineIcon,onClick:w}),o[14]=k):k=o[14],o[15]!==r||o[16]!==f?(l=(0,g.jsx)(aA.Popover,{open:r,size:0,tone:"default",portal:!0,placement:"bottom-start",content:f,children:k}),o[15]=r,o[16]=f,o[17]=l):l=o[17],o[18]!==e||o[19]!==l?(m=(0,g.jsxs)(aB.Flex,{align:"center",gap:2,children:[e,l]}),o[18]=e,o[19]=l,o[20]=m):m=o[20],m};function ee(){let a,b,c,d,e=(0,h.c)(10),{documentId:f,displayed:i}=dh(),{t:k}=(0,j.useTranslation)(y),l=i?._id||f,{companionDoc:m}=(0,j.useCanvasCompanionDoc)(l),n=(0,j.useNavigateToCanvasDoc)(m?.canvasDocumentId,"banner");return m?(e[0]!==l?(a=(0,g.jsx)(ed,{documentId:l}),e[0]=l,e[1]=a):a=e[1],e[2]!==k?(b=k("canvas.banner.edit-in-canvas-action"),e[2]=k,e[3]=b):b=e[3],e[4]!==n||e[5]!==b?(c={mode:"ghost",text:b,onClick:n},e[4]=n,e[5]=b,e[6]=c):c=e[6],e[7]!==a||e[8]!==c?(d=(0,g.jsx)(dP,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:a,action:c}),e[7]=a,e[8]=c,e[9]=d):d=e[9],d):null}function ef(a){return!a}let eg=a=>{let b,c,d,e,f,i,k,l,m,o=(0,h.c)(27),{schemaType:p,selectedPerspective:q,reason:r}=a,{t:s}=(0,j.useTranslation)(y),{document:t}=(0,j.useWorkspace)(),{drafts:u}=t,{enabled:v}=u;o[0]!==v||o[1]!==p?(b=a=>{let{perspective:b}=a;return{disabled:!(0,j.isPerspectiveWriteable)({selectedPerspective:b,isDraftModelEnabled:v,schemaType:p}).result}},o[0]=v,o[1]=p,o[2]=b):b=o[2];let w=b;return o[3]!==r||o[4]!==s?(c="PUBLISHED_NOT_WRITEABLE"===r&&s("banners.choose-new-document-destination.cannot-create-published-document"),o[3]=r,o[4]=s,o[5]=c):c=o[5],o[6]!==r||o[7]!==s?(d="DRAFTS_NOT_WRITEABLE"===r&&s("banners.choose-new-document-destination.cannot-create-draft-document"),o[6]=r,o[7]=s,o[8]=d):d=o[8],o[9]!==r||o[10]!==q||o[11]!==s?(e="RELEASE_NOT_ACTIVE"===r&&(0,j.isReleaseDocument)(q)&&(0,g.jsx)(j.Translate,{t:s,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:q.metadata.title},components:{VersionBadge:(0,j.getVersionInlineBadge)(q)}}),o[9]=r,o[10]=q,o[11]=s,o[12]=e):e=o[12],o[13]!==s?(f=s("banners.choose-new-document-destination.choose-destination"),o[13]=s,o[14]=f):f=o[14],o[15]!==f?(i=(0,g.jsxs)(g.Fragment,{children:[" ",f]}),o[15]=f,o[16]=i):i=o[16],o[17]!==c||o[18]!==d||o[19]!==e||o[20]!==i?(k=(0,g.jsxs)(aB.Text,{size:1,children:[c,d,e,i]}),o[17]=c,o[18]=d,o[19]=e,o[20]=i,o[21]=k):k=o[21],o[22]!==w?(l=(0,g.jsx)(j.ReleasesNav,{menuItemProps:w}),o[22]=w,o[23]=l):l=o[23],o[24]!==l||o[25]!==k?(m=(0,g.jsx)(dP,{tone:"caution",icon:n.WarningOutlineIcon,content:(0,g.jsxs)(aB.Flex,{align:"center",gap:2,children:[k,l]})}),o[24]=l,o[25]=k,o[26]=m):m=o[26],m};function eh(){let a,b,c=(0,h.c)(5),{value:d}=dh(),{documentLinkedBannerContent:e}=(0,j.useSanityCreateConfig)().components??{};c[0]!==d?(a=(0,j.getSanityCreateLinkMetadata)(d),c[0]=d,c[1]=a):a=c[1];let f=a;return e&&f?(c[2]!==e||c[3]!==f?(b=(0,g.jsx)(dP,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,g.jsx)(e,{metadata:f})}),c[2]=e,c[3]=f,c[4]=b):b=c[4],b):null}function ei(a){let b,c,d,e,f,k,l,m,n,o,p,q,r=(0,h.c)(39),{documentId:s,currentRelease:t,isScheduledRelease:u}=a,v=t??j.LATEST;r[0]!==v?(b=(0,j.getReleaseTone)(v),r[0]=v,r[1]=b):b=r[1];let w=b,{t:x}=(0,j.useTranslation)(y),{t:z}=(0,j.useTranslation)(),{createVersion:A}=(0,j.useVersionOperations)(),[B,C]=(0,i.useState)(),D=(0,aC.useToast)();r[2]!==A||r[3]!==t._id||r[4]!==s||r[5]!==x||r[6]!==D?(c=async()=>{if(t._id){C({status:"creating",lastUpdate:new Date});try{await A((0,j.getReleaseIdFromReleaseDocumentId)(t._id),s),C({status:"created",lastUpdate:new Date})}catch(a){D.push({status:"error",closable:!0,title:x("banners.release.error.title"),description:x("banners.release.error.description",{message:a.message})}),C(void 0)}}},r[2]=A,r[3]=t._id,r[4]=s,r[5]=x,r[6]=D,r[7]=c):c=r[7];let E=c,F=function(a){let b,c,d,e=(0,h.c)(4);e[0]===Symbol.for("react.memo_cache_sentinel")?(b=new Date,e[0]=b):b=e[0];let[f,g]=(0,i.useState)(b);return 200!==e[1]?(c=()=>{let a=setInterval(()=>{g(new Date)},200);return()=>clearInterval(a)},d=[200],e[1]=200,e[2]=c,e[3]=d):(c=e[2],d=e[3]),(0,i.useEffect)(c,d),f}(200),G=B?.status==="created"&&F.getTime()-B.lastUpdate.getTime()>1e3;return r[8]!==x?(d=x("banners.release.waiting.title"),r[8]=x,r[9]=d):d=r[9],r[10]!==x?(e=x("banners.release.waiting.description"),r[10]=x,r[11]=e):e=r[11],r[12]!==G||r[13]!==d||r[14]!==e?(f={status:"info",id:"add-document-to-release",enabled:G,closable:!0,title:d,description:e},r[12]=G,r[13]=d,r[14]=e,r[15]=f):f=r[15],(0,j.useConditionalToast)(f),r[16]!==t.metadata?.title||r[17]!==z?(k=t?.metadata?.title||z("release.placeholder-untitled-release"),r[16]=t.metadata?.title,r[17]=z,r[18]=k):k=r[18],r[19]!==k?(l={title:k},r[19]=k,r[20]=l):l=r[20],r[21]!==t?(m=(0,j.getVersionInlineBadge)(t),r[21]=t,r[22]=m):m=r[22],r[23]!==m?(n={VersionBadge:m},r[23]=m,r[24]=n):n=r[24],r[25]!==x||r[26]!==n||r[27]!==l?(o=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{i18nKey:"banners.release.not-in-release",t:x,values:l,components:n})}),r[25]=x,r[26]=n,r[27]=l,r[28]=o):o=r[28],r[29]!==E||r[30]!==u||r[31]!==x||r[32]!==w||r[33]!==B?(p=u?void 0:{text:x("banners.release.action.add-to-release"),tone:w,disabled:!!B,onClick:E,mode:"default"},r[29]=E,r[30]=u,r[31]=x,r[32]=w,r[33]=B,r[34]=p):p=r[34],r[35]!==o||r[36]!==p||r[37]!==w?(q=(0,g.jsx)(dP,{tone:w,content:o,action:p}),r[35]=o,r[36]=p,r[37]=w,r[38]=q):q=r[38],q}let ej=(0,aY.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),ek=a=>{let b,c,d,e,f,l,m,o,p,q,r,s,t,u,v,w=(0,h.c)(47),{displayed:x,documentId:z,schemaType:A,i18nKey:B,isEditBlocking:C}=a,{t:D}=(0,j.useTranslation)(y),[E,F]=(0,i.useState)(!1),[G,H]=(0,i.useState)(!1),I=(0,aX.useTelemetry)(),{publish:J,discardChanges:K}=(0,j.useDocumentOperation)(z,x?._type||"");w[0]!==J||w[1]!==I?(b=()=>{J.execute(),F(!0),I.log(ej,{liveEditResolveType:"publish"})},w[0]=J,w[1]=I,w[2]=b):b=w[2];let L=b;w[3]!==K||w[4]!==I?(c=()=>{K.execute(),H(!0),I.log(ej,{liveEditResolveType:"discard"})},w[3]=K,w[4]=I,w[5]=c):c=w[5];let M=c;w[6]===Symbol.for("react.memo_cache_sentinel")?(d=()=>()=>{F(!1),H(!1)},w[6]=d):d=w[6],(0,i.useEffect)(d);let N=ce();w[7]!==N||w[8]!==x?._id||w[9]!==A.name?(e=()=>{typeof x?._id>"u"||N.navigateDiffView({mode:"version",previousDocument:{type:A.name,id:(0,k.getPublishedId)(x?._id)},nextDocument:{type:A.name,id:(0,k.getDraftId)(x?._id)}})},w[7]=N,w[8]=x?._id,w[9]=A.name,w[10]=e):e=w[10];let O=e;return w[11]!==A.title?(f={schemaType:A.title},w[11]=A.title,w[12]=f):f=w[12],w[13]!==B||w[14]!==D||w[15]!==f?(l=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:(0,g.jsx)(j.Translate,{t:D,i18nKey:B,values:f})}),w[13]=B,w[14]=D,w[15]=f,w[16]=l):l=w[16],w[17]!==D?(m=D("banners.obsolete-draft.actions.compare-draft.text"),w[17]=D,w[18]=m):m=w[18],w[19]!==O||w[20]!==m?(o=(0,g.jsx)(aA.Button,{text:m,mode:"ghost",onClick:O}),w[19]=O,w[20]=m,w[21]=o):o=w[21],w[22]!==D?(p=D("banners.obsolete-draft.actions.publish-draft.text"),w[22]=D,w[23]=p):p=w[23],w[24]!==C||w[25]!==D?(q=C?{content:D("banners.live-edit-draft-banner.publish.tooltip")}:{},w[24]=C,w[25]=D,w[26]=q):q=w[26],w[27]!==L||w[28]!==E||w[29]!==q||w[30]!==p?(r=(0,g.jsx)(aA.Button,{onClick:L,text:p,tooltipProps:q,loading:E,tone:"positive"}),w[27]=L,w[28]=E,w[29]=q,w[30]=p,w[31]=r):r=w[31],w[32]!==D?(s=D("banners.obsolete-draft.actions.discard-draft.text"),w[32]=D,w[33]=s):s=w[33],w[34]!==C||w[35]!==D?(t=C?{content:D("banners.live-edit-draft-banner.discard.tooltip")}:{},w[34]=C,w[35]=D,w[36]=t):t=w[36],w[37]!==M||w[38]!==G||w[39]!==s||w[40]!==t?(u=(0,g.jsx)(aA.Button,{onClick:M,text:s,tooltipProps:t,loading:G,tone:"caution"}),w[37]=M,w[38]=G,w[39]=s,w[40]=t,w[41]=u):u=w[41],w[42]!==r||w[43]!==u||w[44]!==l||w[45]!==o?(v=(0,g.jsx)(dP,{content:(0,g.jsxs)(aB.Flex,{align:"center",justify:"space-between",gap:2,children:[l,o,r,u]}),"data-testid":"live-edit-type-banner",icon:n.ErrorOutlineIcon}),w[42]=r,w[43]=u,w[44]=l,w[45]=o,w[46]=v):v=w[46],v};function el(a){let b,c,d=(0,h.c)(4),{documentId:e,isPinnedDraftOrPublished:f}=a;d[0]!==e?(b={documentId:e},d[0]=e,d[1]=b):b=d[1];let i=(0,j.useOnlyHasVersions)(b);return(0,k.isVersionId)(e)&&i&&f?(d[2]!==e?(c=(0,g.jsx)(em,{documentId:e}),d[2]=e,d[3]=c):c=d[3],c):null}function em(a){let b,c,d,e,f,i,l,m,n,o=(0,h.c)(35),{documentId:p}=a,{data:q}=(0,j.useActiveReleases)(),r=(0,j.useSetPerspective)();o[0]!==p?(b=(0,k.getVersionFromId)(p)??"",o[0]=p,o[1]=b):b=o[1];let s=b;if(o[2]!==q||o[3]!==s){let a;o[5]!==s?(a=a=>a._id.includes(s),o[5]=s,o[6]=a):a=o[6],c=q.find(a),o[2]=q,o[3]=s,o[4]=c}else c=o[4];let t=c,{t:u}=(0,j.useTranslation)();o[7]!==p?(d={documentId:p},o[7]=p,o[8]=d):d=o[8];let{data:v}=(0,j.useDocumentVersions)(d);if(o[9]!==q||o[10]!==v||o[11]!==u){let a,b;o[13]!==v?(a=a=>v.find(b=>{let c=(0,k.getVersionFromId)(b)??"";return(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===c})&&!(0,j.isCardinalityOneRelease)(a),o[13]=v,o[14]=a):a=o[14],o[15]!==u?(b=a=>a.metadata.title||u("release.placeholder-untitled-release"),o[15]=u,o[16]=b):b=o[16],e=q.filter(a).map(b),o[9]=q,o[10]=v,o[11]=u,o[12]=e}else e=o[12];let w=e;o[17]!==t?(f=t&&(0,j.getReleaseTone)(t),o[17]=t,o[18]=f):f=o[18];let x=f,{t:z}=(0,j.useTranslation)(y);o[19]!==s||o[20]!==r?(i=async()=>{r(s)},o[19]=s,o[20]=r,o[21]=i):i=o[21];let A=i;return 0===w.length?null:(o[22]!==w[0]||o[23]!==w.length||o[24]!==z?(l=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(aB.Flex,{direction:"row",gap:1,wrap:"wrap",children:w.length>1?(0,g.jsx)(j.Translate,{t:z,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,g.jsxs)(j.VersionInlineBadge,{children:[" ",w[0]]})},values:{count:w.length-1}}):(0,g.jsx)(j.Translate,{t:z,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,g.jsxs)(j.VersionInlineBadge,{children:[" ",w[0]]})}})})}),o[22]=w[0],o[23]=w.length,o[24]=z,o[25]=l):l=o[25],o[26]!==w.length||o[27]!==A||o[28]!==z||o[29]!==x?(m=w.length>0?{text:z("banners.release.action.open-to-edit"),tone:x,onClick:A,mode:"default"}:void 0,o[26]=w.length,o[27]=A,o[28]=z,o[29]=x,o[30]=m):m=o[30],o[31]!==l||o[32]!==m||o[33]!==x?(n=(0,g.jsx)(dP,{tone:x,"data-testid":"open-release-to-edit-banner",content:l,action:m}),o[31]=l,o[32]=m,o[33]=x,o[34]=n):n=o[34],n)}function en(){let a,b,c=(0,h.c)(4),{revisionNotFound:d}=dh(),{t:e}=(0,j.useTranslation)(y);return d?(c[0]!==e?(a=e("banners.revision-not-found.description"),c[0]=e,c[1]=a):a=c[1],c[2]!==a?(b=(0,g.jsx)(dP,{tone:"caution","data-test-id":"revision-not-found-banner",icon:n.WarningOutlineIcon,content:(0,g.jsx)(aB.Text,{size:1,children:a})}),c[2]=a,c[3]=b):b=c[3],b):null}function eo(a){let b,c,d,e,f,i=(0,h.c)(12),{currentRelease:k}=a,l=k??j.LATEST;i[0]!==l?(b=(0,j.getReleaseTone)(l),i[0]=l,i[1]=b):b=i[1];let m=b,{t:o}=(0,j.useTranslation)();return i[2]!==k?(c=(0,j.formatRelativeLocalePublishDate)(k),i[2]=k,i[3]=c):c=i[3],i[4]!==c?(d={date:c},i[4]=c,i[5]=d):d=i[5],i[6]!==d||i[7]!==o?(e=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:o,i18nKey:"release.banner.scheduled-for-publishing-on",values:d})}),i[6]=d,i[7]=o,i[8]=e):e=i[8],i[9]!==e||i[10]!==m?(f=(0,g.jsx)(dP,{tone:m,icon:n.LockIcon,content:e}),i[9]=e,i[10]=m,i[11]=f):f=i[11],f}function ep(){let a=(0,h.c)(18),{value:b,editState:c}=dh(),{selectedPerspective:d}=(0,j.usePerspective)(),e=(0,j.isGoingToUnpublish)(b)||c?.version&&(0,j.isGoingToUnpublish)(c?.version),{t:f}=(0,j.useTranslation)(y),{t:i}=(0,j.useTranslation)();if((0,j.isReleaseDocument)(d)&&e){let b,c,e,h,k,l,m;a[0]!==d.metadata?.title||a[1]!==i?(b=d.metadata?.title||i("release.placeholder-untitled-release"),a[0]=d.metadata?.title,a[1]=i,a[2]=b):b=a[2];let o=b;return a[3]!==o?(c={title:o},a[3]=o,a[4]=c):c=a[4],a[5]!==d?(e=(0,j.getVersionInlineBadge)(d),a[5]=d,a[6]=e):e=a[6],a[7]!==e?(h={VersionBadge:e},a[7]=e,a[8]=h):h=a[8],a[9]!==f||a[10]!==c||a[11]!==h?(k=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:f,i18nKey:"banners.unpublished-release-banner.text",values:c,components:h})}),a[9]=f,a[10]=c,a[11]=h,a[12]=k):k=a[12],a[13]!==f?(l=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:f,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),a[13]=f,a[14]=l):l=a[14],a[15]!==k||a[16]!==l?(m=(0,g.jsx)(dP,{tone:"critical",content:(0,g.jsxs)(aB.Stack,{space:2,children:[k,l]}),icon:n.UnpublishIcon}),a[15]=k,a[16]=l,a[17]=m):m=a[17],m}return null}let eq=(0,aF.styled)(aB.Stack)`
  ${({theme:a})=>aF.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${a.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${a.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${a.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${a.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,er=a=>{let b,c,d,e,f=(0,h.c)(14),{documentId:i,schemaType:k,title:l}=a,m=i===k.name,o=k.description,{t:p}=(0,j.useTranslation)(y);if(!1===k.__experimental_formPreviewTitle)return null;f[0]!==o||f[1]!==m||f[2]!==k.name||f[3]!==k.title?(b=!m&&(0,g.jsxs)(aB.Inline,{space:1,children:[(0,g.jsx)(aB.Text,{muted:!0,size:1,children:k.title??k.name}),o&&(0,g.jsx)(aA.Tooltip,{content:o,placement:"right",children:(0,g.jsx)(n.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),f[0]=o,f[1]=m,f[2]=k.name,f[3]=k.title,f[4]=b):b=f[4];let q=!l;return f[5]!==p||f[6]!==l?(c=l??p("document-view.form-view.form-title-fallback"),f[5]=p,f[6]=l,f[7]=c):c=f[7],f[8]!==q||f[9]!==c?(d=(0,g.jsx)(aB.Heading,{as:"h2","data-heading":!0,muted:q,"data-testid":"document-panel-document-title",children:c}),f[8]=q,f[9]=c,f[10]=d):d=f[10],f[11]!==b||f[12]!==d?(e=(0,g.jsxs)(eq,{marginBottom:6,space:4,children:[b,d]}),f[11]=b,f[12]=d,f[13]=e):e=f[13],e},es=a=>a.preventDefault(),et=(0,i.forwardRef)(function(a,b){let c,d,e,f,k,l,m,n,o,p,q,r,s,t,u,v=(0,h.c)(77),{hidden:w,margins:x}=a,{collapsedFieldSets:z,collapsedPaths:A,displayed:B,editState:C,documentId:D,documentType:E,fieldActions:F,onChange:G,validation:H,ready:I,formState:J,onFocus:K,connectionState:L,onBlur:M,onSetCollapsedPath:N,onPathOpen:O,onSetCollapsedFieldSet:P,onSetActiveFieldGroup:Q,openPath:R,compareValue:S,hasUpstreamVersion:T}=dh(),{selectedReleaseId:U,selectedPerspective:V}=(0,j.usePerspective)(),W=(0,j.useDocumentStore)(),X=(0,j.useDocumentPresence)(D),{title:Y}=dx(),[Z]=(0,i.useState)(eu),$=C?.transactionSyncLock?.enabled,{t:_}=(0,j.useTranslation)(y);v[0]!==_?(c=_("document-view.form-view.sync-lock-toast.title"),v[0]=_,v[1]=c):c=v[1],v[2]!==_?(d=_("document-view.form-view.sync-lock-toast.description"),v[2]=_,v[3]=d):d=v[3],v[4]!==$||v[5]!==c||v[6]!==d?(e={id:"sync-lock",status:"warning",enabled:$,title:c,description:d,closable:!0},v[4]=$,v[5]=c,v[6]=d,v[7]=e):e=v[7],(0,j.useConditionalToast)(e),v[8]!==D||v[9]!==W.pair||v[10]!==E||v[11]!==Z||v[12]!==U?(f=()=>{let a=W.pair.documentEvents(D,E,U).pipe((0,aT.tap)(a=>{var b,c;let d,e,f;"mutation"===a.type&&Z.publish((d=(b=a).mutations.map(a=>a.patch).filter(Boolean),{type:"mutation",snapshot:b.document,patches:(0,j.fromMutationPatches)(b.origin,d)})),"rebase"===a.type&&Z.publish((e=(c=a).remoteMutations.map(a=>a.patch).filter(Boolean),f=c.localMutations.map(a=>a.patch).filter(Boolean),{type:"rebase",snapshot:c.document,patches:(0,j.fromMutationPatches)("remote",e).concat((0,j.fromMutationPatches)("local",f))}))})).subscribe();return()=>{a.unsubscribe()}},v[8]=D,v[9]=W.pair,v[10]=E,v[11]=Z,v[12]=U,v[13]=f):f=v[13],v[14]!==D||v[15]!==W||v[16]!==E||v[17]!==Z||v[18]!==U?(k=[D,W,E,Z,U],v[14]=D,v[15]=W,v[16]=E,v[17]=Z,v[18]=U,v[19]=k):k=v[19],(0,i.useEffect)(f,k);let aa=!!B?._rev;v[20]!==Z||v[21]!==B?(l=()=>{Z.publish({type:"mutation",patches:[],snapshot:B})},v[20]=Z,v[21]=B,v[22]=l):l=v[22];let ab=(0,i.useEffectEvent)(l);v[23]!==ab||v[24]!==aa?(m=()=>{aa&&ab()},v[23]=ab,v[24]=aa,v[25]=m):m=v[25],v[26]!==aa?(n=[aa],v[26]=aa,v[27]=n):n=v[27],(0,i.useEffect)(m,n);let[ac,ad]=(0,i.useState)(null),[ae,af]=(0,i.useState)(!1);v[28]!==ae||v[29]!==ac||v[30]!==J?.focusPath.length||v[31]!==I?(o=()=>{!ae&&I&&!J?.focusPath.length&&ac&&(af(!0),(0,aC.focusFirstDescendant)(ac))},v[28]=ae,v[29]=ac,v[30]=J?.focusPath.length,v[31]=I,v[32]=o):o=v[32];let ag=J?.focusPath.length;v[33]!==ae||v[34]!==ac||v[35]!==I||v[36]!==ag?(p=[ae,ac,ag,I],v[33]=ae,v[34]=ac,v[35]=I,v[36]=ag,v[37]=p):p=v[37],(0,i.useEffect)(o,p),v[38]!==b?(q=a=>{ad(a),"function"==typeof b?b(a):b&&(b.current=a)},v[38]=b,v[39]=q):q=v[39];let ah=q,ai="reconnecting"===L||J?.readOnly||!C?.ready,aj=ai?"true":void 0;return v[40]!==z||v[41]!==A||v[42]!==S||v[43]!==L||v[44]!==D||v[45]!==C?.draft||v[46]!==C?.published||v[47]!==F||v[48]!==J||v[49]!==T||v[50]!==w||v[51]!==ai||v[52]!==M||v[53]!==G||v[54]!==K||v[55]!==O||v[56]!==Q||v[57]!==P||v[58]!==N||v[59]!==R||v[60]!==Z||v[61]!==X||v[62]!==V||v[63]!==_||v[64]!==Y||v[65]!==H?(r="connecting"!==L||C?.draft||C?.published?null===J||w?(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsx)(aB.Text,{children:_("document-view.form-view.form-hidden")})}):(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(er,{documentId:D,schemaType:J.schemaType,title:Y}),(0,g.jsx)(j.FormBuilder,{__internal_fieldActions:F,__internal_patchChannel:Z,changed:J.changed,collapsedFieldSets:z,collapsedPaths:A,compareValue:S??void 0,focused:J.focused,focusPath:J.focusPath,groups:J.groups,id:"root",members:J.members,onChange:G,onFieldGroupSelect:Q,onPathBlur:M,onPathFocus:K,onPathOpen:O,onSetFieldSetCollapsed:P,onSetPathCollapsed:N,openPath:R,perspective:V,hasUpstreamVersion:T,presence:X,readOnly:ai,schemaType:J.schemaType,validation:H,value:J.value})]}):(0,g.jsx)(dd,{ms:300,children:(0,g.jsxs)(aB.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,g.jsx)(aB.Spinner,{muted:!0}),(0,g.jsx)(aB.Box,{marginTop:3,children:(0,g.jsx)(aB.Text,{align:"center",muted:!0,size:1,children:_("document-view.form-view.loading")})})]})}),v[40]=z,v[41]=A,v[42]=S,v[43]=L,v[44]=D,v[45]=C?.draft,v[46]=C?.published,v[47]=F,v[48]=J,v[49]=T,v[50]=w,v[51]=ai,v[52]=M,v[53]=G,v[54]=K,v[55]=O,v[56]=Q,v[57]=P,v[58]=N,v[59]=R,v[60]=Z,v[61]=X,v[62]=V,v[63]=_,v[64]=Y,v[65]=H,v[66]=r):r=v[66],v[67]!==ah||v[68]!==aj||v[69]!==r?(s=(0,g.jsx)(aB.Box,{as:"form",onSubmit:es,ref:ah,"data-testid":"form-view","data-read-only":aj,children:r}),v[67]=ah,v[68]=aj,v[69]=r,v[70]=s):s=v[70],v[71]!==x||v[72]!==s?(t=(0,g.jsx)(j.PresenceOverlay,{margins:x,children:s}),v[71]=x,v[72]=s,v[73]=t):t=v[73],v[74]!==w||v[75]!==t?(u=(0,g.jsx)(aB.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:t}),v[74]=w,v[75]=t,v[76]=u):u=v[76],u});function eu(){return(0,j.createPatchChannel)()}function ev(){let a,b,c=(0,h.c)(11),{activeViewId:d,paneKey:e,views:f}=dh(),i=`${e}tabpanel`;if(c[0]!==d||c[1]!==e||c[2]!==i||c[3]!==f){let b;c[5]!==d||c[6]!==e||c[7]!==i?(b=(a,b)=>(0,g.jsx)(ew,{icon:a.icon,id:`${e}tab-${a.id}`,isActive:d===a.id,label:a.title,tabPanelId:i,viewId:0===b?null:a.id??null},a.id),c[5]=d,c[6]=e,c[7]=i,c[8]=b):b=c[8],a=f.map(b),c[0]=d,c[1]=e,c[2]=i,c[3]=f,c[4]=a}else a=c[4];return c[9]!==a?(b=(0,g.jsx)(aB.TabList,{space:1,children:a}),c[9]=a,c[10]=b):b=c[10],b}function ew(a){let b,c,d,e,f,i,j,k,l,m=(0,h.c)(20);m[0]!==a?({icon:b,id:c,isActive:d,label:e,tabPanelId:i,viewId:j,...f}=a,m[0]=a,m[1]=b,m[2]=c,m[3]=d,m[4]=e,m[5]=f,m[6]=i,m[7]=j):(b=m[1],c=m[2],d=m[3],e=m[4],f=m[5],i=m[6],j=m[7]);let{ready:n,editState:o}=dh(),{setView:p}=d9();m[8]!==p||m[9]!==j?(k=()=>p(j),m[8]=p,m[9]=j,m[10]=k):k=m[10];let q=k,r=!n&&!o?.draft&&!o?.published;return m[11]!==q||m[12]!==b||m[13]!==c||m[14]!==d||m[15]!==e||m[16]!==f||m[17]!==r||m[18]!==i?(l=(0,g.jsx)(aA.Tab,{...f,"aria-controls":i,disabled:r,icon:b,id:c,label:e,onClick:q,selected:d}),m[11]=q,m[12]=b,m[13]=c,m[14]=d,m[15]=e,m[16]=f,m[17]=r,m[18]=i,m[19]=l):l=m[19],l}let ex={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function ey(){return(0,i.useContext)(l.ResolvedPanesContext)??ex}let ez=Object.freeze({}),eA=Symbol("LOADING_PANE"),eB="documentPanelPortalElement",eC=(0,aY.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),eD=(0,aY.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),eE=(0,aY.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function eF(a){let b,c,d,e,f,i,k,l,m=(0,h.c)(27),{paneData:n,index:o}=a,{pane:p}=n,q=(0,aK.useRouter)(),{t:r}=(0,j.useTranslation)(y),s=(0,aK.useRouterState)(),t=(0,aX.useTelemetry)();m[0]!==s?.panes?(b=s?.panes||[],m[0]=s?.panes,m[1]=b):b=m[1];let u=b,{perspectiveStack:v}=(0,j.usePerspective)(),w=p!==eA&&"title"in p?p.title:null,x=p!==eA&&"document"===p.type?p.options.id:null,z=p!==eA&&"document"===p.type?p.options.type:null,A=x??"",B=z??"";m[2]!==v||m[3]!==A||m[4]!==B?(c={documentId:A,documentType:B,perspectiveStack:v},m[2]=v,m[3]=A,m[4]=B,m[5]=c):c=m[5];let{value:C,isLoading:D}=(0,j.useDocumentPreviewValues)(c);a:{if(x&&!D){let a;m[6]!==C?.title||m[7]!==r?(a=C?.title||r("panes.document-header-title.untitled.text"),m[6]=C?.title,m[7]=r,m[8]=a):a=m[8],d=a;break a}d=w}let E=d;m[9]!==n.groupIndex||m[10]!==q||m[11]!==u||m[12]!==t?(e=()=>{t.log(eE),q.navigate({panes:u.slice(0,n.groupIndex)})},m[9]=n.groupIndex,m[10]=q,m[11]=u,m[12]=t,m[13]=e):e=m[13];let F=e;if(!E&&!D)return null;m[14]!==E||m[15]!==r?(f=E||r("panes.document-header-title.untitled.text"),m[14]=E,m[15]=r,m[16]=f):f=m[16],m[17]!==E||m[18]!==r?(i=E||r("panes.document-header-title.untitled.text"),m[17]=E,m[18]=r,m[19]=i):i=m[19],m[20]!==i?(k={content:i},m[20]=i,m[21]=k):k=m[21];let G=+(0!==o);return m[22]!==F||m[23]!==G||m[24]!==f||m[25]!==k?(l=(0,g.jsx)(aA.Button,{mode:"bleed",text:f,tooltipProps:k,onClick:F,paddingLeft:G}),m[22]=F,m[23]=G,m[24]=f,m[25]=k,m[26]=l):l=m[26],l}function eG(a){let b,c,d=(0,h.c)(7),{paneDataItems:e,currentPaneIndex:f}=a;if(d[0]!==f||d[1]!==e){let a;d[3]!==f?(a=(a,b)=>{if(b>f)return null;let c=a.pane!==eA&&"document"===a.pane.type;return(0,g.jsxs)(i.Fragment,{children:[(0,g.jsx)(eF,{paneData:a,index:b}),b<f&&(c?(0,g.jsx)(aB.Box,{padding:1,children:(0,g.jsx)(n.ArrowRightIcon,{})}):(0,g.jsx)(aB.Text,{children:"/"}))]},`breadcrumb-item-${a.key}-${b}`)},d[3]=f,d[4]=a):a=d[4],b=e.map(a),d[0]=f,d[1]=e,d[2]=b}else b=d[2];return d[5]!==b?(c=(0,g.jsx)(aB.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:b}),d[5]=b,d[6]=c):c=d[6],c}function eH(){let a,b,c,d=(0,h.c)(23),{connectionState:e,schemaType:f,title:i,value:k,index:l}=dh(),{paneDataItems:m}=ey(),{title:n,error:o}=dx(),{t:p}=(0,j.useTranslation)(y);d[0]!==m?(a=m.some(eI),d[0]=m,d[1]=a):a=d[1];let q=a;if("connecting"===e&&!k){let a;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(g.Fragment,{}),d[2]=a):a=d[2],a}if(i){let a;return d[3]!==i?(a=(0,g.jsx)(g.Fragment,{children:i}),d[3]=i,d[4]=a):a=d[4],a}if(!k){let a,b,c=f?.title||f?.name;return d[5]!==p||d[6]!==c?(a=p("panes.document-header-title.new.text",{schemaType:c}),d[5]=p,d[6]=c,d[7]=a):a=d[7],d[8]!==a?(b=(0,g.jsx)(g.Fragment,{children:a}),d[8]=a,d[9]=b):b=d[9],b}if(o){let a,b;return d[10]!==o||d[11]!==p?(a=p("panes.document-header-title.error.text",{error:o}),d[10]=o,d[11]=p,d[12]=a):a=d[12],d[13]!==a?(b=(0,g.jsx)(g.Fragment,{children:a}),d[13]=a,d[14]=b):b=d[14],b}return d[15]!==n||d[16]!==q||d[17]!==l||d[18]!==m||d[19]!==p?(b=q?(0,g.jsx)(eG,{paneDataItems:m,currentPaneIndex:l}):n||(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:p("panes.document-header-title.untitled.text")}),d[15]=n,d[16]=q,d[17]=l,d[18]=m,d[19]=p,d[20]=b):b=d[20],d[21]!==b?(c=(0,g.jsx)(g.Fragment,{children:b}),d[21]=b,d[22]=c):c=d[22],c}function eI(a){return a.maximized}let eJ=a=>{let b,c,d,e,f,i,k=(0,h.c)(16);k[0]!==a?({documentExists:b,...c}=a,k[0]=a,k[1]=b,k[2]=c):(b=k[1],c=k[2]);let{isFavorited:l,isReady:m,favorite:o,unfavorite:p}=(0,j.useManageFavorite)(c),{t:q}=(0,j.useTranslation)(y),r=l?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";k[3]!==q||k[4]!==r?(d=q(r),k[3]=q,k[4]=r,k[5]=d):d=k[5];let s=d,t=l?p:o,u=!m||!b;return k[6]!==s?(e={content:(0,g.jsx)(aB.Text,{size:1,children:s}),placement:"right"},k[6]=s,k[7]=e):e=k[7],k[8]!==l?(f=(0,g.jsx)(aB.Text,{size:1,children:l?(0,g.jsx)(n.StarFilledIcon,{}):(0,g.jsx)(n.StarIcon,{})}),k[8]=l,k[9]=f):f=k[9],k[10]!==s||k[11]!==t||k[12]!==u||k[13]!==e||k[14]!==f?(i=(0,g.jsx)(aA.Button,{mode:"bleed",onClick:t,disabled:u,"aria-label":s,"aria-live":"assertive",tooltipProps:e,children:f}),k[10]=s,k[11]=t,k[12]=u,k[13]=e,k[14]=f,k[15]=i):i=k[15],i},eK=(0,i.memo)(function(){let a,b,c,d,e,f,i=(0,h.c)(24),{editState:k,connectionState:l,views:m,documentId:o,displayed:p}=dh(),{features:q}=dp(),{index:r,BackLink:s}=d9(),{activeWorkspace:t}=(0,j.useActiveWorkspace)(),u=m.length>1,{collapsed:v,isLast:w}=cL(),x=w&&!v?-1:0,z=q.backButton&&r>0,{t:A}=(0,j.useTranslation)(y);i[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(eH,{}),i[0]=a):a=i[0];let B=a;i[1]!==u?(b=u&&(0,g.jsx)(ev,{}),i[1]=u,i[2]=b):b=i[2];let C=b;i[3]!==s||i[4]!==z||i[5]!==A?(c=z&&(0,g.jsx)(aA.Button,{as:s,"data-as":"a",icon:n.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:A("pane-header.back-button.text")}}),i[3]=s,i[4]=z,i[5]=A,i[6]=c):c=i[6];let D=c,E=p?._id??o,F=p?._type??"";i[7]!==t.dataset||i[8]!==t.projectId?(d=[t.projectId,t.dataset],i[7]=t.dataset,i[8]=t.projectId,i[9]=d):d=i[9];let G=d.join("."),H=(k?.ready&&(k.version??k.draft??k.published)!==null)??!1;i[10]!==t.dataset||i[11]!==t.name||i[12]!==t.projectId||i[13]!==E||i[14]!==F||i[15]!==G||i[16]!==H?(e=(0,g.jsx)(j.CapabilityGate,{capability:"comlink",condition:"available",children:(0,g.jsx)(eJ,{resourceType:"studio",documentId:E,documentType:F,resourceId:G,schemaName:t.name,projectId:t.projectId,dataset:t.dataset,documentExists:H})}),i[10]=t.dataset,i[11]=t.name,i[12]=t.projectId,i[13]=E,i[14]=F,i[15]=G,i[16]=H,i[17]=e):e=i[17];let I=e,J="connecting"===l&&!k?.draft&&!k?.published;return i[18]!==D||i[19]!==I||i[20]!==J||i[21]!==x||i[22]!==C?(f=(0,g.jsx)(c2,{loading:J,title:B,tabs:C,tabIndex:x,backButton:D,appendTitle:I}),i[18]=D,i[19]=I,i[20]=J,i[21]=x,i[22]=C,i[23]=f):f=i[23],f}),eL=(0,aF.styled)(aB.Box)({position:"relative"}),eM=(0,aF.styled)(j.ScrollContainer)(({$disabled:a})=>a?{height:"100%"}:aF.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),eN=function(a){let b,c,d,e,f,l,m,n,o,p,q,r,s,t,u,v,w=(0,h.c)(109),{footerHeight:x,headerHeight:y,isInspectOpen:z,rootElement:A,setDocumentPanelPortalElement:B,footer:C}=a,{activeViewId:D,displayed:E,documentId:F,editState:G,inspector:H,value:I,views:J,ready:K,schemaType:L,permissions:M,isPermissionsLoading:N}=dh();if(w[0]!==I){let a=(0,j.getSanityCreateLinkMetadata)(I);b=(0,j.isSanityCreateLinked)(a),w[0]=I,w[1]=b}else b=w[1];let O=b,{params:P}=d9(),{collapsed:Q}=cF(),{collapsed:R}=cL(),S=(0,aB.usePortal)(),{features:T}=dp(),[U,V]=(0,i.useState)(null),[W,X]=(0,i.useState)(null),Y=(0,i.useRef)(null),Z=(0,j.useWorkspace)(),$=I._createdAt?"update":"create";w[2]!==D||w[3]!==J?(c=J.find(a=>a.id===D)||J[0]||{type:"form"},w[2]=D,w[3]=J,w[4]=c):c=w[4];let _=c,aa=T.splitPanes&&U||S.element;a:{let a;if(Q){let a,b=y||0,c=x?x+2:2;w[5]!==b||w[6]!==c?(a=[b,0,c,0],w[5]=b,w[6]=c,w[7]=a):a=w[7],d=a;break a}w[8]===Symbol.for("react.memo_cache_sentinel")?(a=[0,0,2,0],w[8]=a):a=w[8],d=a}let ab=d,ac="form"!==_.type;w[9]!==_.component||w[10]!==_.options||w[11]!==_.type||w[12]!==E||w[13]!==F||w[14]!==G?.draft||w[15]!==G?.published||w[16]!==L||w[17]!==I?(e=()=>{if("component"===_.type&&_.component){let a=_.component;return(0,g.jsx)(a,{document:{draft:G?.draft||null,displayed:E||I,historical:E,published:G?.published||null},documentId:F,options:_.options,schemaType:L})}return!1},w[9]=_.component,w[10]=_.options,w[11]=_.type,w[12]=E,w[13]=F,w[14]=G?.draft,w[15]=G?.published,w[16]=L,w[17]=I,w[18]=e):e=w[18],w[19]!==e?(f=e(),w[19]=e,w[20]=f):f=w[20];let ad=f;w[21]!==W?(l=()=>{W?.scrollTo&&W.scrollTo(0,0)},w[21]=W,w[22]=l):l=w[22],w[23]!==F||w[24]!==W?(m=[F,W],w[23]=F,w[24]=W,w[25]=m):m=w[25],(0,i.useEffect)(l,m),w[26]!==aa||w[27]!==B?(n=()=>{aa&&B(aa)},o=[aa,B],w[26]=aa,w[27]=B,w[28]=n,w[29]=o):(n=w[28],o=w[29]),(0,i.useEffect)(n,o),w[30]!==E||w[31]!==z||w[32]!==I?(p=z?(0,g.jsx)(dO,{value:E||I}):null,w[30]=E,w[31]=z,w[32]=I,w[33]=p):p=w[33];let ae=p,af=!!(!R&&H),{selectedPerspective:ag,selectedReleaseId:ah}=(0,j.usePerspective)(),ai=P?.historyVersion;w[34]!==E||w[35]!==F||w[36]!==ai?(q={historyVersion:ai,displayed:E,documentId:F},w[34]=E,w[35]=F,w[36]=ai,w[37]=q):q=w[37];let aj=(0,j.useFilteredReleases)(q);b:{let a,b,c,d,e,f,h,i,l,m,n,o,p,q;if(P?.historyVersion){let a;w[38]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(ea,{}),w[38]=a):a=w[38],r=a;break b}w[39]!==ag?(a=(0,j.isReleaseDocument)(ag)&&(0,j.isReleaseScheduledOrScheduling)(ag),w[39]=ag,w[40]=a):a=w[40];let s=a,t=!!(s&&E?._id&&(0,k.getVersionFromId)(E?._id)===ah);if(w[41]!==G||w[42]!==L||w[43]!==ag||w[44]!==Z.document.drafts.enabled?(c=function({isSelectedPerspectiveWriteable:a,editState:b}){return(0,j.isNewDocument)(b)&&!a.result}({isSelectedPerspectiveWriteable:b=(0,j.isPerspectiveWriteable)({selectedPerspective:ag,isDraftModelEnabled:Z.document.drafts.enabled,schemaType:L}),editState:G}),w[41]=G,w[42]=L,w[43]=ag,w[44]=Z.document.drafts.enabled,w[45]=b,w[46]=c):(b=w[45],c=w[46]),c){let a;w[47]!==b.reason||w[48]!==b.result||w[49]!==L||w[50]!==ag?(a=!b.result&&(0,g.jsx)(eg,{schemaType:L,selectedPerspective:ag,reason:b.reason}),w[47]=b.reason,w[48]=b.result,w[49]=L,w[50]=ag,w[51]=a):a=w[51],r=a;break b}if(t){let a;w[52]!==ag?(a=(0,g.jsx)(eo,{currentRelease:ag}),w[52]=ag,w[53]=a):a=w[53],r=a;break b}let u=aj.currentReleases.some(j.isCardinalityOneRelease),v=E?._id&&(0,k.isDraftId)(E._id);if("drafts"===ag&&u&&v){let a;w[54]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(d8,{}),w[54]=a):a=w[54],r=a;break b}w[55]!==ag?(d=(0,j.isSystemBundle)(ag),w[55]=ag,w[56]=d):d=w[56];let x=d,y=G?.version&&(0,j.isGoingToUnpublish)(G?.version);if((0,j.isReleaseDocument)(ag)&&E?._id&&(0,k.getVersionFromId)(E._id)!==ah&&K&&!x&&!1===(0,j.isNewDocument)(G)&&!y){let a;w[57]!==s||w[58]!==ag||w[59]!==I._id?(a=(0,g.jsx)(ei,{documentId:I._id,currentRelease:ag,isScheduledRelease:s}),w[57]=s,w[58]=ag,w[59]=I._id,w[60]=a):a=w[60],r=a;break b}let z=function({editState:a,workspace:b,schemaType:c}){if(!a?.ready)return{result:void 0};let d=null!==a.draft,{document:{drafts:{enabled:e}}}=b;return!1===d?{result:!1}:e?!0===c.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:G,workspace:Z,schemaType:L});if("form"===_.type&&!ah&&z.result){if("DRAFT_MODEL_INACTIVE"===z.reason){let a;w[61]!==E||w[62]!==F||w[63]!==L?(a=(0,g.jsx)(ek,{displayed:E,documentId:F,schemaType:L,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[61]=E,w[62]=F,w[63]=L,w[64]=a):a=w[64],r=a;break b}if("LIVE_EDIT_ACTIVE"===z.reason){let a;w[65]!==E||w[66]!==F||w[67]!==L?(a=(0,g.jsx)(ek,{displayed:E,documentId:F,schemaType:L,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[65]=E,w[66]=F,w[67]=L,w[68]=a):a=w[68],r=a;break b}}if("form"!==_.type||N){r=null;break b}w[69]!==O?(e=O&&(0,g.jsx)(eh,{}),w[69]=O,w[70]=e):e=w[70],w[71]!==M?.granted||w[72]!==$?(f=!M?.granted&&(0,g.jsx)(d3,{requiredPermission:$}),w[71]=M?.granted,w[72]=$,w[73]=f):f=w[73],w[74]===Symbol.for("react.memo_cache_sentinel")?(h=(0,g.jsx)(en,{}),i=(0,g.jsx)(d6,{}),l=(0,g.jsx)(dT,{}),m=(0,g.jsx)(ee,{}),n=(0,g.jsx)(dQ,{}),o=(0,g.jsx)(ep,{}),w[74]=h,w[75]=i,w[76]=l,w[77]=m,w[78]=n,w[79]=o):(h=w[74],i=w[75],l=w[76],m=w[77],n=w[78],o=w[79]);let A=E?._id??F;w[80]!==x||w[81]!==A?(p=(0,g.jsx)(el,{documentId:A,isPinnedDraftOrPublished:x}),w[80]=x,w[81]=A,w[82]=p):p=w[82],w[83]!==e||w[84]!==f||w[85]!==p?(q=(0,g.jsxs)(g.Fragment,{children:[e,f,h,i,l,m,n,o,p]}),w[83]=e,w[84]=f,w[85]=p,w[86]=q):q=w[86],r=q}let ak=r;w[87]!==W?(s={documentScrollElement:W},w[87]=W,w[88]=s):s=w[88];let al=s,am=T.resizablePanes||!af;return w[89]!==ad||w[90]!==ak||w[91]!==W||w[92]!==C||w[93]!==ac||w[94]!==ae||w[95]!==Q||w[96]!==ab||w[97]!==aa||w[98]!==al||w[99]!==am?(t=am&&(0,g.jsxs)(aB.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,g.jsxs)(j.LegacyLayerProvider,{zOffset:"paneHeader",children:[ak,(0,g.jsx)(eK,{})]}),(0,g.jsx)(eL,{flex:2,children:(0,g.jsx)(aB.PortalProvider,{element:aa,__unstable_elements:al,children:(0,g.jsx)(aB.BoundaryElementProvider,{element:W,children:(0,g.jsxs)(j.VirtualizerScrollInstanceProvider,{scrollElement:W,containerElement:Y,children:[(0,g.jsxs)(eM,{$disabled:Q||!1,"data-testid":"document-panel-scroller",ref:X,children:[(0,g.jsx)(et,{hidden:ac,margins:ab,ref:Y}),ad]}),ae,(0,g.jsx)("div",{"data-testid":"document-panel-portal",ref:V})]})})})}),C]}),w[89]=ad,w[90]=ak,w[91]=W,w[92]=C,w[93]=ac,w[94]=ae,w[95]=Q,w[96]=ab,w[97]=aa,w[98]=al,w[99]=am,w[100]=t):t=w[100],w[101]!==F||w[102]!==A||w[103]!==L||w[104]!==af?(u=af&&(0,g.jsx)(aB.BoundaryElementProvider,{element:A,children:(0,g.jsx)(dC,{documentId:F,documentType:L.name,flex:1})}),w[101]=F,w[102]=A,w[103]=L,w[104]=af,w[105]=u):u=w[105],w[106]!==t||w[107]!==u?(v=(0,g.jsx)(cM,{children:(0,g.jsxs)(aB.Flex,{height:"fill",children:[t,u]})}),w[106]=t,w[107]=u,w[108]=v):v=w[108],v};eN.displayName="DocumentPanel";let eO=a=>{let b,c,d,e,f,g,k,l=(0,h.c)(26),{id:m,type:o,revision:p,release:q}=a,{restore:r}=(0,j.useDocumentOperation)(m,o,q),{revisionNotFound:s}=dh(),t=(0,j.useDocumentOperationEvent)(m,o),{navigateIntent:u}=(0,aK.useRouter)(),v=(0,i.useRef)(t),[w,x]=(0,i.useState)(!1),{t:z}=(0,j.useTranslation)(y);l[0]!==r||l[1]!==p?(b=()=>{r.execute(p),x(!1)},l[0]=r,l[1]=p,l[2]=b):b=l[2];let A=b;l[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{x(!1)},l[3]=c):c=l[3];let B=c;l[4]!==t||l[5]!==m||l[6]!==u||l[7]!==o?(d=()=>{t&&t!==v.current&&("success"===t.type&&"restore"===t.op&&u("edit",{id:m,type:o}),v.current=t)},e=[t,m,u,o],l[4]=t,l[5]=m,l[6]=u,l[7]=o,l[8]=d,l[9]=e):(d=l[8],e=l[9]),(0,i.useEffect)(d,e),l[10]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{x(!0)},l[10]=f):f=l[10];let C=f;a:{if(w){let a,b;l[11]!==z?(a=z("action.restore.confirm.message"),l[11]=z,l[12]=a):a=l[12],l[13]!==A||l[14]!==a?(b={type:"confirm",tone:"critical",onCancel:B,onConfirm:A,message:a},l[13]=A,l[14]=a,l[15]=b):b=l[15],g=b;break a}g=null}let D=g,E="@initial"===p,F=void 0===p;b:{let a,b,c;if(F||s){k=null;break b}l[16]!==z?(a=z("action.restore.label"),l[16]=z,l[17]=a):a=l[17];let d=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";l[18]!==z||l[19]!==d?(b=z(d),l[18]=z,l[19]=d,l[20]=b):b=l[20],l[21]!==D||l[22]!==E||l[23]!==b||l[24]!==a?(c={label:a,tone:"caution",onHandle:C,title:b,icon:n.RevertIcon,dialog:D,disabled:E},l[21]=D,l[22]=E,l[23]=b,l[24]=a,l[25]=c):c=l[25],k=c}return k};function eP(a){return("item"===a.type||"group"===a.type)&&a.renderAsButton}eO.action="restore",eO.displayName="HistoryRestoreAction";let eQ=(0,aO.default)(eP);function eR(a){let{fieldActions:b=[],menuItems:c,menuItemGroups:d}=a,e=[],f=0;for(let a=0;a<b.length;a+=1){let c=b[a];e.push(function a(b,c){return"divider"===b.type?{type:"divider",key:c}:"group"===b.type?{type:"group",key:c,children:b.children.map((b,d)=>a(b,`${c}-${d}-${b.type}`)),disabled:b.disabled,expanded:b.expanded??!0,icon:b.icon,title:b.title,i18n:b.i18n,renderAsButton:b.renderAsButton??!1}:{type:"item",key:c,intent:b.intent,disabled:b.disabled,icon:b.icon,iconRight:b.iconRight,onAction:b.onAction,renderAsButton:b.renderAsButton??!1,selected:b.selected,title:b.title,i18n:b.i18n,tone:b.tone}}(c,`${a}-${c.type}`))}f+=e.length;let g=[];for(let a of d)g.find(b=>b.key===a.id)||g.push({type:"group",key:a.id,children:[],expanded:!0,renderAsButton:!1,title:a.title,i18n:a.i18n});let h=[];for(let b=0;b<c.length;b+=1){let d=c[b],e=d.group&&g.find(a=>a.key===d.group),i="string"==typeof d.disabled?{reason:d.disabled}:d.disabled;d.group&&!e&&(e={type:"group",key:d.group,disabled:i,expanded:!0,icon:d.icon,title:d.group,children:[],renderAsButton:!1},g.push(e)),e?e.children.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone}):h.push({type:"item",key:`${f+b}-item`,hotkey:d.shortcut,icon:d.icon,intent:d.intent,disabled:i,onAction:()=>a.actionHandler(d),renderAsButton:d.showAsAction??!1,selected:d.selected,title:d.title,i18n:d.i18n,tone:d.tone})}return[...h,...g,...e]}let eS=["left","bottom"],eT={small:0,medium:1,large:2,full:"auto"};function eU(a){let b,c,d,e=(0,h.c)(16),{dialog:f,referenceElement:i}=a,{t:k}=(0,j.useTranslation)(y),{cancelButtonIcon:l,cancelButtonText:m,confirmButtonIcon:n,confirmButtonText:o,message:p,onCancel:q,onConfirm:r,tone:s}=f;return e[0]!==m||e[1]!==k?(b=m||k("confirm-dialog.cancel-button.fallback-text"),e[0]=m,e[1]=k,e[2]=b):b=e[2],e[3]!==o||e[4]!==k?(c=o||k("confirm-dialog.confirm-button.fallback-text"),e[3]=o,e[4]=k,e[5]=c):c=e[5],e[6]!==l||e[7]!==n||e[8]!==p||e[9]!==q||e[10]!==r||e[11]!==i||e[12]!==b||e[13]!==c||e[14]!==s?(d=(0,g.jsx)(aW.ConfirmPopover,{cancelButtonIcon:l,cancelButtonText:b,confirmButtonIcon:n,confirmButtonText:c,message:p,onCancel:q,onConfirm:r,open:!0,referenceElement:i,tone:s,placement:"top",fallbackPlacements:eS}),e[6]=l,e[7]=n,e[8]=p,e[9]=q,e[10]=r,e[11]=i,e[12]=b,e[13]=c,e[14]=s,e[15]=d):d=e[15],d}function eV(a){let b,c,d,e=(0,h.c)(12),{dialog:f}=a,k=(0,i.useId)();e[0]!==f.footer?(b=f.footer&&(0,g.jsx)(aB.Box,{paddingX:4,paddingY:3,children:f.footer}),e[0]=f.footer,e[1]=b):b=e[1];let l=b,m=!1===f.showCloseButton,n=void 0===f.width?1:eT[f.width];return e[2]!==f.content?(c=(0,g.jsx)(aB.Box,{padding:4,children:f.content}),e[2]=f.content,e[3]=c):c=e[3],e[4]!==f.header||e[5]!==f.onClose||e[6]!==k||e[7]!==l||e[8]!==m||e[9]!==n||e[10]!==c?(d=(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,g.jsx)(aC.Dialog,{animate:!0,__unstable_hideCloseButton:m,footer:l,header:f.header,id:k,onClose:f.onClose,onClickOutside:f.onClose,width:n,children:c})}),e[4]=f.header,e[5]=f.onClose,e[6]=k,e[7]=l,e[8]=m,e[9]=n,e[10]=c,e[11]=d):d=e[11],d}function eW(a){let b,c,d=(0,h.c)(5),{dialog:e,referenceElement:f}=a;return d[0]!==e?(b=(0,g.jsx)(eX,{dialog:e}),d[0]=e,d[1]=b):b=d[1],d[2]!==f||d[3]!==b?(c=(0,g.jsx)(aB.Popover,{content:b,fallbackPlacements:eS,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:f}),d[2]=f,d[3]=b,d[4]=c):c=d[4],c}function eX(a){let b,c,d,e=(0,h.c)(6),{dialog:f}=a,{content:j,onClose:k}=f,{isTopLayer:l}=(0,aB.useLayer)(),m=(0,i.useRef)(null);return e[0]!==l||e[1]!==k?(b=a=>{"Escape"===a.key&&l&&k()},e[0]=l,e[1]=k,e[2]=b):b=e[2],(0,aB.useGlobalKeyDown)(b),e[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>[m.current],e[3]=c):c=e[3],(0,aB.useClickOutsideEvent)(l&&k,c),e[4]!==j?(d=(0,g.jsx)("div",{ref:m,children:j}),e[4]=j,e[5]=d):d=e[5],d}function eY(a){let b,c=(0,h.c)(3),{children:d}=a,{element:e,elements:f}=(0,aB.usePortal)(),i=f?.[eB]||e;return c[0]!==d||c[1]!==i?(b=(0,g.jsx)(aB.PortalProvider,{element:i,children:d}),c[0]=d,c[1]=i,c[2]=b):b=c[2],b}function eZ(a){let b,c,d=(0,h.c)(17),{dialog:e,referenceElement:f}=a,j=void 0===f?null:f,k=(0,i.useId)();if("confirm"===e.type){let a;return d[0]!==e||d[1]!==j?(a=(0,g.jsx)(eU,{dialog:e,referenceElement:j}),d[0]=e,d[1]=j,d[2]=a):a=d[2],a}if("popover"===e.type){let a;return d[3]!==e||d[4]!==j?(a=(0,g.jsx)(eW,{dialog:e,referenceElement:j}),d[3]=e,d[4]=j,d[5]=a):a=d[5],a}if("dialog"===e.type||!e.type){let a;return d[6]!==e?(a=(0,g.jsx)(eY,{children:(0,g.jsx)(eV,{dialog:e})}),d[6]=e,d[7]=a):a=d[7],a}if("custom"===e.type){let a,b=e?.component;return d[8]!==b?(a=(0,g.jsx)(eY,{children:b}),d[8]=b,d[9]=a):a=d[9],a}return console.warn(`Unsupported modal type ${e.type}`),d[10]!==e.content||d[11]!==e.type?(b=e.content||(0,g.jsxs)(aB.Text,{size:1,children:["Unexpected modal type (",(0,g.jsx)("code",{children:e.type}),")"]}),d[10]=e.content,d[11]=e.type,d[12]=b):b=d[12],d[13]!==k||d[14]!==b||d[15]!==e.onClose?(c=(0,g.jsx)(aA.Dialog,{id:k,onClose:e.onClose,onClickOutside:e.onClose,width:1,children:b}),d[13]=k,d[14]=b,d[15]=e.onClose,d[16]=c):c=d[16],c}let e$=(0,i.memo)(function(a){let b,c,d,e,f=(0,h.c)(9),{actionStates:k,children:l,referenceElement:m}=a,[n,o]=(0,i.useState)(-1),p=k[n];f[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{o(a)},f[0]=b):b=f[0];let q=b;f[1]!==l?(c=l({handleAction:q}),f[1]=l,f[2]=c):c=f[2];let r=c;return f[3]!==p||f[4]!==m?(d=p&&p.dialog&&(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(eZ,{dialog:p.dialog,referenceElement:m})}),f[3]=p,f[4]=m,f[5]=d):d=f[5],f[6]!==r||f[7]!==d?(e=(0,g.jsxs)(g.Fragment,{children:[d,r]}),f[6]=r,f[7]=d,f[8]=e):e=f[8],e});function e_(a){let b,c,d,e=(0,h.c)(10),{actionStates:f,disabled:k}=a,l=(0,i.useId)(),[m,n]=(0,i.useState)(null);e[0]===Symbol.for("react.memo_cache_sentinel")?(b={placement:"top-end",portal:!0,preventOverflow:!0},e[0]=b):b=e[0];let o=b,{t:p}=(0,j.useTranslation)(y);e[1]!==f||e[2]!==k||e[3]!==l||e[4]!==p?(c=a=>{let{handleAction:b}=a;return(0,g.jsx)(aA.MenuButton,{id:`${l}-action-menu`,button:(0,g.jsx)(j.ContextMenuButton,{"aria-label":p("buttons.action-menu-button.aria-label"),disabled:k,"data-testid":"action-menu-button",tooltipProps:{content:p("buttons.action-menu-button.tooltip")}}),menu:(0,g.jsx)(aB.Menu,{padding:1,children:f.map((a,c)=>(0,g.jsx)(e0,{actionState:a,disabled:k,index:c,onAction:b},c))}),popover:o,ref:n})},e[1]=f,e[2]=k,e[3]=l,e[4]=p,e[5]=c):c=e[5];let q=c;return e[6]!==f||e[7]!==m||e[8]!==q?(d=(0,g.jsx)(e$,{actionStates:f,referenceElement:m,children:q}),e[6]=f,e[7]=m,e[8]=q,e[9]=d):d=e[9],d}function e0(a){let b,c,d,e,f,i=(0,h.c)(20),{actionState:j,disabled:k,index:l,onAction:m}=a,{onHandle:n}=j;i[0]!==l||i[1]!==m||i[2]!==n?(b=()=>{m(l),n&&n()},i[0]=l,i[1]=m,i[2]=n,i[3]=b):b=i[3];let o=b;i[4]!==j.shortcut?(c=j.shortcut?String(j.shortcut).split("+").map(e1):void 0,i[4]=j.shortcut,i[5]=c):c=i[5];let p=c;i[6]!==j.label?(d=j.label.replace(" ",""),i[6]=j.label,i[7]=d):d=i[7];let q=`action-${d}`,r=k||!!j.disabled;return i[8]!==j.disabled||i[9]!==j.title?(e=j.disabled&&{tooltipProps:{content:j.title}},i[8]=j.disabled,i[9]=j.title,i[10]=e):e=i[10],i[11]!==j.icon||i[12]!==j.label||i[13]!==j.tone||i[14]!==o||i[15]!==p||i[16]!==q||i[17]!==r||i[18]!==e?(f=(0,g.jsx)(aA.MenuItem,{"data-testid":q,disabled:r,hotkeys:p,icon:j.icon,onClick:o,text:j.label,tone:j.tone,...e}),i[11]=j.icon,i[12]=j.label,i[13]=j.tone,i[14]=o,i[15]=p,i[16]=q,i[17]=r,i[18]=e,i[19]=f):f=i[19],f}function e1(a){return a.slice(0,1).toUpperCase()+a.slice(1)}function e2(a){var b,c;let d,e,f,l,m,o,p,q,r,s,t,u,v=(0,h.c)(43),{nonReleaseVersions:w,selectedPerspective:x,onSelectBundle:y,onCopyToDraftsNavigate:z,documentType:A,releasesLoading:B,releases:C}=a,{t:D}=(0,j.useTranslation)(),[E,F]=(0,i.useState)(!1),[G,H]=(0,i.useState)(null);v[0]!==x?(e=a=>(0,k.getVersionFromId)(a)===x,v[0]=x,v[1]=e):e=v[1],v[2]!==w||v[3]!==e?(b=w,c=e,f=[-1===(d=b.findIndex(c))?void 0:b[d],-1===d?b:b.slice(0,d).concat(b.slice(d+1))],v[2]=w,v[3]=e,v[4]=f):f=v[4];let[I,J]=f,K=(0,i.useRef)(null);if(v[5]===Symbol.for("react.memo_cache_sentinel")?(l=a=>{a.target&&"matches"in a.target&&"function"==typeof a.target.matches&&a.target.matches("[data-portal] *")||F(!1)},m=()=>[K.current],v[5]=l,v[6]=m):(l=v[5],m=v[6]),(0,aB.useClickOutsideEvent)(l,m),0===w.length)return null;if(v[7]!==A||v[8]!==z||v[9]!==y||v[10]!==C||v[11]!==B||v[12]!==I?(o=I&&(u=(0,k.getVersionFromId)(I),(0,g.jsx)(j.VersionChip,{selected:!0,text:u,tone:"default",onClick:()=>y(u),onCopyToDraftsNavigate:z,contextValues:{documentId:(0,k.getPublishedId)(I),releases:C,releasesLoading:B,documentType:A,bundleId:u,isVersion:!0}},I)),v[7]=A,v[8]=z,v[9]=y,v[10]=C,v[11]=B,v[12]=I,v[13]=o):o=v[13],v[14]!==E||v[15]!==J.length||v[16]!==D?(p=J.length>0?(0,g.jsx)(aA.Tooltip,{content:D("release.chip.tooltip.other-versions",{count:J.length}),fallbackPlacements:[],portal:!0,placement:E?"top":"bottom",children:(0,g.jsx)(j.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:E,iconRight:E?n.ChevronUpIcon:n.ChevronDownIcon,ref:H,onClick:()=>F(e3),text:D("release.chip.button.other-versions",{count:J.length})})}):null,v[14]=E,v[15]=J.length,v[16]=D,v[17]=p):p=v[17],v[18]!==A||v[19]!==z||v[20]!==y||v[21]!==J||v[22]!==C||v[23]!==B||v[24]!==x){let a;v[26]!==A||v[27]!==z||v[28]!==y||v[29]!==C||v[30]!==B||v[31]!==x?(a=a=>{let b=(0,k.getVersionFromId)(a);return(0,g.jsx)(j.VersionChip,{selected:x===b,text:b,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>y(b),onCopyToDraftsNavigate:z,contextValues:{documentId:(0,k.getPublishedId)(a),releases:C,releasesLoading:B,documentType:A,bundleId:b,isVersion:!0}},a)},v[26]=A,v[27]=z,v[28]=y,v[29]=C,v[30]=B,v[31]=x,v[32]=a):a=v[32],q=J.map(a),v[18]=A,v[19]=z,v[20]=y,v[21]=J,v[22]=C,v[23]=B,v[24]=x,v[25]=q}else q=v[25];return v[33]!==q?(r=(0,g.jsx)(aB.Container,{width:1,children:(0,g.jsx)(aB.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:q})}),v[33]=q,v[34]=r):r=v[34],v[35]!==E||v[36]!==G||v[37]!==r?(s=(0,g.jsx)(aA.Popover,{animate:!1,open:E,portal:!0,arrow:!0,ref:K,placement:"bottom",referenceElement:G,zOffset:10,content:r}),v[35]=E,v[36]=G,v[37]=r,v[38]=s):s=v[38],v[39]!==o||v[40]!==p||v[41]!==s?(t=(0,g.jsxs)(g.Fragment,{children:[o,p,s]}),v[39]=o,v[40]=p,v[41]=s,v[42]=t):t=v[42],t}function e3(a){return!a}let e4=a=>{let b=(0,h.c)(16),{release:c}=a,{t:d}=(0,j.useTranslation)();if("archived"===c.state){let a,c;return b[0]!==d?(a=d("release.chip.tooltip.archived"),b[0]=d,b[1]=a):a=b[1],b[2]!==a?(c=(0,g.jsx)(aB.Text,{size:1,children:a}),b[2]=a,b[3]=c):c=b[3],c}if("asap"===c.metadata.releaseType){let a,c;return b[4]!==d?(a=d("release.type.asap"),b[4]=d,b[5]=a):a=b[5],b[6]!==a?(c=(0,g.jsx)(aB.Text,{size:1,children:a}),b[6]=a,b[7]=c):c=b[7],c}if("scheduled"===c.metadata.releaseType){let a,e="active"===c.state;return b[8]!==e||b[9]!==c||b[10]!==d?(a=c.metadata.intendedPublishAt&&(0,g.jsx)(aB.Text,{size:1,children:e?(0,g.jsx)(j.Translate,{t:d,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,j.formatRelativeLocalePublishDate)(c)}}):(0,g.jsx)(j.Translate,{t:d,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,j.formatRelativeLocalePublishDate)(c)}})}),b[8]=e,b[9]=c,b[10]=d,b[11]=a):a=b[11],a}if("undecided"===c.metadata.releaseType){let a,c;return b[12]!==d?(a=d("release.type.undecided"),b[12]=d,b[13]=a):a=b[13],b[14]!==a?(c=(0,g.jsx)(aB.Text,{size:1,children:a}),b[14]=a,b[15]=c):c=b[15],c}return null},e5={dateStyle:"medium",timeStyle:"short"},e6=(0,i.memo)(function(){let a,b,c,d,e,f,i,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=(0,h.c)(112),{selectedReleaseId:B,selectedPerspectiveName:C}=(0,j.usePerspective)(),{t:D}=(0,j.useTranslation)(),E=(0,j.useSetPerspective)(),{params:F,setParams:G}=d9(),H=(0,j.useDateTimeFormat)(e5),{loading:I}=(0,j.useActiveReleases)(),J=(0,j.useSchema)(),{editState:K,displayed:L,documentType:M,documentId:N}=dh(),O=L&&!L._createdAt,P=(0,j.useGetDefaultPerspective)(),Q=F?.historyVersion;A[0]!==L||A[1]!==N||A[2]!==Q?(a={historyVersion:Q,displayed:L,documentId:N},A[0]=L,A[1]=N,A[2]=Q,A[3]=a):a=A[3];let R=(0,j.useFilteredReleases)(a);A[4]!==N?(b={documentId:N},A[4]=N,A[5]=b):b=A[5];let{data:S}=(0,j.useDocumentVersions)(b);A[6]!==S?(c=S&&S.length>0&&!S.some(e7),A[6]=S,A[7]=c):c=A[7];let T=c,U=(0,j.useWorkspace)(),{onSetScheduledDraftPerspective:V}=(0,j.useSingleDocRelease)();A[8]!==V||A[9]!==F?.scheduledDraft||A[10]!==E?(d=()=>{F?.scheduledDraft?V(""):E("drafts")},A[8]=V,A[9]=F?.scheduledDraft,A[10]=E,A[11]=d):d=A[11];let W=d;A[12]!==P||A[13]!==V||A[14]!==F||A[15]!==G||A[16]!==E?(e=a=>{if((0,j.isReleaseDocument)(a)&&(0,j.isCardinalityOneRelease)(a))return void V((0,j.getReleaseIdFromReleaseDocumentId)(a._id));"published"===a&&F?.historyVersion&&G({...F,rev:F?.historyEvent||void 0,since:void 0,historyVersion:void 0});let b=(0,j.isReleaseDocument)(a)?(0,j.getReleaseIdFromReleaseDocumentId)(a._id):a===P?"":a;F?.scheduledDraft?G({...F,scheduledDraft:void 0},{perspective:b}):E(b)},A[12]=P,A[13]=V,A[14]=F,A[15]=G,A[16]=E,A[17]=e):e=A[17];let X=e;if(A[18]!==M||A[19]!==J){let a=J.get(M);f=!!a&&!0===a.liveEdit,A[18]=M,A[19]=J,A[20]=f}else f=A[20];let Y=f;a:{if(Y&&!B){i=!1;break a}i=!K?.published}let Z=i;A[21]!==L?._id||A[22]!==K?.version||A[23]!==F?(l=a=>{if(!F?.historyVersion){let b=K?.version&&(0,j.isGoingToUnpublish)(K?.version)&&(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===(0,k.getVersionFromId)(K?.version?._id);return{selected:!!((0,j.getReleaseIdFromReleaseDocumentId)(a._id)===(0,k.getVersionFromId)(L?._id||"")||b)}}let b=(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===F.historyVersion;return{selected:b,disabled:b}},A[21]=L?._id,A[22]=K?.version,A[23]=F,A[24]=l):l=A[24];let $=l;A[25]!==L?._id||A[26]!==K?.draft?._id||A[27]!==Y||A[28]!==C||A[29]!==B?(m=()=>!!(Y&&!K?.draft?._id&&!B||(0,k.isPublishedId)(L?._id||"")&&(0,j.isPublishedPerspective)(C||"")),A[25]=L?._id,A[26]=K?.draft?._id,A[27]=Y,A[28]=C,A[29]=B,A[30]=m):m=A[30];let _=m();b:{let a=L?._id||"";if(_||F?.historyVersion||C||(0,k.isVersionId)(a)){n=!1;break b}if((0,k.isDraftId)(a)){n=!0;break b}if((0,k.isPublishedId)(a)&&K?.published&&(0,j.isPublishedPerspective)(C||"")){n=!1;break b}n=!0}let aa=n;A[31]!==K?.draft||A[32]!==O||A[33]!==Y||A[34]!==T||A[35]!==B?(o=()=>!!T||!!O&&!!B||(!!K?.draft||!!Y)&&!!(O&&B||Y),A[31]=K?.draft,A[32]=O,A[33]=Y,A[34]=T,A[35]=B,A[36]=o):o=A[36];let ab=o(),ac=U.document.drafts?.enabled;if(A[37]!==S||A[38]!==R.currentReleases){let a;A[40]!==R.currentReleases?(a=a=>!((0,k.isPublishedId)(a)||(0,k.isDraftId)(a))&&!R.currentReleases.some(b=>(0,j.getReleaseIdFromReleaseDocumentId)(b._id)===(0,k.getVersionFromId)(a)),A[40]=R.currentReleases,A[41]=a):a=A[41],p=S.filter(a),A[37]=S,A[38]=R.currentReleases,A[39]=p}else p=A[39];let ad=p;A[42]!==H||A[43]!==K?.published||A[44]!==D?(q=(0,g.jsx)(aB.Text,{size:1,children:K?.published&&K?.published?._updatedAt?(0,g.jsx)(j.Translate,{t:D,i18nKey:"release.chip.tooltip.published-date",values:{date:H.format(new Date(K?.published._updatedAt))}}):(0,g.jsx)(g.Fragment,{children:D("release.chip.tooltip.not-published")})}),A[42]=H,A[43]=K?.published,A[44]=D,A[45]=q):q=A[45],A[46]!==X?(r=()=>X("published"),A[46]=X,A[47]=r):r=A[47],A[48]!==D?(s=D("release.chip.published"),A[48]=D,A[49]=s):s=A[49];let ae=K?.published?._id||K?.id||"",af=!K?.published;return A[50]!==M||A[51]!==R.notCurrentReleases||A[52]!==I||A[53]!==ae||A[54]!==af?(t={documentId:ae,releases:R.notCurrentReleases,releasesLoading:I,documentType:M,bundleId:"published",isVersion:!1,disabled:af},A[50]=M,A[51]=R.notCurrentReleases,A[52]=I,A[53]=ae,A[54]=af,A[55]=t):t=A[55],A[56]!==W||A[57]!==_||A[58]!==Z||A[59]!==q||A[60]!==r||A[61]!==s||A[62]!==t?(u=(0,g.jsx)(j.VersionChip,{tooltipContent:q,disabled:Z,onClick:r,selected:_,text:s,tone:"positive",onCopyToDraftsNavigate:W,contextValues:t}),A[56]=W,A[57]=_,A[58]=Z,A[59]=q,A[60]=r,A[61]=s,A[62]=t,A[63]=u):u=A[63],A[64]!==H||A[65]!==M||A[66]!==K?.draft||A[67]!==K?.id||A[68]!==K?.published?._id||A[69]!==R.notCurrentReleases||A[70]!==W||A[71]!==X||A[72]!==ab||A[73]!==ac||A[74]!==aa||A[75]!==Y||A[76]!==I||A[77]!==D?(v=ac&&(0,g.jsx)(j.VersionChip,{tooltipContent:(0,g.jsx)(aB.Text,{size:1,children:K?.draft?(0,g.jsx)(g.Fragment,{children:K?.draft._updatedAt?(0,g.jsx)(j.Translate,{t:D,i18nKey:"release.chip.tooltip.edited-date",values:{date:H.format(new Date(K?.draft._updatedAt))}}):(0,g.jsx)(j.Translate,{t:D,i18nKey:"release.chip.tooltip.created-date",values:{date:H.format(new Date(K?.draft._createdAt))}})}):(0,g.jsx)(g.Fragment,{children:D(Y?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:aa,disabled:ab,text:D("release.chip.draft"),tone:K?.draft?"caution":"neutral",onClick:()=>X("drafts"),onCopyToDraftsNavigate:W,contextValues:{documentId:K?.draft?._id||K?.published?._id||K?.id||"",documentType:M,releases:R.notCurrentReleases,releasesLoading:I,bundleId:"draft",isVersion:!1}}),A[64]=H,A[65]=M,A[66]=K?.draft,A[67]=K?.id,A[68]=K?.published?._id,A[69]=R.notCurrentReleases,A[70]=W,A[71]=X,A[72]=ab,A[73]=ac,A[74]=aa,A[75]=Y,A[76]=I,A[77]=D,A[78]=v):v=A[78],A[79]!==L?._id||A[80]!==M||A[81]!==R.inCreation||A[82]!==R.notCurrentReleases||A[83]!==W||A[84]!==I||A[85]!==D?(w=R.inCreation&&(0,g.jsx)(j.VersionChip,{tooltipContent:(0,g.jsx)(e4,{release:R.inCreation}),selected:!0,onClick:e8,locked:!1,tone:(0,j.getReleaseTone)(R.inCreation),text:R.inCreation.metadata.title||D("release.placeholder-untitled-release"),onCopyToDraftsNavigate:W,contextValues:{documentId:L?._id||"",documentType:M,disabled:!0,releases:R.notCurrentReleases,releasesLoading:I,bundleId:(0,j.getReleaseIdFromReleaseDocumentId)(R.inCreation._id),isVersion:!0,release:R.inCreation}}),A[79]=L?._id,A[80]=M,A[81]=R.inCreation,A[82]=R.notCurrentReleases,A[83]=W,A[84]=I,A[85]=D,A[86]=w):w=A[86],A[87]!==L||A[88]!==M||A[89]!==K?.version||A[90]!==R.currentReleases||A[91]!==R.notCurrentReleases||A[92]!==$||A[93]!==W||A[94]!==X||A[95]!==I||A[96]!==D?(x=L&&R.currentReleases?.map(a=>(0,g.jsx)(j.VersionChip,{tooltipContent:(0,g.jsx)(e4,{release:a}),...$(a),onClick:()=>X(a),text:a.metadata.title||D("release.placeholder-untitled-release"),tone:(0,j.getReleaseTone)(a),locked:(0,j.isReleaseScheduledOrScheduling)(a),onCopyToDraftsNavigate:W,contextValues:{documentId:L?._id||"",documentType:M,releases:R.notCurrentReleases,releasesLoading:I,bundleId:(0,j.getReleaseIdFromReleaseDocumentId)(a._id),isVersion:!0,release:a,isGoingToUnpublish:!!K?.version&&(0,j.isGoingToUnpublish)(K?.version)}},a._id)),A[87]=L,A[88]=M,A[89]=K?.version,A[90]=R.currentReleases,A[91]=R.notCurrentReleases,A[92]=$,A[93]=W,A[94]=X,A[95]=I,A[96]=D,A[97]=x):x=A[97],A[98]!==M||A[99]!==R.notCurrentReleases||A[100]!==W||A[101]!==X||A[102]!==I||A[103]!==ad||A[104]!==C?(y=(0,g.jsx)(e2,{nonReleaseVersions:ad,selectedPerspective:C,onSelectBundle:X,onCopyToDraftsNavigate:W,releases:R.notCurrentReleases,releasesLoading:I,documentType:M}),A[98]=M,A[99]=R.notCurrentReleases,A[100]=W,A[101]=X,A[102]=I,A[103]=ad,A[104]=C,A[105]=y):y=A[105],A[106]!==u||A[107]!==v||A[108]!==w||A[109]!==x||A[110]!==y?(z=(0,g.jsxs)(g.Fragment,{children:[u,v,w,x,y]}),A[106]=u,A[107]=v,A[108]=w,A[109]=x,A[110]=y,A[111]=z):z=A[111],z});function e7(a){return!(0,k.isVersionId)(a)}function e8(){}let e9=(0,aF.styled)(aB.Card)(a=>{let b=(0,bt.getTheme_v2)(a.theme);return aF.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${a.$showGradient&&aF.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,bt.rgba)(b.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),fa=(0,i.memo)((0,i.forwardRef)(function(a,b){let c,d,e,f,k,l,m,o=(0,h.c)(41),{menuItems:p}=a,{editState:q,onMenuAction:r,onPaneClose:s,onPaneSplit:t,onSetMaximizedPane:u,menuItemGroups:v,schemaType:w,connectionState:x,views:z,unstable_languageFilter:A,documentId:B}=dh(),{features:C}=dp(),{index:D,BackLink:E,hasGroupSiblings:F}=d9(),{maximizedPane:G}=ey(),{actions:H}=(0,j.useFieldActions)(),[I,J]=(0,i.useState)(null),K=(0,i.useRef)(null),L=function(a){let b,c,d=(0,h.c)(3),[e,f]=(0,i.useState)(!1);return d[0]!==a?(b=()=>{let b=()=>{let b=a.current;if(!b)return;let{scrollWidth:c,clientWidth:d}=b;if(!(c>d))return void f(!1);let{scrollLeft:e}=b;f(!(e+d>=c))},{intersectionObserver:c,mutationObserver:d}=function(){b();let c=a.current;if(!c)return{intersectionObserver:null,mutationObserver:null};let d=new IntersectionObserver(a=>{let b=a[0];b&&f(!b.isIntersecting)}),e=()=>{d.disconnect();let a=c.children[c.children.length-1];d.observe(a)};e();let g=new MutationObserver(()=>{e(),b()});return g.observe(c,{childList:!0,subtree:!1}),{intersectionObserver:d,mutationObserver:g}}();return()=>{c?.disconnect(),d?.disconnect()}},c=[a],d[0]=a,d[1]=b,d[2]=c):(b=d[1],c=d[2]),(0,i.useEffect)(b,c),e}(K),M=(0,aX.useTelemetry)();o[0]!==H||o[1]!==v||o[2]!==p||o[3]!==r?(c=eR({actionHandler:r,fieldActions:H,menuItems:p,menuItemGroups:v}),o[0]=H,o[1]=v,o[2]=p,o[3]=r,o[4]=c):c=o[4];let N=c;o[5]!==N?(d=N.filter(eP),o[5]=N,o[6]=d):d=o[6];let O=d;o[7]!==N?(e=N.filter(eQ),o[7]=N,o[8]=e):e=o[8];let P=e,{collapsed:Q,isLast:R}=cL(),S=R&&!Q?-1:0,T=C.splitViews&&t&&z.length>1,U=T&&F,V=C.backButton&&D>0,W=!U&&!V&&!!E,{t:X}=(0,j.useTranslation)(y),Y=G?.pane&&"object"==typeof G.pane&&"document"===G.pane.type&&G.pane.options.id===B;o[9]!==Y||o[10]!==u||o[11]!==M?(f=()=>{u?.(),Y?M.log(eD):M.log(eC)},o[9]=Y,o[10]=u,o[11]=M,o[12]=f):f=o[12];let Z=f;o[13]===Symbol.for("react.memo_cache_sentinel")?(k=(0,g.jsx)(eH,{}),o[13]=k):k=o[13];let $=k;o[14]!==E||o[15]!==V||o[16]!==X?(l=V&&(0,g.jsx)(aA.Button,{as:E,"data-as":"a",icon:n.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:X("pane-header.back-button.text")}}),o[14]=E,o[15]=V,o[16]=X,o[17]=l):l=o[17];let _=l;return o[18]!==E||o[19]!==_||o[20]!==Q||o[21]!==x||o[22]!==P||o[23]!==q||o[24]!==Z||o[25]!==Y||o[26]!==O||o[27]!==s||o[28]!==t||o[29]!==u||o[30]!==b||o[31]!==I||o[32]!==w||o[33]!==L||o[34]!==W||o[35]!==T||o[36]!==U||o[37]!==X||o[38]!==S||o[39]!==A?(m=(0,g.jsx)(aA.TooltipDelayGroupProvider,{children:Q?(0,g.jsx)(c2,{border:!0,ref:b,loading:"connecting"===x&&!q?.draft&&!q?.published,title:$,tabIndex:S,backButton:_}):(0,g.jsx)(aB.Card,{hidden:Q,style:{lineHeight:0},borderBottom:!0,children:(0,g.jsxs)(aB.Flex,{gap:3,paddingY:3,children:[(0,g.jsx)(e9,{$showGradient:L,children:(0,g.jsx)(aB.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:K,children:(0,g.jsx)(e6,{})})}),(0,g.jsx)(aB.Box,{flex:"none",paddingRight:3,children:(0,g.jsxs)(aB.Flex,{align:"center",gap:1,children:[A.length>0&&(0,g.jsx)(g.Fragment,{children:A.map((a,b)=>(0,g.jsx)(a,{schemaType:w},`language-filter-${b}`))}),O.map(fd),q&&(0,g.jsx)(h2,{group:"paneActions",children:a=>{let{states:b}=a;return(0,g.jsx)(fb,{contextMenuNodes:P,setReferenceElement:J,referenceElement:I,states:b})}}),T&&(0,g.jsx)(aA.Button,{"aria-label":X("buttons.split-pane-button.aria-label"),icon:n.SplitVerticalIcon,mode:"bleed",onClick:t,tooltipProps:{content:X("buttons.split-pane-button.tooltip")}},"split-pane-button"),U&&(0,g.jsx)(aA.Button,{icon:n.CloseIcon,mode:"bleed",onClick:s,tooltipProps:{content:X("buttons.split-pane-close-button.title")}},"close-view-button"),u&&(0,g.jsx)(aA.Button,{"aria-label":X(Y?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:Y?n.CollapseIcon:n.ExpandIcon,mode:"bleed",onClick:Z,tooltipProps:{content:X(Y?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":Y?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),W&&(0,g.jsx)(aA.Button,{icon:n.CloseIcon,mode:"bleed",tooltipProps:{content:X("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),o[18]=E,o[19]=_,o[20]=Q,o[21]=x,o[22]=P,o[23]=q,o[24]=Z,o[25]=Y,o[26]=O,o[27]=s,o[28]=t,o[29]=u,o[30]=b,o[31]=I,o[32]=w,o[33]=L,o[34]=W,o[35]=T,o[36]=U,o[37]=X,o[38]=S,o[39]=A,o[40]=m):m=o[40],m})),fb=(0,i.memo)(function(a){let b,c,d=(0,h.c)(7),{setReferenceElement:e,referenceElement:f,contextMenuNodes:j}=a,k=(0,i.useDeferredValue)(a.states);return d[0]!==k?(b=k.filter(fe),d[0]=k,d[1]=b):b=d[1],d[2]!==j||d[3]!==f||d[4]!==e||d[5]!==b?(c=(0,g.jsx)(fc,{setReferenceElement:e,referenceElement:f,contextMenuNodes:j,states:b}),d[2]=j,d[3]=f,d[4]=e,d[5]=b,d[6]=c):c=d[6],c}),fc=(0,i.memo)(function(a){let b,c,d=(0,h.c)(8),{states:e,setReferenceElement:f,contextMenuNodes:i,referenceElement:j}=a;d[0]!==i||d[1]!==f||d[2]!==e?(b=a=>{let{handleAction:b}=a;return(0,g.jsx)("div",{ref:f,children:(0,g.jsx)(cV,{nodes:i,actionsNodes:e.length>0?e.map((a,c)=>(0,g.jsx)(e0,{actionState:a,disabled:!!a.disabled,index:c,onAction:b},a.label)):void 0},"context-menu")})},d[0]=i,d[1]=f,d[2]=e,d[3]=b):b=d[3];let k=b;return d[4]!==j||d[5]!==k||d[6]!==e?(c=(0,g.jsx)(e$,{actionStates:e,referenceElement:j,children:k}),d[4]=j,d[5]=k,d[6]=e,d[7]=c):c=d[7],c});function fd(a){return(0,g.jsx)(c4,{node:a},a.key)}function fe(a){return!a.action||a.action!==eO.action}function ff(a){let b,c,d=(0,h.c)(3),{size:e}=a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(b={pointerEvents:"none",visibility:"hidden",width:0},d[0]=b):b=d[0],d[1]!==e?(c=(0,g.jsx)(aA.Button,{"aria-hidden":!0,disabled:!0,size:e,style:b,text:"-"}),d[1]=e,d[2]=c):c=d[2],c}let fg={primary:"primary",success:"positive",warning:"caution",danger:"critical"},fh=(0,i.memo)(function(a){let b,c,d=(0,h.c)(4),{states:e}=a;return 0===e.length?null:(d[0]!==e?(b=e.map(fl),d[0]=e,d[1]=b):b=d[1],d[2]!==b?(c=(0,g.jsx)(aB.Inline,{space:1,children:b}),d[2]=b,d[3]=c):c=d[3],c)}),fi=(0,i.memo)(function(a){let b,c=(0,h.c)(2),d=(0,i.useDeferredValue)(a.states);return c[0]!==d?(b=(0,g.jsx)(fh,{states:d}),c[0]=d,c[1]=b):b=c[1],b});function fj(){let a,b=(0,h.c)(3),{badges:c,editState:d}=dh();return d&&c?(b[0]!==c||b[1]!==d?(a=(0,g.jsx)(h3,{badges:c,badgeProps:d,children:fk}),b[0]=c,b[1]=d,b[2]=a):a=b[2],a):null}function fk(a){let{states:b}=a;return(0,g.jsx)(fi,{states:b})}function fl(a,b){return(0,g.jsx)(aA.Tooltip,{content:a.title,disabled:!a.title,placement:"top",portal:!0,children:(0,g.jsx)(aB.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:a.color?fg[a.color]:void 0,style:{whiteSpace:"nowrap"},children:a.label})},`${a.label}-${b}`)}let fm={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},fn=a=>{let b,c,d,e,f,l,m=(0,h.c)(34),{id:o,type:p,draft:q,version:r}=a;m[0]!==r?(b=r?._id&&(0,k.getVersionFromId)(r._id),m[0]=r,m[1]=b):b=m[1];let s=b,{delete:t}=(0,j.useDocumentOperation)(o,p,s),[u,v]=(0,i.useState)(!1),[w,x]=(0,i.useState)(!1),{t:z}=(0,j.useTranslation)(y);m[2]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{x(!1)},m[2]=c):c=m[2];let A=c;m[3]!==t?(d=a=>{x(!1),v(!0),t.execute(a),v(!1)},m[3]=t,m[4]=d):d=m[4];let B=d;m[5]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{x(!0)},m[5]=e):e=m[5];let C=e;m[6]!==s||m[7]!==o||m[8]!==p?(f={id:o,type:p,version:s,permission:"delete"},m[6]=s,m[7]=o,m[8]=p,m[9]=f):f=m[9];let[D,E]=(0,j.useDocumentPairPermissions)(f),F=(0,j.useCurrentUser)();a:{let a,b,c,d;if(!E&&!D?.granted){let a,b,c;m[10]!==z?(a=z("action.delete.label"),m[10]=z,m[11]=a):a=m[11],m[12]!==F?(b=(0,g.jsx)(j.InsufficientPermissionsMessage,{context:"delete-document",currentUser:F}),m[12]=F,m[13]=b):b=m[13],m[14]!==a||m[15]!==b?(c={tone:"critical",icon:n.TrashIcon,disabled:!0,label:a,title:b},m[14]=a,m[15]=b,m[16]=c):c=m[16],l=c;break a}let e=u||!!t.disabled||E;m[17]!==t.disabled||m[18]!==z?(a=t.disabled&&z(fm[t.disabled])||"",m[17]=t.disabled,m[18]=z,m[19]=a):a=m[19],m[20]!==u||m[21]!==z?(b=z(u?"action.delete.running.label":"action.delete.label"),m[20]=u,m[21]=z,m[22]=b):b=m[22],m[23]!==q?._id||m[24]!==B||m[25]!==o||m[26]!==w||m[27]!==p?(c=w&&{type:"custom",component:(0,g.jsx)(hL,{action:"delete",id:q?._id||o,type:p,onCancel:A,onConfirm:B})},m[23]=q?._id,m[24]=B,m[25]=o,m[26]=w,m[27]=p,m[28]=c):c=m[28],m[29]!==c||m[30]!==e||m[31]!==a||m[32]!==b?(d={tone:"critical",icon:n.TrashIcon,disabled:e,title:a,label:b,shortcut:"Ctrl+Alt+D",onHandle:C,dialog:c},m[29]=c,m[30]=e,m[31]=a,m[32]=b,m[33]=d):d=m[33],l=d}return l};function fo(a){let b,c,d,e,f,k,l=(0,h.c)(18),{publishedExists:m,onCancel:n,onConfirm:o}=a,{t:p}=(0,j.useTranslation)(y),q=`deletion-confirmation-${(0,i.useId)()}`;return l[0]!==p?(b=p("action.discard-changes.confirm-dialog.header.text"),l[0]=p,l[1]=b):b=l[1],l[2]!==p?(c=p("action.discard-changes.label"),l[2]=p,l[3]=c):c=l[3],l[4]!==o||l[5]!==c?(d={confirmButton:{text:c,onClick:o}},l[4]=o,l[5]=c,l[6]=d):d=l[6],l[7]!==m||l[8]!==p?(e=p(m?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),l[7]=m,l[8]=p,l[9]=e):e=l[9],l[10]!==e?(f=(0,g.jsx)(aB.Text,{size:1,children:e}),l[10]=e,l[11]=f):f=l[11],l[12]!==q||l[13]!==n||l[14]!==b||l[15]!==d||l[16]!==f?(k=(0,g.jsx)(aA.Dialog,{width:1,id:q,header:b,footer:d,onClose:n,onClickOutside:n,children:f}),l[12]=q,l[13]=n,l[14]=b,l[15]=d,l[16]=f,l[17]=k):k=l[17],k}fn.action="delete",fn.displayName="DeleteAction";let fp={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},fq=a=>{let b,c,d,e,f,l,m=(0,h.c)(31),{id:o,type:p,published:q,version:r,draft:s}=a;m[0]!==r?(b=r?._id&&(0,k.getVersionFromId)(r._id),m[0]=r,m[1]=b):b=m[1];let t=b,{discardChanges:u}=(0,j.useDocumentOperation)(o,p,t),[v,w]=(0,i.useState)(!1);m[2]!==t||m[3]!==o||m[4]!==p?(c={id:o,type:p,version:t,permission:"discardDraft"},m[2]=t,m[3]=o,m[4]=p,m[5]=c):c=m[5];let[x,z]=(0,j.useDocumentPairPermissions)(c),A=(0,j.useCurrentUser)(),{displayed:B}=dh(),{t:C}=(0,j.useTranslation)(y),D=B?._id&&(0,k.isPublishedId)(B?._id);m[6]!==u?(d=()=>{u.execute(),w(!1)},m[6]=u,m[7]=d):d=m[7];let E=d;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=()=>{w(!1)},m[8]=e):e=m[8];let F=e;m[9]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{w(!0)},m[9]=f):f=m[9];let G=f;a:{let a,b,c,d;if(!r&&!s||D){l=null;break a}if(!z&&!x?.granted){let a,b,c;m[10]!==C?(a=C("action.discard-changes.label"),m[10]=C,m[11]=a):a=m[11],m[12]!==A?(b=(0,g.jsx)(j.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:A}),m[12]=A,m[13]=b):b=m[13],m[14]!==a||m[15]!==b?(c={tone:"critical",icon:n.ResetIcon,disabled:!0,label:a,title:b},m[14]=a,m[15]=b,m[16]=c):c=m[16],l=c;break a}let e=!!u.disabled||z,f=u.disabled&&fp[u.disabled]||"";m[17]!==C||m[18]!==f?(a=C(f),m[17]=C,m[18]=f,m[19]=a):a=m[19],m[20]!==C?(b=C("action.discard-changes.label"),m[20]=C,m[21]=b):b=m[21],m[22]!==E||m[23]!==v||m[24]!==q?(c=v&&{type:"custom",component:(0,g.jsx)(fo,{onCancel:F,onConfirm:E,publishedExists:!!q})},m[22]=E,m[23]=v,m[24]=q,m[25]=c):c=m[25],m[26]!==b||m[27]!==c||m[28]!==e||m[29]!==a?(d={tone:"critical",icon:n.ResetIcon,disabled:e,title:a,label:b,onHandle:G,dialog:c},m[26]=b,m[27]=c,m[28]=e,m[29]=a,m[30]=d):d=m[30],l=d}return l};fq.action="discardChanges",fq.displayName="DiscardChangesAction";let fr={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},fs=a=>{let b,c,d,e,f=(0,h.c)(31),{id:l,type:m,release:o,mapDocument:p,version:q}=a,r=(0,j.useDocumentStore)();f[0]!==q?(b=q?._id&&(0,k.getVersionFromId)(q._id),f[0]=q,f[1]=b):b=f[1];let s=b,{duplicate:t}=(0,j.useDocumentOperation)(l,m,s),{navigateIntent:u}=(0,aK.useRouter)(),[v,w]=(0,i.useState)(!1);f[2]!==l||f[3]!==o||f[4]!==m?(c={id:l,type:m,version:o,permission:"duplicate"},f[2]=l,f[3]=o,f[4]=m,f[5]=c):c=f[5];let[x,z]=(0,j.useDocumentPairPermissions)(c),{t:A}=(0,j.useTranslation)(y),B=(0,j.useCurrentUser)();f[6]!==r.pair||f[7]!==t||f[8]!==l||f[9]!==p||f[10]!==u||f[11]!==m?(d=async()=>{let a=(0,aE.uuid)();w(!0);let b=(0,aU.firstValueFrom)(r.pair.operationEvents(l,m).pipe((0,aU.filter)(ft)));t.execute(a,{mapDocument:p}),await b,u("edit",{id:a,type:m}),w(!1)},f[6]=r.pair,f[7]=t,f[8]=l,f[9]=p,f[10]=u,f[11]=m,f[12]=d):d=f[12];let C=d;a:{let a,b,c;if(!z&&!x?.granted){let a,b,c;f[13]!==A?(a=A("action.duplicate.label"),f[13]=A,f[14]=a):a=f[14],f[15]!==B?(b=(0,g.jsx)(j.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:B}),f[15]=B,f[16]=b):b=f[16],f[17]!==a||f[18]!==b?(c={icon:n.CopyIcon,disabled:!0,label:a,title:b},f[17]=a,f[18]=b,f[19]=c):c=f[19],e=c;break a}let d=v||!!t.disabled||z;f[20]!==v||f[21]!==A?(a=A(v?"action.duplicate.running.label":"action.duplicate.label"),f[20]=v,f[21]=A,f[22]=a):a=f[22],f[23]!==t.disabled||f[24]!==A?(b=t.disabled?A(fr[t.disabled]):"",f[23]=t.disabled,f[24]=A,f[25]=b):b=f[25],f[26]!==C||f[27]!==d||f[28]!==a||f[29]!==b?(c={icon:n.CopyIcon,disabled:d,label:a,title:b,onHandle:C},f[26]=C,f[27]=d,f[28]=a,f[29]=b,f[30]=c):c=f[30],e=c}return e};function ft(a){return"duplicate"===a.op&&"success"===a.type}fs.action="duplicate",fs.displayName="DuplicateAction";let fu=(0,aY.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),fv={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},fw={status:"published"};function fx(a,b,c){return"ALREADY_PUBLISHED"===a&&b?(0,g.jsx)(fy,{publishedAt:b}):c(fv[a])}function fy(a){let b,c,d,e=(0,h.c)(6),{publishedAt:f}=a,{t:i}=(0,j.useTranslation)(y);e[0]===Symbol.for("react.memo_cache_sentinel")?(b={useTemporalPhrase:!0},e[0]=b):b=e[0];let k=(0,j.useRelativeTime)(f,b);return e[1]!==i||e[2]!==k?(c=i("action.publish.already-published.tooltip",{timeSincePublished:k}),e[1]=i,e[2]=k,e[3]=c):c=e[3],e[4]!==c?(d=(0,g.jsx)(aB.Text,{children:c}),e[4]=c,e[5]=d):d=e[5],d}let fz=a=>{let b,c,d,e,f,l,m,o,p,q,r,s,t=(0,h.c)(81),{id:u,type:v,liveEdit:w,draft:x,published:z,release:A,version:B}=a,[C,D]=(0,i.useState)(null);t[0]!==B?(b=B?._id&&(0,k.getVersionFromId)(B._id),t[0]=B,t[1]=b):b=t[1];let E=b,{publish:F}=(0,j.useDocumentOperation)(u,v,E),{changesOpen:G,documentId:H,documentType:I,value:J}=dh(),K=(0,j.useValidationStatus)(J._id,v,!A),L=(0,j.useSyncState)(u,v),M=(0,j.useEditState)(H,I),{t:N}=(0,j.useTranslation)(y);t[2]!==M?.draft||t[3]!==M?.published?(c=M?.draft||M?.published||{},t[2]=M?.draft,t[3]=M?.published,t[4]=c):c=t[4];let O=c._rev;t[5]!==K.validation?(d=K.validation.some(aD.isValidationErrorMarker),t[5]=K.validation,t[6]=d):d=t[6];let P=d,[Q,R]=(0,i.useState)(!1),S=L.isSyncing,T=K.isValidating;t[7]!==u||t[8]!==v?(e={id:u,type:v,permission:"publish"},t[7]=u,t[8]=v,t[9]=e):e=t[9];let[U,V]=(0,j.useDocumentPairPermissions)(e),W=(0,j.useCurrentUser)();t[10]!==P||t[11]!==F.disabled||t[12]!==z||t[13]!==N?(f=F.disabled?fx(F.disabled,(z||{})._updatedAt,N)||"":P?N("action.publish.validation-issues.tooltip"):"",t[10]=P,t[11]=F.disabled,t[12]=z,t[13]=N,t[14]=f):f=t[14];let X=f,Y=z?._rev;t[15]!==Y||t[16]!==F?(l=()=>{F.execute(),D({status:"publishing",publishRevision:Y})},t[15]=Y,t[16]=F,t[17]=l):l=t[17];let Z=l;t[18]!==Z||t[19]!==P||t[20]!==S||t[21]!==Q||t[22]!==O||t[23]!==K.isValidating||t[24]!==K.revision?(m=()=>{let a=!1===K.isValidating&&K.revision!==O;Q&&!S&&a&&(P||Z(),R(!1))},t[18]=Z,t[19]=P,t[20]=S,t[21]=Q,t[22]=O,t[23]=K.isValidating,t[24]=K.revision,t[25]=m):m=t[25],t[26]!==Z||t[27]!==P||t[28]!==S||t[29]!==T||t[30]!==Q||t[31]!==O||t[32]!==K.isValidating||t[33]!==K.revision?(o=[S,Z,P,Q,K.revision,O,T,K.isValidating],t[26]=Z,t[27]=P,t[28]=S,t[29]=T,t[30]=Q,t[31]=O,t[32]=K.isValidating,t[33]=K.revision,t[34]=o):o=t[34],(0,i.useEffect)(m,o),t[35]!==Y||t[36]!==C?(p=()=>{let a=C?.status==="publishing"&&Y!==C.publishRevision,b=a?fw:null,c=setTimeout(()=>{D(b)},a?200:4e3);return()=>clearTimeout(c)},t[35]=Y,t[36]=C,t[37]=p):p=t[37],t[38]!==G||t[39]!==Y||t[40]!==C?(q=[G,C,Y],t[38]=G,t[39]=Y,t[40]=C,t[41]=q):q=t[41],(0,i.useEffect)(p,q);let $=(0,aX.useTelemetry)();t[42]!==Z||t[43]!==x?._createdAt||t[44]!==z||t[45]!==O||t[46]!==L.isSyncing||t[47]!==$||t[48]!==K.isValidating||t[49]!==K.revision?(r=()=>{$.log(fu,{publishedImmediately:!x?._createdAt,previouslyPublished:!!z}),L.isSyncing||K.isValidating||K.revision!==O?R(!0):Z()},t[42]=Z,t[43]=x?._createdAt,t[44]=z,t[45]=O,t[46]=L.isSyncing,t[47]=$,t[48]=K.isValidating,t[49]=K.revision,t[50]=r):r=t[50];let _=r;a:{let a,b,c;if(A&&B||w&&!B){s=null;break a}if(z&&!x&&!B){let a,b,c;t[51]!==N?(a=N("action.publish.label"),t[51]=N,t[52]=a):a=t[52];let d=z?._updatedAt;t[53]!==N||t[54]!==d?(b=fx("ALREADY_PUBLISHED",d,N),t[53]=N,t[54]=d,t[55]=b):b=t[55],t[56]!==a||t[57]!==b?(c={tone:"default",icon:n.PublishIcon,label:a,title:b,disabled:!0},t[56]=a,t[57]=b,t[58]=c):c=t[58],s=c;break a}if(!V&&!U?.granted){let a,b,c;t[59]!==N?(a=N("action.publish.label"),t[59]=N,t[60]=a):a=t[60],t[61]!==W?(b=(0,g.jsx)(j.InsufficientPermissionsMessage,{context:"publish-document",currentUser:W}),t[61]=W,t[62]=b):b=t[62],t[63]!==a||t[64]!==b?(c={tone:"default",icon:n.PublishIcon,label:a,title:b,disabled:!0},t[63]=a,t[64]=b,t[65]=c):c=t[65],s=c;break a}let d=!!(Q||M?.transactionSyncLock?.enabled||C?.status==="publishing"||C?.status==="published"||P||F.disabled),e=d||V;t[66]!==Q||t[67]!==C?.status||t[68]!==N?(a=N(C?.status==="published"?"action.publish.published.label":Q||C?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),t[66]=Q,t[67]=C?.status,t[68]=N,t[69]=a):a=t[69],t[70]!==Q||t[71]!==C?.status||t[72]!==N||t[73]!==X?(b=Q?N("action.publish.waiting"):C?.status==="published"||C?.status==="publishing"?null:X,t[70]=Q,t[71]=C?.status,t[72]=N,t[73]=X,t[74]=b):b=t[74];let f=d||Q?null:"Ctrl+Alt+P";t[75]!==_||t[76]!==e||t[77]!==a||t[78]!==b||t[79]!==f?(c={disabled:e,tone:"default",label:a,icon:n.PublishIcon,title:b,shortcut:f,onHandle:_},t[75]=_,t[76]=e,t[77]=a,t[78]=b,t[79]=f,t[80]=c):c=t[80],s=c}return s};fz.action="publish",fz.displayName="PublishAction";let fA={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},fB=a=>{let b,c,d,e,f,k,l=(0,h.c)(22),{id:m,type:o,draft:p,liveEdit:q,release:r}=a,{unpublish:s}=(0,j.useDocumentOperation)(m,o),[t,u]=(0,i.useState)(!1);l[0]!==m||l[1]!==o?(b={id:m,type:o,permission:"unpublish"},l[0]=m,l[1]=o,l[2]=b):b=l[2];let[v,w]=(0,j.useDocumentPairPermissions)(b),x=(0,j.useCurrentUser)(),{t:z}=(0,j.useTranslation)(y),{selectedPerspective:A}=(0,j.usePerspective)(),B="drafts"===A;l[3]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{u(!1)},l[3]=c):c=l[3];let C=c;l[4]!==s?(d=()=>{u(!1),s.execute()},l[4]=s,l[5]=d):d=l[5];let D=d;a:{if(t){let a,b=p?._id||m;l[6]!==D||l[7]!==b||l[8]!==o?(a={type:"dialog",onClose:C,content:(0,g.jsx)(hL,{id:b,type:o,action:"unpublish",onCancel:C,onConfirm:D})},l[6]=D,l[7]=b,l[8]=o,l[9]=a):a=l[9],e=a;break a}e=null}let E=e;return l[10]!==x||l[11]!==E||l[12]!==B||l[13]!==w||l[14]!==q||l[15]!==v?.granted||l[16]!==r||l[17]!==z||l[18]!==s.disabled?(f=()=>r||B||q?null:w||v?.granted?{tone:"critical",icon:n.UnpublishIcon,disabled:!!s.disabled||w,label:z("action.unpublish.label"),title:s.disabled?z(fA[s.disabled]):"",onHandle:()=>u(!0),dialog:E}:{tone:"critical",icon:n.UnpublishIcon,label:"Unpublish",title:(0,g.jsx)(j.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:x}),disabled:!0},l[10]=x,l[11]=E,l[12]=B,l[13]=w,l[14]=q,l[15]=v?.granted,l[16]=r,l[17]=z,l[18]=s.disabled,l[19]=f):f=l[19],l[20]!==f?(k=f(),l[20]=f,l[21]=k):k=l[21],k};fB.action="unpublish",fB.displayName="UnpublishAction";let fC=(0,i.memo)(function(a){let b,c,d,e,f,k,l,m,n,o=(0,h.c)(38),{disabled:p,states:q}=a,{__internal_tasks:r}=(0,j.useSource)(),{editState:s}=dh(),{params:t}=d9(),u=!!t?.rev,{selectedReleaseId:v}=(0,j.usePerspective)();o[0]!==q?([b,...c]=q,o[0]=q,o[1]=b,o[2]=c):(b=o[1],c=o[2]);let[w,x]=(0,i.useState)(null);a:{let a,c,e,f;if(!b||!b.title&&!b.shortcut){d=null;break a}o[3]===Symbol.for("react.memo_cache_sentinel")?(a={maxWidth:300},o[3]=a):a=o[3],o[4]!==b.title?(c=b.title&&(0,g.jsx)(aB.Text,{size:1,children:b.title}),o[4]=b.title,o[5]=c):c=o[5],o[6]!==b.shortcut?(e=b.shortcut&&(0,g.jsx)(aA.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(b.shortcut).split("+").map(fJ)}),o[6]=b.shortcut,o[7]=e):e=o[7],o[8]!==c||o[9]!==e?(f=(0,g.jsxs)(aB.Flex,{style:a,align:"center",gap:3,children:[c,e]}),o[8]=c,o[9]=e,o[10]=f):f=o[10],d=f}let y=d;o[11]!==s?.liveEdit||o[12]!==s?.version||o[13]!==b||o[14]!==v||o[15]!==u?(e=u?!!b:v?b&&v&&!(0,j.isSanityDefinedAction)(b):b&&(!s?.liveEdit||s?.version),o[11]=s?.liveEdit,o[12]=s?.version,o[13]=b,o[14]=v,o[15]=u,o[16]=e):e=o[16];let z=e;o[17]!==b||o[18]!==c||o[19]!==z?(f=z?c:[b,...c].filter(Boolean),o[17]=b,o[18]=c,o[19]=z,o[20]=f):f=o[20];let A=f,B=r&&r.footerAction;return o[21]!==p||o[22]!==b||o[23]!==z||o[24]!==y?(k=z&&(0,g.jsx)(aB.LayerProvider,{zOffset:200,children:(0,g.jsx)(aA.Tooltip,{disabled:!y,content:y,placement:"top",children:(0,g.jsx)(aB.Stack,{children:(0,g.jsx)(aA.Button,{"data-testid":`action-${cN(b.label)}`,disabled:p||!!b.disabled,icon:b.icon,onClick:b.onHandle,ref:x,text:b.label,tone:b.tone||"primary"})})})}),o[21]=p,o[22]=b,o[23]=z,o[24]=y,o[25]=k):k=o[25],o[26]!==p||o[27]!==A?(l=A.length>0&&(0,g.jsx)(e_,{actionStates:A,disabled:p}),o[26]=p,o[27]=A,o[28]=l):l=o[28],o[29]!==w||o[30]!==b||o[31]!==z?(m=z&&b&&b.dialog&&(0,g.jsx)(eZ,{dialog:b.dialog,referenceElement:w}),o[29]=w,o[30]=b,o[31]=z,o[32]=m):m=o[32],o[33]!==B||o[34]!==k||o[35]!==l||o[36]!==m?(n=(0,g.jsxs)(aB.Flex,{align:"center",gap:1,children:[B,k,l,m]}),o[33]=B,o[34]=k,o[35]=l,o[36]=m,o[37]=n):n=o[37],n}),fD=(0,i.memo)(function(){let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(h2,{group:"default",children:fK}),b[0]=a):a=b[0],a});function fE(a){let b,c,d=(0,h.c)(6),{connectionState:e,documentId:f}=dh();d[0]!==a.states?(b=a.states.filter(fF),d[0]=a.states,d[1]=b):b=d[1];let i=b;if(0===i.length)return null;let j="connected"!==e;return d[2]!==f||d[3]!==i||d[4]!==j?(c=(0,g.jsx)(fC,{disabled:j,states:i},f),d[2]=f,d[3]=i,d[4]=j,d[5]=c):c=d[5],c}function fF(a){return!a.action||a.action!==eO.action}let fG=(0,i.memo)(function(){let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(h2,{group:"default",children:fL}),b[0]=a):a=b[0],a});function fH(a){let b,c,d,e=(0,h.c)(8),{states:f}=a,{connectionState:i,editState:j,revisionId:k}=dh();e[0]!==j?.draft||e[1]!==j?.published?(b=j?.draft||j?.published||{},e[0]=j?.draft,e[1]=j?.published,e[2]=b):b=e[2];let l=b._rev===k,m="connected"!==i||!!l;return e[3]!==f?(c=f.filter(fI).slice(-1),e[3]=f,e[4]=c):c=e[4],e[5]!==m||e[6]!==c?(d=(0,g.jsx)(fC,{disabled:m,states:c}),e[5]=m,e[6]=c,e[7]=d):d=e[7],d}function fI(a){return!!a.action&&a.action===eO.action}function fJ(a){return a.slice(0,1).toUpperCase()+a.slice(1).toLowerCase()}function fK(a){let{states:b}=a;return(0,g.jsx)(fE,{states:b})}function fL(a){let{states:b}=a;return(0,g.jsx)(fH,{states:b})}let fM={create:n.AddIcon,delete:n.TrashIcon,discardDraft:n.CloseIcon,initial:n.AddIcon,editDraft:n.EditIcon,editLive:n.EditIcon,publish:n.PublishIcon,unpublish:n.UnpublishIcon},fN=(0,aF.styled)(n.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function fO(a){let b,c,d,e,f,i=(0,h.c)(14),{isExpanded:k,onExpand:l}=a,{t:m}=(0,j.useTranslation)(y);i[0]!==k||i[1]!==l?(b=a=>{a.stopPropagation(),function(a){if(a)return;let b=document.getElementById(f2);if(b){let a=b.children[0];if(!(a.scrollHeight>a.clientHeight)){let b=getComputedStyle(a).overflowY;a.style.overflowY="hidden",setTimeout(()=>{a.style.overflowY=b},0)}}}(k),l()},i[0]=k,i[1]=l,i[2]=b):b=i[2];let n=b;return i[3]!==k?(c=(0,g.jsx)(fN,{"data-expanded":k}),i[3]=k,i[4]=c):c=i[4],i[5]!==k||i[6]!==m?(d=m(k?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),i[5]=k,i[6]=m,i[7]=d):d=i[7],i[8]!==d?(e={content:d},i[8]=d,i[9]=e):e=i[9],i[10]!==n||i[11]!==c||i[12]!==e?(f=(0,g.jsx)(aA.Button,{mode:"bleed",icon:c,tooltipProps:e,onClick:n}),i[10]=n,i[11]=c,i[12]=e,i[13]=f):f=i[13],f}let fP=(0,aF.styled)(aB.Stack)`
  max-width: 200px;
`,fQ=(0,aF.styled)(aB.Flex)`
  max-height: ${a=>a.$maxHeight};
  min-width: 244px;
`,fR=(0,aF.styled)(aB.Box)(({$visible:a})=>aF.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${a&&aF.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),fS={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function fT(a){let b,c,d=(0,h.c)(9),{maxLength:e,userIds:f,size:i,withTooltip:k}=a,l=void 0===k||k;if(d[0]!==f||d[1]!==l){let a;d[3]!==l?(a=a=>(0,g.jsx)(j.UserAvatar,{user:a,withTooltip:l},a),d[3]=l,d[4]=a):a=d[4],b=f.map(a),d[0]=f,d[1]=l,d[2]=b}else b=d[2];return d[5]!==e||d[6]!==i||d[7]!==b?(c=(0,g.jsx)(aB.AvatarStack,{maxLength:e,size:i,children:b}),d[5]=e,d[6]=i,d[7]=b,d[8]=c):c=d[8],c}let fU=(0,aF.styled)(aB.Flex)(a=>{let b=(0,bt.getTheme_v2)(a.theme),c=a.$color;return aF.css`
    --card-icon-color: ${b.color.avatar[c].fg};
    background-color: ${b.color.avatar[c].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${b.avatar.sizes[0].size}px;
    height: ${b.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),fV={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},fW={minimal:!0,useTemporalPhrase:!0},fX=(0,aF.styled)(aC.Skeleton)(a=>{let b=(0,bt.getTheme_v2)(a.theme);return aF.css`
    width: 6ch;
    height: ${b.font.text.sizes[0].lineHeight}px;
  `}),fY=a=>{let b,c,d,e=(0,h.c)(10),{userId:f}=a,[i,k]=(0,j.useUser)(f);return e[0]!==k||e[1]!==i?(b=(0,g.jsx)(aB.Box,{children:k||!i?(0,g.jsx)(j.AvatarSkeleton,{animated:!0}):(0,g.jsx)(j.UserAvatar,{user:i})}),e[0]=k,e[1]=i,e[2]=b):b=e[2],e[3]!==k||e[4]!==i?(c=(0,g.jsx)(aB.Box,{children:k||!i?.displayName?(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(fX,{animated:!0})}):(0,g.jsx)(aB.Text,{muted:!0,size:1,children:i.displayName})}),e[3]=k,e[4]=i,e[5]=c):c=e[5],e[6]!==b||e[7]!==c||e[8]!==f?(d=(0,g.jsxs)(aB.Flex,{align:"center",gap:2,padding:1,children:[b,c]},f),e[6]=b,e[7]=c,e[8]=f,e[9]=d):d=e[9],d},fZ=a=>{let b,c,d,e,f=(0,h.c)(9),{collaborators:i}=a,{t:k}=(0,j.useTranslation)("studio");return f[0]!==k?(b=k("timeline.changes.title"),f[0]=k,f[1]=b):b=f[1],f[2]!==b?(c=(0,g.jsx)(aB.Box,{padding:1,paddingBottom:2,children:(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:b})}),f[2]=b,f[3]=c):c=f[3],f[4]!==i?(d=i.map(f_),f[4]=i,f[5]=d):d=f[5],f[6]!==c||f[7]!==d?(e=(0,g.jsxs)(aB.Stack,{paddingBottom:1,children:[c,d]}),f[6]=c,f[7]=d,f[8]=e):e=f[8],e};function f$(a){let b,c,d,e,f,i,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=(0,h.c)(55),{chunk:A,isSelected:B,onSelect:C,collaborators:D,optionsMenu:E}=a,{t:F}=(0,j.useTranslation)("studio"),{type:G,endTimestamp:H}=A;z[0]!==G?(b=fM[G],z[0]=G,z[1]=b):b=z[1];let I=b;z[2]!==A.authors?(c=Array.from(A.authors),z[2]=A.authors,z[3]=c):c=z[3];let J=c;z[4]!==D?(d=D?Array.from(D):[],z[4]=D,z[5]=d):d=z[5];let K=d,L="delete"!==G;z[6]===Symbol.for("react.memo_cache_sentinel")?(e={dateStyle:"medium",timeStyle:"short"},z[6]=e):e=z[6];let M=(0,j.useDateTimeFormat)(e);z[7]!==H?(f=new Date(H),z[7]=H,z[8]=f):f=z[8];let N=(0,j.useRelativeTime)(f||"",fW);if(z[9]!==M||z[10]!==H){let a=new Date(H);i=M.format(a),z[9]=M,z[10]=H,z[11]=i}else i=z[11];let O=i;z[12]!==A||z[13]!==L||z[14]!==C?(k=a=>{a.preventDefault(),a.stopPropagation(),L&&C(A)},z[12]=A,z[13]=L,z[14]=C,z[15]=k):k=z[15];let P=k;z[16]===Symbol.for("react.memo_cache_sentinel")?(l={position:"relative"},z[16]=l):l=z[16],z[17]!==J?(m=(0,g.jsx)(fT,{maxLength:3,userIds:J,size:2}),z[17]=J,z[18]=m):m=z[18];let Q=fV[G];return z[19]!==I?(n=I&&(0,g.jsx)(I,{}),z[19]=I,z[20]=n):n=z[20],z[21]!==n?(o=(0,g.jsx)(aB.Text,{size:0,children:n}),z[21]=n,z[22]=o):o=z[22],z[23]!==Q||z[24]!==o?(p=(0,g.jsx)(fU,{align:"center",justify:"center",$color:Q,children:o}),z[23]=Q,z[24]=o,z[25]=p):p=z[25],z[26]!==p||z[27]!==m?(q=(0,g.jsxs)("div",{style:l,children:[m,p]}),z[26]=p,z[27]=m,z[28]=q):q=z[28],z[29]!==F||z[30]!==G?(r=F(fS[G])||(0,g.jsx)("code",{children:G}),z[29]=F,z[30]=G,z[31]=r):r=z[31],z[32]!==r?(s=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:r}),z[32]=r,z[33]=s):s=z[33],z[34]!==O||z[35]!==H||z[36]!==N?(t=(0,g.jsx)(aB.Text,{as:"time",size:1,muted:!0,dateTime:H,title:O,children:N}),z[34]=O,z[35]=H,z[36]=N,z[37]=t):t=z[37],z[38]!==s||z[39]!==t?(u=(0,g.jsxs)(aB.Stack,{space:2,children:[s,t]}),z[38]=s,z[39]=t,z[40]=u):u=z[40],z[41]!==K?(v=K.length>0&&(0,g.jsx)(aB.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,g.jsx)(aA.Tooltip,{placement:"top",content:(0,g.jsx)(fZ,{collaborators:K}),portal:!0,children:(0,g.jsx)(aB.Box,{paddingLeft:2,paddingY:2,children:(0,g.jsx)(fT,{maxLength:3,userIds:K,size:0,withTooltip:!1})})})}),z[41]=K,z[42]=v):v=z[42],z[43]!==q||z[44]!==u||z[45]!==v?(w=(0,g.jsxs)(aB.Flex,{align:"center",gap:3,children:[q,u,v]}),z[43]=q,z[44]=u,z[45]=v,z[46]=w):w=z[46],z[47]!==A.id||z[48]!==P||z[49]!==B||z[50]!==w?(x=(0,g.jsx)(aB.Card,{as:"button",onClick:P,padding:2,pressed:B,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":A.id,children:w}),z[47]=A.id,z[48]=P,z[49]=B,z[50]=w,z[51]=x):x=z[51],z[52]!==E||z[53]!==x?(y=(0,g.jsxs)(aB.Flex,{align:"center",gap:1,children:[x,E]}),z[52]=E,z[53]=x,z[54]=y):y=z[54],y}function f_(a){return(0,g.jsx)(fY,{userId:a},a)}let f0=a=>"publish"!==a.type,f1=a=>"publish"===a.type,f2="timeline-list-wrapper",f3=a=>{let b,c,d,e,f,k,l,m,n,o,p,q,r,s,t,u,v=(0,h.c)(51),{chunks:w,hasMoreChunks:x,lastChunk:y,onLoadMore:z,onSelect:A,listMaxHeight:B}=a,C=void 0===B?"calc(100vh - 280px)":B,[D,E]=(0,i.useState)(!1),{t:F}=(0,j.useTranslation)("studio"),G=y?.id;v[0]!==w?(b=function(a){let b=[];for(let c of a){if(f1(c)){b.push({...c,type:"publish",children:[],collaborators:new Set});continue}if(f0(c)){let a=function(a){let b=null;for(let c=a.length-1;c>=0;c--){let d=a[c];if(f1(d)){b=d;break}if("editDraft"!==d.type)break}return b}(b);if("editDraft"===c.type&&a?.type==="publish"){Array.from(c.authors).forEach(b=>{a.collaborators.add(b)}),a.children.push(c.id),b.push({...c,parentId:a.id});continue}}f0(c)&&b.push(c)}return b}(w),v[0]=w,v[1]=b):b=v[1];let H=b;v[2]!==H||v[3]!==G?(c=()=>{if(G){let a=H.find(a=>a.id===G);if(a&&f0(a)&&a.parentId)return new Set([a.parentId])}return new Set},v[2]=H,v[3]=G,v[4]=c):c=v[4];let[I,J]=(0,i.useState)(c);if(v[5]!==H||v[6]!==G?(d=()=>{if(G){let a=H.find(a=>a.id===G);if(a&&f0(a)&&a.parentId){let b=a.parentId;J(a=>{if(a.has(b))return a;let c=new Set(a);return c.add(b),c})}}},e=[H,G],v[5]=H,v[6]=G,v[7]=d,v[8]=e):(d=v[7],e=v[8]),(0,i.useEffect)(d,e),v[9]!==H||v[10]!==I){let a;v[12]!==I?(a=a=>!!f1(a)||!a.parentId||I.has(a.parentId),v[12]=I,v[13]=a):a=v[13],f=H.filter(a),v[9]=H,v[10]=I,v[11]=f}else f=v[11];let K=f;v[14]!==K.length||v[15]!==x||v[16]!==z?(k=()=>{K.length<16&&x&&z()},v[14]=K.length,v[15]=x,v[16]=z,v[17]=k):k=v[17],v[18]!==K||v[19]!==x||v[20]!==z?(l=[K,x,z],v[18]=K,v[19]=x,v[20]=z,v[21]=l):l=v[21],(0,i.useEffect)(k,l),v[22]===Symbol.for("react.memo_cache_sentinel")?(m=a=>()=>J(b=>{let c=new Set(b);return b.has(a)?c.delete(a):c.add(a),c}),v[22]=m):m=v[22];let L=m;v[23]!==K||v[24]!==G?(n=G?K.findIndex(a=>a.id===G):-1,v[23]=K,v[24]=G,v[25]=n):n=v[25];let M=n;v[26]!==w||v[27]!==A?(o=a=>{let b=w.find(b=>b.id===a.id);b?A(b):(console.error("TimelineItem: chunk not found"),A(a))},v[26]=w,v[27]=A,v[28]=o):o=v[28];let N=o;v[29]!==I||v[30]!==K.length||v[31]!==N||v[32]!==x||v[33]!==G?(p=(a,b)=>{let{activeIndex:c}=b;return(0,g.jsxs)(aB.Box,{paddingBottom:1,paddingTop:+(0===c),paddingRight:1,paddingLeft:f0(a)&&a.parentId?4:1,children:[(0,g.jsx)(f$,{chunk:a,isSelected:G===a.id,onSelect:N,collaborators:f1(a)?a.collaborators:void 0,optionsMenu:f1(a)&&a.children.length>0?(0,g.jsx)(fO,{isExpanded:I.has(a.id),onExpand:L(a.id)}):null}),c===K.length-1&&x&&(0,g.jsx)(j.LoadingBlock,{})]})},v[29]=I,v[30]=K.length,v[31]=N,v[32]=x,v[33]=G,v[34]=p):p=v[34];let O=p;v[35]===Symbol.for("react.memo_cache_sentinel")?(q=()=>E(!0),r=[],v[35]=q,v[36]=r):(q=v[35],r=v[36]),(0,i.useEffect)(q,r);let P=!M||D;return v[37]!==K.length||v[38]!==F?(s=0===K.length&&(0,g.jsxs)(fP,{padding:3,space:3,children:[(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:F("timeline.error.no-document-history-title")}),(0,g.jsx)(aB.Text,{muted:!0,size:1,children:F("timeline.error.no-document-history-description")})]}),v[37]=K.length,v[38]=F,v[39]=s):s=v[39],v[40]!==K||v[41]!==C||v[42]!==z||v[43]!==O||v[44]!==M||v[45]!==F?(t=K.length>0&&(0,g.jsx)(fQ,{direction:"column",$maxHeight:C,id:f2,children:(0,g.jsx)(j.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:F("timeline.list.aria-label"),autoFocus:"list",initialIndex:M,initialScrollAlign:"center",itemHeight:57,items:K,onEndReached:z,onEndReachedIndexOffset:20,overscan:5,renderItem:O,wrapAround:!1})}),v[40]=K,v[41]=C,v[42]=z,v[43]=O,v[44]=M,v[45]=F,v[46]=t):t=v[46],v[47]!==P||v[48]!==s||v[49]!==t?(u=(0,g.jsxs)(fR,{$visible:P,"data-ui":"timeline",children:[s,t]}),v[47]=P,v[48]=s,v[49]=t,v[50]=u):u=v[50],u};function f4(a){let b,c,d,e,f,i,k=(0,h.c)(14),{versionError:l}=a,{t:m}=(0,j.useTranslation)("studio");return k[0]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(j.TextWithTone,{tone:"critical",children:(0,g.jsx)(n.ErrorOutlineIcon,{})}),k[0]=b):b=k[0],k[1]!==m||k[2]!==l?(c=m(l?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),k[1]=m,k[2]=l,k[3]=c):c=k[3],k[4]!==c?(d=(0,g.jsx)(j.TextWithTone,{size:1,tone:"critical",weight:"medium",children:c}),k[4]=c,k[5]=d):d=k[5],k[6]!==m||k[7]!==l?(e=m(l?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),k[6]=m,k[7]=l,k[8]=e):e=k[8],k[9]!==e?(f=(0,g.jsx)(j.TextWithTone,{size:1,tone:"critical",children:e}),k[9]=e,k[10]=f):f=k[10],k[11]!==d||k[12]!==f?(i=(0,g.jsxs)(aB.Flex,{align:"flex-start",gap:3,padding:4,children:[b,(0,g.jsxs)(aB.Stack,{space:4,children:[d,f]})]}),k[11]=d,k[12]=f,k[13]=i):i=k[13],i}let f5=(0,aF.styled)(aA.Popover)`
  overflow: hidden;
  overflow: clip;
`,f6="timeline-menu";function f7(a){let b,c,d,e,f,k,l,m,o,p,q,r,s,t,u,v,w=(0,h.c)(62),{chunk:x,mode:y,placement:z}=a,{setTimelineRange:A,timelineError:B,ready:C,timelineStore:D}=dh(),[E,F]=(0,i.useState)(!1),[G,H]=(0,i.useState)(null),[I,J]=(0,i.useState)(null),K=(0,aC.useToast)(),L=(0,j.useTimelineSelector)(D,gc),M=(0,j.useTimelineSelector)(D,gb),N=(0,j.useTimelineSelector)(D,ga),O=(0,j.useTimelineSelector)(D,f9),P=(0,j.useTimelineSelector)(D,f8),{t:Q}=(0,j.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{F(!0)},w[0]=b):b=w[0];let R=b;w[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{F(!1)},w[1]=c):c=w[1];let S=c;w[2]!==G||w[3]!==E?(d=a=>{E&&("Escape"===a.key||"Tab"===a.key)&&(S(),G?.focus())},w[2]=G,w[3]=E,w[4]=d):d=w[4],(0,aB.useGlobalKeyDown)(d),w[5]!==G||w[6]!==I?(e=()=>[G,I],w[5]=G,w[6]=I,w[7]=e):e=w[7],(0,aB.useClickOutsideEvent)(E&&S,e),w[8]!==A||w[9]!==Q||w[10]!==D||w[11]!==K?(f=a=>{try{(()=>{let[b,c]=D?.findRangeForRev(a)||[null,null];A(b,c)})()}catch(a){K.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[8]=A,w[9]=Q,w[10]=D,w[11]=K,w[12]=f):f=w[12];let T=f;w[13]!==A||w[14]!==Q||w[15]!==D||w[16]!==K?(k=a=>{try{(()=>{let[b,c]=D?.findRangeForSince(a)||[null,null];A(b,c)})()}catch(a){K.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[13]=A,w[14]=Q,w[15]=D,w[16]=K,w[17]=k):k=w[17];let U=k;w[18]!==M||w[19]!==D?(l=()=>{M||D?.loadMore()},w[18]=M,w[19]=D,w[20]=l):l=w[20];let V=l;a:{let a,b;if(B){let a;w[21]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(f4,{}),w[21]=a):a=w[21],m=a;break a}if("rev"===y){let a;w[22]!==L||w[23]!==V||w[24]!==N||w[25]!==O||w[26]!==T?(a=(0,g.jsx)(f3,{chunks:L,hasMoreChunks:N,lastChunk:O,onLoadMore:V,onSelect:T}),w[22]=L,w[23]=V,w[24]=N,w[25]=O,w[26]=T,w[27]=a):a=w[27],m=a;break a}w[28]!==L||w[29]!==O?(a=O?L.filter(a=>a.index<O.index):L,w[28]=L,w[29]=O,w[30]=a):a=w[30];let c=a;w[31]!==c||w[32]!==V||w[33]!==N||w[34]!==U||w[35]!==P?(b=(0,g.jsx)(f3,{chunks:c,hasMoreChunks:N,lastChunk:P,onLoadMore:V,onSelect:U}),w[31]=c,w[32]=V,w[33]=N,w[34]=U,w[35]=P,w[36]=b):b=w[36],m=b}let W=m;if(w[37]!==x||w[38]!==Q){let a={timestamp:{dateStyle:"medium",timeStyle:"short"}};o=x?Q(fS[x.type],{context:"timestamp",timestamp:new Date(x?.endTimestamp),formatParams:a}):Q("timeline.latest-revision"),p=x?Q("timeline.since",{timestamp:new Date(x?.endTimestamp),formatParams:a}):Q("timeline.since-version-missing"),w[37]=x,w[38]=Q,w[39]=o,w[40]=p}else o=w[39],p=w[40];let X="rev"===y?o:p;w[41]!==I?(q={[f6]:I},w[41]=I,w[42]=q):q=w[42];let Y=q,Z=E&&W,$=E?"timeline-menu-close-button":"timeline-menu-open-button",_=!C,aa=E?S:R;return w[43]===Symbol.for("react.memo_cache_sentinel")?(r={maxWidth:"100%"},w[43]=r):r=w[43],w[44]!==X||w[45]!==C||w[46]!==Q?(s=C?X:Q("timeline.loading-history"),w[44]=X,w[45]=C,w[46]=Q,w[47]=s):s=w[47],w[48]!==E||w[49]!==$||w[50]!==_||w[51]!==aa||w[52]!==s?(t=(0,g.jsx)(aB.Flex,{width:"fill",children:(0,g.jsx)(aA.Button,{"data-testid":$,disabled:_,mode:"ghost",onClick:aa,ref:H,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:r,iconRight:n.ChevronDownIcon,text:s})}),w[48]=E,w[49]=$,w[50]=_,w[51]=aa,w[52]=s,w[53]=t):t=w[53],w[54]!==E||w[55]!==z||w[56]!==Z||w[57]!==t?(u=(0,g.jsx)(f5,{"data-testid":"timeline-menu",constrainSize:!0,content:Z,"data-ui":"versionMenu",open:E,placement:z,matchReferenceWidth:!0,portal:!0,ref:J,children:t}),w[54]=E,w[55]=z,w[56]=Z,w[57]=t,w[58]=u):u=w[58],w[59]!==Y||w[60]!==u?(v=(0,g.jsx)(aB.PortalProvider,{__unstable_elements:Y,children:u}),w[59]=Y,w[60]=u,w[61]=v):v=w[61],v}function f8(a){return a.sinceTime}function f9(a){return a.realRevChunk}function ga(a){return a.hasMoreChunks}function gb(a){return a.isLoading}function gc(a){return a.chunks}let gd=(0,aF.styled)(aH.motion.path)`
  transform-origin: center;
`,ge=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(aH.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...a}),c[0]=a,c[1]=b):b=c[1],b},gf=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(gd,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...a}),c[0]=a,c[1]=b):b=c[1],b},gg=a=>{let b,c=(0,h.c)(2);return c[0]!==a?(b=(0,g.jsx)(aH.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...a}),c[0]=a,c[1]=b):b=c[1],b},gh=aF.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,gi=aF.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${gh} 1s ease-in-out infinite;
  }
`,gj={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},gk={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},gl={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},gm={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function gn(a){let b,c,d,e,f,i=(0,h.c)(13),{status:j}=a;if(!j)return null;let k="changes"===j?void 0:"";return i[0]!==j?(b=(0,g.jsx)(gf,{variants:gl,initial:j,animate:j}),c=(0,g.jsx)(ge,{variants:gk,initial:j,animate:j}),i[0]=j,i[1]=b,i[2]=c):(b=i[1],c=i[2]),i[3]!==k||i[4]!==b||i[5]!==c?(d=(0,g.jsxs)(gi,{"data-rotate":k,children:[b,c]}),i[3]=k,i[4]=b,i[5]=c,i[6]=d):d=i[6],i[7]!==j?(e=(0,g.jsx)(gg,{variants:gm,initial:j,animate:j}),i[7]=j,i[8]=e):e=i[8],i[9]!==j||i[10]!==d||i[11]!==e?(f=(0,g.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,g.jsxs)(aH.motion.g,{variants:gj,initial:j,animate:j,children:[d,e]})}),i[9]=j,i[10]=d,i[11]=e,i[12]=f):f=i[12],f}let go={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},gp=a=>{let b,c,d,e,f,i=(0,h.c)(13),{status:k}=a,{t:l}=(0,j.useTranslation)(y);if("saved"!==k&&"syncing"!==k)return null;let m=go[k];return i[0]!==k?(b=(0,g.jsx)(gn,{status:k}),i[0]=k,i[1]=b):b=i[1],i[2]!==m.tone||i[3]!==b?(c=(0,g.jsx)(j.TextWithTone,{size:1,tone:m.tone,children:b}),i[2]=m.tone,i[3]=b,i[4]=c):c=i[4],i[5]!==m.i18nKey||i[6]!==l?(d=l(m.i18nKey),i[5]=m.i18nKey,i[6]=l,i[7]=d):d=i[7],i[8]!==d?(e=(0,g.jsx)(aB.Text,{muted:!0,size:1,children:d}),i[8]=d,i[9]=e):e=i[9],i[10]!==c||i[11]!==e?(f=(0,g.jsxs)(aB.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[c,e]}),i[10]=c,i[11]=e,i[12]=f):f=i[12],f},gq={minimal:!0,useTemporalPhrase:!0},gr=aH.motion.create(aB.Button),gs=aH.motion.create(aB.Box);function gt(a){return"timeline.operation.published"===a?"document-status.last-published":a}let gu=()=>{let a,b,c=(0,h.c)(2);return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)("div",{style:{margin:-5},children:(0,g.jsx)(j.AvatarSkeleton,{$size:0,animated:!0})}),c[0]=a):a=c[0],c[1]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsxs)(aB.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[a,(0,g.jsx)(aC.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),c[1]=b):b=c[1],b},gv=a=>{let b,c,d,e,f,i,k,l,m=(0,h.c)(17),{author:n,translationKey:o,timestamp:p}=a,{onHistoryOpen:q,inspector:r,onHistoryClose:s}=dh(),{t}=(0,j.useTranslation)(),u=(0,j.useRelativeTime)(void 0===p?"":p,gq);m[0]===Symbol.for("react.memo_cache_sentinel")?(b={opacity:1},c={opacity:0},d={opacity:0},m[0]=b,m[1]=c,m[2]=d):(b=m[0],c=m[1],d=m[2]);let v=r?.name===dt?s:q;return m[3]!==n?(e=n&&(0,g.jsx)("div",{style:{margin:-5},children:(0,g.jsx)(j.UserAvatar,{user:n,size:0})}),m[3]=n,m[4]=e):e=m[4],m[5]!==t||m[6]!==o?(f=t(o),m[5]=t,m[6]=o,m[7]=f):f=m[7],m[8]!==u||m[9]!==f?(i=(0,g.jsxs)(aB.Text,{muted:!0,size:1,children:[f," ",u]}),m[8]=u,m[9]=f,m[10]=i):i=m[10],m[11]!==e||m[12]!==i?(k=(0,g.jsxs)(aB.Flex,{align:"center",flex:"none",gap:3,children:[e,i]}),m[11]=e,m[12]=i,m[13]=k):k=m[13],m[14]!==v||m[15]!==k?(l=(0,g.jsx)(gr,{"data-testid":"pane-footer-document-status",animate:b,initial:c,exit:d,mode:"bleed",onClick:v,padding:2,muted:!0,children:k}),m[14]=v,m[15]=k,m[16]=l):l=m[16],l},gw=()=>{let a,b,c=(0,h.c)(6),{editState:d}=dh(),{selectedPerspective:e}=(0,j.usePerspective)();c[0]!==d||c[1]!==e?(a=(0,j.isPublishedPerspective)(e)&&d?.published?._updatedAt?{translationKey:j.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:d.published._updatedAt}:d?.version?._updatedAt?{translationKey:d.version._updatedAt===d.version._createdAt?j.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:j.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:d.version._updatedAt}:d?.draft?._updatedAt?{translationKey:d.draft._updatedAt===d.draft._createdAt?j.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:j.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:d.draft._updatedAt}:null,c[0]=d,c[1]=e,c[2]=a):a=c[2];let f=a;return f?(c[3]!==f.timestamp||c[4]!==f.translationKey?(b=(0,g.jsx)(gv,{author:"",translationKey:f.translationKey,timestamp:f.timestamp}),c[3]=f.timestamp,c[4]=f.translationKey,c[5]=b):b=c[5],b):null},gx=()=>{let a,b,c=(0,h.c)(8),{events:d,loading:e}=(0,j.useEvents)(),f=d?.[0];if(!f&&e){let a;return c[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gu,{}),c[0]=a):a=c[0],a}if(!f){let a;return c[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gw,{}),c[1]=a):a=c[1],a}let i=f.author,k=j.TIMELINE_ITEM_I18N_KEY_MAPPING[f.documentVariantType][f.type];return c[2]!==k?(a=gt(k),c[2]=k,c[3]=a):a=c[3],c[4]!==f.author||c[5]!==f.timestamp||c[6]!==a?(b=(0,g.jsx)(gv,{author:i,translationKey:a,timestamp:f.timestamp}),c[4]=f.author,c[5]=f.timestamp,c[6]=a,c[7]=b):b=c[7],b},gy=()=>{let a,b,c,d=(0,h.c)(10),{timelineStore:e}=dh(),f=(0,j.useTimelineSelector)(e,gA),i=(0,j.useTimelineSelector)(e,gB),k=f?.[0];if(!k&&i){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gu,{}),d[0]=a):a=d[0],a}if(!k){let a;return d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(gw,{}),d[1]=a):a=d[1],a}d[2]!==k.authors?(a=Array.from(k.authors),d[2]=k.authors,d[3]=a):a=d[3];let l=a[0],m=fS[k.type];return d[4]!==m?(b=gt(m),d[4]=m,d[5]=b):b=d[5],d[6]!==l||d[7]!==k.endTimestamp||d[8]!==b?(c=(0,g.jsx)(gv,{author:l,translationKey:b,timestamp:k.endTimestamp}),d[6]=l,d[7]=k.endTimestamp,d[8]=b,d[9]=c):c=d[9],c};function gz(){let a,b,c,d,e,f,k,l=(0,h.c)(18),{documentId:m,documentType:n,editState:o,value:p}=dh(),[q,r]=(0,i.useState)(null),s=(0,j.useSource)().beta?.eventsAPI?.documents,t=(0,j.useSyncState)(m,n,o?.release),u=p?._updatedAt;return l[0]!==q||l[1]!==t.isSyncing?(a=()=>{if("syncing"===q&&!t.isSyncing){let a=setTimeout(()=>r("saved"),1e3);return()=>clearTimeout(a)}if("saved"===q){let a=setTimeout(()=>r(null),3e3);return()=>clearTimeout(a)}},l[0]=q,l[1]=t.isSyncing,l[2]=a):a=l[2],l[3]!==u||l[4]!==q||l[5]!==t.isSyncing?(b=[q,u,t.isSyncing],l[3]=u,l[4]=q,l[5]=t.isSyncing,l[6]=b):b=l[6],(0,i.useEffect)(a,b),l[7]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{r(null)},l[7]=c):c=l[7],l[8]!==m?(d=[m],l[8]=m,l[9]=d):d=l[9],(0,i.useLayoutEffect)(c,d),l[10]!==t.isSyncing?(e=()=>{t.isSyncing&&r("syncing")},l[10]=t.isSyncing,l[11]=e):e=l[11],l[12]!==u||l[13]!==t.isSyncing?(f=[t.isSyncing,u],l[12]=u,l[13]=t.isSyncing,l[14]=f):f=l[14],(0,i.useLayoutEffect)(e,f),l[15]!==s||l[16]!==q?(k=(0,g.jsx)(aI.AnimatePresence,{children:q?(0,g.jsx)(gs,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,g.jsx)(gp,{status:q||void 0})}):(0,g.jsx)(g.Fragment,{children:s?(0,g.jsx)(gx,{}):(0,g.jsx)(gy,{})})}),l[15]=s,l[16]=q,l[17]=k):k=l[17],k}function gA(a){return a.chunks}function gB(a){return a.isLoading}let gC=(0,aF.styled)(aB.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function gD(){let a,b,c,d,e=(0,h.c)(9),{displayed:f,revisionNotFound:k}=dh(),m=(0,i.useContext)(l.EventsContext),o=m?.revision,p=m?.events.find(a=>a.id===o?.revisionId),{t:q}=(0,j.useTranslation)(),r=p?.timestamp||f?._updatedAt||f?._createdAt,s=r?(0,g.jsx)(j.Translate,{t:q,i18nKey:"document-status.revision-from",values:{date:(0,bs.format)(new Date(r),"MMM d, yyyy '@' pp")}}):null;e[0]!==s?(a={name:"revision",text:s,tone:"caution"},e[0]=s,e[1]=a):a=e[1];let t=a;return e[2]===Symbol.for("react.memo_cache_sentinel")?(b=(0,g.jsx)(aB.Box,{flex:"none",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(n.RestoreIcon,{})})}),e[2]=b):b=e[2],e[3]!==t||e[4]!==k||e[5]!==q?(c=k?(0,g.jsx)(j.Translate,{t:q,i18nKey:"document-status.revision-not-found"}):t.text,e[3]=t,e[4]=k,e[5]=q,e[6]=c):c=e[6],e[7]!==c?(d=(0,g.jsx)(g.Fragment,{children:(0,g.jsxs)(aB.Flex,{flex:1,gap:3,padding:2,children:[b,(0,g.jsx)(aB.Box,{flex:1,children:(0,g.jsx)(gC,{size:1,textOverflow:"ellipsis",children:c})})]})}),e[7]=c,e[8]=d):d=e[8],d}let gE=aH.motion.create(aB.Card);function gF(a){let b,c,d,e,f,k,l,m,n=(0,h.c)(22),{actionsBoxRef:o,createLinkMetadata:p}=a,{editState:q,onChange:r,revisionNotFound:s}=dh(),{params:t}=d9(),u=void 0===t?dq:t,{selectedPerspective:v}=(0,j.usePerspective)(),{title:w}=dx(),x=(0,j.useSanityCreateConfig)().components?.documentLinkedActions,y=!!u.rev,[z,A]=(0,i.useState)(null),[B,C]=(0,i.useState)(null);n[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{A(a.contentRect.width<480)},n[0]=b):b=n[0];let D=b;n[1]!==B?(c={element:B,onResize:D},n[1]=B,n[2]=c):c=n[2],function(a){let b,c,d=(0,h.c)(4),{element:e,onResize:f}=a;d[0]!==e||d[1]!==f?(b=()=>(e&&j.resizeObserver.observe(e,f),()=>{e&&j.resizeObserver.unobserve(e)}),c=[e,f],d[0]=e,d[1]=f,d[2]=b,d[3]=c):(b=d[2],c=d[3]),(0,i.useLayoutEffect)(b,c)}(c);a:{let a=!!(q?.ready&&"boolean"==typeof z);if(v){if((0,j.isPublishedPerspective)(v)){d=a&&!!q?.published;break a}if((0,j.isReleaseDocument)(v)){d=a&&!!q?.version;break a}}d=a}let E=d;if(p&&(0,j.isSanityCreateLinked)(p)&&x){let a;n[3]!==x||n[4]!==p||n[5]!==r||n[6]!==w?(a=(0,g.jsx)(x,{metadata:p,panelPortalElementId:eB,onDocumentChange:r,documentTitle:w}),n[3]=x,n[4]=p,n[5]=r,n[6]=w,n[7]=a):a=n[7],e=a}else if(y){let a;n[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(fG,{}),n[8]=a):a=n[8],e=a}else{let a;n[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(fD,{}),n[9]=a):a=n[9],e=a}if(y&&s)return null;let F=y?"revision":"published";n[10]===Symbol.for("react.memo_cache_sentinel")?(f={opacity:.2},n[10]=f):f=n[10],n[11]===Symbol.for("react.memo_cache_sentinel")?(k={opacity:1,transition:{duration:.3}},n[11]=k):k=n[11];let G=y?"caution":void 0;return n[12]!==e||n[13]!==o||n[14]!==z||n[15]!==E||n[16]!==y?(l=E&&(0,g.jsxs)(aB.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!y,paddingRight:+!y,children:[(0,g.jsxs)(aB.Flex,{align:"center",flex:1,gap:z?2:3,wrap:"wrap",paddingRight:3,children:[(0,g.jsxs)(aB.Flex,{align:"center",children:[y?(0,g.jsx)(gD,{}):(0,g.jsx)(gz,{}),(0,g.jsx)(ff,{})]}),(0,g.jsx)(fj,{})]}),(0,g.jsxs)(aB.Flex,{align:"flex-start",justify:"flex-end",ref:o,style:{flexShrink:0,marginLeft:"auto"},children:[(0,g.jsx)(ff,{}),e]})]}),n[12]=e,n[13]=o,n[14]=z,n[15]=E,n[16]=y,n[17]=l):l=n[17],n[18]!==F||n[19]!==G||n[20]!==l?(m=(0,g.jsx)(gE,{initial:f,animate:k,tone:G,radius:3,ref:C,sizing:"border",padding:2,children:l},F),n[18]=F,n[19]=G,n[20]=l,n[21]=m):m=n[21],m}let gG=(0,i.memo)(function(a){let b,c,d,e,f,i,k,l,m,n,o,p,q,r=(0,h.c)(26);r[0]!==a?({actionsBoxElement:b,activeIndex:c,as:n,children:d,id:e,onActionStart:f,onKeyDown:i,rootRef:l,states:m,...k}=a,r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=f,r[6]=i,r[7]=k,r[8]=l,r[9]=m,r[10]=n):(b=r[1],c=r[2],d=r[3],e=r[4],f=r[5],i=r[6],k=r[7],l=r[8],m=r[9],n=r[10]);let s=void 0===n?"div":n,t=m[c];r[11]!==f||r[12]!==i||r[13]!==m?(o=a=>{let b=m.filter(b=>b.shortcut&&(0,a4.isHotkey)(b.shortcut,a)),c=b[0];if(b.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${c.shortcut}"`),c&&!c.disabled&&c.onHandle){a.preventDefault(),c.onHandle(),f(m.indexOf(c));return}i&&i(a)},r[11]=f,r[12]=i,r[13]=m,r[14]=o):o=r[14];let u=o;return r[15]!==b||r[16]!==t?(p=t&&t.dialog&&(0,g.jsx)(j.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,g.jsx)(eZ,{dialog:t.dialog,referenceElement:b})}),r[15]=b,r[16]=t,r[17]=p):p=r[17],r[18]!==s||r[19]!==d||r[20]!==u||r[21]!==e||r[22]!==k||r[23]!==l||r[24]!==p?(q=(0,g.jsxs)(s,{id:e,onKeyDown:u,tabIndex:-1,...k,ref:l,children:[d,p]}),r[18]=s,r[19]=d,r[20]=u,r[21]=e,r[22]=k,r[23]=l,r[24]=p,r[25]=q):q=r[25],q}),gH=(0,i.memo)(a=>{let b,c,d,e,f,j,k=(0,h.c)(12);k[0]!==a?({actionsBoxElement:b,as:e,children:c,...d}=a,k[0]=a,k[1]=b,k[2]=c,k[3]=d,k[4]=e):(b=k[1],c=k[2],d=k[3],e=k[4]);let l=void 0===e?"div":e,[m,n]=(0,i.useState)(-1);k[5]===Symbol.for("react.memo_cache_sentinel")?(f=a=>{n(a)},k[5]=f):f=k[5];let o=f;return k[6]!==b||k[7]!==m||k[8]!==l||k[9]!==c||k[10]!==d?(j=(0,g.jsx)(h2,{children:a=>{let{states:e}=a;return(0,g.jsx)(gG,{...d,activeIndex:m,actionsBoxElement:b,as:l,onActionStart:o,states:e,children:c})}}),k[6]=b,k[7]=m,k[8]=l,k[9]=c,k[10]=d,k[11]=j):j=k[11],j});gH.displayName="Memo(DocumentActionShortcuts)";let gI=()=>{let a,b=(0,h.c)(1);return b[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(n.CheckmarkIcon,{style:{visibility:"hidden"}}),b[0]=a):a=b[0],a};function gJ(a){let b,c,d,e,f,i,k,l=(0,h.c)(23),{documentType:m,value:n,currentMinWidth:o,paneKey:p,minWidth:q}=a,{t:r}=(0,j.useTranslation)();return l[0]!==m?(b={documentType:m},l[0]=m,l[1]=b):b=l[1],l[2]!==r||l[3]!==b?(c=(0,g.jsx)(j.Translate,{t:r,i18nKey:"panes.document-pane.document-unknown-type.title",values:b}),l[2]=r,l[3]=b,l[4]=c):c=l[4],l[5]!==m||l[6]!==r?(d=m&&(0,g.jsx)(aB.Text,{as:"p",children:(0,g.jsx)(j.Translate,{t:r,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:m}})}),l[5]=m,l[6]=r,l[7]=d):d=l[7],l[8]!==m||l[9]!==r?(e=!m&&(0,g.jsx)(aB.Text,{as:"p",children:r("panes.document-pane.document-unknown-type.without-schema.text")}),l[8]=m,l[9]=r,l[10]=e):e=l[10],l[11]!==n?(f=j.isDev&&n&&(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(aB.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,g.jsx)(aB.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,g.jsx)(aB.Code,{language:"json",size:[1,1,2],children:JSON.stringify(n,null,2)})})]}),l[11]=n,l[12]=f):f=l[12],l[13]!==d||l[14]!==e||l[15]!==f?(i=(0,g.jsxs)(aB.Stack,{space:4,children:[d,e,f]}),l[13]=d,l[14]=e,l[15]=f,l[16]=i):i=l[16],l[17]!==o||l[18]!==q||l[19]!==p||l[20]!==c||l[21]!==i?(k=(0,g.jsx)(dc,{currentMinWidth:o,flex:2.5,minWidth:q,paneKey:p,title:c,tone:"caution",children:i}),l[17]=o,l[18]=q,l[19]=p,l[20]=c,l[21]=i,l[22]=k):k=l[22],k}let gK=["fixed","fixed","absolute"];function gL(a){let b,c,d,e,f,i,k=(0,h.c)(16),{documentPanelPortalElement:l,setFooterElement:m,setActionsBoxElement:n}=a,o=(0,j.useZIndex)(),{value:p}=dh();k[0]!==l?(b={[eB]:l},k[0]=l,k[1]=b):b=k[1];let q=b;k[2]!==p?(c=(0,j.getSanityCreateLinkMetadata)(p),k[2]=p,k[3]=c):c=k[3];let r=c;return k[4]!==r||k[5]!==n?(d=(0,g.jsx)(aA.TooltipDelayGroupProvider,{children:(0,g.jsx)(gF,{actionsBoxRef:n,createLinkMetadata:r})}),k[4]=r,k[5]=n,k[6]=d):d=k[6],k[7]!==m||k[8]!==d?(e=(0,g.jsx)(cY,{ref:m,padding:1,children:d}),k[7]=m,k[8]=d,k[9]=e):e=k[9],k[10]!==e||k[11]!==o.portal?(f=(0,g.jsx)(aC.DialogProvider,{position:gK,zOffset:o.portal,children:e}),k[10]=e,k[11]=o.portal,k[12]=f):f=k[12],k[13]!==q||k[14]!==f?(i=(0,g.jsx)(aB.PortalProvider,{__unstable_elements:q,children:f}),k[13]=q,k[14]=f,k[15]=i):i=k[15],i}let gM=[],gN=["fixed","fixed","absolute"],gO=(0,aF.styled)(j.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function gP(){var a;let b,c,d,e,f,k,l,m,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D=(0,h.c)(82),{changesOpen:E,displayed:F,documentId:G,documentType:H,editState:I,fieldActions:J,focusPath:K,inspectOpen:L,inspector:M,inspectors:N,onFocus:O,onHistoryOpen:P,onMenuAction:Q,onPathOpen:R,paneKey:S,schemaType:T,value:U,previewUrl:V}=dh(),{stickyParams:W}=(0,aK.useRouter)(),{params:X}=d9(),{features:Y}=dp(),{t:Z}=(0,j.useTranslation)(y),{collapsed:$}=cF(),_=(0,j.useZIndex)(),[aa,ab]=(0,i.useState)(null),[ac,ad]=(0,i.useState)(null),[ae,af]=(0,i.useState)(null),[ag,ah]=(0,i.useState)(null),[ai,aj]=(0,i.useState)(null);D[0]!==K||D[1]!==aa||D[2]!==U?(b={element:aa,focusPath:K,value:U},D[0]=K,D[1]=aa,D[2]=U,D[3]=b):b=D[3],(0,j.useGlobalCopyPasteElementHandler)(b),D[4]===Symbol.for("react.memo_cache_sentinel")?(c=[],D[4]=c):c=D[4];let[ak,al]=(0,i.useState)(c);D[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],D[5]=d):d=D[5];let[am,an]=(0,i.useState)(d),ao=(0,aC.useElementRect)(ac),ap=(0,aC.useElementRect)(ae),aq=ao?.height,ar=ap?.height,as=600+320*!!M,at=320+320*!!M;D[6]!==M?.name||D[7]!==N?(e=N?.find(a=>a.name===M?.name),D[6]=M?.name,D[7]=N,D[8]=e):e=D[8];let au=e;D[9]!==F||D[10]!==G||D[11]!==I?(f={displayed:F,documentId:G,editState:I},D[9]=F,D[10]=G,D[11]=I,D[12]=f):f=D[12];let av=(0,j.useDocumentIdStack)(f),aw=!!U,ax="true"===W.displayInlineChanges;D[13]!==au||D[14]!==av||D[15]!==Y||D[16]!==aw||D[17]!==ak||D[18]!==N||D[19]!==V||D[20]!==Z||D[21]!==ax?(B=function({currentInspector:a,hasValue:b,inspectors:c,inspectorMenuItems:d}){return c.map((c,e)=>{let f=d[e];return!f||f.hidden?null:{action:`${dr}${c.name}`,group:f.showAsAction?void 0:"inspectors",icon:f.icon,disabled:!b,selected:a?.name===c.name,shortcut:f.hotkeys?.join("+"),showAsAction:f.showAsAction,title:f.title,tone:f.tone}}).filter(Boolean)}(a={currentInspector:au,features:Y,hasValue:aw,inspectorMenuItems:ak,inspectors:N,previewUrl:V,documentIdStack:av,t:Z,displayInlineChanges:ax}),C=[function({previewUrl:a,t:b}){return a?{action:"production-preview",group:"links",title:b("production-preview.menu-item.title"),icon:n.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(a),function({documentIdStack:a,t:b}){let c=typeof a?.previousId>"u"&&{reason:b("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:b("compare-versions.menu-item.title"),icon:n.TransferIcon,disabled:c}}(a),function({displayInlineChanges:a,t:b}){return{action:"toggleInlineChanges",group:"inspectors",title:b("toggle-inline-changes.menu-item.title"),icon:a?n.CheckmarkIcon:gI}}(a)].filter(Boolean),k=[{action:"copy-document-url",showAsAction:!0,title:a.t("action.copy-document-url.label"),icon:n.LinkIcon},...B,function({hasValue:a,t:b}){return{action:"inspect",group:"inspectors",title:b("document-inspector.menu-item.title"),icon:n.JsonIcon,disabled:!a,shortcut:"Ctrl+Alt+I"}}(a),...C],D[13]=au,D[14]=av,D[15]=Y,D[16]=aw,D[17]=ak,D[18]=N,D[19]=V,D[20]=Z,D[21]=ax,D[22]=k):k=D[22];let ay=k;D[23]!==ay||D[24]!==Q?(l=a=>{for(let b of ay)if(b.shortcut&&(0,a4.isHotkey)(b.shortcut,a)){a.preventDefault(),a.stopPropagation(),Q(b);return}},D[23]=ay,D[24]=Q,D[25]=l):l=D[25];let az=l;D[26]!==O||D[27]!==R?(m=a=>{R(a),O(a)},D[26]=O,D[27]=R,D[28]=m):m=D[28];let aA=m;if(!T){let a;return D[29]!==as||D[30]!==H||D[31]!==at||D[32]!==S||D[33]!==U?(a=(0,g.jsx)(gJ,{currentMinWidth:as,documentType:H,minWidth:at,paneKey:S,value:U}),D[29]=as,D[30]=H,D[31]=at,D[32]=S,D[33]=U,D[34]=a):a=D[34],a}D[35]!==G||D[36]!==H||D[37]!==N?(o=N.length>0&&(0,g.jsx)(du,{documentId:G,documentType:H,inspectors:N,onMenuItems:al}),D[35]=G,D[36]=H,D[37]=N,D[38]=o):o=D[38],D[39]!==G||D[40]!==H||D[41]!==J||D[42]!==T?(p=J.length>0&&T&&(0,g.jsx)(j.FieldActionsResolver,{actions:J,documentId:G,documentType:H,onActions:an,path:gM,schemaType:T}),D[39]=G,D[40]=H,D[41]=J,D[42]=T,D[43]=p):p=D[43],D[44]!==ay?(q=(0,g.jsx)(fa,{ref:af,menuItems:ay}),D[44]=ay,D[45]=q):q=D[45];let aD=$?void 0:"fill",aE=E&&X?.changesInspectorTab==="review",aF=aq||null,aG=ar||null;return D[46]!==ai?(r=(0,g.jsx)(gL,{documentPanelPortalElement:ai,setFooterElement:ad,setActionsBoxElement:ah}),D[46]=ai,D[47]=r):r=D[47],D[48]!==L||D[49]!==aa||D[50]!==aF||D[51]!==aG||D[52]!==r?(s=(0,g.jsx)(eN,{footerHeight:aF,headerHeight:aG,isInspectOpen:L,rootElement:aa,setDocumentPanelPortalElement:aj,footer:r}),D[48]=L,D[49]=aa,D[50]=aF,D[51]=aG,D[52]=r,D[53]=s):s=D[53],D[54]!==aA||D[55]!==P||D[56]!==aE||D[57]!==s?(t=(0,g.jsx)(gO,{"data-testid":"change-connector-root",isReviewChangesOpen:aE,onOpenReviewChanges:P,onSetFocus:aA,children:s}),D[54]=aA,D[55]=P,D[56]=aE,D[57]=s,D[58]=t):t=D[58],D[59]!==aD||D[60]!==t?(u=(0,g.jsx)(aB.Flex,{direction:"column",flex:1,height:aD,children:t}),D[59]=aD,D[60]=t,D[61]=u):u=D[61],D[62]!==u||D[63]!==_.paneDialog?(v=(0,g.jsx)(aC.DialogProvider,{position:gN,zOffset:_.paneDialog,children:u}),D[62]=u,D[63]=_.paneDialog,D[64]=v):v=D[64],D[65]===Symbol.for("react.memo_cache_sentinel")?(w=(0,g.jsx)(dz,{}),D[65]=w):w=D[65],D[66]!==ag||D[67]!==as||D[68]!==az||D[69]!==at||D[70]!==S||D[71]!==q||D[72]!==v?(x=(0,g.jsxs)(gH,{actionsBoxElement:ag,as:cJ,currentMinWidth:as,"data-testid":"document-pane",flex:2.5,id:S,minWidth:at,onKeyUp:az,rootRef:ab,children:[q,v,w]}),D[66]=ag,D[67]=as,D[68]=az,D[69]=at,D[70]=S,D[71]=q,D[72]=v,D[73]=x):x=D[73],D[74]!==am||D[75]!==x?(z=(0,g.jsx)(dk,{children:(0,g.jsx)(j.FieldActionsProvider,{actions:am,path:gM,children:x})}),D[74]=am,D[75]=x,D[76]=z):z=D[76],D[77]!==p||D[78]!==z||D[79]!==o||D[80]!==U?(A=(0,g.jsxs)(j.GetFormValueProvider,{value:U,children:[o,p,z]}),D[77]=p,D[78]=z,D[79]=o,D[80]=U,D[81]=A):A=D[81],A}let gQ=(a,b)=>{let c,d,e,f,g=(0,h.c)(11),k=(0,j.useHistoryStore)(),[l,m]=(0,i.useState)(null),[n,o]=(0,i.useState)(!1);g[0]!==a||g[1]!==b?(c={documentId:a,documentType:b},g[0]=a,g[1]=b,g[2]=c):c=g[2];let p=(0,j.useTimelineStore)(c),q=(0,j.useTimelineSelector)(p,gR);return g[3]!==a||g[4]!==k||g[5]!==q?(d=()=>{q&&a?(o(!0),k.getDocumentAtRevision(a,q).then(a=>{m(a||null),o(!1)}).catch(()=>{m(null),o(!1)})):(m(null),o(!1))},e=[a,q,k],g[3]=a,g[4]=k,g[5]=q,g[6]=d,g[7]=e):(d=g[6],e=g[7]),(0,i.useEffect)(d,e),g[8]!==l||g[9]!==n?(f={lastRevisionDocument:l,loading:n},g[8]=l,g[9]=n,g[10]=f):f=g[10],f};function gR(a){return a.lastNonDeletedRevId}let gS=(0,aY.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),gT=(0,aY.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),gU=(0,aY.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function gV(a){return a.name===dt}function gW(a){let b=(0,j.isRecord)(a)&&"string"==typeof a.message?a.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${b}`)}function gX(a){let b,c,d,e,f,m,n,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S=(0,h.c)(205),{children:T,index:U,pane:V,paneKey:W,onFocusPath:X,onSetMaximizedPane:Y,maximized:Z,forcedVersion:$,historyStore:_}=a,aa=void 0!==Z&&Z,{store:ab,error:ac,ready:ad,revisionDocument:ae,onOlderRevision:af,sinceDocument:ag,isPristine:ah,revisionId:ai,lastNonDeletedRevId:aj}=_,ak=(0,j.useSchema)(),{setDocumentMeta:al}=(0,j.useCopyPaste)(),{document:am}=(0,j.useSource)(),{actions:an,badges:ao,unstable_fieldActions:ap,unstable_languageFilter:aq,drafts:ar}=am,{enabled:as}=ar,at=(0,aX.useTelemetry)(),au=(0,aK.useRouter)(),av=d9(),aw=av.setParams,{push:ax}=(0,aC.useToast)(),{options:ay,menuItemGroups:az,title:aA,views:aB}=V,aD=void 0===az?ds:az,aE=void 0===aA?null:aA;S[0]!==aB?(b=void 0===aB?[]:aB,S[0]=aB,S[1]=b):b=S[1];let aF=b,aG=(0,j.useUnique)(ay),aH=aG.id;S[2]!==aH?(c=(0,k.getPublishedId)(aH),S[2]=aH,S[3]=c):c=S[3];let aI=c,aL=ay.type,aM=(0,j.useUnique)(av.params)||dq,{buildStudioUrl:aN}=(0,j.useStudioUrl)(),aO=(0,j.usePerspective)(),{document:aP,beta:aQ}=(0,j.useWorkspace)(),{drafts:aR}=aP,{enabled:aS}=aR,aW=aQ?.form?.enhancedObjectDialog?.enabled;a:{let a;if($){d=$;break a}S[4]!==aO.selectedPerspectiveName||S[5]!==aO.selectedReleaseId?(a={selectedPerspectiveName:aO.selectedPerspectiveName,selectedReleaseId:aO.selectedReleaseId},S[4]=aO.selectedPerspectiveName,S[5]=aO.selectedReleaseId,S[6]=a):a=S[6],d=a}let{selectedReleaseId:aY,selectedPerspectiveName:aZ}=d,a$=ce();S[7]!==aI||S[8]!==aL||S[9]!==aG||S[10]!==aM?(e={paneOptions:aG,documentId:aI,documentType:aL,params:aM},S[7]=aI,S[8]=aL,S[9]=aG,S[10]=aM,S[11]=e):e=S[11];let a_=(a=>{var b;let c,d,e,f,g,i,k,l,m=(0,h.c)(13),{paneOptions:n,documentType:o,documentId:p,params:q}=a,r=(0,j.useTemplates)(),s=d9(),t=(0,j.useUnique)(s.payload);m[0]!==o||m[1]!==n.template||m[2]!==n.templateParameters||m[3]!==t||m[4]!==q.template||m[5]!==r?(e=(b={documentType:o,templateName:n.template,templateParams:n.templateParameters,panePayload:t,urlTemplate:q.template}).panePayload||{},f=b.templateName,b.urlTemplate&&f&&f!==b.urlTemplate&&console.warn(`Conflicting templates: URL says "${b.urlTemplate}", structure node says "${f}". Using "${f}".`),g=f||b.urlTemplate,i=r.filter(a=>a.schemaType===b.documentType),k={...b.templateParams,..."object"==typeof e&&e||{}},l=g,g||1!==i.length||(l=i[0].id),c={templateName:l,templateParams:k},m[0]=o,m[1]=n.template,m[2]=n.templateParameters,m[3]=t,m[4]=q.template,m[5]=r,m[6]=c):c=m[6];let{templateName:u,templateParams:v}=c;m[7]!==p||m[8]!==o||m[9]!==q.version||m[10]!==u||m[11]!==v?(d={documentId:p,documentType:o,templateName:u,templateParams:v,version:q.version},m[7]=p,m[8]=o,m[9]=q.version,m[10]=u,m[11]=v,m[12]=d):d=m[12];let w=(0,j.useInitialValue)(d);return(0,j.useUnique)(w)})(e),a0=a_.loading;S[12]!==aI||S[13]!==aL||S[14]!==aM||S[15]!==aw?(f={documentId:aI,documentType:aL,params:aM,setParams:aw},S[12]=aI,S[13]=aL,S[14]=aM,S[15]=aw,S[16]=f):f=S[16];let{changesOpen:a1,currentInspector:a2,inspectors:a3,closeInspector:a4,openInspector:a5,handleHistoryClose:a6,handleHistoryOpen:a7,handleInspectorAction:a8,inspectOpen:a9,handleLegacyInspectClose:ba}=function(a){let b,c,d,e,f,g,k,l,m,n,o,p,q,r,s=(0,h.c)(54),{documentId:t,documentType:u,params:v,setParams:w}=a,{features:x}=dp(),y=(0,j.useSource)().document.inspectors;s[0]!==t||s[1]!==u||s[2]!==y?(b=y({documentId:t,documentType:u}),s[0]=t,s[1]=u,s[2]=y,s[3]=b):b=s[3];let z=b;s[4]!==v.inspect?(c=()=>v.inspect||null,s[4]=v.inspect,s[5]=c):c=s[5];let[A,B]=(0,i.useState)(c),C=(0,i.useRef)(v.inspect);s[6]!==v.inspect?(d=()=>{C.current!==v.inspect&&(C.current=v.inspect,B(v.inspect||null))},e=[v.inspect],s[6]=v.inspect,s[7]=d,s[8]=e):(d=s[7],e=s[8]),(0,i.useEffect)(d,e),s[9]!==A||s[10]!==z?(f=z?.find(a=>a.name===A),s[9]=A,s[10]=z,s[11]=f):f=s[11];let D=f;s[12]!==z?(g=z.find(gV),s[12]=z,s[13]=g):g=s[13];let E=g,F=D?.name===dt;s[14]!==D||s[15]!==z||s[16]!==v||s[17]!==w?(k=a=>{let b=a&&z.find(b=>b.name===a);if(a&&!b)return void console.warn(`No inspector named "${a}"`);if(D){if(b){let a=b.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0});return}if(D){let a=D.onClose?.({params:v})??{params:v};B(null),C.current=void 0,w({...a.params,inspect:void 0})}}},s[14]=D,s[15]=z,s[16]=v,s[17]=w,s[18]=k):k=s[18];let G=k;s[19]!==D||s[20]!==z||s[21]!==v||s[22]!==w?(l=(a,b)=>{let c=z.find(b=>b.name===a);if(!c)return void console.warn(`No inspector named "${a}"`);if(D?.name===c.name)return void w({...v,...b,inspect:c.name});let d=v;D&&(d=(c.onClose?.({params:d})??{params:d}).params);let e=c.onOpen?.({params:d})??{params:d};B(c.name),C.current=c.name,w({...e.params,...b,inspect:c.name})},s[19]=D,s[20]=z,s[21]=v,s[22]=w,s[23]=l):l=s[23];let H=l;s[24]!==G||s[25]!==E?(m=()=>{E&&G(E.name)},s[24]=G,s[25]=E,s[26]=m):m=s[26];let I=m;s[27]!==x.reviewChanges||s[28]!==E||s[29]!==H?(n=()=>{x.reviewChanges&&E&&H(E.name,{changesInspectorTab:"review"})},s[27]=x.reviewChanges,s[28]=E,s[29]=H,s[30]=n):n=s[30];let J=n,K="on"===v.inspect;s[31]!==K||s[32]!==v||s[33]!==w?(o=a=>{w((void 0===a?!K:a)?{...v,inspect:"on"}:{...v,inspect:void 0})},s[31]=K,s[32]=v,s[33]=w,s[34]=o):o=s[34];let L=o;s[35]!==L?(p=()=>L(!1),s[35]=L,s[36]=p):p=s[36];let M=p;s[37]!==G||s[38]!==A||s[39]!==z||s[40]!==H||s[41]!==L?(q=a=>{if("inspect"===a.action)return L(!0),!0;if("string"!=typeof a.action)return!1;let b=a.action.slice(dr.length),c=z.find(a=>a.name===b);return!!c&&(c.name===A?G(c.name):H(c.name),!0)},s[37]=G,s[38]=A,s[39]=z,s[40]=H,s[41]=L,s[42]=q):q=s[42];let N=q;return s[43]!==F||s[44]!==G||s[45]!==D||s[46]!==I||s[47]!==J||s[48]!==N||s[49]!==M||s[50]!==K||s[51]!==z||s[52]!==H?(r={changesOpen:F,currentInspector:D,inspectors:z,closeInspector:G,openInspector:H,handleHistoryClose:I,handleHistoryOpen:J,handleInspectorAction:N,handleLegacyInspectClose:M,inspectOpen:K},s[43]=F,s[44]=G,s[45]=D,s[46]=I,s[47]=J,s[48]=N,s[49]=M,s[50]=K,s[51]=z,s[52]=H,s[53]=r):r=s[53],r}(f),[bb,bc]=(0,i.useState)(!1),{lastRevisionDocument:bd}=gQ(aI,aL);S[17]!==ah||S[18]!==ad?(m=a=>!!ad&&!a?.draft&&!a?.published&&!a?.version&&!ah,S[17]=ah,S[18]=ad,S[19]=m):m=S[19];let be=m;S[20]!==a1||S[21]!==ag?(n=a=>{let b=(0,j.selectUpstreamVersion)(a);return a1?ag||b:b||null},S[20]=a1,S[21]=ag,S[22]=n):n=S[22];let bf=n;S[23]!==aL||S[24]!==ak?(o=ak.get(aL),S[23]=aL,S[24]=ak,S[25]=o):o=S[25];let bg=o;S[26]!==be||S[27]!==bb||S[28]!==aS||S[29]!==aM.rev||S[30]!==aO.selectedPerspective||S[31]!==bg?(p=a=>{let b=be(a);return!!aM.rev||bb||b||!(0,j.isPerspectiveWriteable)({selectedPerspective:aO.selectedPerspective,isDraftModelEnabled:aS,schemaType:bg}).result},S[26]=be,S[27]=bb,S[28]=aS,S[29]=aM.rev,S[30]=aO.selectedPerspective,S[31]=bg,S[32]=p):p=S[32];let bh=p;S[33]!==aj||S[34]!==bd||S[35]!==af||S[36]!==ae?(q=a=>af?ae||{_id:a._id,_type:a._type}:!a._createdAt&&!a._updatedAt&&aj&&bd?bd:a,S[33]=aj,S[34]=bd,S[35]=af,S[36]=ae,S[37]=q):q=S[37];let bi=q;S[38]!==aM.path?(r=aM.path?(0,aV.fromString)(aM.path):j.EMPTY_ARRAY,S[38]=aM.path,S[39]=r):r=S[39];let bj="true"===au.stickyParams.displayInlineChanges;S[40]!==a1||S[41]!==aI||S[42]!==aL||S[43]!==bf||S[44]!==bi||S[45]!==bh||S[46]!==a_||S[47]!==X||S[48]!==aZ||S[49]!==aY||S[50]!==r||S[51]!==bj?(s={changesOpen:a1,documentType:aL,documentId:aI,initialValue:a_,comparisonValue:bf,releaseId:aY,selectedPerspectiveName:aZ,initialFocusPath:r,readOnly:bh,onFocusPath:X,getFormDocumentValue:bi,displayInlineChanges:bj},S[40]=a1,S[41]=aI,S[42]=aL,S[43]=bf,S[44]=bi,S[45]=bh,S[46]=a_,S[47]=X,S[48]=aZ,S[49]=aY,S[50]=r,S[51]=bj,S[52]=s):s=S[52];let{editState:bk,upstreamEditState:bl,hasUpstreamVersion:bm,connectionState:bn,focusPath:bo,onChange:bp,validation:bq,ready:br,value:bs,formState:bt,permissions:bu,onPathOpen:bv,isPermissionsLoading:bw,formStateRef:bx,onProgrammaticFocus:by,collapsedFieldSets:bz,collapsedPaths:bA,onBlur:bB,onFocus:bC,onSetActiveFieldGroup:bD,onSetCollapsedPath:bE,onSetCollapsedFieldSet:bF,openPath:bG}=(0,j.useDocumentForm)(s),{data:bH}=(0,j.useActiveReleases)();S[53]!==bH?(t=void 0===bH?[]:bH,S[53]=bH,S[54]=t):t=S[54];let bI=t;S[55]!==as||S[56]!==aM||S[57]!==bI||S[58]!==aZ||S[59]!==aY||S[60]!==bs?(u=function(a,b,c,d,e,f){let g;switch(!0){case!!a?.rev:g="revision";break;case b&&(0,k.isVersionId)(c._id):{let a=f.find(a=>(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===b);g=a&&(0,j.isCardinalityOneRelease)(a)?"scheduled-draft":"version";break}case"published"===d:g="published";break;case e:g="draft";break;default:g="published"}return g}(aM,aY,bs,aZ,as,bI),S[55]=as,S[56]=aM,S[57]=bI,S[58]=aZ,S[59]=aY,S[60]=bs,S[61]=u):u=S[61];let bJ=u;S[62]!==bJ||S[63]!==aI||S[64]!==aL||S[65]!==aY?(v={schemaType:aL,documentId:aI,versionType:bJ,releaseId:aY},S[62]=bJ,S[63]=aI,S[64]=aL,S[65]=aY,S[66]=v):v=S[66];let bK=v;S[67]!==an||S[68]!==bK?(w=an(bK),S[67]=an,S[68]=bK,S[69]=w):w=S[69];let bL=w;S[70]!==aW||S[71]!==bv||S[72]!==aM||S[73]!==aw?(x=a=>{if(bv(a),aW){let b=(0,j.pathToString)(a);aM.path!==b&&aw({...aM,path:b})}},S[70]=aW,S[71]=bv,S[72]=aM,S[73]=aw,S[74]=x):x=S[74];let bM=x;S[75]!==ao||S[76]!==aI||S[77]!==aL?(z=ao({schemaType:aL,documentId:aI}),S[75]=ao,S[76]=aI,S[77]=aL,S[78]=z):z=S[78];let bN=z;S[79]!==aI||S[80]!==aL||S[81]!==aq?(A=aq({schemaType:aL,documentId:aI}),S[79]=aI,S[80]=aL,S[81]=aq,S[82]=A):A=S[82];let bO=A,bP=(0,j.useUnique)(aF),bQ=aM.view||bP[0]&&bP[0].id||null,bR=function(a){let b,c,d,e,f=(0,h.c)(6),{resolveProductionUrl:g}=(0,j.useSource)().document;f[0]===Symbol.for("react.memo_cache_sentinel")?(b=new aU.BehaviorSubject(void 0),f[0]=b):b=f[0];let k=b;return f[1]!==a?(c=()=>{k.next(a)},d=[k,a],f[1]=a,f[2]=c,f[3]=d):(c=f[2],d=f[3]),(0,i.useEffect)(c,d),f[4]!==g?(e=k.asObservable().pipe((0,aT.distinctUntilChanged)(),(0,aT.debounceTime)(500),(0,aT.switchMap)(a=>(0,j.isRecord)(a)&&"string"==typeof a._id&&"string"==typeof a._type?(0,aU.from)(g({document:a})):(0,aU.of)(void 0)),(0,aT.distinctUntilChanged)(),(0,aT.catchError)(gW)),f[4]=g,f[5]=e):e=f[5],(0,aJ.useObservable)(e)}(bs),{t:bS}=(0,j.useTranslation)(y);S[83]!==aI||S[84]!==aL||S[85]!==ap||S[86]!==bg?(B=bg?ap({documentId:aI,documentType:aL,schemaType:bg}):[],S[83]=aI,S[84]=aL,S[85]=ap,S[86]=bg,S[87]=B):B=S[87];let bT=B,bU=br&&(!aM.rev||ad||!!ac);S[88]!==bi||S[89]!==bs?(C=bi(bs),S[88]=bi,S[89]=bs,S[90]=C):C=S[90];let bV=C;S[91]!==bV||S[92]!==aI||S[93]!==bk?(D={strict:!0,displayed:bV,documentId:aI,editState:bk},S[91]=bV,S[92]=aI,S[93]=bk,S[94]=D):D=S[94];let{previousId:bW}=(0,j.useDocumentIdStack)(D);S[95]!==aM||S[96]!==aw?(E=(a,b)=>{aw({...aM,since:a,rev:b||void 0})},S[95]=aM,S[96]=aw,S[97]=E):E=S[97];let bX=E;S[98]!==av?(F=()=>av.closeCurrent(),S[98]=av,S[99]=F):F=S[99];let bY=F;S[100]!==av?(G=()=>av.duplicateCurrent(),S[100]=av,S[101]=G):G=S[101];let bZ=G;S[102]!==au||S[103]!==at?(H=()=>{let a="true"!==au.stickyParams.displayInlineChanges;at.log(a?gT:gU),au.navigate({stickyParams:{displayInlineChanges:String(a)}})},S[102]=au,S[103]=at,S[104]=H):H=S[104];let b$=H;S[105]!==aN||S[106]!==a$||S[107]!==aI||S[108]!==aL||S[109]!==a7||S[110]!==a8||S[111]!==bR||S[112]!==bW||S[113]!==ax||S[114]!==bS||S[115]!==at||S[116]!==b$||S[117]!==bs._id?(I=async a=>{if("production-preview"===a.action&&bR)return window.open(bR),!0;if("copy-document-url"===a.action&&navigator){at.log(gS);let a=aN({coreUi:a=>`${a}/intent/edit/id=${aI};type=${aL}`});return await navigator.clipboard.writeText(a),ax({id:"copy-document-url",status:"info",title:bS("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===a.action?(a7(),!0):(("inspect"===a.action||"string"==typeof a.action&&a.action.startsWith(dr))&&a8(a),"compareVersions"===a.action&&"u">typeof bW?(a$.navigateDiffView({mode:"version",previousDocument:{type:aL,id:bW},nextDocument:{type:aL,id:bs._id}}),!0):"toggleInlineChanges"===a.action&&(b$(),!0))},S[105]=aN,S[106]=a$,S[107]=aI,S[108]=aL,S[109]=a7,S[110]=a8,S[111]=bR,S[112]=bW,S[113]=ax,S[114]=bS,S[115]=at,S[116]=b$,S[117]=bs._id,S[118]=I):I=S[118];let b_=I;S[119]!==aI||S[120]!==aL||S[121]!==bp||S[122]!==bg||S[123]!==al?(J=()=>{al({documentId:aI,documentType:aL,schemaType:bg,onChange:bp})},K=[aI,aL,bg,bp,al],S[119]=aI,S[120]=aL,S[121]=bp,S[122]=bg,S[123]=al,S[124]=J,S[125]=K):(J=S[124],K=S[125]),(0,i.useEffect)(J,K),S[126]!==bf||S[127]!==bl?(L=bf(bl),S[126]=bf,S[127]=bl,S[128]=L):L=S[128];let b0=L,b1=be(bk),b2=af&&!ae&&bU;b:{if(bk.version&&(0,j.isGoingToUnpublish)(bk.version)){M=bk.published;break b}M=bV}let b3=M,b4=a2||null;S[129]!==aD?(N=aD||[],S[129]=aD,S[130]=N):N=S[130],S[131]!==bL||S[132]!==bQ||S[133]!==bN||S[134]!==a1||S[135]!==a4||S[136]!==bz||S[137]!==bA||S[138]!==b0||S[139]!==bn||S[140]!==b3||S[141]!==aI||S[142]!==aH||S[143]!==aL||S[144]!==bk||S[145]!==bT||S[146]!==bo||S[147]!==bt||S[148]!==a6||S[149]!==a7||S[150]!==ba||S[151]!==b_||S[152]!==bY||S[153]!==bZ||S[154]!==bM||S[155]!==bm||S[156]!==U||S[157]!==a9||S[158]!==a3||S[159]!==b1||S[160]!==bb||S[161]!==a0||S[162]!==bw||S[163]!==bO||S[164]!==aj||S[165]!==bd||S[166]!==aa||S[167]!==bB||S[168]!==bp||S[169]!==bC||S[170]!==bD||S[171]!==bF||S[172]!==bE||S[173]!==Y||S[174]!==a5||S[175]!==bG||S[176]!==W||S[177]!==bu||S[178]!==bR||S[179]!==bU||S[180]!==ai||S[181]!==b2||S[182]!==bg||S[183]!==aY||S[184]!==bX||S[185]!==b4||S[186]!==N||S[187]!==ac||S[188]!==ab||S[189]!==aE||S[190]!==bq||S[191]!==bs||S[192]!==bP?(O={actions:bL,activeViewId:bQ,badges:bN,changesOpen:a1,closeInspector:a4,collapsedFieldSets:bz,collapsedPaths:bA,compareValue:b0,connectionState:bn,displayed:b3,documentId:aI,documentIdRaw:aH,documentType:aL,editState:bk,fieldActions:bT,focusPath:bo,inspector:b4,inspectors:a3,onBlur:bB,onChange:bp,onFocus:bC,onPathOpen:bM,onHistoryClose:a6,onHistoryOpen:a7,onInspectClose:ba,onMenuAction:b_,onPaneClose:bY,onPaneSplit:bZ,onSetActiveFieldGroup:bD,onSetCollapsedPath:bE,onSetCollapsedFieldSet:bF,onSetMaximizedPane:Y,maximized:aa,openInspector:a5,openPath:bG,index:U,inspectOpen:a9,validation:bq,menuItemGroups:N,paneKey:W,previewUrl:bR,ready:bU,schemaType:bg,hasUpstreamVersion:bm,isPermissionsLoading:bw,isInitialValueLoading:a0,permissions:bu,setTimelineRange:bX,setIsDeleting:bc,isDeleting:bb,isDeleted:b1,timelineError:ac,timelineStore:ab,title:aE,value:bs,selectedReleaseId:aY,views:bP,formState:bt,unstable_languageFilter:bO,revisionId:ai,revisionNotFound:b2,lastNonDeletedRevId:aj,lastRevisionDocument:bd},S[131]=bL,S[132]=bQ,S[133]=bN,S[134]=a1,S[135]=a4,S[136]=bz,S[137]=bA,S[138]=b0,S[139]=bn,S[140]=b3,S[141]=aI,S[142]=aH,S[143]=aL,S[144]=bk,S[145]=bT,S[146]=bo,S[147]=bt,S[148]=a6,S[149]=a7,S[150]=ba,S[151]=b_,S[152]=bY,S[153]=bZ,S[154]=bM,S[155]=bm,S[156]=U,S[157]=a9,S[158]=a3,S[159]=b1,S[160]=bb,S[161]=a0,S[162]=bw,S[163]=bO,S[164]=aj,S[165]=bd,S[166]=aa,S[167]=bB,S[168]=bp,S[169]=bC,S[170]=bD,S[171]=bF,S[172]=bE,S[173]=Y,S[174]=a5,S[175]=bG,S[176]=W,S[177]=bu,S[178]=bR,S[179]=bU,S[180]=ai,S[181]=b2,S[182]=bg,S[183]=aY,S[184]=bX,S[185]=b4,S[186]=N,S[187]=ac,S[188]=ab,S[189]=aE,S[190]=bq,S[191]=bs,S[192]=bP,S[193]=O):O=S[193];let b5=O,b6=(0,i.useRef)(void 0);return S[194]!==aW||S[195]!==bx||S[196]!==by||S[197]!==av||S[198]!==aM||S[199]!==bU?(P=()=>{if(bU&&aM.path){let{path:a,...b}=aM;a!==b6.current&&by((0,aV.resolveKeyedPath)(bx.current?.value,(0,aV.fromString)(a))),aW||av.setParams(b)}b6.current=aM.path},Q=[bx,by,av,aM,bU,aW],S[194]=aW,S[195]=bx,S[196]=by,S[197]=av,S[198]=aM,S[199]=bU,S[200]=P,S[201]=Q):(P=S[200],Q=S[201]),(0,i.useEffect)(P,Q),S[202]!==T||S[203]!==b5?(R=(0,g.jsx)(l.DocumentPaneContext.Provider,{value:b5,children:T}),S[202]=T,S[203]=b5,S[204]=R):R=S[204],R}let gY=a=>{let b,c,d,e,f,i,l,m=(0,h.c)(37),{params:n}=d9(),o=void 0===n?dq:n,p=hb(a.pane.options,o),q=(0,j.useSchema)(),r=p.type,s=!!q.get(p.type)?.liveEdit,{selectedPerspectiveName:t,selectedReleaseId:u,selectedPerspective:v}=(0,j.usePerspective)(),{data:w}=(0,j.useArchivedReleases)();m[0]!==p.id?(b=(0,k.getPublishedId)(p.id),m[0]=p.id,m[1]=b):b=m[1];let x=(0,j.useEditState)(b,r,"default",u),y=s&&"drafts"===v&&!x?.draft,{rev:z,since:A}=o,B=o.historyVersion;a:{if(y){let a;m[2]!==p.id?(a=(0,k.getPublishedId)(p.id),m[2]=p.id,m[3]=a):a=m[3],c=a;break a}if(B&&w.some(a=>(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===B)){let a;m[4]!==B||m[5]!==p.id?(a=(0,k.getVersionId)(p.id,B),m[4]=B,m[5]=p.id,m[6]=a):a=m[6],c=a;break a}if(typeof t>"u"){let a;m[7]!==p.id?(a=(0,k.getDraftId)(p.id),m[7]=p.id,m[8]=a):a=m[8],c=a;break a}if("published"===t){let a;m[9]!==p.id?(a=(0,k.getPublishedId)(p.id),m[9]=p.id,m[10]=a):a=m[10],c=a;break a}if(0!==t.length){let a;m[11]!==p.id||m[12]!==t?(a=(0,k.getVersionId)(p.id,t),m[11]=p.id,m[12]=t,m[13]=a):a=m[13],c=a;break a}c=p.id}let C=c;m[14]!==C||m[15]!==p.type||m[16]!==z||m[17]!==A?(d={documentId:C,documentType:p.type,rev:z,since:A},m[14]=C,m[15]=p.type,m[16]=z,m[17]=A,m[18]=d):d=m[18];let D=(0,j.useEventsStore)(d),E=D.error,F=D.revision?.revisionId||null,G=!!(z&&!D.revision?.loading),H=D.revision?.document||null,I=D.sinceRevision?.document||null,J=!D.loading,K=0===D.events.length;m[19]!==D.events?(e=D.events.find(gZ)?.id||null,m[19]=D.events,m[20]=e):e=m[20],m[21]!==D.error||m[22]!==K||m[23]!==e||m[24]!==F||m[25]!==G||m[26]!==H||m[27]!==I||m[28]!==J?(f={error:E,revisionId:F,onOlderRevision:G,revisionDocument:H,sinceDocument:I,ready:J,isPristine:K,lastNonDeletedRevId:e},m[21]=D.error,m[22]=K,m[23]=e,m[24]=F,m[25]=G,m[26]=H,m[27]=I,m[28]=J,m[29]=f):f=m[29];let L=f;return m[30]!==L||m[31]!==B||m[32]!==a?(i=B?(0,g.jsx)(j.PerspectiveProvider,{selectedPerspectiveName:B,excludedPerspectives:j.EMPTY_ARRAY,children:(0,g.jsx)(gX,{...a,historyStore:L})}):(0,g.jsx)(gX,{...a,historyStore:L}),m[30]=L,m[31]=B,m[32]=a,m[33]=i):i=m[33],m[34]!==i||m[35]!==D?(l=(0,g.jsx)(j.EventsProvider,{value:D,children:i}),m[34]=i,m[35]=D,m[36]=l):l=m[36],l};function gZ(a){return!(0,j.isDeleteDocumentGroupEvent)(a)&&!(0,j.isDeleteDocumentVersionEvent)(a)}let g$=a=>{let b,c,d,e,f=(0,h.c)(20),{pane:l}=a,m=d9(),n=hb(l.options,m.params),o=m.params||dq,[p,q]=(0,i.useState)(null);f[0]!==n.id?(b=(0,k.getPublishedId)(n.id),f[0]=n.id,f[1]=b):b=f[1],f[2]!==n.type||f[3]!==o.rev||f[4]!==o.since||f[5]!==b?(c={documentId:b,documentType:n.type,onError:q,rev:o.rev,since:o.since},f[2]=n.type,f[3]=o.rev,f[4]=o.since,f[5]=b,f[6]=c):c=f[6];let r=(0,j.useTimelineStore)(c),s=(0,j.useTimelineSelector)(r,g_),t=(0,j.useTimelineSelector)(r,g0),u=(0,j.useTimelineSelector)(r,g1),v=(0,j.useTimelineSelector)(r,g2),w=(0,j.useTimelineSelector)(r,g3),x=(0,j.useTimelineSelector)(r,g4),y=(0,j.useTimelineSelector)(r,g5),z=t?.id||null,A=!!x;f[7]!==y||f[8]!==s||f[9]!==r||f[10]!==z||f[11]!==v||f[12]!==u||f[13]!==A||f[14]!==p||f[15]!==w?(d={store:r,error:p,revisionId:z,onOlderRevision:s,revisionDocument:v,sinceDocument:u,ready:w,isPristine:A,lastNonDeletedRevId:y},f[7]=y,f[8]=s,f[9]=r,f[10]=z,f[11]=v,f[12]=u,f[13]=A,f[14]=p,f[15]=w,f[16]=d):d=f[16];let B=d;return f[17]!==B||f[18]!==a?(e=(0,g.jsx)(gX,{...a,historyStore:B}),f[17]=B,f[18]=a,f[19]=e):e=f[19],e};function g_(a){return a.onOlderRevision}function g0(a){return a.revTime}function g1(a){return a.sinceAttributes}function g2(a){return a.timelineDisplayed}function g3(a){return a.timelineReady}function g4(a){return a.isPristine}function g5(a){return a.lastNonDeletedRevId}function g6(a){let b=(0,h.c)(4),{children:c}=a,d=d9(),{excludedPerspectives:e}=(0,j.usePerspective)(),{scheduledDraft:f}=d.params;if(f){let a;return b[0]!==c||b[1]!==e||b[2]!==f?(a=(0,g.jsx)(j.PerspectiveProvider,{selectedPerspectiveName:f,excludedPerspectives:e,children:c}),b[0]=c,b[1]=e,b[2]=f,b[3]=a):a=b[3],a}return c}let g7=(0,i.memo)(a=>{let b,c,d,e=(0,h.c)(9),f=(0,j.useSource)(),{setParams:i,params:k}=d9();e[0]!==k||e[1]!==i?(b=a=>{i({...k,scheduledDraft:a},{perspective:""})},e[0]=k,e[1]=i,e[2]=b):b=e[2];let l=b;return e[3]!==a||e[4]!==f.beta?.eventsAPI?.documents?(c=f.beta?.eventsAPI?.documents?(0,g.jsx)(gY,{...a}):(0,g.jsx)(g$,{...a}),e[3]=a,e[4]=f.beta?.eventsAPI?.documents,e[5]=c):c=e[5],e[6]!==l||e[7]!==c?(d=(0,g.jsx)(g6,{children:(0,g.jsx)(j.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:l,children:c})}),e[6]=l,e[7]=c,e[8]=d):d=e[8],d});g7.displayName="Memo(DocumentPaneProviderWrapper)";let g8=(0,i.memo)(function(a){let b,c,d=(0,h.c)(5),{name:e}=(0,j.useSource)(),f=a.pane.source||e;return d[0]!==a?(b=(0,g.jsx)(j.CopyPasteProvider,{children:(0,g.jsx)(g9,{...a})}),d[0]=a,d[1]=b):b=d[1],d[2]!==f||d[3]!==b?(c=(0,g.jsx)(j.SourceProvider,{name:f,children:b}),d[2]=f,d[3]=b,d[4]=c):c=d[4],c});function g9(a){var b,c,d;let e,f,k,l,m,n,o,p,q,r,s,t,u=(0,h.c)(57),{pane:v,paneKey:w}=a,{resolveNewDocumentOptions:x}=(0,j.useSource)().document,{selectedPerspectiveName:z}=(0,j.usePerspective)(),A=d9(),B=hb(v.options,A.params),{documentType:C,isLoaded:D}=(0,j.useDocumentType)(B.id,B.type);!function(){let a,b,c,d,e,f=(0,h.c)(10),{params:g,setParams:k}=d9(),l=void 0===g?dq:g,{selectedPerspectiveName:m}=(0,j.usePerspective)(),n=(0,i.useRef)(!1);f[0]!==l||f[1]!==k?(a=a=>{["since","historyVersion","rev","preserveRev"].some(a=>l[a])&&k({...l,rev:"true"===l.preserveRev?l.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},f[0]=l,f[1]=k,f[2]=a):a=f[2];let o=(0,i.useEffectEvent)(a);f[3]!==m||f[4]!==o?(b=()=>{n.current&&o(m)},f[3]=m,f[4]=o,f[5]=b):b=f[5],f[6]!==m?(c=[m],f[6]=m,f[7]=c):c=f[7],(0,i.useEffect)(b,c),f[8]===Symbol.for("react.memo_cache_sentinel")?(d=()=>(n.current=!0,()=>{n.current=!1}),e=[],f[8]=d,f[9]=e):(d=f[8],e=f[9]),(0,i.useEffect)(d,e)}();let E=((t=(0,h.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(s={pick:cs,defaultComponent:gP},t[0]=s):s=t[0],(0,j.useMiddlewareComponents)(s));u[0]!==B.id||u[1]!==B.type||u[2]!==x?(e=x({type:"document",documentId:B.id,schemaType:B.type}),u[0]=B.id,u[1]=B.type,u[2]=x,u[3]=e):e=u[3];let F=e;u[4]!==F?(f={templateItems:F},u[4]=F,u[5]=f):f=u[5];let[G,H]=(0,j.useTemplatePermissions)(f),I=D&&!H;u[6]!==C||u[7]!==I||u[8]!==B||u[9]!==a?(k=I&&C&&B.type!==C?(b=a,c=B,d=C,{...b,pane:{...b.pane,options:{...c,type:d}}}):a,u[6]=C,u[7]=I,u[8]=B,u[9]=a,u[10]=k):k=u[10];let J=k,{ReferenceChildLink:K,handleEditReference:L,groupIndex:M,routerPanesState:N}=A;u[11]!==M||u[12]!==N?(l=N[M+1]?.[0].params||{},u[11]=M,u[12]=N,u[13]=l):l=u[13];let O=l,P=N.length,{parentRefPath:Q}=O;u[14]!==M||u[15]!==Q||u[16]!==P?(m=Q?{path:(0,aV.fromString)(Q),state:M>=P-1?"none":M>=P-2?"selected":"pressed"}:{path:[],state:"none"},u[14]=M,u[15]=Q,u[16]=P,u[17]=m):m=u[17];let R=m,{t:S}=(0,j.useTranslation)(y);if("*"===B.type&&!I){let a,b;return u[18]!==S?(a=S("panes.document-pane.document-not-found.loading"),u[18]=S,u[19]=a):a=u[19],u[20]!==w||u[21]!==a?(b=(0,g.jsx)(dg,{flex:2.5,minWidth:320,paneKey:w,title:a}),u[20]=w,u[21]=a,u[22]=b):b=u[22],b}if(!C){let a,b,c,d,e;return u[23]!==S?(a=S("panes.document-pane.document-not-found.title"),u[23]=S,u[24]=a):a=u[24],u[25]!==B.id?(b={id:B.id},u[25]=B.id,u[26]=b):b=u[26],u[27]===Symbol.for("react.memo_cache_sentinel")?(c={Code:ha},u[27]=c):c=u[27],u[28]!==S||u[29]!==b?(d=(0,g.jsx)(aB.Stack,{space:4,children:(0,g.jsx)(aB.Text,{as:"p",children:(0,g.jsx)(j.Translate,{t:S,i18nKey:"panes.document-pane.document-not-found.text",values:b,components:c})})}),u[28]=S,u[29]=b,u[30]=d):d=u[30],u[31]!==w||u[32]!==a||u[33]!==d?(e=(0,g.jsx)(dc,{flex:2.5,minWidth:320,paneKey:w,title:a,children:d}),u[31]=w,u[32]=a,u[33]=d,u[34]=e):e=u[34],e}let T=`${C}-${B.id}-${z||""}`;return u[35]!==E||u[36]!==B.id||u[37]!==B.type?(n=(0,g.jsx)(E,{documentId:B.id,documentType:B.type}),u[35]=E,u[36]=B.id,u[37]=B.type,u[38]=n):n=u[38],u[39]!==B.id||u[40]!==B.type||u[41]!==n?(o=(0,g.jsx)(di,{documentId:B.id,documentType:B.type,children:n}),u[39]=B.id,u[40]=B.type,u[41]=n,u[42]=o):o=u[42],u[43]!==B.id||u[44]!==B.type||u[45]!==o?(p=(0,g.jsx)(cE,{documentId:B.id,documentType:B.type,children:o}),u[43]=B.id,u[44]=B.type,u[45]=o,u[46]=p):p=u[46],u[47]!==K||u[48]!==R||u[49]!==L||u[50]!==p||u[51]!==G?(q=(0,g.jsx)(j.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:K,onEditReference:L,initialValueTemplateItems:G,activePath:R,children:p}),u[47]=K,u[48]=R,u[49]=L,u[50]=p,u[51]=G,u[52]=q):q=u[52],u[53]!==J||u[54]!==T||u[55]!==q?(r=(0,g.jsx)(g7,{...J,children:q},T),u[53]=J,u[54]=T,u[55]=q,u[56]=r):r=u[56],r}function ha(a){let{children:b}=a;return(0,g.jsx)("code",{children:b})}function hb(a,b){let c,d,e=(0,h.c)(8);e[0]!==b?(c=void 0===b?{}:b,e[0]=b,e[1]=c):c=e[1];let f=c,g=(0,j.useTemplates)();a:{let b,c;if(a.type&&"*"!==a.type){d=a;break a}let h=a.template||f.template;e[2]!==h||e[3]!==g?(b=h?g.find(a=>a.id===h):void 0,e[2]=h,e[3]=g,e[4]=b):b=e[4];let i=b?.schemaType;if(!i){d=a;break a}e[5]!==i||e[6]!==a?(c={...a,type:i},e[5]=i,e[6]=a,e[7]=c):c=e[7],d=c}return d}let hc=(0,i.forwardRef)(function(a,b){let c,d,e,f=(0,h.c)(9),{routerPanesState:j,groupIndex:k}=(0,i.useContext)(l.PaneRouterContext);f[0]!==k||f[1]!==j?(c=j.slice(0,k),f[0]=k,f[1]=j,f[2]=c):c=f[2];let m=c;f[3]!==m?(d={panes:m},f[3]=m,f[4]=d):d=f[4];let n=d;return f[5]!==a||f[6]!==b||f[7]!==n?(e=(0,g.jsx)(aK.StateLink,{...a,ref:b,state:n}),f[5]=a,f[6]=b,f[7]=n,f[8]=e):e=f[8],e}),hd=(0,i.forwardRef)(function(a,b){let c,d,e,f,j,k,m=(0,h.c)(19);m[0]!==a?({childId:c,childPayload:e,childParameters:d,...f}=a,m[0]=a,m[1]=c,m[2]=d,m[3]=e,m[4]=f):(c=m[1],d=m[2],e=m[3],f=m[4]);let{routerPanesState:n,groupIndex:o}=(0,i.useContext)(l.PaneRouterContext);if(m[5]!==c||m[6]!==d||m[7]!==e||m[8]!==o||m[9]!==n){let a;m[11]!==c||m[12]!==d||m[13]!==e?(a=[{id:c,params:d,payload:e}],m[11]=c,m[12]=d,m[13]=e,m[14]=a):a=m[14],j={panes:[...n.slice(0,o+1),a]},m[5]=c,m[6]=d,m[7]=e,m[8]=o,m[9]=n,m[10]=j}else j=m[10];return m[15]!==b||m[16]!==f||m[17]!==j?(k=(0,g.jsx)(aK.StateLink,{...f,ref:b,state:j}),m[15]=b,m[16]=f,m[17]=j,m[18]=k):k=m[18],k}),he=(0,i.forwardRef)(function(a,b){let c,d,e,f,k,m,n,o=(0,h.c)(20),{routerPanesState:p,groupIndex:q,siblingIndex:r}=(0,i.useContext)(l.PaneRouterContext);o[0]!==a?({params:c,payload:d,...e}=a,o[0]=a,o[1]=c,o[2]=d,o[3]=e):(c=o[1],d=o[2],e=o[3]);let s=(0,j.useUnique)(c),t=(0,j.useUnique)(d),u=p[q],v=u[r],w=s??v.params,x=t??v.payload;o[4]!==v||o[5]!==w||o[6]!==x?(f={...v,params:w,payload:x},o[4]=v,o[5]=w,o[6]=x,o[7]=f):f=o[7];let y=f;o[8]!==u||o[9]!==y||o[10]!==r?(k=[...u.slice(0,r),y,...u.slice(r+1)],o[8]=u,o[9]=y,o[10]=r,o[11]=k):k=o[11];let z=k;o[12]!==p||o[13]!==q||o[14]!==z?(m={panes:[...p.slice(0,q),z,...p.slice(q+1)]},o[12]=p,o[13]=q,o[14]=z,o[15]=m):m=o[15];let A=m;return o[16]!==A||o[17]!==b||o[18]!==e?(n=(0,g.jsx)(aK.StateLink,{ref:b,...e,state:A}),o[16]=A,o[17]=b,o[18]=e,o[19]=n):n=o[19],n}),hf=(0,i.forwardRef)(function(a,b){let c,d,e,f,i,j,l,m,n,o,p,q=(0,h.c)(24);q[0]!==a?({documentId:d,documentType:e,parentRefPath:f,children:c,template:j,...i}=a,q[0]=a,q[1]=c,q[2]=d,q[3]=e,q[4]=f,q[5]=i,q[6]=j):(c=q[1],d=q[2],e=q[3],f=q[4],i=q[5],j=q[6]),q[7]!==d?(l=(0,k.getPublishedId)(d),q[7]=d,q[8]=l):l=q[8];let r=j?.params;return q[9]!==f?(m=(0,aV.toString)(f),q[9]=f,q[10]=m):m=q[10],q[11]!==j?(n=j&&{template:j?.id},q[11]=j,q[12]=n):n=q[12],q[13]!==e||q[14]!==m||q[15]!==n?(o={type:e,parentRefPath:m,...n},q[13]=e,q[14]=m,q[15]=n,q[16]=o):o=q[16],q[17]!==c||q[18]!==b||q[19]!==i||q[20]!==l||q[21]!==r||q[22]!==o?(p=(0,g.jsx)(hd,{...i,ref:b,childId:l,childPayload:r,childParameters:o,children:c}),q[17]=c,q[18]=b,q[19]=i,q[20]=l,q[21]=r,q[22]=o,q[23]=p):p=q[23],p}),hg=[];function hh(a){let b,c,d,e,f,i,j,k,m,n,o,p,q,r=(0,h.c)(60),{children:s,flatIndex:t,index:u,params:v,payload:w,siblingIndex:x}=a,{navigate:y,navigateIntent:z,resolvePathFromState:A}=(0,aK.useRouter)(),B=(0,aK.useRouterState)(),{panes:C,expand:D}=cF(),E=B?.panes||hg,F=C?.[C.length-2],G=u-1;r[0]!==G||r[1]!==E||r[2]!==B||r[3]!==x?(b=a=>{let b=E[G]||[],c=b[x],d=a(b,c),e=[...E.slice(0,G),d,...E.slice(G+1)];return{...B,panes:e}},r[0]=G,r[1]=E,r[2]=B,r[3]=x,r[4]=b):b=r[4];let H=b;r[5]!==H||r[6]!==y?(c=(a,b)=>{let c=H(a);return setTimeout(()=>y(c,b?{stickyParams:b}:void 0),0),c},r[5]=H,r[6]=y,r[7]=c):c=r[7];let I=c;r[8]!==H||r[9]!==A||r[10]!==x?(d=a=>A(H((b,c)=>[...b.slice(0,x),{...c,params:a},...b.slice(x+1)])),r[8]=H,r[9]=A,r[10]=x,r[11]=d):d=r[11];let J=d;r[12]!==I||r[13]!==x?(e=a=>{I((b,c)=>[...b.slice(0,x),{...c,payload:a},...b.slice(x+1)])},r[12]=I,r[13]=x,r[14]=e):e=r[14];let K=e;r[15]!==I||r[16]!==x?(f=(a,b)=>{I((b,c)=>[...b.slice(0,x),{...c,params:a},...b.slice(x+1)],b)},r[15]=I,r[16]=x,r[17]=f):f=r[17];let L=f;r[18]!==G||r[19]!==y||r[20]!==E?(i=a=>{let{id:b,parentRefPath:c,type:d,template:e,version:f}=a;y({panes:[...E.slice(0,G+1),[{id:b,params:{template:e.id,parentRefPath:(0,aV.toString)(c),type:d,version:f},payload:e.params}]]})},r[18]=G,r[19]=y,r[20]=E,r[21]=i):i=r[21];let M=i,N=!!E[G]&&E[G].length>1,O=E[G]?E[G].length:0,P=t?hc:void 0;r[22]!==I?(k=a=>{let b=void 0===a?{}:a;I(()=>[{id:b.id||"",payload:b.payload,params:b.params||{}}])},j=()=>{I(hi)},r[22]=I,r[23]=j,r[24]=k):(j=r[23],k=r[24]),r[25]!==D||r[26]!==G||r[27]!==F||r[28]!==y||r[29]!==E?(m=a=>{(void 0===a||a)&&F&&D(F.element),y({panes:E.slice(0,G)})},r[25]=D,r[26]=G,r[27]=F,r[28]=y,r[29]=E,r[30]=m):m=r[30],r[31]!==I||r[32]!==x?(n=a=>{I((b,c)=>{let d={...c,payload:a?.payload||c.payload,params:a?.params||c.params};return[...b.slice(0,x),d,...b.slice(x)]})},r[31]=I,r[32]=x,r[33]=n):n=r[33],r[34]!==v||r[35]!==L?(o=a=>{let b=(0,aP.omit)(v,"view");return L(a?{...b,view:a}:b)},r[34]=v,r[35]=L,r[36]=o):o=r[36],r[37]!==J||r[38]!==t||r[39]!==G||r[40]!==M||r[41]!==z||r[42]!==v||r[43]!==w||r[44]!==E||r[45]!==L||r[46]!==K||r[47]!==x||r[48]!==j||r[49]!==m||r[50]!==n||r[51]!==o||r[52]!==N||r[53]!==O||r[54]!==P||r[55]!==k?(p={index:t,groupIndex:G,siblingIndex:x,payload:w,params:v,hasGroupSiblings:N,groupLength:O,routerPanesState:E,ChildLink:hd,BackLink:P,ReferenceChildLink:hf,handleEditReference:M,ParameterizedLink:he,replaceCurrent:k,closeCurrent:j,closeCurrentAndAfter:m,duplicateCurrent:n,setView:o,setParams:L,setPayload:K,createPathWithParams:J,navigateIntent:z},r[37]=J,r[38]=t,r[39]=G,r[40]=M,r[41]=z,r[42]=v,r[43]=w,r[44]=E,r[45]=L,r[46]=K,r[47]=x,r[48]=j,r[49]=m,r[50]=n,r[51]=o,r[52]=N,r[53]=O,r[54]=P,r[55]=k,r[56]=p):p=r[56];let Q=p;return r[57]!==s||r[58]!==Q?(q=(0,g.jsx)(l.PaneRouterContext.Provider,{value:Q,children:s}),r[57]=s,r[58]=Q,r[59]=q):q=r[59],q}function hi(a,b){return a.length>1?a.filter(a=>a!==b):a}function hj(a){let b,c,d,e,f,i=(0,h.c)(14),{isSelected:k,pane:l,paneKey:m}=a;i[0]!==l?(b=(0,j.isRecord)(l)&&l.type||null,i[0]=l,i[1]=b):b=i[1];let n=b,{t:o}=(0,j.useTranslation)(y);return i[2]!==o?(c=o("panes.unknown-pane-type.title"),i[2]=o,i[3]=c):c=i[3],i[4]!==c?(d=(0,g.jsx)(c2,{title:c}),i[4]=c,i[5]=d):d=i[5],i[6]!==o||i[7]!==n?(e=(0,g.jsx)(cM,{children:(0,g.jsx)(aB.Box,{padding:4,children:"string"==typeof n?(0,g.jsx)(aB.Text,{as:"p",muted:!0,children:(0,g.jsx)(j.Translate,{t:o,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:n}})}):(0,g.jsx)(aB.Text,{as:"p",muted:!0,children:(0,g.jsx)(j.Translate,{t:o,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),i[6]=o,i[7]=n,i[8]=e):e=i[8],i[9]!==k||i[10]!==m||i[11]!==d||i[12]!==e?(f=(0,g.jsxs)(cJ,{id:m,selected:k,children:[d,e]}),i[9]=k,i[10]=m,i[11]=d,i[12]=e,i[13]=f):f=i[13],f}let hk={component:(0,i.lazy)(()=>a.A(993448)),document:(0,i.lazy)(()=>Promise.resolve().then(function(){return jX})),documentList:(0,i.lazy)(()=>Promise.resolve().then(function(){return jY})),list:(0,i.lazy)(()=>a.A(955027))},hl=(0,i.memo)(function(a){let b,c,d,e,f=(0,h.c)(25),{active:j,childItemId:k,groupIndex:l,index:m,itemId:n,pane:o,paneKey:p,params:q,payload:r,path:s,selected:t,siblingIndex:u,maximized:v,onSetMaximizedPane:w}=a,x=hk[o.type]||hj;f[0]!==p||f[1]!==s||f[2]!==t?(b=(0,g.jsx)(dg,{paneKey:p,path:s,selected:t}),f[0]=p,f[1]=s,f[2]=t,f[3]=b):b=f[3];let y=k||"";return f[4]!==x||f[5]!==j||f[6]!==m||f[7]!==n||f[8]!==v||f[9]!==w||f[10]!==o||f[11]!==p||f[12]!==t||f[13]!==y?(c=(0,g.jsx)(x,{childItemId:y,index:m,itemId:n,isActive:j,isSelected:t,paneKey:p,pane:o,maximized:v,onSetMaximizedPane:w}),f[4]=x,f[5]=j,f[6]=m,f[7]=n,f[8]=v,f[9]=w,f[10]=o,f[11]=p,f[12]=t,f[13]=y,f[14]=c):c=f[14],f[15]!==b||f[16]!==c?(d=(0,g.jsx)(i.Suspense,{fallback:b,children:c}),f[15]=b,f[16]=c,f[17]=d):d=f[17],f[18]!==l||f[19]!==m||f[20]!==q||f[21]!==r||f[22]!==u||f[23]!==d?(e=(0,g.jsx)(hh,{flatIndex:m,index:l,params:q,payload:r,siblingIndex:u,children:d}),f[18]=l,f[19]=m,f[20]=q,f[21]=r,f[22]=u,f[23]=d,f[24]=e):e=f[24],e},({params:a={},payload:b=null,...c},{params:d={},payload:e=null,...f})=>{if(!(0,aQ.isEqual)(a,d)||!(0,aQ.isEqual)(b,e))return!1;for(let a of new Set([...Object.keys(c),...Object.keys(f)]))if(c[a]!==f[a])return!1;return!0});function hm(a){let b,c,d=(0,h.c)(10),{document:e}=a,f=(0,j.useSchema)().get(e._type),{t:i}=(0,j.useTranslation)(y),{title:k}=dx();if(!f){let a,b;return d[0]!==e._type||d[1]!==i?(a=i("doc-title.unknown-schema-type.text",{schemaType:e._type}),d[0]=e._type,d[1]=i,d[2]=a):a=d[2],d[3]!==a?(b=(0,g.jsx)("code",{children:a}),d[3]=a,d[4]=b):b=d[4],b}return d[5]!==i||d[6]!==k?(b=k||(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:i("doc-title.fallback.text")}),d[5]=i,d[6]=k,d[7]=b):b=d[7],d[8]!==b?(c=(0,g.jsx)(g.Fragment,{children:b}),d[8]=b,d[9]=c):c=d[9],c}let hn=(0,aF.styled)(aB.Box)`
  margin-left: auto;
`,ho=aF.styled.details`
  flex: none;

  &[open] ${hn} {
    transform: rotate(180deg);
  }
`,hp=aF.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,hq=aF.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:a})=>(0,aB.rem)(a.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:a})=>(0,aB.rem)(a.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:a})=>(0,aB.rem)(a.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,hr=(0,aF.styled)(aB.Flex)`
  min-height: 33px;
`,hs=a=>{let b,c,d,e,f,i,k=(0,h.c)(13),{t:l}=(0,j.useTranslation)(y),m=a.totalCount-a.references.length;return m?(k[0]!==m||k[1]!==l?(b=l("confirm-delete-dialog.other-reference-count.title",{count:m}),k[0]=m,k[1]=l,k[2]=b):b=k[2],k[3]!==b?(c=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:b}),k[3]=b,k[4]=c):c=k[4],k[5]!==l?(d=l("confirm-delete-dialog.other-reference-count.tooltip"),k[5]=l,k[6]=d):d=k[6],k[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:(0,g.jsx)(n.InfoOutlineIcon,{})}),k[7]=e):e=k[7],k[8]!==d?(f=(0,g.jsx)(aA.Tooltip,{portal:!0,placement:"top",content:d,children:e}),k[8]=d,k[9]=f):f=k[9],k[10]!==c||k[11]!==f?(i=(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsxs)(aB.Inline,{space:2,children:[c,f]})}),k[10]=c,k[11]=f,k[12]=i):i=k[12],i):null};function ht(a){let b,c,d,e,f,i,k=(0,h.c)(27),{icon:l,layout:m,presence:n,schemaType:o,value:p}=a,q=(0,j.useDocumentVersionInfo)(p._id),{perspectiveStack:r}=(0,j.usePerspective)();k[0]!==r||k[1]!==a.documentPreviewStore||k[2]!==o||k[3]!==p._id?(b=(0,j.getPreviewStateObservable)(a.documentPreviewStore,o,p._id,r),k[0]=r,k[1]=a.documentPreviewStore,k[2]=o,k[3]=p._id,k[4]=b):b=k[4];let s=b;k[5]===Symbol.for("react.memo_cache_sentinel")?(c={snapshot:null,isLoading:!0,original:null},k[5]=c):c=k[5];let{snapshot:t,original:u,isLoading:v}=(0,aJ.useObservable)(s,c);k[6]!==v||k[7]!==n||k[8]!==q.draft||k[9]!==q.published||k[10]!==q.versions?(d=v?null:(0,g.jsx)(aA.TooltipDelayGroupProvider,{children:(0,g.jsxs)(aB.Flex,{align:"center",gap:3,children:[n&&n.length>0&&(0,g.jsx)(j.DocumentPreviewPresence,{presence:n}),(0,g.jsx)(j.DocumentStatusIndicator,{draft:q.draft,published:q.published,versions:q.versions})]})}),k[6]=v,k[7]=n,k[8]=q.draft,k[9]=q.published,k[10]=q.versions,k[11]=d):d=k[11];let w=d;k[12]!==q.draft||k[13]!==q.published||k[14]!==q.versions?(e=(0,g.jsx)(j.DocumentStatus,{draft:q.draft,published:q.published,versions:q.versions}),k[12]=q.draft,k[13]=q.published,k[14]=q.versions,k[15]=e):e=k[15];let x=e;return k[16]!==u||k[17]!==t||k[18]!==p?(f=(0,j.getPreviewValueWithFallback)({snapshot:t,original:u,fallback:p}),k[16]=u,k[17]=t,k[18]=p,k[19]=f):f=k[19],k[20]!==l||k[21]!==v||k[22]!==m||k[23]!==w||k[24]!==f||k[25]!==x?(i=(0,g.jsx)(j.SanityDefaultPreview,{...f,isPlaceholder:v,icon:l,layout:m,status:w,tooltip:x}),k[20]=l,k[21]=v,k[22]=m,k[23]=w,k[24]=f,k[25]=x,k[26]=i):i=k[26],i}let hu=[];function hv(a){let b,c,d,e,f=(0,h.c)(16),{onClick:i,type:l,value:m}=a,n=m?._id;f[0]!==n?(b=(0,k.getPublishedId)(n),f[0]=n,f[1]=b):b=f[1];let o=(0,j.useDocumentPresence)(b),p=(0,j.useDocumentPreviewStore)(),{ReferenceChildLink:q}=d9();f[2]!==q||f[3]!==l?.name||f[4]!==m?._id?(c=function(a){return(0,g.jsx)(q,{documentId:m?._id,documentType:l?.name,parentRefPath:hu,...a})},f[2]=q,f[3]=l?.name,f[4]=m?._id,f[5]=c):c=f[5];let r=c,s=l?.icon,t=o?.length>0?o:hu;return f[6]!==p||f[7]!==s||f[8]!==t||f[9]!==l||f[10]!==m?(d=(0,g.jsx)(ht,{documentPreviewStore:p,icon:s,layout:"default",presence:t,schemaType:l,value:m}),f[6]=p,f[7]=s,f[8]=t,f[9]=l,f[10]=m,f[11]=d):d=f[11],f[12]!==i||f[13]!==r||f[14]!==d?(e=(0,g.jsx)(j.PreviewCard,{__unstable_focusRing:!0,as:r,"data-as":"a",onClick:i,radius:2,children:d}),f[12]=i,f[13]=r,f[14]=d,f[15]=e):e=f[15],e}let hw=(0,aF.styled)(aB.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,hx=a=>{let b,c,d,e,f,i,l,m,n,o,p,q,r,s,t=(0,h.c)(44),{versionId:u,schemaType:v}=a,{t:w}=(0,j.useTranslation)(),x=(0,j.useDocumentPreviewStore)();t[0]!==u?(b=(0,j.getDocumentVariantType)(u),t[0]=u,t[1]=b):b=t[1];let y=b,{data:z}=(0,j.useActiveReleases)();if(t[2]!==x||t[3]!==y||t[4]!==v||t[5]!==u){let a=["version"===y?(0,k.getVersionFromId)(u):"published"===y?"published":"drafts"];c=(0,j.getPreviewStateObservable)(x,v,(0,k.getPublishedId)(u),a),t[2]=x,t[3]=y,t[4]=v,t[5]=u,t[6]=c}else c=t[6];let A=c;t[7]===Symbol.for("react.memo_cache_sentinel")?(d={snapshot:null,isLoading:!0,original:null},t[7]=d):d=t[7];let{snapshot:B,original:C,isLoading:D}=(0,aJ.useObservable)(A,d);a:{let a;if("version"!==y){e=void 0;break a}if(t[8]!==z||t[9]!==u){let b;t[11]!==u?(b=a=>(0,j.getReleaseIdFromReleaseDocumentId)(a._id)===(0,k.getVersionFromId)(u),t[11]=u,t[12]=b):b=t[12],a=z.find(b),t[8]=z,t[9]=u,t[10]=a}else a=t[10];e=a}let E=e;t[13]!==y||t[14]!==E?.metadata?.title||t[15]!==w||t[16]!==u?(f=()=>"version"===y?E?.metadata?.title||(0,k.getVersionFromId)(u):w("published"===y?"release.chip.published":"release.chip.draft"),t[13]=y,t[14]=E?.metadata?.title,t[15]=w,t[16]=u,t[17]=f):f=t[17];let F=f;t[18]!==y||t[19]!==E?(i=E?(0,j.getReleaseTone)(E):"published"===y?"positive":"caution",t[18]=y,t[19]=E,t[20]=i):i=t[20];let G=i;t[21]!==C||t[22]!==v.name||t[23]!==B||t[24]!==u?(l=(0,j.getPreviewValueWithFallback)({snapshot:B,original:C,fallback:{_id:u,_type:v.name}}),t[21]=C,t[22]=v.name,t[23]=B,t[24]=u,t[25]=l):l=t[25];let H=v.icon;return t[26]===Symbol.for("react.memo_cache_sentinel")?(m={backgroundColor:"transparent"},t[26]=m):m=t[26],t[27]!==G?(n=(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.ReleaseAvatarIcon,{tone:G})}),t[27]=G,t[28]=n):n=t[28],t[29]!==F?(o=F(),t[29]=F,t[30]=o):o=t[30],t[31]!==o?(p=(0,g.jsx)(hw,{size:1,weight:"medium",textOverflow:"ellipsis",children:o}),t[31]=o,t[32]=p):p=t[32],t[33]!==n||t[34]!==p?(q=(0,g.jsxs)(aB.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[n,p]}),t[33]=n,t[34]=p,t[35]=q):q=t[35],t[36]!==q||t[37]!==G?(r=(0,g.jsx)(aB.Card,{border:!0,radius:"full",children:(0,g.jsx)(aB.Card,{radius:"full",tone:G,style:m,children:q})}),t[36]=q,t[37]=G,t[38]=r):r=t[38],t[39]!==D||t[40]!==v.icon||t[41]!==r||t[42]!==l?(s=(0,g.jsx)(j.SanityDefaultPreview,{...l,isPlaceholder:D,icon:H,layout:"default",status:r}),t[39]=D,t[40]=v.icon,t[41]=r,t[42]=l,t[43]=s):s=t[43],s},hy=a=>{let b,c,d,e=(0,h.c)(8),{documentType:f,documentVersions:i}=a,k=(0,j.useSchema)();e[0]!==f||e[1]!==k?(b=k.get(f),e[0]=f,e[1]=k,e[2]=b):b=e[2];let l=b;if(!l)throw Error(`Schema type ${f} not found`);return e[3]!==i||e[4]!==l?(c=i?.map(a=>(0,g.jsx)(hx,{versionId:a,schemaType:l},a)),e[3]=i,e[4]=l,e[5]=c):c=e[5],e[6]!==c?(d=(0,g.jsx)(aB.Card,{border:!0,padding:1,radius:2,children:(0,g.jsx)(aB.Stack,{children:c})}),e[6]=c,e[7]=d):d=e[7],d};function hz(a){let b,c,d,e,f,i,k,l,m,o,p,q,r,s,t,u,v,w,x,z=(0,h.c)(66),{crossDatasetReferences:A,internalReferences:B,documentTitle:C,totalCount:D,action:E,datasetNames:F,hasUnknownDatasetNames:G,documentId:H,documentType:I,onReferenceLinkClick:J,documentVersions:K}=a,L=(0,j.useSchema)(),M=(0,aC.useToast)(),{t:N}=(0,j.useTranslation)(y);z[0]!==J||z[1]!==L||z[2]!==N?(b=a=>{let b=L.get(a._type);return b?(0,g.jsx)(hv,{type:b,value:a,onClick:J}):(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsx)(j.SanityDefaultPreview,{icon:n.UnknownIcon,title:N("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:N("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:a._id}),layout:"default"})})},z[0]=J,z[1]=L,z[2]=N,z[3]=b):b=z[3];let O=b;z[4]!==E||z[5]!==C||z[6]!==I||z[7]!==K||z[8]!==N?(c=()=>(0,g.jsxs)(aB.Stack,{space:4,children:[(0,g.jsx)(aB.Text,{as:"p",size:1,children:(0,g.jsx)(j.Translate,{t:N,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,g.jsx)("strong",{children:C})}})}),"delete"===E&&(0,g.jsx)(hy,{documentType:I,documentVersions:K})]}),z[4]=E,z[5]=C,z[6]=I,z[7]=K,z[8]=N,z[9]=c):c=z[9];let P=c;if(B?.totalCount===0&&A?.totalCount===0){let a;return z[10]!==P?(a=P(),z[10]=P,z[11]=a):a=z[11],a}z[12]!==G?(d=G?["unavailable"]:[],z[12]=G,z[13]=d):d=z[13],z[14]!==F||z[15]!==d?(e=[...F,...d],z[14]=F,z[15]=d,z[16]=e):e=z[16];let Q=e,R=Q.length,S=Q.join(", "),T=G&&Q.length?"unavailable":"";z[17]!==Q.length||z[18]!==N||z[19]!==S||z[20]!==T?(f=N("confirm-delete-dialog.cdr-summary.subtitle",{count:R,datasets:S,context:T}),z[17]=Q.length,z[18]=N,z[19]=S,z[20]=T,z[21]=f):f=z[21];let U=f;return z[22]!==P?(i=P(),z[22]=P,z[23]=i):i=z[23],z[24]===Symbol.for("react.memo_cache_sentinel")?(k=(0,g.jsx)(aB.Card,{borderTop:!0,padding:1}),z[24]=k):k=z[24],z[25]===Symbol.for("react.memo_cache_sentinel")?(l=(0,g.jsx)(aB.Text,{"aria-hidden":"true",size:1,children:(0,g.jsx)(n.WarningOutlineIcon,{})}),z[25]=l):l=z[25],z[26]!==C?(m={DocumentTitle:()=>C},z[26]=C,z[27]=m):m=z[27],z[28]!==D?(o={count:D},z[28]=D,z[29]=o):o=z[29],z[30]!==N||z[31]!==m||z[32]!==o?(p=(0,g.jsxs)("div",{children:[k,(0,g.jsx)(aB.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,g.jsxs)(aB.Flex,{children:[l,(0,g.jsx)(aB.Box,{flex:1,marginLeft:3,children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:m,t:N,values:o})})})]})})]}),z[30]=N,z[31]=m,z[32]=o,z[33]=p):p=z[33],z[34]!==C?(q={DocumentTitle:()=>C},z[34]=C,z[35]=q):q=z[35],z[36]!==E||z[37]!==N||z[38]!==q?(r=(0,g.jsx)(aB.Box,{flex:"none",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:N,context:E,components:q})})}),z[36]=E,z[37]=N,z[38]=q,z[39]=r):r=z[39],z[40]!==B||z[41]!==O?(s=B.totalCount>0&&(0,g.jsxs)(aB.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[B?.references.map(a=>(0,g.jsx)(aB.Box,{as:"li",children:O(a)},a._id)),B.totalCount>B.references.length&&(0,g.jsx)(aB.Box,{as:"li",padding:3,children:(0,g.jsx)(hs,{...B})})]}),z[40]=B,z[41]=O,z[42]=s):s=z[42],z[43]!==A||z[44]!==U||z[45]!==H||z[46]!==B.totalCount||z[47]!==Q.length||z[48]!==N||z[49]!==M?(t=A.totalCount>0&&(0,g.jsxs)(ho,{"data-testid":"cross-dataset-references",style:{borderTop:B.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,g.jsx)(hp,{children:(0,g.jsx)(aB.Card,{as:"a",marginTop:2*(B.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,g.jsxs)(aB.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(n.DocumentsIcon,{})}),(0,g.jsxs)(aB.Stack,{space:2,children:[(0,g.jsx)(aB.Text,{textOverflow:"ellipsis",size:1,children:N("confirm-delete-dialog.cdr-summary.title",{count:Q.length,documentCount:N("confirm-delete-dialog.cdr-summary.document-count",{count:A.totalCount})})}),(0,g.jsx)(aB.Text,{title:U,textOverflow:"ellipsis",size:1,muted:!0,children:U})]}),(0,g.jsx)(hn,{children:(0,g.jsx)(aB.Text,{muted:!0,size:1,children:(0,g.jsx)(n.ChevronDownIcon,{})})})]})})}),(0,g.jsxs)(aB.Box,{overflow:"auto",paddingTop:2,children:[(0,g.jsxs)(hq,{children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{children:[(0,g.jsx)("th",{children:(0,g.jsx)(aB.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:N("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,g.jsx)("th",{children:(0,g.jsx)(aB.Text,{muted:!0,size:1,weight:"medium",children:N("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,g.jsx)("th",{children:(0,g.jsx)(aB.Text,{muted:!0,size:1,weight:"medium",children:N("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,g.jsx)("tbody",{children:A.references.filter(hA).map((a,b)=>{let{projectId:c,datasetName:d,documentId:e}=a;return(0,g.jsxs)("tr",{children:[(0,g.jsx)("td",{children:(0,g.jsx)(aB.Text,{size:1,children:c})}),(0,g.jsx)("td",{children:(0,g.jsx)(aB.Text,{size:1,children:d||"unavailable"})}),(0,g.jsx)("td",{children:(0,g.jsxs)(hr,{align:"center",gap:2,justify:"flex-end",children:[(0,g.jsx)(aB.Text,{textOverflow:"ellipsis",size:1,children:e||"unavailable"}),e&&(0,g.jsx)(aA.Button,{mode:"bleed",icon:n.CopyIcon,tooltipProps:{content:N("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(e).catch(()=>{M.push({status:"error",title:N("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${H}-${b}`)})})]}),(0,g.jsx)(hs,{...A})]})]}),z[43]=A,z[44]=U,z[45]=H,z[46]=B.totalCount,z[47]=Q.length,z[48]=N,z[49]=M,z[50]=t):t=z[50],z[51]!==s||z[52]!==t?(u=(0,g.jsx)(aB.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,g.jsxs)(aB.Flex,{direction:"column",children:[s,t]})}),z[51]=s,z[52]=t,z[53]=u):u=z[53],z[54]!==C?(v={DocumentTitle:()=>C},z[54]=C,z[55]=v):v=z[55],z[56]!==E||z[57]!==N||z[58]!==v?(w=(0,g.jsx)(aB.Box,{flex:"none",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:N,context:E,components:v})})}),z[56]=E,z[57]=N,z[58]=v,z[59]=w):w=z[59],z[60]!==p||z[61]!==r||z[62]!==u||z[63]!==w||z[64]!==i?(x=(0,g.jsxs)(aB.Flex,{direction:"column",gap:4,children:[i,p,r,u,w]}),z[60]=p,z[61]=r,z[62]=u,z[63]=w,z[64]=i,z[65]=x):x=z[65],x}function hA(a){return"projectId"in a}let hB=()=>(b||(b=(0,aU.fromEvent)(document,"visibilitychange").pipe((0,aT.startWith)(null),(0,aT.map)(()=>"visible"===document.visibilityState),(0,aT.distinctUntilChanged)(),(0,aT.switchMap)(a=>a?(0,aU.timer)(0,5e3):aU.EMPTY),(0,aT.shareReplay)({refCount:!0,bufferSize:1}))),b),hC=(0,j.createHookFromObservableFactory)(([a,b])=>b.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:a},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),hD=(0,j.createHookFromObservableFactory)(([a,b])=>hB().pipe((0,aT.switchMap)(()=>(function(a,b){let{versionedClient:c}=b;return hB().pipe((0,aT.switchMap)(()=>(function(a,{versionedClient:b}){let c=(0,k.getDraftId)(a),d=(0,k.getPublishedId)(a),e={uri:b.getDataUrl("doc",`${c},${d}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return b.observable.request(e).pipe((0,aT.map)(({omitted:a})=>{let b=a.filter(a=>"existence"===a.reason);if(2!==b.length)return 0===b.length||b.some(a=>a.id===c)?d:c}))})(a,b)),(0,aT.switchMap)(a=>{if(!a)return(0,aU.of)({totalCount:0,references:[]});let b=c.config().dataset;return c.observable.request({url:`/data/references/${b}/documents/${a}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,aT.catchError)(a=>{if("object"==typeof a&&a&&"statusCode"in a&&"response"in a&&404===a.statusCode)return(0,aU.of)({totalCount:0,references:[]});throw a}))}))})(a,{versionedClient:b}))));function hE(a){return"string"!=typeof a.datasetName}function hF(a){return!!a&&""!==a}function hG(a){return a?.datasetName||""}function hH(a){return a.projectId}let hI=(0,aF.styled)(aB.Box)`
  box-sizing: border-box;
`,hJ=(0,aF.styled)(aB.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function hK(a){let b,c,d,e,f,l,m,n,o,p,q,r,s=(0,h.c)(51),{id:t,type:u,action:v,onCancel:w,onConfirm:x}=a,z=void 0===v?"delete":v,{t:A}=(0,j.useTranslation)(y),B=`deletion-confirmation-${(0,i.useId)()}`,{internalReferences:C,crossDatasetReferences:D,isLoading:E,totalCount:F,projectIds:G,datasetNames:H,hasUnknownDatasetNames:I}=function(a){let b,c,d,e,f,g,i,l,m=(0,h.c)(24),n=(0,j.useClient)(j.DEFAULT_STUDIO_CLIENT_OPTIONS),o=(0,j.useDocumentStore)();m[0]!==a?(b=(0,k.getPublishedId)(a),m[0]=a,m[1]=b):b=m[1];let p=b;m[2]!==o||m[3]!==p?(c=[p,o],m[2]=o,m[3]=p,m[4]=c):c=m[4];let[q,r]=hC(c);m[5]!==p||m[6]!==n?(d=[p,n],m[5]=p,m[6]=n,m[7]=d):d=m[7];let[s,t]=hD(d);m[8]!==s?.references?(e=()=>Array.from(new Set(s?.references.map(hH).filter(Boolean))).sort(),m[8]=s?.references,m[9]=e):e=m[9],m[10]!==e?(f=e(),m[10]=e,m[11]=f):f=m[11];let u=f;m[12]!==s?.references?(g=Array.from(new Set(s?.references.map(hG).filter(hF))).sort(),m[12]=s?.references,m[13]=g):g=m[13];let v=g;m[14]!==s?.references?(i=()=>!!s?.references.some(hE),m[14]=s?.references,m[15]=i):i=m[15];let w=i(),x=(q?.totalCount||0)+(s?.totalCount||0),y=r||t;return m[16]!==s||m[17]!==v||m[18]!==w||m[19]!==q||m[20]!==u||m[21]!==x||m[22]!==y?(l={totalCount:x,projectIds:u,datasetNames:v,hasUnknownDatasetNames:w,internalReferences:q,crossDatasetReferences:s,isLoading:y},m[16]=s,m[17]=v,m[18]=w,m[19]=q,m[20]=u,m[21]=x,m[22]=y,m[23]=l):l=m[23],l}(t);s[0]!==t||s[1]!==u?(b={_id:t,_type:u},s[0]=t,s[1]=u,s[2]=b):b=s[2];let J=b;s[3]!==J?(c=(0,g.jsx)(hm,{document:J}),s[3]=J,s[4]=c):c=s[4];let K=c,L=!E;s[5]!==t?(d=(0,k.getPublishedId)(t),s[5]=t,s[6]=d):d=s[6],s[7]!==d?(e={documentId:d},s[7]=d,s[8]=e):e=s[8];let{data:M,loading:N}=(0,j.useDocumentVersions)(e);s[9]!==M||s[10]!==x?(f=()=>{x(M)},s[9]=M,s[10]=x,s[11]=f):f=s[11];let O=f;return s[12]!==z||s[13]!==A?(l=A("confirm-delete-dialog.header.text",{context:z}),s[12]=z,s[13]=A,s[14]=l):l=s[14],s[15]!==A?(m=A("confirm-delete-dialog.cancel-button.text"),s[15]=A,s[16]=m):m=s[16],s[17]!==w||s[18]!==m?(n={onClick:w,text:m},s[17]=w,s[18]=m,s[19]=n):n=s[19],s[20]!==z||s[21]!==O||s[22]!==L||s[23]!==A||s[24]!==F?(o=L?{text:A(F>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:z}),onClick:O}:void 0,s[20]=z,s[21]=O,s[22]=L,s[23]=A,s[24]=F,s[25]=o):o=s[25],s[26]!==n||s[27]!==o?(p={cancelButton:n,confirmButton:o},s[26]=n,s[27]=o,s[28]=p):p=s[28],s[29]!==z||s[30]!==D||s[31]!==H||s[32]!==K||s[33]!==M||s[34]!==I||s[35]!==t||s[36]!==C||s[37]!==E||s[38]!==w||s[39]!==G||s[40]!==A||s[41]!==F||s[42]!==u||s[43]!==N?(q=(0,g.jsx)(hI,{children:D&&C&&!E&&!N?(0,g.jsx)(hz,{crossDatasetReferences:D,internalReferences:C,documentTitle:K,isLoading:E,totalCount:F,action:z,projectIds:G,datasetNames:H,hasUnknownDatasetNames:I,onReferenceLinkClick:w,documentId:t,documentType:u,documentVersions:M}):(0,g.jsx)(hJ,{"data-testid":"loading-container",children:(0,g.jsx)(j.LoadingBlock,{showText:!0,title:A("confirm-delete-dialog.loading.text")})})}),s[29]=z,s[30]=D,s[31]=H,s[32]=K,s[33]=M,s[34]=I,s[35]=t,s[36]=C,s[37]=E,s[38]=w,s[39]=G,s[40]=A,s[41]=F,s[42]=u,s[43]=N,s[44]=q):q=s[44],s[45]!==B||s[46]!==w||s[47]!==p||s[48]!==q||s[49]!==l?(r=(0,g.jsx)(aA.Dialog,{width:1,id:B,header:l,footer:p,onClose:w,onClickOutside:w,children:q}),s[45]=B,s[46]=w,s[47]=p,s[48]=q,s[49]=l,s[50]=r):r=s[50],r}function hL(a){let b,c,d=(0,h.c)(6),{t:e}=(0,j.useTranslation)(y),f=(0,i.useId)(),[k,l]=(0,i.useState)(null);d[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>l(null),d[0]=b):b=d[0];let m=b;return d[1]!==k||d[2]!==f||d[3]!==a||d[4]!==e?(c=k?(0,g.jsx)(aA.Dialog,{id:`dialog-error-${f}`,"data-testid":"confirm-delete-error-dialog",header:e("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:e("confirm-delete-dialog.error.retry-button.text"),onClick:m,tone:"default"}},onClose:a.onCancel,children:(0,g.jsx)(aB.Box,{padding:4,children:(0,g.jsx)(aB.Text,{size:1,children:e("confirm-delete-dialog.error.message.text")})})}):(0,g.jsx)(aA.ErrorBoundary,{onCatch:l,children:(0,g.jsx)(hK,{...a})}),d[1]=k,d[2]=f,d[3]=a,d[4]=e,d[5]=c):c=d[5],c}let hM=(0,i.forwardRef)(function(a,b){let c,d,e,f,j=(0,h.c)(10);j[0]!==a?({intent:c,...d}=a,j[0]=a,j[1]=c,j[2]=d):(c=j[1],d=j[2]),j[3]!==c?(e=(0,i.forwardRef)(function(a,b){return(0,g.jsx)(aK.IntentLink,{...a,intent:c.type,params:c.params,ref:b,searchParams:c.searchParams})}),j[3]=c,j[4]=e):e=j[4];let k=e;return j[5]!==k||j[6]!==a.disabled||j[7]!==b||j[8]!==d?(f=a.disabled?(0,g.jsx)(aA.Button,{...d,as:"a",role:"link","aria-disabled":"true"}):(0,g.jsx)(aA.Button,{...d,as:k,"data-as":"a",ref:b}),j[5]=k,j[6]=a.disabled,j[7]=b,j[8]=d,j[9]=f):f=j[9],f});function hN(a){let b,c,d,e=(0,h.c)(12),{reveal:f,context:i,loading:k,children:l}=a,m=(0,j.useCurrentUser)(),{t:n}=(0,j.useTranslation)(y);if(!f){let a;return e[0]!==l?(a=(0,g.jsx)(g.Fragment,{children:l}),e[0]=l,e[1]=a):a=e[1],a}return e[2]!==i||e[3]!==m||e[4]!==k||e[5]!==n?(b=k?n("insufficient-permissions-message-tooltip.loading-text"):(0,g.jsx)(j.InsufficientPermissionsMessage,{context:i,currentUser:m}),e[2]=i,e[3]=m,e[4]=k,e[5]=n,e[6]=b):b=e[6],e[7]!==l?(c=(0,g.jsx)("div",{children:l}),e[7]=l,e[8]=c):c=e[8],e[9]!==b||e[10]!==c?(d=(0,g.jsx)(aA.Tooltip,{content:b,portal:!0,children:c}),e[9]=b,e[10]=c,e[11]=d):d=e[11],d}let hO={constrainSize:!0,placement:"bottom",portal:!0},hP=(a,b,c)=>{let d=a.find(a=>a.id===b.templateId)?.schemaType;if(!d)return null;let e={template:b.templateId,type:d,version:c,id:b.initialDocumentId};return{type:"create",params:b.parameters?[e,b.parameters]:e,searchParams:c?[["perspective",c]]:void 0}};function hQ(a){let b,c,d,e,f,k,l,m,o=(0,h.c)(60),{templateItems:p}=a,q=(0,j.useTemplates)(),{selectedReleaseId:r}=(0,j.usePerspective)(),{t:s}=(0,j.useTranslation)(y);o[0]!==p||o[1]!==q?(b=[...p,...q],o[0]=p,o[1]=q,o[2]=b):b=o[2];let t=(0,j.useGetI18nText)(b);o[3]!==p?(c={templateItems:p},o[3]=p,o[4]=c):c=o[4];let[u,v]=(0,j.useTemplatePermissions)(c),w=!v&&u?.length!==0&&u?.every(hS);a:{let a;if(!u){let a;o[5]===Symbol.for("react.memo_cache_sentinel")?(a={},o[5]=a):a=o[5],d=a;break a}o[6]!==u?(a=u.reduce(hR,{}),o[6]=u,o[7]=a):a=o[7],d=a}let x=d;if(0===p.length)return null;if(w){let a,b,c;return o[8]!==s?(a=s("pane-header.disabled-created-button.aria-label"),o[8]=s,o[9]=a):a=o[9],o[10]!==a?(b=(0,g.jsx)(aA.Button,{"aria-label":a,icon:n.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),o[10]=a,o[11]=b):b=o[11],o[12]!==v||o[13]!==b?(c=(0,g.jsx)(hN,{context:"create-document-type",reveal:!0,loading:v,children:b}),o[12]=v,o[13]=b,o[14]=c):c=o[14],c}if(1===p.length){let a,b,c,d,e,f,h=p[0],i=!x[h.id]?.granted;o[15]!==h||o[16]!==r||o[17]!==q?(a=hP(q,h,r),o[15]=h,o[16]=r,o[17]=q,o[18]=a):a=o[18];let j=a;if(!j)return null;o[19]!==h||o[20]!==t?(b=t(h),o[19]=h,o[20]=t,o[21]=b):b=o[21];let k=b.title,l=h.icon||n.AddIcon;return o[22]!==s?(c=s("pane-header.create-new-button.tooltip"),o[22]=s,o[23]=c):c=o[23],o[24]!==c?(d={content:c},o[24]=c,o[25]=d):d=o[25],o[26]!==i||o[27]!==j||o[28]!==b.title||o[29]!==l||o[30]!==d?(e=(0,g.jsx)(hM,{"aria-label":k,icon:l,intent:j,mode:"bleed",disabled:i,"data-testid":"action-intent-button",tooltipProps:d}),o[26]=i,o[27]=j,o[28]=b.title,o[29]=l,o[30]=d,o[31]=e):e=o[31],o[32]!==i||o[33]!==v||o[34]!==e?(f=(0,g.jsx)(hN,{reveal:i,loading:v,context:"create-document-type",children:e}),o[32]=i,o[33]=v,o[34]=e,o[35]=f):f=o[35],f}if(o[36]!==s?(e=s("pane-header.create-new-button.tooltip"),o[36]=s,o[37]=e):e=o[37],o[38]!==e?(f=(0,g.jsx)(aA.Button,{icon:n.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:e}}),o[38]=e,o[39]=f):f=o[39],o[40]!==t||o[41]!==v||o[42]!==x||o[43]!==r||o[44]!==s||o[45]!==p||o[46]!==q){let a;o[48]!==t||o[49]!==v||o[50]!==x||o[51]!==r||o[52]!==s||o[53]!==q?(a=(a,b)=>{let c=!x[a.id]?.granted,d=hP(q,a,r),e=q.find(b=>b.id===a.templateId);if(!e||!d)return null;let f=(0,i.forwardRef)((a,b)=>c?(0,g.jsx)("button",{type:"button",disabled:!0,...a,ref:b}):(0,g.jsx)(aK.IntentLink,{...a,intent:d.type,params:d.params,searchParams:d.searchParams,ref:b}));f.displayName="Link";let{title:h}=t({...a,title:a.title||t(e).title});return(0,g.jsx)(hN,{context:"create-document-type",reveal:c,loading:v,children:(0,g.jsx)(aA.MenuItem,{as:f,"data-as":c?"button":"a",text:h,"aria-label":c?s("pane-header.disabled-created-button.aria-label"):h,disabled:c,"data-testid":`action-intent-button-${b}`})},a.id)},o[48]=t,o[49]=v,o[50]=x,o[51]=r,o[52]=s,o[53]=q,o[54]=a):a=o[54],k=p.map(a),o[40]=t,o[41]=v,o[42]=x,o[43]=r,o[44]=s,o[45]=p,o[46]=q,o[47]=k}else k=o[47];return o[55]!==k?(l=(0,g.jsx)(aB.Menu,{children:k}),o[55]=k,o[56]=l):l=o[56],o[57]!==f||o[58]!==l?(m=(0,g.jsx)(aA.MenuButton,{button:f,id:"create-menu",menu:l,popover:hO}),o[57]=f,o[58]=l,o[59]=m):m=o[59],m}function hR(a,b){return a[b.id]=b,a}function hS(a){return!a.granted}function hT(a){return null!=a}let hU=(0,i.memo)(function(a){let b,c,d,e,f,i,k,l,m,n,o=(0,h.c)(28),{initialValueTemplateItems:p,menuItems:q,menuItemGroups:r,actionHandlers:s}=a,t=void 0===p?j.EMPTY_ARRAY:p,u=void 0===q?j.EMPTY_ARRAY:q,v=void 0===r?j.EMPTY_ARRAY:r,w=void 0===s?j.EMPTY_OBJECT:s,x=(0,j.useTemplates)();o[0]!==w?(b=a=>{if("string"==typeof a.action&&!(a.action in w))return console.warn("No handler for action:",a.action),!1;let b="function"==typeof a.action?a.action:"string"==typeof a.action?w[a.action]:null;return!!b&&(b(a.params),!0)},o[0]=w,o[1]=b):b=o[1];let y=b;o[2]!==y||o[3]!==v||o[4]!==u?(c=eR({actionHandler:y,menuItemGroups:v,menuItems:u.filter(hV)}),o[2]=y,o[3]=v,o[4]=u,o[5]=c):c=o[5];let z=c;o[6]!==z?(d=z.filter(eP),o[6]=z,o[7]=d):d=o[7];let A=d;o[8]!==z?(e=z.filter(eQ),o[8]=z,o[9]=e):e=o[9];let B=e;if(o[10]!==u||o[11]!==x){let a;o[13]!==x?(a=(a,b)=>{if(a.intent?.type!=="create")return null;let{params:c}=a.intent;if(!c)return null;let d=Array.isArray(c)?c[0]:c,e=Array.isArray(c)?c[1]:void 0,f=d.template||d.type;if(!f)return null;let g=x.find(a=>a.id===f);return g?{item:a,template:g,templateParams:e,menuItemIndex:b,initialDocumentId:d.id}:null},o[13]=x,o[14]=a):a=o[14],f=u.map(a).filter(hT).map(hW),o[10]=u,o[11]=x,o[12]=f}else f=o[12];let C=f;o[15]!==C||o[16]!==t?(i=(0,aR.uniqBy)([...C,...t],hX),o[15]=C,o[16]=t,o[17]=i):i=o[17];let D=i;return o[18]!==D?(k=(0,g.jsx)(hQ,{templateItems:D}),o[18]=D,o[19]=k):k=o[19],o[20]!==A?(l=A.map(hY),o[20]=A,o[21]=l):l=o[21],o[22]!==B?(m=B.length>0&&(0,g.jsx)(cV,{nodes:B}),o[22]=B,o[23]=m):m=o[23],o[24]!==k||o[25]!==l||o[26]!==m?(n=(0,g.jsxs)(aB.Flex,{gap:1,children:[k,l,m]}),o[24]=k,o[25]=l,o[26]=m,o[27]=n):n=o[27],n});function hV(a){return a.intent?.type!=="create"}function hW(a){let{initialDocumentId:b,item:c,template:d,menuItemIndex:e,templateParams:f}=a;return{id:`menuItem${e}`,initialDocumentId:b,templateId:d.id,type:"initialValueTemplateItem",title:c.title||d.title,i18n:c.i18n||d.i18n,icon:c.icon,description:d.description,parameters:f,schemaType:d.schemaType}}function hX(a){var b=[a.initialDocumentId,a.templateId,a.parameters];let c=a=>"object"==typeof a&&a?Array.isArray(a)?a.map(c):Object.entries(a).sort(([a],[b])=>a.localeCompare(b,"en")):a;return JSON.stringify(c(JSON.parse(JSON.stringify(b))))}function hY(a){return(0,g.jsx)(c4,{node:a},a.key)}function hZ(a){let b,c,d,e,f,i,k,l=(0,h.c)(16),{t:m}=(0,j.useTranslation)(y),{layout:n,value:o}=a;return l[0]===Symbol.for("react.memo_cache_sentinel")?(b={Code:"code"},l[0]=b):b=l[0],l[1]!==o._type?(c={documentType:o._type},l[1]=o._type,l[2]=c):c=l[2],l[3]!==m||l[4]!==c?(d=(0,g.jsx)("em",{children:(0,g.jsx)(j.Translate,{t:m,i18nKey:"pane-item.missing-schema-type.title",components:b,values:c})}),l[3]=m,l[4]=c,l[5]=d):d=l[5],l[6]===Symbol.for("react.memo_cache_sentinel")?(e={Code:"code"},l[6]=e):e=l[6],l[7]!==o._id?(f={documentId:o._id},l[7]=o._id,l[8]=f):f=l[8],l[9]!==m||l[10]!==f?(i=(0,g.jsx)(j.Translate,{t:m,i18nKey:"pane-item.missing-schema-type.subtitle",components:e,values:f}),l[9]=m,l[10]=f,l[11]=i):i=l[11],l[12]!==n||l[13]!==d||l[14]!==i?(k=(0,g.jsx)(j.SanityDefaultPreview,{title:d,subtitle:i,media:h$,layout:n}),l[12]=n,l[13]=d,l[14]=i,l[15]=k):k=l[15],k}function h$(){return(0,g.jsx)(n.WarningOutlineIcon,{})}function h_(a,b,c){return!1!==a&&(a||b&&b.icon||c||!1)}function h0(a){let b,c,d,e,f,k,l,m,o=(0,h.c)(42),{icon:p,id:q,layout:r,pressed:s,schemaType:t,selected:u,title:v,value:w,margin:x,marginBottom:y,marginTop:z}=a,A=void 0===r?"default":r,B=(0,j.useSchema)(),C=(0,j.useDocumentPreviewStore)(),{ChildLink:D}=d9(),E=(0,j.useDocumentPresence)(q),F=!!(t&&t.name&&B.get(t.name)),[G,H]=(0,i.useState)(!1);a:{let a,c,d,e;if(w&&(0,aD.isSanityDocument)(w)){let a,c;if(!t||!F){let a;o[0]!==w?(a=(0,g.jsx)(hZ,{value:w}),o[0]=w,o[1]=a):a=o[1],b=a;break a}o[2]!==p||o[3]!==t?(a=h_(p,t,n.DocumentIcon),o[2]=p,o[3]=t,o[4]=a):a=o[4],o[5]!==E||o[6]!==C||o[7]!==A||o[8]!==t||o[9]!==a||o[10]!==w?(c=(0,g.jsx)(ht,{documentPreviewStore:C,icon:a,layout:A,schemaType:t,value:w,presence:E}),o[5]=E,o[6]=C,o[7]=A,o[8]=t,o[9]=a,o[10]=w,o[11]=c):c=o[11],b=c;break a}o[12]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:.5},o[12]=a):a=o[12],o[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,g.jsx)(aB.Box,{style:a,children:(0,g.jsx)(aB.Text,{muted:!0,size:1,children:(0,g.jsx)(n.ChevronRightIcon,{})})}),o[13]=c):c=o[13],o[14]!==p||o[15]!==t?(d=h_(p,t,n.FolderIcon),o[14]=p,o[15]=t,o[16]=d):d=o[16],o[17]!==d||o[18]!==v?(e=(0,g.jsx)(j.SanityDefaultPreview,{status:c,icon:d,layout:"compact",title:v}),o[17]=d,o[18]=v,o[19]=e):e=o[19],b=e}let I=b;o[20]===Symbol.for("react.memo_cache_sentinel")?(c=a=>{a.metaKey?H(!1):H(!0)},o[20]=c):c=o[20];let J=c;o[21]===Symbol.for("react.memo_cache_sentinel")?(d=()=>H(!1),o[21]=d):d=o[21],o[22]!==u?(e=[u],o[22]=u,o[23]=e):e=o[23],(0,i.useEffect)(d,e);let[K,L]=(0,i.useState)(!1),M=(0,i.useRef)(null);o[24]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{M.current=setTimeout(()=>(0,i.startTransition)(()=>L(!0)),400)},o[24]=f):f=o[24];let N=f;o[25]===Symbol.for("react.memo_cache_sentinel")?(k=()=>{M.current&&clearTimeout(M.current),(0,i.startTransition)(()=>L(!1))},o[25]=k):k=o[25];let O=k,P=`pane-item-${v}`,Q=u||G;return o[26]!==q||o[27]!==K||o[28]!==t||o[29]!==w?(l=K&&t?.name&&w&&(0,aD.isSanityDocument)(w)&&(0,g.jsx)(h1,{documentId:q,documentType:t.name}),o[26]=q,o[27]=K,o[28]=t,o[29]=w,o[30]=l):l=o[30],o[31]!==q||o[32]!==x||o[33]!==y||o[34]!==z||o[35]!==s||o[36]!==I||o[37]!==l||o[38]!==P||o[39]!==D||o[40]!==Q?(m=(0,g.jsxs)(j.PreviewCard,{"data-testid":P,__unstable_focusRing:!0,as:D,childId:q,"data-as":"a",margin:x,marginBottom:y,marginTop:z,onClick:J,onMouseEnter:N,onMouseLeave:O,pressed:s,radius:2,selected:Q,sizing:"border",tabIndex:-1,tone:"inherit",children:[I,l]}),o[31]=q,o[32]=x,o[33]=y,o[34]=z,o[35]=s,o[36]=I,o[37]=l,o[38]=P,o[39]=D,o[40]=Q,o[41]=m):m=o[41],m}function h1(a){let b,c=(0,h.c)(2),{documentId:d,documentType:e}=a;return c[0]!==d?(b=(0,k.getPublishedId)(d),c[0]=d,c[1]=b):b=c[1],(0,j.useEditState)(b,e),null}h1.displayName="PreloadDocumentPane";let h2=(0,i.memo)(a=>{let b,c=(0,h.c)(4),{children:d,group:e}=a,f=(0,i.useContext)(l.DocumentActionsStateContext);if(null===f)throw Error("DocumentActionsStateContext is not set. This should not happen.");return c[0]!==d||c[1]!==e||c[2]!==f?(b=d({states:e?f.filter(a=>(a.group||["default"]).includes(e)):f}),c[0]=d,c[1]=e,c[2]=f,c[3]=b):b=c[3],b});h2.displayName="Memo(RenderActionCollectionState)";let h3=(0,i.memo)(a=>{let b,c=(0,h.c)(4),{badges:d,children:e,badgeProps:f}=a;return c[0]!==f||c[1]!==d||c[2]!==e?(b=(0,g.jsx)(j.GetHookCollectionState,{hooks:d,args:f,children:e}),c[0]=f,c[1]=d,c[2]=e,c[3]=b):b=c[3],b});h3.displayName="Memo(RenderBadgeCollectionState)";let h4={by:[{field:"_updatedAt",direction:"desc"}]},h5={},h6=(0,aF.styled)(aB.Box)`
  position: relative;
  opacity: ${a=>a.$opacity||1};
  transition: opacity 0.4s;
`,h7=(0,aF.styled)(aB.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,h8=[...Array(30).keys()];function h9(a){let b,c,d=(0,h.c)(4),{layout:e}=a;return d[0]!==e?(b=h8.map(a=>(0,g.jsx)(j.SanityDefaultPreview,{isPlaceholder:!0,layout:e},a)),d[0]=e,d[1]=b):b=d[1],d[2]!==b?(c=(0,g.jsx)(aB.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:b}),d[2]=b,d[3]=c):c=d[3],c}function ia(a){let b,c,d,e,f,l,m,n=(0,h.c)(66),{childItemId:o,error:p,isRetrying:q,autoRetry:r,filterIsSimpleTypeConstraint:s,hasMaxItems:t,hasSearchQuery:u,isActive:v,isLazyLoading:w,muted:x,isLoading:z,isConnected:A,retryCount:B,canRetry:C,items:D,layout:E,loadingVariant:F,onEndReached:G,onRetry:H,paneTitle:I,searchInputElement:J,showIcons:K}=a,L=(0,j.useSchema)(),{collapsed:M}=cF(),{collapsed:N,index:O}=cL(),[P,Q]=(0,i.useState)(!N),{t:R}=(0,j.useTranslation)(y);n[0]!==G||n[1]!==P?(b=()=>{P&&G()},n[0]=G,n[1]=P,n[2]=b):b=n[2];let S=b;n[3]!==N?(c=()=>{if(N)return;let a=setTimeout(()=>{Q(!0)},0);return()=>{clearTimeout(a)}},n[3]=N,n[4]=c):c=n[4],n[5]!==N||n[6]!==D?(d=[N,D],n[5]=N,n[6]=D,n[7]=d):d=n[7],(0,i.useEffect)(c,d),n[8]!==o||n[9]!==t||n[10]!==v||n[11]!==w||n[12]!==D.length||n[13]!==E||n[14]!==L||n[15]!==K||n[16]!==R?(e=(a,b)=>{let{activeIndex:c}=b,d=(0,k.getPublishedId)(a._id),e=o===d,f=!v&&e,h=v&&e,i=c===D.length-1,l=i&&w,m=i&&t;return(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(h0,{icon:!1!==K&&void 0,id:d,layout:E,marginBottom:1,pressed:f,schemaType:L.get(a._type),selected:h,value:a}),l&&(0,g.jsx)(j.LoadingBlock,{}),m&&(0,g.jsx)(aB.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,g.jsx)(aB.Text,{align:"center",muted:!0,size:1,children:R("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},n[8]=o,n[9]=t,n[10]=v,n[11]=w,n[12]=D.length,n[13]=E,n[14]=L,n[15]=K,n[16]=R,n[17]=e):e=n[17];let T=e;a:{let a,b;if(u){let a,b;n[18]!==R?(a=R("panes.document-list-pane.no-documents.text"),n[18]=R,n[19]=a):a=n[19],n[20]!==a?(b=(0,g.jsx)(aB.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(aB.Container,{width:1,children:(0,g.jsx)(aB.Box,{paddingX:4,paddingY:5,children:(0,g.jsx)(aB.Text,{align:"center",muted:!0,children:a})})})}),n[20]=a,n[21]=b):b=n[21],f=b;break a}n[22]!==s||n[23]!==R?(a=R(s?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),n[22]=s,n[23]=R,n[24]=a):a=n[24],n[25]!==a?(b=(0,g.jsx)(aB.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(aB.Container,{width:1,children:(0,g.jsx)(aB.Box,{paddingX:4,paddingY:5,children:(0,g.jsx)(aB.Text,{align:"center",muted:!0,children:a})})})}),n[25]=a,n[26]=b):b=n[26],f=b}let U=f;b:{let a,b;if(!P){l=null;break b}let c=window.navigator.onLine;if(p){let a,b,d,e,f,h,i;n[27]!==R?(a=R("panes.document-list-pane.error.title"),n[27]=R,n[28]=a):a=n[28],n[29]!==a?(b=(0,g.jsx)(aB.Heading,{as:"h3",children:a}),n[29]=a,n[30]=b):b=n[30],n[31]!==p||n[32]!==R?(d=j.isDev?(0,g.jsx)(j.Translate,{t:R,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:p.message},components:{Code:ib}}):R(c?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),n[31]=p,n[32]=R,n[33]=d):d=n[33],n[34]!==d?(e=(0,g.jsx)(aB.Text,{as:"p",children:d}),n[34]=d,n[35]=e):e=n[35];let k=c&&C?H:void 0;n[36]!==p||n[37]!==q||n[38]!==k?(f=(0,g.jsx)(j.ErrorActions,{error:p,eventId:null,onRetry:k,isRetrying:q}),n[36]=p,n[37]=q,n[38]=k,n[39]=f):f=n[39],n[40]!==r||n[41]!==C||n[42]!==q||n[43]!==B||n[44]!==R?(h=C?(0,g.jsx)(aB.Text,{as:"p",muted:!0,size:1,children:q?R("panes.document-list-pane.error.retrying",{count:B}):r?R("panes.document-list-pane.error.will-retry-automatically",{count:B}):R("panes.document-list-pane.error.max-retries-attempted",{count:B})}):null,n[40]=r,n[41]=C,n[42]=q,n[43]=B,n[44]=R,n[45]=h):h=n[45],n[46]!==f||n[47]!==h||n[48]!==b||n[49]!==e?(i=(0,g.jsx)(aB.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,g.jsx)(aB.Container,{width:1,children:(0,g.jsxs)(aB.Stack,{paddingX:4,paddingY:5,space:4,children:[b,e,f,h]})})}),n[46]=f,n[47]=h,n[48]=b,n[49]=e,n[50]=i):i=n[50],l=i;break b}if(A&&!z&&0===D.length){l=U;break b}if("initial"===F&&z){let a;n[51]!==E?(a=(0,g.jsx)(dd,{ms:300,children:(0,g.jsx)(h9,{layout:E})}),n[51]=E,n[52]=a):a=n[52],l=a;break b}if("spinner"===F&&z){l=null;break b}let d=`${O}-${N}`,e=x?.8:1;n[53]!==S||n[54]!==D||n[55]!==d||n[56]!==I||n[57]!==T||n[58]!==J?(a=(0,g.jsx)(h7,{children:(0,g.jsx)(j.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:I,canReceiveFocus:!0,inputElement:J,itemHeight:51,items:D,onEndReached:S,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:T,wrapAround:!1},d)}),n[53]=S,n[54]=D,n[55]=d,n[56]=I,n[57]=T,n[58]=J,n[59]=a):a=n[59],n[60]!==e||n[61]!==a?(b=(0,g.jsx)(h6,{overflow:"hidden",height:"fill",$opacity:e,children:a}),n[60]=e,n[61]=a,n[62]=b):b=n[62],l=b}let V=l,W=M||"initial"===F?"hidden":"auto";return n[63]!==V||n[64]!==W?(m=(0,g.jsx)(cM,{"data-testid":"document-list-pane",overflow:W,children:V}),n[63]=V,n[64]=W,n[65]=m):m=n[65],m}function ib(a){let{children:b}=a;return(0,g.jsx)("code",{children:b})}function ic(a,b={}){try{let c=function a(b){switch(b.type){case"OpCall":{let{left:a,right:c}=b;switch(b.op){case"==":return"AccessAttribute"!==a.type||"_type"!==a.name||a.base?"AccessAttribute"!==c.type||"_type"!==c.name||c.base||"Value"!==a.type||"string"!=typeof a.value?null:new Set([a.value]):"Value"!==c.type||"string"!=typeof c.value?null:new Set([c.value]);case"in":{if("AccessAttribute"!==a.type||"_type"!==a.name||a.base||"Array"!==c.type)return null;let b=new Set;for(let a of c.elements){if(a.isSplat||"Value"!==a.value.type||"string"!=typeof a.value.value)return null;b.add(a.value.value)}return b.size?b:null}default:return null}}case"Group":return a(b.base);case"Or":{let c=a(b.left);if(!c)return null;let d=a(b.right);return d?new Set([...c,...d]):null}case"And":{let c=a(b.left),d=a(b.right);return c||d?new Set([...c||[],...d||[]]):null}default:return null}}((0,bu.parse)(a,{params:b}));return c?Array.from(c).sort():null}catch{return null}}let id=(0,j.createSWR)({maxSize:100});function ie(a){let{client:b,schema:c,sort:d,perspective:e,limit:f,params:g,filter:h,searchQuery:i,staticTypeNames:k,maxFieldDepth:l,searchStrategy:m}=a,n=d.by,o=d?.extendedProjection,p=(0,aU.defer)(()=>b.listen(`*[${h}]`,g,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,aU.mergeMap)((a,b)=>{let c=0===b;return c&&"reconnect"===a.type?(0,aU.throwError)(()=>Error("Failed to establish EventSource connection")):c&&"welcome"!==a.type?(0,aU.throwError)(()=>Error(`Received unexpected type of first event "${a.type}"`)):(0,aU.of)(a)}),(0,aU.share)()),[q,r]=(0,aU.partition)(p,a=>"welcome"===a.type),s=JSON.stringify({fiilter:h,limit:f,params:g,searchQuery:i,perspective:e,sort:d,staticTypeNames:k});return(0,aU.merge)(q,r.pipe((0,aU.throttleTime)(1e3,aU.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,bx.exhaustMapWithTrailing)(a=>(k?(0,aU.of)(k):b.observable.fetch(`array::unique(*[${h}][]._type)`,g)).pipe((0,aU.mergeMap)(p=>{let q=(0,j.getSearchableTypes)(c,k||[]).filter(a=>!!p.includes(a.name)&&(B(a,d.by,!0),!0)),r=(0,j.createSearch)(q,b,{filter:h,params:g,strategy:m,maxDepth:l}),s=()=>r({query:i||"",types:q},{__unstable_extendedProjection:o,comments:[`findability-source: ${i?"list-query":"list"}`],limit:f,skipSortByScore:!0,sort:n,perspective:e}).pipe((0,aU.map)(a=>a.hits.map(({hit:a})=>a)),(0,aU.map)(a=>({type:"result",documents:a})));return"mutation"===a.type&&"query"!==a.visibility?(0,aU.timer)(1200).pipe((0,aU.mergeMap)(s)):"reconnect"===a.type?(0,aU.of)(a):s()}))),(0,aT.scan)((a,b)=>({connected:"reconnect"!==b.type,documents:"result"===b.type?b.documents:a?.documents||[]}),null),(0,aU.filter)(a=>null!==a),id(s),(0,aU.map)(({fromCache:a,value:b})=>({fromCache:a,...b})))}let ig={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function ih(a,b){if("error"===b.type)return{...a,error:b.error,retryCount:b.retryCount,isRetrying:b.retrying,autoRetry:b.autoRetry,canRetry:b.canRetry};if("result"===b.type){var c;return{...a,error:null,isRetrying:!1,fromCache:b.result.fromCache,connected:b.result.connected,isLoading:!1,items:(c=b.result.documents,(0,j.collate)(c).map(a=>{let b=a.draft||a.published||a.versions[0],c=!!a.draft;return{...b,hasPublished:!!a.published,hasDraft:c}})),isLoadingFullList:!1}}if("loadFullList"===b.type)return{...a,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${b.type}`)}function ii(a){return{type:"result",result:a}}function ij(a){return{type:"result",result:a}}function ik(a){let[,b]=a;return b?.documents.length===100}function il(){return(0,bw.observableCallback)()}function im(){return(0,bw.observableCallback)()}let io="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",ip=aF.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,iq=aF.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,ir=(0,aF.styled)(n.SpinnerIcon)`
  animation: ${ip} 500ms linear infinite;
`,is=(0,aF.styled)(n.SpinnerIcon)`
  animation: ${ip} 1500ms linear infinite;
  opacity: 0.4;
`,it=(0,aF.styled)(n.SpinnerIcon)`
  animation:
    ${ip} 1500ms linear infinite,
    ${iq} 1000ms linear;
  opacity: 0.4;
`,iu=(0,i.memo)(function(a){var b;let c,d,e,f,k,l,m,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D=(0,h.c)(69),{childItemId:E,isActive:F,pane:G,paneKey:H,sortOrder:I,layout:J}=a,K=(0,j.useSchema)(),L=(0,j.useActiveReleases)(),{perspectiveStack:M}=(0,j.usePerspective)(),{displayOptions:N,options:O}=G,{apiVersion:P,filter:Q}=O,R=iZ(O.params||h5);a:{let a;D[0]!==Q||D[1]!==R?(a=ic(Q,R),D[0]=Q,D[1]=R,D[2]=a):a=D[2];let b=a;if(b?.length===1){c=b[0];break a}c=null}let S=c,T=N?.showIcons!==!1,{t:U}=(0,j.useTranslation)(y),{title:V}=(0,j.useI18nText)(G),[W,X]=(0,i.useState)(""),[Y,Z]=(0,i.useState)(""),[$,_]=(0,i.useState)(null);D[3]!==K||D[4]!==I||D[5]!==S?(d=S&&I?(b=K.get(S),(C=I.by.map(a=>{if(a.mapWith)return a;let c=function(a,b){let c=aV.fromString(b),d=a;for(let a of c){if(!d)return;if("string"==typeof a){d=function(a,b){if(!("fields"in a))return;let c=a.fields.find(a=>a.name===b);return c?c.type:void 0}(d,a);continue}if(!((0,aD.isKeySegment)(a)||(0,aD.isIndexSegment)(a))||"array"!==d.jsonType)return;let[b,c]=d.of||[];if(c||!b)return;if(!(0,aD.isReferenceSchemaType)(b)){d=b;continue}let[e,f]=b.to||[];if(f||!e)return;d=e}return d}(b,a.field);return c?!function(a,b){let c=a.type;for(;c;){if(c.name===b||!c.type&&c.jsonType===b)return!0;c=c.type}return!1}(c,"datetime")?"string"===c.jsonType?{...a,mapWith:"lower"}:a:{...a,mapWith:"dateTime"}:a})).every((a,b)=>a===I.by[b])?I:{...I,by:C}):I,D[3]=K,D[4]=I,D[5]=S,D[6]=d):d=D[6];let aa=(0,j.useUnique)(d),ab=P||j.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;D[7]!==ab?(e={...j.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:ab},D[7]=ab,D[8]=e):e=D[8];let ac=(0,j.useClient)(e);D[9]!==W?(f=W?.trim(),D[9]=W,D[10]=f):f=D[10],D[11]!==ac||D[12]!==Q||D[13]!==R||D[14]!==M||D[15]!==aa||D[16]!==f?(k={client:ac,filter:Q,perspective:M,params:R,searchQuery:f,sortOrder:aa},D[11]=ac,D[12]=Q,D[13]=R,D[14]=M,D[15]=aa,D[16]=f,D[17]=k):k=D[17];let{error:ad,isLoadingFullList:ae,isLoading:af,items:ag,fromCache:ah,isRetrying:ai,autoRetry:aj,canRetry:ak,retryCount:al,connected:am,onLoadFullList:an,onRetry:ao}=function(a){let b,c,d,e=(0,h.c)(31),{client:f,filter:g,params:k,sortOrder:l,searchQuery:m,perspective:n}=a,{strategy:o}=(0,j.useWorkspace)().search,p=(0,j.useSchema)(),q=(0,j.useSearchMaxFieldDepth)();e[0]!==k||e[1]!==g?(b=ic(g,k),e[0]=k,e[1]=g,e[2]=b):b=e[2];let r=b,[s]=(0,i.useState)(im),[t,u]=s,[v]=(0,i.useState)(il),[w,x]=v,y=m||"",z=l||h4;if(e[3]!==f||e[4]!==q||e[5]!==w||e[6]!==t||e[7]!==k||e[8]!==n||e[9]!==p||e[10]!==g||e[11]!==o||e[12]!==y||e[13]!==z||e[14]!==r){let a,b={client:f,filter:g,limit:100,params:k,schema:p,perspective:n,searchQuery:y,sort:z,staticTypeNames:r,maxFieldDepth:q,searchStrategy:o},d=ie(b).pipe((0,aT.shareReplay)({refCount:!0,bufferSize:1})),h=w.pipe((0,aT.withLatestFrom)(d),(0,aT.filter)(ik),(0,aT.take)(1),(0,aT.mergeMap)(()=>(0,aU.concat)((0,aU.of)({type:"loadFullList"}),ie({...b,limit:2e3}).pipe((0,aT.map)(ij)))),(0,aT.share)());e[16]!==t?(a=(a,b,c)=>{var d,e;let f=(e=a)instanceof Error?e:"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message?Error(`${e.message} ${io}`):Error(`${String(e)} ${io}`),g=window.navigator.onLine,h=g&&!((d=a)instanceof bv.ChannelError)&&(d instanceof bv.ServerError||!(d instanceof bv.ClientError)||403===d.statusCode),i=b<10,j=(0,aU.merge)(g?t:(0,aU.fromEvent)(window,"online"),g&&i?(0,aU.timer)(1e3*b):aU.NEVER).pipe((0,aT.take)(1),(0,aT.switchMap)(()=>(0,aU.merge)((0,aU.of)({type:"error",error:f,retrying:!0,autoRetry:i,canRetry:h,retryCount:b}),c)));return(0,aU.concat)((0,aU.of)({type:"error",error:f,retrying:!1,autoRetry:i,canRetry:h,retryCount:b}),j)},e[16]=t,e[17]=a):a=e[17],c=(0,aU.merge)(d.pipe((0,aT.map)(ii),(0,aT.takeUntil)(h)),h).pipe((0,j.catchWithCount)(a),(0,aT.scan)(ih,ig)),e[3]=f,e[4]=q,e[5]=w,e[6]=t,e[7]=k,e[8]=n,e[9]=p,e[10]=g,e[11]=o,e[12]=y,e[13]=z,e[14]=r,e[15]=c}else c=e[15];let A=c,{error:B,items:C,isLoading:D,fromCache:E,connected:F,canRetry:G,isLoadingFullList:H,isRetrying:I,autoRetry:J,retryCount:K}=(0,aJ.useObservable)(A,ig);return e[18]!==J||e[19]!==G||e[20]!==F||e[21]!==B||e[22]!==E||e[23]!==D||e[24]!==H||e[25]!==I||e[26]!==C||e[27]!==x||e[28]!==u||e[29]!==K?(d={error:B,onRetry:u,isLoading:D,items:C,isRetrying:I,canRetry:G,retryCount:K,autoRetry:J,connected:F,fromCache:E,onLoadFullList:x,isLoadingFullList:H},e[18]=J,e[19]=G,e[20]=F,e[21]=B,e[22]=E,e[23]=D,e[24]=H,e[25]=I,e[26]=C,e[27]=x,e[28]=u,e[29]=K,e[30]=d):d=e[30],d}(k),ap=af||L.loading;D[18]===Symbol.for("react.memo_cache_sentinel")?(l=a=>a.pipe((0,aU.map)(iv),(0,aU.tap)(Z),(0,aU.debounce)(iw),(0,aU.tap)(X)),D[18]=l):l=D[18];let aq=(0,aJ.useObservableEvent)(l);D[19]===Symbol.for("react.memo_cache_sentinel")?(m=()=>{X(""),Z("")},D[19]=m):m=D[19];let ar=m;D[20]===Symbol.for("react.memo_cache_sentinel")?(o=a=>{"Escape"===a.key&&ar()},D[20]=o):o=D[20];let as=o,[at,au]=(0,i.useState)();D[21]!==at||D[22]!==ap||D[23]!==H?(q=()=>{at||ap||au(H)},p=[at,ap,H],D[21]=at,D[22]=ap,D[23]=H,D[24]=p,D[25]=q):(p=D[24],q=D[25]),(0,i.useEffect)(q,p),D[26]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{ar(),au()},D[26]=r):r=D[26],D[27]!==H?(s=[H,ar],D[27]=H,D[28]=s):s=D[28],(0,i.useEffect)(r,s);b:{if(am&&ap&&at===H){t="spinner";break b}if(am&&ah){t="subtle";break b}t="initial"}let av=t;c:{if("spinner"===av){u=ir;break c}if(Y&&"subtle"===av){u=is;break c}u=n.SearchIcon}let aw=u;(0,j.useReconnectingToast)(!am),D[29]!==U?(v=U("panes.document-list-pane.search-input.aria-label"),D[29]=U,D[30]=v):v=D[30];let ax=!!W;D[31]===Symbol.for("react.memo_cache_sentinel")?(w=[2,2,1],D[31]=w):w=D[31];let ay=am&&("subtle"!==av||Y)?null:it;D[32]!==U?(x=U("panes.document-list-pane.search-input.placeholder"),D[32]=U,D[33]=x):x=D[33],D[34]!==aq||D[35]!==Y||D[36]!==v||D[37]!==ax||D[38]!==ay||D[39]!==x||D[40]!==aw?(z=(0,g.jsx)(aB.Box,{paddingX:3,paddingBottom:3,children:(0,g.jsx)(aB.TextInput,{"aria-label":v,autoComplete:"off",border:!1,clearButton:ax,fontSize:w,icon:aw,iconRight:ay,onChange:aq,onClear:ar,onKeyDown:as,padding:2,placeholder:x,radius:2,ref:_,spellCheck:!1,value:Y})}),D[34]=aq,D[35]=Y,D[36]=v,D[37]=ax,D[38]=ay,D[39]=x,D[40]=aw,D[41]=z):z=D[41];let az=!!S,aA=2e3===ag.length,aC=!!W,aE="subtle"===av;return D[42]!==aj||D[43]!==ak||D[44]!==E||D[45]!==am||D[46]!==ad||D[47]!==F||D[48]!==ap||D[49]!==ae||D[50]!==ai||D[51]!==ag||D[52]!==J||D[53]!==av||D[54]!==an||D[55]!==ao||D[56]!==H||D[57]!==al||D[58]!==$||D[59]!==T||D[60]!==az||D[61]!==aA||D[62]!==aC||D[63]!==aE||D[64]!==V?(A=(0,g.jsx)(ia,{childItemId:E,error:ad,filterIsSimpleTypeConstraint:az,hasMaxItems:aA,hasSearchQuery:aC,isActive:F,isLazyLoading:ae,isLoading:ap,autoRetry:aj,canRetry:ak,retryCount:al,isRetrying:ai,isConnected:am,items:ag,layout:J,muted:aE,loadingVariant:av,onEndReached:an,onRetry:ao,paneTitle:V,searchInputElement:$,showIcons:T},H),D[42]=aj,D[43]=ak,D[44]=E,D[45]=am,D[46]=ad,D[47]=F,D[48]=ap,D[49]=ae,D[50]=ai,D[51]=ag,D[52]=J,D[53]=av,D[54]=an,D[55]=ao,D[56]=H,D[57]=al,D[58]=$,D[59]=T,D[60]=az,D[61]=aA,D[62]=aC,D[63]=aE,D[64]=V,D[65]=A):A=D[65],D[66]!==z||D[67]!==A?(B=(0,g.jsxs)(g.Fragment,{children:[z,A]}),D[66]=z,D[67]=A,D[68]=B):B=D[68],B});function iv(a){return a.target.value}function iw(a){return""===a?(0,aU.of)(""):(0,aU.timer)(300)}let ix=(0,i.memo)(a=>{let b,c,d,e,f,i,j,k,l,m=(0,h.c)(27),{contentAfter:o,index:p,initialValueTemplates:q,menuItemGroups:r,menuItems:s,setLayout:t,setSortOrder:u,title:v}=a;m[0]!==q?(b=void 0===q?[]:q,m[0]=q,m[1]=b):b=m[1];let w=b;m[2]!==r?(c=void 0===r?[]:r,m[2]=r,m[3]=c):c=m[3];let x=c;m[4]!==s?(d=void 0===s?[]:s,m[4]=s,m[5]=d):d=m[5];let y=d,{features:z}=dp(),{collapsed:A,isLast:B}=cL(),C=B&&!A?-1:0;m[6]!==t?(e=a=>{let{layout:b}=a;t(b)},m[6]=t,m[7]=e):e=m[7],m[8]!==u?(f=a=>{u(a)},m[8]=u,m[9]=f):f=m[9],m[10]!==e||m[11]!==f?(i={setLayout:e,setSortOrder:f},m[10]=e,m[11]=f,m[12]=i):i=m[12];let D=i;return m[13]!==D||m[14]!==w||m[15]!==x||m[16]!==y?(j=(0,g.jsx)(hU,{initialValueTemplateItems:w,actionHandlers:D,menuItemGroups:x,menuItems:y}),m[13]=D,m[14]=w,m[15]=x,m[16]=y,m[17]=j):j=m[17],m[18]!==z.backButton||m[19]!==p?(k=z.backButton&&p>0&&(0,g.jsx)(aA.Button,{as:hc,"data-as":"a",icon:n.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),m[18]=z.backButton,m[19]=p,m[20]=k):k=m[20],m[21]!==o||m[22]!==j||m[23]!==k||m[24]!==C||m[25]!==v?(l=(0,g.jsx)(aA.TooltipDelayGroupProvider,{children:(0,g.jsx)(c2,{actions:j,backButton:k,contentAfter:o,tabIndex:C,title:v})}),m[21]=o,m[22]=j,m[23]=k,m[24]=C,m[25]=v,m[26]=l):l=m[26],l});function iy(a){let{row:b,table:c}=a,{selectedAnchor:d,setSelectedAnchor:e}=c.options.meta||{},f=(0,i.useCallback)(a=>{if(a.shiftKey&&null!=d){let a=b.index,e=a<d?a:d,f=a<d?d:a,g=c.getRowModel().flatRows.slice(e,f+1).map(({id:a})=>a),h=c.getSelectedRowModel().rows.map(({id:a})=>a);c.setRowSelection(()=>[...g,...h].reduce((a,b)=>({...a,[b]:!0}),{}))}else e&&(e(b.getIsSelected()?null:b.index),b.toggleSelected())},[d,b,e,c]);return(0,g.jsx)(aB.Checkbox,{style:{paddingLeft:4},checked:a.row.getIsSelected(),disabled:!a.row.getCanSelect(),onChange:()=>null,onClick:f})}function iz(a){let b,c,d,e,f,j,k,m,n,o,p,q,r,s,t,u,v,w=(0,h.c)(49),{children:x,table:y}=a,[z,A]=(0,i.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(b=[],w[0]=b):b=w[0];let[B,C]=(0,i.useState)(b);w[1]!==z?.state?(c=a=>{z?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),A(void 0===a?null:a),C([])},w[1]=z?.state,w[2]=c):c=w[2];let D=c;w[3]!==D?(d=()=>D(),w[3]=D,w[4]=d):d=w[4];let E=d;w[5]!==D||w[6]!==z||w[7]!==y?(e=a=>{if(!z)return;let b=y.getVisibleLeafColumns(),c=b.findIndex(a=>a.id===z.colId)+("left"===a?-1:1);c<0||c>=b.length||D({colId:b[c].id,rowIndex:z.rowIndex,state:"selected"})},w[5]=D,w[6]=z,w[7]=y,w[8]=e):e=w[8];let F=e;w[9]!==z?(f=a=>{z&&C(b=>{let{rowIndex:c}=z,d=b=>b+("down"===a?1:-1);if(!b.length){let a=d(c);return a<0?[]:[a]}let e=d(b[b.length-1]);return e<0?b:e===c?[]:b.includes(e)?b.slice(0,-1):[...b,e]})},w[9]=z,w[10]=f):f=w[10];let G=f;w[11]!==D?(j=(a,b)=>{D({colId:a,rowIndex:b,state:"selected"})},w[11]=D,w[12]=j):j=w[12];let H=j;w[13]!==D||w[14]!==z||w[15]!==B.length?(k=()=>{z&&(B.length?C([]):D("selected"===z.state?null:{...z,state:"selected"}))},w[13]=D,w[14]=z,w[15]=B.length,w[16]=k):k=w[16];let I=k;w[17]!==G||w[18]!==z||w[19]!==H?(m=(a,b)=>{if(!z)return;let c="ArrowDown"===b?"down":"up",d="down"===c?1:-1;if(a)G(c);else{let a=z.rowIndex+d;if(a<0)return;H(z.colId,a)}},w[17]=G,w[18]=z,w[19]=H,w[20]=m):m=w[20];let J=m;w[21]!==F||w[22]!==I||w[23]!==J||w[24]!==z?(n=a=>{if(!z)return;let{key:b,shiftKey:c}=a;switch(b){case"Shift":break;case"Escape":I();break;case"ArrowDown":case"ArrowUp":a.preventDefault(),J(c,b);break;case"ArrowLeft":case"ArrowRight":"selected"===z.state&&(a.preventDefault(),F("ArrowLeft"===b?"left":"right"))}},w[21]=F,w[22]=I,w[23]=J,w[24]=z,w[25]=n):n=w[25];let K=n;w[26]!==E||w[27]!==z?(o=a=>{z&&(document.getElementById(`cell-${z.colId}-${z.rowIndex}`)?.contains(a.target)||E())},w[26]=E,w[27]=z,w[28]=o):o=w[28];let L=o;w[29]!==L||w[30]!==K||w[31]!==z?(p=()=>(z&&(document.addEventListener("keydown",K),document.addEventListener("click",L)),()=>{z&&(document.removeEventListener("keydown",K),document.removeEventListener("click",L))}),q=[L,K,z],w[29]=L,w[30]=K,w[31]=z,w[32]=p,w[33]=q):(p=w[32],q=w[33]),(0,i.useEffect)(p,q),w[34]===Symbol.for("react.memo_cache_sentinel")?(r=()=>A(iA),w[34]=r):r=w[34];let M=r;w[35]!==z||w[36]!==B?(s=(a,b)=>z?.colId!==a?null:z.rowIndex===b?"focused"===z.state?"focused":"selectedAnchor":B.includes(b)?"selectedRange":null,w[35]=z,w[36]=B,w[37]=s):s=w[37];let N=s;w[38]!==D||w[39]!==z?(t=()=>{z&&D({colId:z.colId,rowIndex:z.rowIndex+1,state:"selected"})},w[38]=D,w[39]=z,w[40]=t):t=w[40];let O=t;w[41]!==N||w[42]!==E||w[43]!==H||w[44]!==O?(u={focusAnchorCell:M,resetFocusSelection:E,setSelectedAnchorCell:H,getStateByCellId:N,submitFocusedCell:O},w[41]=N,w[42]=E,w[43]=H,w[44]=O,w[45]=u):u=w[45];let P=u;return w[46]!==x||w[47]!==P?(v=(0,g.jsx)(l.DocumentSheetListContext.Provider,{value:P,children:x}),w[46]=x,w[47]=P,w[48]=v):v=w[48],v}function iA(a){return a?{...a,state:"focused"}:null}ix.displayName="Memo(PaneHeader)";let iB=aF.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:a})=>a}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,iC=(0,aF.styled)(iB)`
  position: sticky;
  z-index: 2;
`;function iD(a){let{getValue:b,column:c,row:d,fieldType:e}=a,f=`cell-${c.id}-${d.index}`,[h,j]=(0,i.useState)(()=>b()),[k,m]=(0,i.useState)(!1),n=(0,i.useRef)(null),{focusAnchorCell:o,resetFocusSelection:p,setSelectedAnchorCell:q,getStateByCellId:r,submitFocusedCell:s}=(()=>{let a=(0,i.useContext)(l.DocumentSheetListContext);if(void 0===a)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return a})(),t=r(c.id,d.index),u=(0,i.useCallback)(()=>{q(c.id,d.index),o()},[c.id,o,d.index,q]),{patchDocument:v}=a.table.options.meta||{},w=()=>{n.current?.focus(),n.current instanceof HTMLInputElement&&n.current.select()},x=(0,i.useCallback)(a=>{let{key:b}=a;"Enter"===b&&("selectedAnchor"===t&&w(),"focused"===t&&s())},[t,s]),y=(0,i.useCallback)(a=>{let b=a.clipboardData?.getData("Text");("string"==typeof b||"number"==typeof b)&&(j(b),v?.(d.id,c.id,b))},[c.id,v,d.id]),z=(0,i.useCallback)(()=>navigator.clipboard.writeText(h.toString()),[h]);(0,i.useEffect)(()=>(("selectedAnchor"===t||"focused"===t)&&document.addEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.addEventListener("paste",y),"selectedAnchor"===t&&document.addEventListener("copy",z),()=>{("selectedAnchor"===t||"focused"===t)&&document.removeEventListener("keydown",x),("selectedAnchor"===t||"selectedRange"===t)&&document.removeEventListener("paste",y),"selectedAnchor"===t&&document.removeEventListener("copy",z)}),[f,t,c.id,r,z,x,y,d.index]);let A=()=>"focused"===t?"2px solid blue":"selectedRange"===t?"1px solid green":"selectedAnchor"===t?"1px solid blue":"1px solid transparent",B={onFocus:u,onBlur:()=>{k&&(v?.(d.id,c.id,h),m(!1)),p()},onMouseDown:a=>{2===a.detail?w():(a.preventDefault(),q(c.id,d.index))},"aria-selected":!!t,"data-testid":f,id:f,ref:a=>{n.current=a}};return"boolean"===e.name?(0,g.jsxs)(aB.Select,{...B,onChange:()=>null,radius:0,style:{boxShadow:"none",border:A(),padding:0},value:JSON.stringify(h),children:[(0,g.jsx)("option",{value:"True",children:"True"}),(0,g.jsx)("option",{value:"False",children:"False"})]}):(0,g.jsx)(aB.TextInput,{...B,size:0,radius:0,border:!1,style:{border:A(),padding:"22px 16px"},value:"string"==typeof h||"number"==typeof h?h:JSON.stringify(h),onChange:a=>{m(!0),j(a.target.value)}})}function iE(a){let b=a.column.getIsPinned(),c=b&&a.column.getIsLastColumn("left")?2:1;return(0,g.jsx)(b?iC:iB,{style:{left:a.column.getStart("left")??void 0,borderRight:`${c}px solid var(--card-border-color)`},width:a.column.getSize(),children:ca(a.column.columnDef.cell,a.getContext?.())},a.row.original._id+a.id)}let iF=a=>{let{documentPreviewStore:b,row:c,schemaType:d}=a,e=(0,i.useMemo)(()=>(0,j.getPreviewStateObservable)(b,d,c.original._id),[b,c.original._id,d]),f=(0,j.useDocumentVersionInfo)(c.original._id),{snapshot:h,isLoading:k}=(0,aJ.useObservable)(e,{snapshot:null,isLoading:!0});if(k)return(0,g.jsx)(aB.Text,{size:1,muted:!0,children:"Loading..."});let l=h?.title??"Untitled";return(0,g.jsxs)(aB.Flex,{align:"center",gap:3,children:[(0,g.jsx)(j.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:void 0}),(0,g.jsx)(aB.Text,{size:1,children:l})]})},iG=(a,b)=>"function"==typeof a?{...b,accessorFn:a}:{...b,accessorKey:a},iH=["string","number","boolean"],iI=(a,b)=>a.fields.reduce((a,c)=>{let{type:d,name:e}=c;return iH.includes(d.name)?[...a,iG(b?`${b}.${c.name}`:c.name,{id:b?`${b}_${c.name}`:c.name,header:c.type.title,enableHiding:!0,cell:a=>(0,g.jsx)(iD,{...a,fieldType:d})})]:"object"===d.name&&(0,aD.isObjectSchemaType)(d)&&!b?[...a,{header:e,columns:iI(d,c.name)}]:a},[]),iJ=a=>a.flatMap(a=>"accessorKey"in a?a:"columns"in a&&a.columns?iJ(a.columns):[]);function iK({table:a}){let{t:b}=(0,j.useTranslation)(),c=a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length>=5,d=(0,i.useCallback)(()=>{a.resetColumnVisibility()},[a]);return(0,g.jsx)(aA.MenuButton,{button:(0,g.jsx)(aA.Button,{mode:"bleed",text:b("sheet-list.edit-columns")}),id:"columns-control",menu:(0,g.jsx)(aB.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,g.jsxs)(aB.Flex,{direction:"column",height:"fill",gap:3,children:[(0,g.jsx)(aB.Text,{weight:"semibold",size:1,children:b("sheet-list.select-fields")}),(0,g.jsx)(aB.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,g.jsx)(aB.Stack,{children:a.getAllLeafColumns().filter(a=>a.getCanHide()).map(b=>{let d,e,f=b.id.replace(/ /g,"-");return(0,g.jsxs)(aB.Flex,{marginY:2,align:"center",children:[(0,g.jsx)(aB.Checkbox,{readOnly:(d=b.getIsVisible(),e=1===a.getVisibleLeafColumns().filter(a=>a.getCanHide()).length,c&&!d||e&&d),checked:b.getIsVisible(),onChange:()=>{b.toggleVisibility()},id:`col-visibility-${f}`,style:{display:"block"}}),(0,g.jsx)(aB.Box,{flex:1,paddingLeft:3,children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)("label",{htmlFor:`col-visibility-${f}`,children:b.columnDef.header?.toString()})})})]},b.id)})})}),(0,g.jsx)(aA.Button,{width:"fill",mode:"ghost",text:b("sheet-list.reset-columns"),onClick:d})]})}),placement:"bottom",popover:{portal:!0}})}let iL=(0,aF.styled)(aB.Flex)`
  flex-shrink: 0;
`;function iM(){let a,b,c,d=(0,h.c)(5),{state:e}=(0,j.useSearchState)(),{filtersVisible:f}=e;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(j.SearchHeader,{}),d[0]=a):a=d[0],d[1]!==f?(b=f&&(0,g.jsx)(j.Filters,{showTypeFilter:!1}),d[1]=f,d[2]=b):b=d[2],d[3]!==b?(c=(0,g.jsxs)(iL,{children:[a,b]}),d[3]=b,d[4]=c):c=d[4],c}let iN=aF.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:a})=>a}px;
  max-width: ${({width:a})=>a}px;
`,iO=(0,aF.styled)(iN)`
  position: sticky;
  z-index: 2;
`,iP=aF.styled.div`
  visibility: hidden;

  ${iN}:hover & {
    visibility: visible;
  }
`;function iQ(a){let{header:b,headerGroup:c}=a,{t:d}=(0,j.useTranslation)(),e=b.column.getIsPinned(),f=c.depth>0&&!b.column.parent?null:(0,g.jsx)(aB.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:ca(b.column.columnDef.header,b.getContext())}),h=b.column.getCanHide()&&(0===c.depth?!b.column.columns.length:b.column.parent),i=e&&b.column.getIsLastColumn("left")?2:1;return(0,g.jsx)(e?iO:iN,{style:{left:b.column.getStart("left")??void 0,borderRight:`${i}px solid var(--card-border-color)`},"data-testid":`header-${b.id}`,width:b.getSize(),children:(0,g.jsxs)(aB.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,g.jsx)(aA.Tooltip,{delay:500,content:f,children:(0,g.jsx)(aB.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:f})}),h&&(0,g.jsx)(iP,{children:(0,g.jsx)(aA.MenuButton,{button:(0,g.jsx)(aA.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:n.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,g.jsx)(aB.Menu,{children:(0,g.jsx)(aA.MenuItem,{text:d("sheet-list.hide-field"),icon:n.CloseIcon,onClick:()=>b.column.toggleVisibility()})})})})]})},b.id)}function iR({table:a}){return(0,g.jsx)(aA.TooltipDelayGroupProvider,{children:(0,g.jsxs)(aB.Flex,{gap:3,align:"center",children:[(0,g.jsx)(aA.Button,{onClick:()=>a.setPageIndex(0),disabled:!a.getCanPreviousPage(),icon:n.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,g.jsx)(aA.Button,{onClick:()=>a.previousPage(),disabled:!a.getCanPreviousPage(),icon:n.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,g.jsxs)(aB.Text,{style:{whiteSpace:"nowrap"},children:[a.getState().pagination.pageIndex+1," of ",a.getPageCount()]}),(0,g.jsx)(aA.Button,{onClick:()=>a.nextPage(),disabled:!a.getCanNextPage(),icon:n.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,g.jsx)(aA.Button,{onClick:()=>a.setPageIndex(a.getPageCount()-1),disabled:!a.getCanNextPage(),icon:n.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,g.jsx)("select",{value:a.getState().pagination.pageSize,onChange:b=>{a.setPageSize(Number(b.target.value))},children:[25,50,100].map(a=>(0,g.jsx)("option",{value:a,children:a},a))})]})})}function iS(a,b){switch(b.type){case"DOCUMENTS_SET":{let c=b.documents.reduce((a,b)=>({...a,[b._id]:b}),{});return{...a,documents:c}}case"DOCUMENT_RECEIVED":{let c=b.payload;return{...a,documents:{...a.documents,[c._id]:c}}}case"DOCUMENT_DELETED":{let{[b.id]:c,...d}=a.documents;return{...a,documents:d}}case"DOCUMENT_UPDATED":{let c=b.payload,d=c._id,e={...a.documents[d],...c};return{...a,documents:{...a.documents,[d]:e}}}default:return a}}let iT={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},iU=(0,aF.styled)(aB.Flex)`
  height: 100%;
`,iV=aF.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,iW=aF.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function iX({documentSchemaType:a}){let{dispatch:b,state:c}=(0,j.useSearchState)(),{columns:d,initialColumnsVisibility:e}=function(a){let b=(0,j.useDocumentPreviewStore)(),c=(0,i.useMemo)(()=>a?[{id:"selected",enableHiding:!1,header:a=>(0,g.jsxs)(aB.Box,{children:[(0,g.jsx)(aB.Checkbox,{style:{paddingLeft:4},indeterminate:a.table.getIsSomeRowsSelected(),onChange:a.table.getToggleAllPageRowsSelectedHandler()}),a.table.getSelectedRowModel().rows.length," selected"]}),cell:iy},iG("Preview",{enableHiding:!1,id:"Preview",cell:c=>(0,g.jsx)(iF,{...c,documentPreviewStore:b,schemaType:a})}),...iI(a)]:[],[b,a]),[d]=(0,i.useMemo)(()=>iJ(c).reduce(([a,b],c)=>{if(!c.id)throw Error("Column must have an id");let d=c.id;return c.enableHiding?5===b?[{...a,[d]:!1},b]:[{...a,[d]:!0},b+1]:[{...a,[d]:!0},b]},[{},0]),[c]);return{columns:c,initialColumnsVisibility:d}}(a),{data:f}=function(a){let b,c,d,e,f=(0,h.c)(12),{typeName:g}=a,{state:l}=(0,j.useSearchState)();f[0]!==l.result.hits?(b=new Map,l.result.hits.forEach(a=>b.set((0,k.getPublishedId)(a.hit._id),a.hit)),f[0]=l.result.hits,f[1]=b):b=f[1];let m=b,n=`_type == "${g}"`;f[2]!==n?(c={filter:n},f[2]=n,f[3]=c):c=f[3];let{data:o,isLoading:p}=function(a){let b,c,d,e,f,g,l,m,n,o,p=(0,h.c)(27),{filter:q,params:r,apiVersion:s}=a,t=`*[${q}][0...2000]`,u=s||j.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;p[0]!==u?(b={...j.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:u},p[0]=u,p[1]=b):b=p[1];let v=(0,j.useClient)(b);p[2]===Symbol.for("react.memo_cache_sentinel")?(c={documents:{}},p[2]=c):c=p[2];let[w,x]=(0,i.useReducer)(iS,c),[y,z]=(0,i.useState)(null!==v),[A,B]=(0,i.useState)(null);p[3]!==t||p[4]!==v||p[5]!==r?(d=async()=>{if(!v)return void z(!1);try{let a=await v.fetch(t,r);x({type:"DOCUMENTS_SET",documents:a}),z(!1)}catch(a){B(a)}},p[3]=t,p[4]=v,p[5]=r,p[6]=d):d=p[6];let C=d;p[7]!==C?(e=async a=>{if("welcome"===a.type&&(z(!0),await C(),z(!1)),"reconnect"===a.type&&z(!0),"mutation"===a.type){if("appear"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_RECEIVED",payload:b})}if("disappear"===a.transition&&x({type:"DOCUMENT_DELETED",id:a.documentId}),"update"===a.transition){let b=a.result;b&&x({type:"DOCUMENT_UPDATED",payload:b})}}},p[7]=C,p[8]=e):e=p[8];let D=e;a:{let a;if(!v){let a;p[9]===Symbol.for("react.memo_cache_sentinel")?(a=(0,aU.of)(),p[9]=a):a=p[9],f=a;break a}if(p[10]!==t||p[11]!==v.observable||p[12]!==r){let b;p[14]===Symbol.for("react.memo_cache_sentinel")?(b=a=>(B(a),(0,aU.of)(a)),p[14]=b):b=p[14],a=v.observable.listen(t,r,iT).pipe((0,aU.catchError)(b)),p[10]=t,p[11]=v.observable,p[12]=r,p[13]=a}else a=p[13];f=a}let E=f;p[15]!==D||p[16]!==E?(g=()=>{let a=E.subscribe(D);return()=>{a?.unsubscribe()}},l=[D,E],p[15]=D,p[16]=E,p[17]=g,p[18]=l):(g=p[17],l=p[18]),(0,i.useEffect)(g,l),p[19]!==w.documents?(m=Object.keys(w.documents).reduce((a,b)=>{let c=w.documents[b],d=c._id===(0,k.getDraftId)(c._id),e=d?c._id:(0,k.getDraftId)(c._id);return a[e]&&!d||(a[e]=c),a},{}),p[19]=w.documents,p[20]=m):m=p[20];let F=m;p[21]!==F?(n=Object.values(F),p[21]=F,p[22]=n):n=p[22];let G=n;return p[23]!==G||p[24]!==A||p[25]!==y?(o={data:G,isLoading:y,error:A},p[23]=G,p[24]=A,p[25]=y,p[26]=o):o=p[26],o}(c);if(f[4]!==o||f[5]!==m){let a;f[7]!==m?(a=a=>m.has((0,k.getPublishedId)(a._id)),f[7]=m,f[8]=a):a=f[8],d=o.filter(a),f[4]=o,f[5]=m,f[6]=d}else d=f[6];let q=d;return f[9]!==q||f[10]!==p?(e={data:q,isLoading:p},f[9]=q,f[10]=p,f[11]=e):e=f[11],e}({typeName:a.name}),[l,m]=(0,i.useState)(null),n=c.result.hits.length,o=function(a){let b={state:{},onStateChange:()=>{},renderFallbackValue:null,...a},[c]=i.useState(()=>({current:function(a){var b,c;let d=[...b9,...null!=(b=a._features)?b:[]],e={_features:d},f=e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultOptions?void 0:b.getDefaultOptions(e)),{}),g={...null!=(c=a.initialState)?c:{}};e._features.forEach(a=>{var b;g=null!=(b=null==a.getInitialState?void 0:a.getInitialState(g))?b:g});let h=[],i=!1,j={_features:d,options:{...f,...a},initialState:g,_queue:a=>{h.push(a),i||(i=!0,Promise.resolve().then(()=>{for(;h.length;)h.shift()();i=!1}).catch(a=>setTimeout(()=>{throw a})))},reset:()=>{e.setState(e.initialState)},setOptions:a=>{var b;b=by(a,e.options),e.options=e.options.mergeOptions?e.options.mergeOptions(f,b):{...f,...b}},getState:()=>e.options.state,setState:a=>{null==e.options.onStateChange||e.options.onStateChange(a)},_getRowId:(a,b,c)=>{var d;return null!=(d=null==e.options.getRowId?void 0:e.options.getRowId(a,b,c))?d:`${c?[c.id,b].join("."):b}`},getCoreRowModel:()=>(e._getCoreRowModel||(e._getCoreRowModel=e.options.getCoreRowModel(e)),e._getCoreRowModel()),getRowModel:()=>e.getPaginationRowModel(),getRow:(a,b)=>{let c=(b?e.getPrePaginationRowModel():e.getRowModel()).rowsById[a];if(!c&&!(c=e.getCoreRowModel().rowsById[a]))throw Error();return c},_getDefaultColumnDef:bB(()=>[e.options.defaultColumn],a=>{var b;return a=null!=(b=a)?b:{},{header:a=>{let b=a.header.column.columnDef;return b.accessorKey?b.accessorKey:b.accessorFn?b.id:null},cell:a=>{var b,c;return null!=(b=null==(c=a.renderValue())||null==c.toString?void 0:c.toString())?b:null},...e._features.reduce((a,b)=>Object.assign(a,null==b.getDefaultColumnDef?void 0:b.getDefaultColumnDef()),{}),...a}},bC(a,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>e.options.columns,getAllColumns:bB(()=>[e._getColumnDefs()],a=>{let b=function(a,c,d){return void 0===d&&(d=0),a.map(a=>{let f=function(a,b,c,d){var e,f;let g,h={...a._getDefaultColumnDef(),...b},i=h.accessorKey,j=null!=(e=null!=(f=h.id)?f:i?"function"==typeof String.prototype.replaceAll?i.replaceAll(".","_"):i.replace(/\./g,"_"):void 0)?e:"string"==typeof h.header?h.header:void 0;if(h.accessorFn?g=h.accessorFn:i&&(g=i.includes(".")?a=>{let b=a;for(let a of i.split(".")){var c;b=null==(c=b)?void 0:c[a]}return b}:a=>a[h.accessorKey]),!j)throw Error();let k={id:`${String(j)}`,accessorFn:g,parent:d,depth:c,columnDef:h,columns:[],getFlatColumns:bB(()=>[!0],()=>{var a;return[k,...null==(a=k.columns)?void 0:a.flatMap(a=>a.getFlatColumns())]},bC(a.options,"debugColumns","column.getFlatColumns")),getLeafColumns:bB(()=>[a._getOrderColumnsFn()],a=>{var b;return null!=(b=k.columns)&&b.length?a(k.columns.flatMap(a=>a.getLeafColumns())):[k]},bC(a.options,"debugColumns","column.getLeafColumns"))};for(let b of a._features)null==b.createColumn||b.createColumn(k,a);return k}(e,a,d,c);return f.columns=a.columns?b(a.columns,f,d+1):[],f})};return b(a)},bC(a,"debugColumns","getAllColumns")),getAllFlatColumns:bB(()=>[e.getAllColumns()],a=>a.flatMap(a=>a.getFlatColumns()),bC(a,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:bB(()=>[e.getAllFlatColumns()],a=>a.reduce((a,b)=>(a[b.id]=b,a),{}),bC(a,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:bB(()=>[e.getAllColumns(),e._getOrderColumnsFn()],(a,b)=>b(a.flatMap(a=>a.getLeafColumns())),bC(a,"debugColumns","getAllLeafColumns")),getColumn:a=>e._getAllFlatColumnsById()[a]};Object.assign(e,j);for(let a=0;a<e._features.length;a++){let b=e._features[a];null==b||null==b.createTable||b.createTable(e)}return e}(b)})),[d,e]=i.useState(()=>c.current.initialState);return c.current.setOptions(b=>({...b,...a,state:{...d,...a.state},onStateChange:b=>{e(b),null==a.onStateChange||a.onStateChange(b)}})),c.current}({data:f,columns:d,getCoreRowModel:a=>bB(()=>[a.options.data],b=>{let c={rows:[],flatRows:[],rowsById:{}},d=function(b,e,f){void 0===e&&(e=0);let g=[];for(let i=0;i<b.length;i++){let j=bG(a,a._getRowId(b[i],i,f),b[i],i,e,void 0,null==f?void 0:f.id);if(c.flatRows.push(j),c.rowsById[j.id]=j,g.push(j),a.options.getSubRows){var h;j.originalSubRows=a.options.getSubRows(b[i],i),null!=(h=j.originalSubRows)&&h.length&&(j.subRows=d(j.originalSubRows,e+1,j))}}return g};return c.rows=d(b),c},bC(a.options,"debugTable","getRowModel",()=>a._autoResetPageIndex())),getFilteredRowModel:a=>bB(()=>[a.getPreFilteredRowModel(),a.getState().columnFilters,a.getState().globalFilter],(b,c,d)=>{var e,f,g,h,i,j,k,l,m,n;let o,p,q,r,s,t,u,v,w,x;if(!b.rows.length||!(null!=c&&c.length)&&!d){for(let a=0;a<b.flatRows.length;a++)b.flatRows[a].columnFilters={},b.flatRows[a].columnFiltersMeta={};return b}let y=[],z=[];(null!=c?c:[]).forEach(b=>{var c;let d=a.getColumn(b.id);if(!d)return;let e=d.getFilterFn();e&&y.push({id:b.id,filterFn:e,resolvedValue:null!=(c=null==e.resolveFilterValue?void 0:e.resolveFilterValue(b.value))?c:b.value})});let A=(null!=c?c:[]).map(a=>a.id),B=a.getGlobalFilterFn(),C=a.getAllLeafColumns().filter(a=>a.getCanGlobalFilter());d&&B&&C.length&&(A.push("__global__"),C.forEach(a=>{var b;z.push({id:a.id,filterFn:B,resolvedValue:null!=(b=null==B.resolveFilterValue?void 0:B.resolveFilterValue(d))?b:d})}));for(let a=0;a<b.flatRows.length;a++){let c=b.flatRows[a];if(c.columnFilters={},y.length)for(let a=0;a<y.length;a++){let b=(o=y[a]).id;c.columnFilters[b]=o.filterFn(c,b,o.resolvedValue,a=>{c.columnFiltersMeta[b]=a})}if(z.length){for(let a=0;a<z.length;a++){let b=(p=z[a]).id;if(p.filterFn(c,b,p.resolvedValue,a=>{c.columnFiltersMeta[b]=a})){c.columnFilters.__global__=!0;break}}!0!==c.columnFilters.__global__&&(c.columnFilters.__global__=!1)}}return e=b.rows,f=a=>{for(let b=0;b<A.length;b++)if(!1===a.columnFilters[A[b]])return!1;return!0},a.options.filterFromLeafRows?(g=e,h=f,q=[],r={},s=null!=(j=(i=a).options.maxLeafRowFilterDepth)?j:100,{rows:(t=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){var d;let f=a[e],g=bG(i,f.id,f.original,f.index,f.depth,void 0,f.parentId);if(g.columnFilters=f.columnFilters,null!=(d=f.subRows)&&d.length&&b<s){if(g.subRows=t(f.subRows,b+1),h(f=g)&&!g.subRows.length||h(f)||g.subRows.length){c.push(f),r[f.id]=f,q.push(f);continue}}else h(f=g)&&(c.push(f),r[f.id]=f,q.push(f))}return c})(g),flatRows:q,rowsById:r}):(k=e,l=f,u=[],v={},w=null!=(n=(m=a).options.maxLeafRowFilterDepth)?n:100,{rows:(x=function(a,b){void 0===b&&(b=0);let c=[];for(let e=0;e<a.length;e++){let f=a[e];if(l(f)){var d;if(null!=(d=f.subRows)&&d.length&&b<w){let a=bG(m,f.id,f.original,f.index,f.depth,void 0,f.parentId);a.subRows=x(f.subRows,b+1),f=a}c.push(f),u.push(f),v[f.id]=f}}return c})(k),flatRows:u,rowsById:v})},bC(a.options,"debugTable","getFilteredRowModel",()=>a._autoResetPageIndex())),getPaginationRowModel:a=>bB(()=>[a.getState().pagination,a.getPrePaginationRowModel(),a.options.paginateExpandedRows?void 0:a.getState().expanded],(b,c)=>{let d;if(!c.rows.length)return c;let{pageSize:e,pageIndex:f}=b,{rows:g,flatRows:h,rowsById:i}=c,j=e*f;if(g=g.slice(j,j+e),a.options.paginateExpandedRows)d={rows:g,flatRows:h,rowsById:i};else{var k;let a,b;k={rows:g,flatRows:h,rowsById:i},a=[],b=c=>{var d;a.push(c),null!=(d=c.subRows)&&d.length&&c.getIsExpanded()&&c.subRows.forEach(b)},k.rows.forEach(b),d={rows:a,flatRows:k.flatRows,rowsById:k.rowsById}}d.flatRows=[];let l=a=>{d.flatRows.push(a),a.subRows.length&&a.subRows.forEach(l)};return d.rows.forEach(l),d},bC(a.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:e},getRowId:a=>a._id,meta:{selectedAnchor:l,setSelectedAnchor:m,patchDocument:(a,b,c)=>null}}),{rows:p}=o.getRowModel();(0,i.useEffect)(()=>(b({type:"TERMS_TYPE_ADD",schemaType:a}),()=>{b({type:"TERMS_TYPE_REMOVE",schemaType:a})}),[a,b]);let q=(0,i.useCallback)(a=>(0,g.jsx)(aB.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:a.getVisibleCells().map(b=>(0,g.jsx)(iE,{...b},a.original._id+b.id))},a.original._id+a.id),[]),r=`Total: ${n} rows, showing ${p.length} rows`;return(0,g.jsxs)(iU,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,g.jsxs)(aB.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,g.jsxs)(aB.Flex,{direction:"row",align:"center",children:[(0,g.jsx)(iM,{}),(0,g.jsx)(aB.Text,{size:0,muted:!0,children:r})]}),(0,g.jsx)(iK,{table:o})]}),(0,g.jsx)(iV,{children:(0,g.jsx)(iz,{table:o,children:(0,g.jsxs)(iW,{children:[(0,g.jsx)("thead",{children:o.getHeaderGroups().map(a=>(0,g.jsx)(aB.Box,{as:"tr",children:a.headers.map(b=>(0,g.jsx)(iQ,{header:b,headerGroup:a},b.id))},a.id))}),(0,g.jsx)("tbody",{children:o.getRowModel().rows.map(q)})]})})}),(0,g.jsx)(aB.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,g.jsx)(iR,{table:o})})]})}function iY(a){let b,c,d,e=(0,h.c)(7),f=(0,j.useSchema)(),i=a.pane.schemaTypeName;if(e[0]!==f||e[1]!==i?(c=!(b=f.get(i))||!(0,aD.isDocumentSchemaType)(b),e[0]=f,e[1]=i,e[2]=b,e[3]=c):(b=e[2],c=e[3]),c)throw Error(`Schema type "${i}" not found or not a document schema`);return e[4]!==a||e[5]!==b?(d=(0,g.jsx)(j.SearchProvider,{children:(0,g.jsx)(iX,{...a,documentSchemaType:b})}),e[4]=a,e[5]=b,e[6]=d):d=e[6],d}function iZ(a){let[b,c]=(0,i.useState)(a);return(0,aS.default)(b,a)?b:(c(a),a)}let i$=(0,i.memo)(function(a){let b,c,d,e,f,i,k,l,m,n=(0,h.c)(36),{index:o,isSelected:p,pane:q,paneKey:r}=a,{name:s}=(0,j.useSource)(),{defaultLayout:t,initialValueTemplates:u,menuItemGroups:v,menuItems:w,options:x}=q,y=void 0===u?j.EMPTY_ARRAY:u,{defaultOrdering:z,filter:A}=x,B=void 0===z?j.EMPTY_ARRAY:z,C=iZ(x.params||h5),D=q.source;a:{let a;n[0]!==A||n[1]!==C?(a=ic(A,C),n[0]=A,n[1]=C,n[2]=a):a=n[2];let c=a;if(c?.length===1){b=c[0];break a}b=null}let E=b,[F,G]=dD("layout",E??q.id,void 0===t?"default":t),{title:H}=(0,j.useI18nText)(q);n[3]!==B?(c=B?.length>0?{by:B}:h4,n[3]=B,n[4]=c):c=n[4];let I=c,[J,K]=dD("sort-order",E??q.id,I);n[5]!==F||n[6]!==w||n[7]!==J?(d=(a=>{let{menuItems:b,sortOrderRaw:c,layout:d}=a;return b?.map(a=>a.params?.layout?{...a,selected:d===a.params?.layout}:a?.params?.by?{...a,selected:(0,aQ.isEqual)(c?.by,a?.params?.by||j.EMPTY_ARRAY)}:{...a,selected:!1})})({menuItems:w,sortOrderRaw:J,layout:F}),n[5]=F,n[6]=w,n[7]=J,n[8]=d):d=n[8];let L=d,M="sheetList"===F;n[9]!==M||n[10]!==F||n[11]!==a||n[12]!==J?(e=M?(0,g.jsx)(iY,{...a},a.pane.id):(0,g.jsx)(iu,{...a,sortOrder:J,layout:F}),n[9]=M,n[10]=F,n[11]=a,n[12]=J,n[13]=e):e=n[13];let N=e,O=D||s;return n[14]!==M?(f=M?{}:{currentMaxWidth:350,maxWidth:640},n[14]=M,n[15]=f):f=n[15],n[16]!==q.source?(i=!1,n[16]=q.source,n[17]=i):i=n[17],n[18]!==o||n[19]!==y||n[20]!==v||n[21]!==L||n[22]!==G||n[23]!==K||n[24]!==H?(k=(0,g.jsx)(ix,{index:o,initialValueTemplates:y,menuItemGroups:v,menuItems:L,setLayout:G,setSortOrder:K,title:H}),n[18]=o,n[19]=y,n[20]=v,n[21]=L,n[22]=G,n[23]=K,n[24]=H,n[25]=k):k=n[25],n[26]!==p||n[27]!==r||n[28]!==N||n[29]!==k||n[30]!==f||n[31]!==i?(l=(0,g.jsxs)(cJ,{"data-ui":"DocumentListPane",id:r,minWidth:320,...f,selected:p,children:[i,k,N]}),n[26]=p,n[27]=r,n[28]=N,n[29]=k,n[30]=f,n[31]=i,n[32]=l):l=n[32],n[33]!==l||n[34]!==O?(m=(0,g.jsx)(j.SourceProvider,{name:O,children:l}),n[33]=l,n[34]=O,n[35]=m):m=n[35],m});i$.displayName="Memo(PaneContainer)";let i_=a=>{let{liveEditSchemaType:b,version:c}=a;return b&&!c?{label:"Live",color:"danger"}:null};i_.displayName="LiveEditBadge";let i0={activePanes:[]};function i1(a){i0.activePanes=a}function i2(a,b,c,d){let e=c?.panes||[],f=i0.activePanes||[],g=b.id||(0,aE.uuid)();for(let c=f.length-1;c>=0;c--){let h=f[c];if("object"==typeof h&&(h.canHandleIntent?.(a,b,{pane:h,index:c})||"documentList"===h.type&&h.schemaTypeName===b.type&&"_type == $type"===h.options.filter)){let f=function(a,{template:b,version:c,inspect:d,comment:e,task:f}){switch(a){case"create":return{template:b,version:c};case"edit":return{inspect:d,comment:e,task:f};default:return ez}}(a,b);return{panes:e.slice(0,c).concat([[{id:g,params:f,payload:d}]])}}}return{intent:a,params:b,payload:d}}let i3=(0,aF.styled)(j.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,i4=(0,aF.styled)(aB.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function i5(a){let b,c,d,e,f,k,l,m,n,o,p,q,r=(0,h.c)(39),{showChanges:s}=a,{documentId:t,schemaType:u,timelineError:v,timelineStore:w,value:x}=dh(),{selectedReleaseId:z}=(0,j.usePerspective)(),[A,B]=(0,i.useState)(null),C=(0,j.useTimelineSelector)(w,jb),D=(0,j.useTimelineSelector)(w,ja),E=(0,j.useTimelineSelector)(w,i9),F=(0,j.useTimelineSelector)(w,i8),G=(0,j.useTimelineSelector)(w,i7),H="loading"===F,I=!E,{t:J}=(0,j.useTranslation)(y);r[0]!==D||r[1]!==t||r[2]!==I||r[3]!==u||r[4]!==x?(b={documentId:t,schemaType:u,FieldWrapper:i6,rootDiff:D,isComparingCurrent:I,value:x,showFromValue:!0},r[0]=D,r[1]=t,r[2]=I,r[3]=u,r[4]=x,r[5]=b):b=r[5];let K=b;if(z){let a;return r[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(aB.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(aB.Card,{flex:1,padding:2,paddingTop:0,children:(0,g.jsx)(f4,{versionError:!0})})}),r[6]=a):a=r[6],a}return r[7]!==J?(c=J("changes.from.label"),r[7]=J,r[8]=c):c=r[8],r[9]!==c?(d=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:c}),r[9]=c,r[10]=d):d=r[10],r[11]!==G?(e=(0,g.jsx)(f7,{mode:"since",chunk:G,placement:"bottom-start"}),r[11]=G,r[12]=e):e=r[12],r[13]!==J?(f=J("changes.to.label"),r[13]=J,r[14]=f):f=r[14],r[15]!==f?(k=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:f}),r[15]=f,r[16]=k):k=r[16],r[17]!==C?(l=(0,g.jsx)(f7,{chunk:C,mode:"rev",placement:"bottom-end"}),r[17]=C,r[18]=l):l=r[18],r[19]!==d||r[20]!==e||r[21]!==k||r[22]!==l?(m=(0,g.jsx)(aB.Box,{padding:3,children:(0,g.jsxs)(i4,{paddingX:2,paddingBottom:2,children:[d,e,k,l]})}),r[19]=d,r[20]=e,r[21]=k,r[22]=l,r[23]=m):m=r[23],r[24]!==D||r[25]!==K||r[26]!==H||r[27]!==u||r[28]!==s||r[29]!==v?(n=s&&(0,g.jsx)(jc,{diff:D,documentContext:K,error:v,loading:H,schemaType:u}),r[24]=D,r[25]=K,r[26]=H,r[27]=u,r[28]=s,r[29]=v,r[30]=n):n=r[30],r[31]!==n?(o=(0,g.jsx)(i3,{"data-ui":"Scroller",ref:B,children:(0,g.jsx)(aB.Box,{flex:1,paddingX:3,height:"fill",children:n})}),r[31]=n,r[32]=o):o=r[32],r[33]!==A||r[34]!==o?(p=(0,g.jsx)(aB.Card,{flex:1,paddingX:2,paddingY:2,children:(0,g.jsx)(aB.BoundaryElementProvider,{element:A,children:o})}),r[33]=A,r[34]=o,r[35]=p):p=r[35],r[36]!==p||r[37]!==m?(q=(0,g.jsxs)(aB.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[m,p]}),r[36]=p,r[37]=m,r[38]=q):q=r[38],q}function i6(a){return(0,g.jsx)(j.ChangeFieldWrapper,{...a,hasRevertHover:!1})}function i7(a){return a.sinceTime}function i8(a){return a.selectionState}function i9(a){return a.onOlderRevision}function ja(a){return a.diff}function jb(a){return a.revTime}function jc(a){let b,c,d=(0,h.c)(9),{error:e,diff:f,documentContext:i,loading:k,schemaType:m}=a;if(e){let a;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(j.NoChanges,{}),d[0]=a):a=d[0],a}if(k){let a;return d[1]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(j.LoadingBlock,{showText:!0}),d[1]=a):a=d[1],a}if(!f){let a;return d[2]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(j.NoChanges,{}),d[2]=a):a=d[2],a}return d[3]!==f||d[4]!==m?(b=(0,g.jsx)(j.ChangeList,{diff:f,schemaType:m}),d[3]=f,d[4]=m,d[5]=b):b=d[5],d[6]!==i||d[7]!==b?(c=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:i,children:b}),d[6]=i,d[7]=b,d[8]=c):c=d[8],c}function jd(a){let b,c,d,e,f,i,k,l,m=(0,h.c)(27),{event:n,isSelected:o,onSelect:p,optionsMenu:q}=a,{t:r}=(0,j.useTranslation)("studio");m[0]!==n?(b=!(0,j.isDeleteDocumentVersionEvent)(n)&&!(0,j.isDeleteDocumentGroupEvent)(n)&&!(0,j.isUnpublishDocumentEvent)(n)&&!(0,j.isScheduleDocumentVersionEvent)(n)&&!(0,j.isUnscheduleDocumentVersionEvent)(n),m[0]=n,m[1]=b):b=m[1];let s=b;m[2]!==n||m[3]!==s||m[4]!==p?(c=a=>{a.preventDefault(),a.stopPropagation(),s&&p(n)},m[2]=n,m[3]=s,m[4]=p,m[5]=c):c=m[5];let t=c;m[6]!==s||m[7]!==r?(d=s?"":r("changes.not-selectable"),m[6]=s,m[7]=r,m[8]=d):d=m[8];let u=s?"button":"div",v=s?"pointer":"default";return m[9]!==v?(e={cursor:v,width:"100%"},m[9]=v,m[10]=e):e=m[10],m[11]!==n?(f=(0,g.jsx)(j.Event,{event:n,showChangesBy:"tooltip"}),m[11]=n,m[12]=f):f=m[12],m[13]!==n.timestamp||m[14]!==t||m[15]!==o||m[16]!==u||m[17]!==e||m[18]!==f?(i=(0,g.jsx)(aB.Card,{as:u,onClick:t,padding:2,pressed:o,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":n.timestamp,style:e,children:f}),m[13]=n.timestamp,m[14]=t,m[15]=o,m[16]=u,m[17]=e,m[18]=f,m[19]=i):i=m[19],m[20]!==s||m[21]!==d||m[22]!==i?(k=(0,g.jsx)(aA.Tooltip,{content:d,disabled:s,children:i}),m[20]=s,m[21]=d,m[22]=i,m[23]=k):k=m[23],m[24]!==q||m[25]!==k?(l=(0,g.jsxs)(aB.Flex,{gap:1,children:[k,q]}),m[24]=q,m[25]=k,m[26]=l):l=m[26],l}function je(a){let b,c,d,e,f,i,l,m,n,o,p,q,r=(0,h.c)(44),{event:s}=a,{t}=(0,j.useTranslation)(y),{t:u}=(0,j.useTranslation)(),v=(0,aB.usePortal)(),{params:w,setParams:x}=d9(),z=(0,j.useSetPerspective)(),{document:A}=(0,j.useWorkspace)(),{drafts:B}=A,{enabled:C}=B;r[0]!==s.id||r[1]!==s.versionId||r[2]!==s.versionRevisionId||r[3]!==w||r[4]!==x?(b=()=>{x({...w,rev:s.versionRevisionId||"@lastPublished",since:void 0,historyEvent:s.id,historyVersion:(0,k.getVersionFromId)(s.versionId)})},r[0]=s.id,r[1]=s.versionId,r[2]=s.versionRevisionId,r[3]=w,r[4]=x,r[5]=b):b=r[5];let D=b;r[6]!==s.versionRevisionId||r[7]!==C||r[8]!==w||r[9]!==x||r[10]!==z?(c=()=>{x({...w,rev:s.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{z(C?"drafts":"published")},100)},r[6]=s.versionRevisionId,r[7]=C,r[8]=w,r[9]=x,r[10]=z,r[11]=c):c=r[11];let E=c;r[12]!==s.release?(d=a=>{let{children:b}=a;return(0,g.jsx)(j.VersionInlineBadge,{$tone:s.release?(0,j.isReleaseDocument)(s.release)?(0,j.getReleaseTone)(s.release):"default":void 0,children:b})},r[12]=s.release,r[13]=d):d=r[13];let F=d;r[14]!==s.release?(e=s.release&&!(0,j.isReleaseDocument)(s.release),r[14]=s.release,r[15]=e):e=r[15];let G=e,H=`timeline-item-menu-button-${s.versionId}`;r[16]!==t?(f=t("timeline-item.menu-button.aria-label"),r[16]=t,r[17]=f):f=r[17],r[18]!==s.release||r[19]!==G||r[20]!==t?(i=G?t("timeline-item.not-found-release.tooltip",{releaseId:s.release?._id?(0,j.getReleaseIdFromReleaseDocumentId)(s.release._id):void 0}):t("timeline-item.menu-button.tooltip"),r[18]=s.release,r[19]=G,r[20]=t,r[21]=i):i=r[21],r[22]!==i?(l={content:i},r[22]=i,r[23]=l):l=r[23],r[24]!==G||r[25]!==f||r[26]!==l?(m=(0,g.jsx)(j.ContextMenuButton,{"aria-label":f,tooltipProps:l,disabled:G}),r[24]=G,r[25]=f,r[26]=l,r[27]=m):m=r[27],r[28]!==F||r[29]!==s.release||r[30]!==s.versionRevisionId||r[31]!==E||r[32]!==D||r[33]!==t||r[34]!==u?(n=(0,g.jsx)(aB.Menu,{padding:1,children:s.release?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(aK.IntentLink,{intent:j.RELEASES_INTENT,params:{id:(0,j.getReleaseIdFromReleaseDocumentId)(s.release._id)},style:{textDecoration:"none"},children:(0,g.jsx)(aB.MenuItem,{padding:3,children:(0,g.jsx)(aB.Flex,{align:"center",justify:"flex-start",children:(0,g.jsx)(aB.Text,{size:1,style:{textDecoration:"none"},children:(0,g.jsx)(j.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,g.jsx)(F,{children:b})}},i18nKey:"events.open.release",values:{releaseTitle:s.release.metadata?.title||u("release.placeholder-untitled-release")},t})})})})}),(0,g.jsx)(aB.MenuItem,{onClick:D,children:(0,g.jsx)(aB.Flex,{align:"center",justify:"flex-start",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{components:{VersionBadge:a=>{let{children:b}=a;return(0,g.jsx)(F,{children:b})}},i18nKey:"events.inspect.release",values:{releaseTitle:s.release.metadata?.title||u("release.placeholder-untitled-release")},t})})})})]}):(0,g.jsx)(aB.MenuItem,{onClick:E,disabled:!s.versionRevisionId,children:(0,g.jsx)(aB.Flex,{align:"center",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{components:{VersionBadge:jf},i18nKey:"events.open.draft",t})})})})}),r[28]=F,r[29]=s.release,r[30]=s.versionRevisionId,r[31]=E,r[32]=D,r[33]=t,r[34]=u,r[35]=n):n=r[35];let I=!v.elements?.[f6]||f6;return r[36]===Symbol.for("react.memo_cache_sentinel")?(o=["bottom-end","bottom-start"],r[36]=o):o=r[36],r[37]!==I?(p={portal:I,placement:"bottom",fallbackPlacements:o},r[37]=I,r[38]=p):p=r[38],r[39]!==m||r[40]!==n||r[41]!==p||r[42]!==H?(q=(0,g.jsx)(aA.MenuButton,{id:H,button:m,menu:n,popover:p}),r[39]=m,r[40]=n,r[41]=p,r[42]=H,r[43]=q):q=r[43],q}function jf(a){let{children:b}=a;return(0,g.jsx)(j.VersionInlineBadge,{$tone:"caution",children:b})}let jg=aH.motion.create(aB.Box),jh={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},ji=a=>{let b,c,d,e,f,k,l,m,n,o,p,q,r=(0,h.c)(38),{events:s,hasMoreEvents:t,selectedEventId:u,onLoadMore:v,onSelect:w,listMaxHeight:x,fetchEventChildren:y}=a,z=void 0===x?"calc(100vh - 280px)":x,[A,B]=(0,i.useState)(!1),{t:C}=(0,j.useTranslation)("studio");r[0]!==s||r[1]!==u?(b=()=>{if(u){let a=s.find(a=>a.id===u);if(a&&"parentId"in a&&a.parentId)return new Set([a.parentId])}return new Set},r[0]=s,r[1]=u,r[2]=b):b=r[2];let[D,E]=(0,i.useState)(b);r[3]===Symbol.for("react.memo_cache_sentinel")?(c=new Set,r[3]=c):c=r[3];let[F,G]=(0,i.useState)(c);r[4]!==s||r[5]!==D?(d=s.filter(a=>(0,j.isCreateDocumentVersionEvent)(a)&&a.parentId?s[s.length-1].id===a.id||D.has(a.parentId):!(0,j.isEditDocumentVersionEvent)(a)||!a.parentId||D.has(a.parentId)),r[4]=s,r[5]=D,r[6]=d):d=r[6];let H=d;r[7]!==y?(e=a=>async()=>{let b=a.id,c=!1;E(a=>{let d=new Set(a);return a.has(b)?d.delete(b):(c=!0,d.add(b)),d}),c&&(G(a=>{let c=new Set(a);return c.add(b),c}),await y(a),G(a=>{let c=new Set(a);return c.delete(b),c}))},r[7]=y,r[8]=e):e=r[8];let I=e;r[9]!==w?(f=a=>{w(a)},r[9]=w,r[10]=f):f=r[10];let J=f;r[11]!==D||r[12]!==I?(k=a=>{let b=(0,j.getDocumentVariantType)(a.documentId);return(0,j.isPublishDocumentVersionEvent)(a)&&"published"===b?(0,g.jsx)(je,{event:a}):(0,j.isPublishDocumentVersionEvent)(a)&&"draft"===b&&a.creationEvent||(0,j.isDeleteDocumentVersionEvent)(a)&&a.creationEvent?(0,g.jsx)(fO,{isExpanded:D.has(a.id),onExpand:I(a)}):null},r[11]=D,r[12]=I,r[13]=k):k=r[13];let K=k;r[14]!==H.length||r[15]!==F||r[16]!==J||r[17]!==t||r[18]!==K||r[19]!==u?(l=(a,b)=>{let{activeIndex:c}=b,d=(0,j.isCreateDocumentVersionEvent)(a)&&a.parentId&&F.has(a.parentId),e=c===H.length-1;return d?(0,g.jsx)(jg,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,g.jsx)(aB.Flex,{align:"center",justify:"center",style:{height:57},children:(0,g.jsx)(aB.Spinner,{})})}):(0,g.jsxs)(jg,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in a?jh:void 0,paddingLeft:((0,j.isEditDocumentVersionEvent)(a)||(0,j.isCreateDocumentVersionEvent)(a))&&a.parentId&&!e?4:1,children:[(0,g.jsx)(jd,{event:a,isSelected:a.id===u,onSelect:J,optionsMenu:K(a)}),e&&t&&(0,g.jsx)(j.LoadingBlock,{})]},a.timestamp)},r[14]=H.length,r[15]=F,r[16]=J,r[17]=t,r[18]=K,r[19]=u,r[20]=l):l=r[20];let L=l;if(r[21]===Symbol.for("react.memo_cache_sentinel")?(n=()=>B(!0),m=[],r[21]=m,r[22]=n):(m=r[21],n=r[22]),(0,i.useEffect)(n,m),r[23]!==H||r[24]!==u){let a;r[26]!==u?(a=a=>a.id===u,r[26]=u,r[27]=a):a=r[27],o=H.findIndex(a),r[23]=H,r[24]=u,r[25]=o}else o=r[25];let M=o,N=!M||A;return r[28]!==H||r[29]!==z||r[30]!==v||r[31]!==L||r[32]!==M||r[33]!==C?(p=H.length>0?(0,g.jsx)(fQ,{direction:"column",$maxHeight:z,id:"timeline-list-wrapper",children:(0,g.jsx)(j.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:C("timeline.list.aria-label"),autoFocus:"list",initialIndex:M,initialScrollAlign:"center",itemHeight:57,items:H,onEndReached:v,onEndReachedIndexOffset:20,overscan:5,renderItem:L,wrapAround:!1})}):(0,g.jsxs)(aB.Stack,{padding:3,space:3,children:[(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:C("timeline.error.no-document-history-title")}),(0,g.jsx)(aB.Text,{muted:!0,size:1,children:C("timeline.error.no-document-history-description")})]}),r[28]=H,r[29]=z,r[30]=v,r[31]=L,r[32]=M,r[33]=C,r[34]=p):p=r[34],r[35]!==N||r[36]!==p?(q=(0,g.jsx)(fR,{$visible:N,"data-ui":"timeline",children:p}),r[35]=N,r[36]=p,r[37]=q):q=r[37],q};ji.displayName="EventsTimeline";let jj=(0,aF.styled)(aA.Popover)`
  overflow: hidden;
  overflow: clip;
`,jk={timestamp:{dateStyle:"medium",timeStyle:"short"}};function jl(a){let b,c,d,e,f,k,l,m,o,p,q,r,s,t,u,v,w=(0,h.c)(58),{event:x,events:y,mode:z,placement:A}=a,{setTimelineRange:B}=dh(),[C,D]=(0,i.useState)(!1),[E,F]=(0,i.useState)(null),[G,H]=(0,i.useState)(null),I=(0,aC.useToast)(),{nextCursor:J,loading:K,error:L,findRangeForRevision:M,findRangeForSince:N,loadMoreEvents:O,expandEvent:P}=(0,j.useEvents)(),{t:Q}=(0,j.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(b=()=>{D(!0)},w[0]=b):b=w[0];let R=b;w[1]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{D(!1)},w[1]=c):c=w[1];let S=c;w[2]!==E||w[3]!==C?(d=a=>{C&&("Escape"===a.key||"Tab"===a.key)&&(S(),E?.focus())},w[2]=E,w[3]=C,w[4]=d):d=w[4],(0,aB.useGlobalKeyDown)(d),w[5]!==E||w[6]!==G?(e=()=>[E,G],w[5]=E,w[6]=G,w[7]=e):e=w[7],(0,aB.useClickOutsideEvent)(C&&S,e),w[8]!==M||w[9]!==B||w[10]!==Q||w[11]!==I?(f=a=>{try{(()=>{if((0,j.isDeleteDocumentVersionEvent)(a)||(0,j.isDeleteDocumentGroupEvent)(a)||(0,j.isUnpublishDocumentEvent)(a)||(0,j.isScheduleDocumentVersionEvent)(a)||(0,j.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=M(a?.id);B(b,c),S()})()}catch(a){I.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[8]=M,w[9]=B,w[10]=Q,w[11]=I,w[12]=f):f=w[12];let T=f;w[13]!==N||w[14]!==B||w[15]!==Q||w[16]!==I?(k=a=>{try{let[b,c]=N(a.id);B(b,c),S()}catch(a){I.push({closable:!0,description:a.message,status:"error",title:Q("timeline.error.unable-to-load-revision")})}},w[13]=N,w[14]=B,w[15]=Q,w[16]=I,w[17]=k):k=w[17];let U=k;w[18]!==O||w[19]!==K||w[20]!==J?(l=()=>{!K&&J&&O()},w[18]=O,w[19]=K,w[20]=J,w[21]=l):l=w[21];let V=l;a:{let a;if(L){let a;w[22]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(f4,{}),w[22]=a):a=w[22],m=a;break a}let b=!!J,c=x?.id,d="rev"===z?T:U;w[23]!==y||w[24]!==P||w[25]!==V||w[26]!==c||w[27]!==d||w[28]!==b?(a=(0,g.jsx)(ji,{events:y,fetchEventChildren:P,hasMoreEvents:b,selectedEventId:c,onLoadMore:V,onSelect:d}),w[23]=y,w[24]=P,w[25]=V,w[26]=c,w[27]=d,w[28]=b,w[29]=a):a=w[29],m=a}let W=m;w[30]!==x||w[31]!==Q?(o=x?Q(j.TIMELINE_ITEM_I18N_KEY_MAPPING[x.documentVariantType][x.type],{context:"timestamp",timestamp:new Date(x.timestamp),formatParams:jk}):Q("timeline.latest-revision"),w[30]=x,w[31]=Q,w[32]=o):o=w[32];let X=o;w[33]!==x||w[34]!==y||w[35]!==Q?(p=x?Q(j.TIMELINE_ITEM_I18N_KEY_MAPPING[x.documentVariantType][x.type],{context:"timestamp",timestamp:new Date(x.timestamp),formatParams:jk}):y.length>0?Q("timeline.since-version-missing"):Q("timeline.no-previous-events"),w[33]=x,w[34]=y,w[35]=Q,w[36]=p):p=w[36];let Y="rev"===z?X:p;w[37]!==G?(q={"timeline-menu":G},w[37]=G,w[38]=q):q=w[38];let Z=q,$=C&&W,_=C?"timeline-menu-close-button":"timeline-menu-open-button",aa=K||!y.length,ab=C?S:R;return w[39]===Symbol.for("react.memo_cache_sentinel")?(r={maxWidth:"100%"},w[39]=r):r=w[39],w[40]!==Y||w[41]!==K||w[42]!==Q?(s=K?Q("timeline.loading-history"):Y,w[40]=Y,w[41]=K,w[42]=Q,w[43]=s):s=w[43],w[44]!==C||w[45]!==_||w[46]!==aa||w[47]!==ab||w[48]!==s?(t=(0,g.jsx)(aB.Flex,{width:"fill",children:(0,g.jsx)(aA.Button,{"data-testid":_,disabled:aa,mode:"ghost",onClick:ab,ref:F,selected:C,width:"fill",tooltipProps:null,justify:"space-between",style:r,iconRight:n.ChevronDownIcon,text:s})}),w[44]=C,w[45]=_,w[46]=aa,w[47]=ab,w[48]=s,w[49]=t):t=w[49],w[50]!==C||w[51]!==A||w[52]!==$||w[53]!==t?(u=(0,g.jsx)(jj,{"data-testid":"timeline-menu",constrainSize:!0,content:$,"data-ui":"versionMenu",open:C,placement:A,matchReferenceWidth:!0,portal:!0,ref:H,children:t}),w[50]=C,w[51]=A,w[52]=$,w[53]=t,w[54]=u):u=w[54],w[55]!==Z||w[56]!==u?(v=(0,g.jsx)(aB.PortalProvider,{__unstable_elements:Z,children:u}),w[55]=Z,w[56]=u,w[57]=v):v=w[57],v}let jm=(0,aF.styled)(j.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,jn=(0,aF.styled)(aB.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,jo=(0,aF.styled)(aB.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,jp={diff:null,loading:!0,error:null},jq=()=>{let a,b,c,d,e,f,i,k,m,n,o,p=(0,h.c)(31),{documentId:q,schemaType:r,editState:s,displayed:t}=dh(),{selectedPerspective:u,selectedPerspectiveName:v,selectedReleaseId:w}=(0,j.usePerspective)(),{t:x}=(0,j.useTranslation)(y);p[0]!==t||p[1]!==s?.published?(a=(0,aG.diffInput)((0,aG.wrap)(s?.published??{},{author:""}),(0,aG.wrap)(t??{},{author:""})),p[0]=t,p[1]=s?.published,p[2]=a):a=p[2];let z=a;return(!w||s?.version)&&("drafts"!==u||s?.draft)&&"published"!==v&&t?._rev?(p[3]!==x?(b=x("events.compare-with-published.title"),p[3]=x,p[4]=b):b=p[4],p[5]!==b?(c=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:b}),p[5]=b,p[6]=c):c=p[6],p[7]!==u?(d=(0,j.isReleaseDocument)(u)?u.metadata?.title:"draft",p[7]=u,p[8]=d):d=p[8],p[9]!==d?(e={version:d},p[9]=d,p[10]=e):e=p[10],p[11]!==x||p[12]!==e?(f=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:(0,g.jsx)(j.Translate,{i18nKey:"events.compare-with-published.description",t:x,values:e})}),p[11]=x,p[12]=e,p[13]=f):f=p[13],p[14]!==c||p[15]!==f?(i=(0,g.jsx)(aB.Card,{borderBottom:!0,paddingBottom:3,children:(0,g.jsxs)(aB.Stack,{space:3,paddingTop:1,children:[c,f]})}),p[14]=c,p[15]=f,p[16]=i):i=p[16],p[17]!==t||p[18]!==q||p[19]!==z||p[20]!==r?(k={documentId:q,schemaType:r,rootDiff:z,isComparingCurrent:!0,FieldWrapper:jv,value:t,showFromValue:!0},p[17]=t,p[18]=q,p[19]=z,p[20]=r,p[21]=k):k=p[21],p[22]!==z||p[23]!==r?(m=(0,g.jsx)(aB.Box,{paddingY:1,children:(0,g.jsx)(j.ChangeList,{diff:z,schemaType:r})}),p[22]=z,p[23]=r,p[24]=m):m=p[24],p[25]!==k||p[26]!==m?(n=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:k,children:m}),p[25]=k,p[26]=m,p[27]=n):n=p[27],p[28]!==i||p[29]!==n?(o=(0,g.jsxs)(aB.Stack,{space:2,marginBottom:3,children:[i,n]}),p[28]=i,p[29]=n,p[30]=o):o=p[30],o):null};function jr(a){let b,c,d,e,f,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y=(0,h.c)(83),{showChanges:z}=a,{documentId:A,schemaType:B,timelineError:C,value:D,formState:E}=dh(),[F,G]=(0,i.useState)(null),{events:H,revision:I,sinceRevision:J,getChangesList:K}=(0,j.useEvents)(),L=!I?.revisionId;y[0]!==K?(b=K(),y[0]=K,y[1]=b):b=y[1];let M=b,{diff:N,loading:O,error:P}=(0,aJ.useObservable)(M,jp),{t:Q}=(0,j.useTranslation)("studio");y[2]!==N||y[3]!==A||y[4]!==E?.readOnly||y[5]!==L||y[6]!==B||y[7]!==D?(c=()=>({documentId:A,schemaType:B,FieldWrapper:js,rootDiff:N,isComparingCurrent:L&&!E?.readOnly,value:D,showFromValue:!0}),y[2]=N,y[3]=A,y[4]=E?.readOnly,y[5]=L,y[6]=B,y[7]=D,y[8]=c):c=y[8],y[9]!==c?(d=c(),y[9]=c,y[10]=d):d=y[10];let R=d;a:{let a,b,c;if(!H){let a;y[11]===Symbol.for("react.memo_cache_sentinel")?(a=[null,null],y[11]=a):a=y[11],e=a;break a}y[12]!==H||y[13]!==J?.revisionId?(a=H.find(a=>a.id===J?.revisionId)||null,y[12]=H,y[13]=J?.revisionId,y[14]=a):a=y[14],y[15]!==H||y[16]!==I?.revisionId?(b=H.find(a=>a.id===I?.revisionId)||H[0],y[15]=H,y[16]=I?.revisionId,y[17]=b):b=y[17],y[18]!==a||y[19]!==b?(c=[a,b],y[18]=a,y[19]=b,y[20]=c):c=y[20],e=c}let[S,T]=e;b:{let a;if(!T){let a;y[21]!==H?(a=H.slice(1),y[21]=H,y[22]=a):a=y[22],f=a;break b}if(y[23]!==H||y[24]!==T){let b;y[26]!==T?(b=a=>"parentId"in T&&"parentId"in a&&a.parentId===T.parentId||"parentId"in a&&T.id===a.parentId?{...a,parentId:void 0}:a,y[26]=T,y[27]=b):b=y[27],a=H.slice(H.indexOf(T)+1).map(b),y[23]=H,y[24]=T,y[25]=a}else a=y[25];f=a}let U=f;if(!H.length){let a,b,c,d,e;return y[28]!==Q?(a=Q("timeline.error.no-document-history-title"),y[28]=Q,y[29]=a):a=y[29],y[30]!==a?(b=(0,g.jsx)(aB.Text,{size:1,weight:"medium",children:a}),y[30]=a,y[31]=b):b=y[31],y[32]!==Q?(c=Q("timeline.error.no-document-history-description"),y[32]=Q,y[33]=c):c=y[33],y[34]!==c?(d=(0,g.jsx)(aB.Text,{muted:!0,size:1,children:c}),y[34]=c,y[35]=d):d=y[35],y[36]!==b||y[37]!==d?(e=(0,g.jsx)(aB.Box,{paddingX:2,children:(0,g.jsxs)(aB.Stack,{padding:3,space:3,children:[b,d]})}),y[36]=b,y[37]=d,y[38]=e):e=y[38],e}y[39]===Symbol.for("react.memo_cache_sentinel")?(k={position:"relative"},y[39]=k):k=y[39],y[40]!==Q?(l=Q("changes.inspector.from-label"),y[40]=Q,y[41]=l):l=y[41],y[42]!==l?(m=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:l}),y[42]=l,y[43]=m):m=y[43];let V=S||null;y[44]!==U||y[45]!==V?(n=(0,g.jsx)(jl,{event:V,events:U,mode:"since",placement:"bottom-start"}),y[44]=U,y[45]=V,y[46]=n):n=y[46],y[47]!==Q?(o=Q("changes.inspector.to-label"),y[47]=Q,y[48]=o):o=y[48],y[49]!==o?(p=(0,g.jsx)(aB.Text,{size:1,muted:!0,children:o}),y[49]=o,y[50]=p):p=y[50];let W=T||null;return y[51]!==H||y[52]!==W?(q=(0,g.jsx)(jl,{event:W,events:H,mode:"rev",placement:"bottom-end"}),y[51]=H,y[52]=W,y[53]=q):q=y[53],y[54]!==n||y[55]!==p||y[56]!==q||y[57]!==m?(r=(0,g.jsxs)(jn,{paddingX:2,paddingBottom:2,children:[m,n,p,q]}),y[54]=n,y[55]=p,y[56]=q,y[57]=m,y[58]=r):r=y[58],y[59]!==O||y[60]!==Q?(s=O&&(0,g.jsx)(aH.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,g.jsxs)(jo,{justify:"center",align:"center",gap:2,children:[(0,g.jsx)(aB.Text,{muted:!0,size:0,children:Q("changes.loading-changes")}),(0,g.jsx)(aB.Spinner,{size:0})]})}),y[59]=O,y[60]=Q,y[61]=s):s=y[61],y[62]!==r||y[63]!==s?(t=(0,g.jsxs)(aB.Box,{padding:3,style:k,children:[r,s]}),y[62]=r,y[63]=s,y[64]=t):t=y[64],y[65]!==P||y[66]!==R||y[67]!==I?.loading||y[68]!==B||y[69]!==z||y[70]!==S||y[71]!==J?.loading||y[72]!==C||y[73]!==T?.id?(u=z&&(0,g.jsx)(jt,{documentContext:R,error:C||P,loading:I?.loading||J?.loading||!1,schemaType:B,sameRevisionSelected:S?.id===T?.id,sinceEvent:S}),y[65]=P,y[66]=R,y[67]=I?.loading,y[68]=B,y[69]=z,y[70]=S,y[71]=J?.loading,y[72]=C,y[73]=T?.id,y[74]=u):u=y[74],y[75]!==u?(v=(0,g.jsx)(jm,{"data-ui":"Scroller",ref:G,children:(0,g.jsx)(aB.Box,{flex:1,paddingX:3,height:"fill",children:u})}),y[75]=u,y[76]=v):v=y[76],y[77]!==F||y[78]!==v?(w=(0,g.jsx)(aB.Card,{flex:1,paddingX:2,paddingY:2,children:(0,g.jsx)(aB.BoundaryElementProvider,{element:F,children:v})}),y[77]=F,y[78]=v,y[79]=w):w=y[79],y[80]!==t||y[81]!==w?(x=(0,g.jsxs)(aB.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[t,w]}),y[80]=t,y[81]=w,y[82]=x):x=y[82],x}function js(a){return a.path.length>0?(0,g.jsx)(j.ChangeFieldWrapper,{...a}):a.children}function jt(a){let b,c,d=(0,h.c)(15),{error:e,documentContext:f,loading:i,schemaType:k,sameRevisionSelected:m,sinceEvent:n}=a;if(e){let a,b,c;return d[0]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(jq,{}),d[0]=a):a=d[0],d[1]!==e||d[2]!==n?.type?(b=n?.type!=="historyCleared"&&(0,g.jsx)(j.ChangesError,{error:e}),d[1]=e,d[2]=n?.type,d[3]=b):b=d[3],d[4]!==b?(c=(0,g.jsxs)(g.Fragment,{children:[a,b]}),d[4]=b,d[5]=c):c=d[5],c}if(i){let a;return d[6]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(j.LoadingBlock,{showText:!0}),d[6]=a):a=d[6],a}if(m){let a;return d[7]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(ju,{}),d[7]=a):a=d[7],a}if(!f.rootDiff){let a;return d[8]===Symbol.for("react.memo_cache_sentinel")?(a=(0,g.jsx)(aH.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,g.jsx)(j.NoChanges,{})}),d[8]=a):a=d[8],a}return d[9]!==f.rootDiff||d[10]!==k?(b=(0,g.jsx)(aB.Box,{paddingY:1,children:(0,g.jsx)(j.ChangeList,{diff:f.rootDiff,schemaType:k})}),d[9]=f.rootDiff,d[10]=k,d[11]=b):b=d[11],d[12]!==f||d[13]!==b?(c=(0,g.jsx)(l.DocumentChangeContext.Provider,{value:f,children:b}),d[12]=f,d[13]=b,d[14]=c):c=d[14],c}function ju(){let a,b,c,d,e,f,i,k=(0,h.c)(12),{t:l}=(0,j.useTranslation)("");return k[0]===Symbol.for("react.memo_cache_sentinel")?(a={opacity:1},b={opacity:0},c={delay:.2,duration:.2},k[0]=a,k[1]=b,k[2]=c):(a=k[0],b=k[1],c=k[2]),k[3]!==l?(d=l("changes.same-revision-selected-title"),k[3]=l,k[4]=d):d=k[4],k[5]!==d?(e=(0,g.jsx)(aB.Text,{size:1,weight:"medium",as:"h3",children:d}),k[5]=d,k[6]=e):e=k[6],k[7]!==l?(f=(0,g.jsx)(aB.Text,{as:"p",size:1,muted:!0,children:(0,g.jsx)(j.Translate,{i18nKey:"changes.same-revision-selected-description",t:l})}),k[7]=l,k[8]=f):f=k[8],k[9]!==e||k[10]!==f?(i=(0,g.jsx)(aH.motion.div,{animate:a,initial:b,transition:c,children:(0,g.jsxs)(aB.Stack,{space:3,paddingTop:2,children:[e,f]})}),k[9]=e,k[10]=f,k[11]=i):i=k[11],i}function jv(a){return a.children}let jw=(0,aF.styled)(j.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function jx(a){let b,c,d,e=(0,h.c)(21),{showList:f}=a,[k,l]=(0,i.useState)(null),[m,n]=(0,i.useState)(0),{setTimelineRange:o}=dh();e[0]!==m?(b=a=>{!m&&a&&(n(a.clientHeight?a.clientHeight-1:0),l(a))},e[0]=m,e[1]=b):b=e[1];let p=b,{events:q,nextCursor:r,loading:s,error:t,revision:u,loadMoreEvents:v,findRangeForRevision:w,expandEvent:x}=(0,j.useEvents)(),{t:y}=(0,j.useTranslation)("studio"),z=(0,aC.useToast)();e[2]!==w||e[3]!==o||e[4]!==y||e[5]!==z?(c=a=>{try{(()=>{if((0,j.isDeleteDocumentVersionEvent)(a)||(0,j.isDeleteDocumentGroupEvent)(a)||(0,j.isUnpublishDocumentEvent)(a)||(0,j.isScheduleDocumentVersionEvent)(a)||(0,j.isUnscheduleDocumentVersionEvent)(a))return console.error("Event is not selectable");let[b,c]=w(a.id);o(b,c)})()}catch(a){z.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},e[2]=w,e[3]=o,e[4]=y,e[5]=z,e[6]=c):c=e[6];let A=c,B=s&&!q.length;return e[7]!==t||e[8]!==q||e[9]!==x||e[10]!==p||e[11]!==B||e[12]!==m||e[13]!==v||e[14]!==s||e[15]!==r||e[16]!==u?.revisionId||e[17]!==k||e[18]!==A||e[19]!==f?(d=(0,g.jsx)(aB.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(aB.Card,{flex:1,padding:2,paddingTop:0,children:t?(0,g.jsx)(f4,{}):(0,g.jsx)(aB.BoundaryElementProvider,{element:k,children:(0,g.jsxs)(jw,{"data-ui":"Scroller",ref:p,children:[m&&f&&!B?(0,g.jsx)(ji,{events:q,fetchEventChildren:x,hasMoreEvents:!!r,selectedEventId:u?.revisionId||q[0]?.id,onLoadMore:v,onSelect:A,listMaxHeight:`${m}px`}):null,s&&(0,g.jsx)(j.LoadingBlock,{})]})})})}),e[7]=t,e[8]=q,e[9]=x,e[10]=p,e[11]=B,e[12]=m,e[13]=v,e[14]=s,e[15]=r,e[16]=u?.revisionId,e[17]=k,e[18]=A,e[19]=f,e[20]=d):d=e[20],d}let jy=(0,aF.styled)(j.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function jz(a){let b,c,d,e,f=(0,h.c)(20),{showList:k}=a,{timelineError:l,setTimelineRange:m,timelineStore:n}=dh(),{selectedReleaseId:o}=(0,j.usePerspective)(),[p,q]=(0,i.useState)(null),[r,s]=(0,i.useState)(0);f[0]===Symbol.for("react.memo_cache_sentinel")?(b=a=>{a?.clientHeight&&(s(a.clientHeight-1),q(a))},f[0]=b):b=f[0];let t=b,u=(0,j.useTimelineSelector)(n,jD),v=(0,j.useTimelineSelector)(n,jC),w=(0,j.useTimelineSelector)(n,jB),x=(0,j.useTimelineSelector)(n,jA),{t:y}=(0,j.useTranslation)("studio"),z=(0,aC.useToast)();f[1]!==m||f[2]!==y||f[3]!==n||f[4]!==z?(c=a=>{try{(()=>{let[b,c]=n?.findRangeForRev(a)||[null,null];m(b,c)})()}catch(a){z.push({closable:!0,description:a.message,status:"error",title:y("timeline.error.unable-to-load-revision")})}},f[1]=m,f[2]=y,f[3]=n,f[4]=z,f[5]=c):c=f[5];let A=c;f[6]!==x||f[7]!==n?(d=()=>{x||n?.loadMore()},f[6]=x,f[7]=n,f[8]=d):d=f[8];let B=d;return f[9]!==u||f[10]!==B||f[11]!==w||f[12]!==r||f[13]!==v||f[14]!==p||f[15]!==A||f[16]!==o||f[17]!==k||f[18]!==l?(e=(0,g.jsx)(aB.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,g.jsx)(aB.Card,{flex:1,padding:2,paddingTop:0,children:l||o?(0,g.jsx)(f4,{versionError:!!o}):(0,g.jsx)(aB.BoundaryElementProvider,{element:p,children:(0,g.jsx)(jy,{"data-ui":"Scroller",ref:t,children:r&&k?(0,g.jsx)(f3,{chunks:u,hasMoreChunks:w,lastChunk:v,onLoadMore:B,onSelect:A,listMaxHeight:`${r}px`}):null})})})}),f[9]=u,f[10]=B,f[11]=w,f[12]=r,f[13]=v,f[14]=p,f[15]=A,f[16]=o,f[17]=k,f[18]=l,f[19]=e):e=f[19],e}function jA(a){return a.isLoading}function jB(a){return a.hasMoreChunks}function jC(a){return a.realRevChunk}function jD(a){return a.chunks}let jE=(0,aF.styled)(aB.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,jF=["history","review"],jG={error:n.ErrorOutlineIcon,warning:n.WarningOutlineIcon,info:n.InfoOutlineIcon},jH={error:"critical",warning:"caution",info:"primary"};function jI(a){let b,c,d,e,f=(0,h.c)(17),{marker:j,onOpen:k,schemaType:l,value:m}=a;f[0]!==j.path||f[1]!==k?(b=()=>k(j.path),f[0]=j.path,f[1]=k,f[2]=b):b=f[2];let n=b,[o,p]=(0,i.useState)(null),q=jG[j.level];return f[3]!==o?(c=o&&(0,g.jsx)(aB.Card,{padding:3,radius:2,tone:"critical",children:(0,g.jsx)(aB.Text,{size:1,children:o.error.message})}),f[3]=o,f[4]=c):c=f[4],f[5]!==q||f[6]!==o||f[7]!==n||f[8]!==j.level||f[9]!==j.message||f[10]!==j.path||f[11]!==l||f[12]!==m?(d=!o&&(0,g.jsx)(aB.Card,{__unstable_focusRing:!0,as:"button",onClick:n,padding:3,radius:2,tone:jH[j.level],children:(0,g.jsxs)(aB.Flex,{align:"flex-start",gap:3,children:[(0,g.jsx)(aB.Box,{flex:"none",children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(q,{})})}),(0,g.jsxs)(aB.Stack,{flex:1,space:2,children:[(0,g.jsx)(jJ,{path:j.path,schemaType:l,value:m}),(0,g.jsx)(aB.Text,{muted:!0,size:1,children:j.message})]})]})}),f[5]=q,f[6]=o,f[7]=n,f[8]=j.level,f[9]=j.message,f[10]=j.path,f[11]=l,f[12]=m,f[13]=d):d=f[13],f[14]!==c||f[15]!==d?(e=(0,g.jsxs)(aA.ErrorBoundary,{onCatch:p,children:[c,d]}),f[14]=c,f[15]=d,f[16]=e):e=f[16],e}function jJ(a){let b,c,d,e=(0,h.c)(8),{path:f,schemaType:i,value:k}=a;a:{try{let a;e[0]!==f||e[1]!==i||e[2]!==k?(a=function(a){let{path:b,schemaType:c,value:d}=a,e=[],f=c,g=d;for(let a of b){if("string"==typeof a){if(!(0,j.isRecord)(g)&&void 0!==g)throw Error(`Parent value is not an object, cannot get path segment: .${a}`);if("object"!==f.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${a}`);g=g?.[a];let b=f.fields.find(b=>b.name===a);if(!b)return e.push({name:a}),e;f=b.type,e.push(f);continue}if("number"==typeof a){if(!(0,j.isArray)(g)&&void 0!==g)throw Error(`Parent value is not an array, cannot get path segment: [${a}]`);if("array"!==f.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${a}]`);g=g?.[a];let b=f.of.find(a=>"string"==typeof g?"string"===a.jsonType:"number"==typeof g?"number"===a.jsonType:"boolean"==typeof g?"boolean"===a.jsonType:!!(0,j.isRecord)(g)&&a.name===g?._type);if(!b)throw Error(`Item type not found: [${a}]`);f=b,e.push(f);continue}if((0,j.isRecord)(a)&&a._key){if(typeof g>"u")return e;if(!(0,j.isArray)(g))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${a}]`);if("array"!==f.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${a}`);if(typeof(g=(g??[]).find(b=>(0,j.isRecord)(b)&&b._key===a._key))>"u")return e;if(!(0,j.isRecord)(g))throw Error(`Array item not found: [_key == ${a._key}]`);let b=f.of.find(a=>(0,j.isRecord)(g)&&a.name===g?._type);if(!b)throw Error(`Array item type not found: .${g?._type}`);f=b,e.push(f);continue}throw Error(`Invalid path segment: ${JSON.stringify(a)}`)}return e}({path:f,schemaType:i,value:k}),e[0]=f,e[1]=i,e[2]=k,e[3]=a):a=e[3],b=a;break a}catch(a){console.error(a)}b=null}let l=b;return l?.length?(e[4]!==l?(c=l.map(jK),e[4]=l,e[5]=c):c=e[5],e[6]!==c?(d=(0,g.jsx)(aB.Text,{size:1,children:c}),e[6]=c,e[7]=d):d=e[7],d):null}function jK(a,b){return(0,g.jsxs)(i.Fragment,{children:[b>0&&(0,g.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,g.jsx)("span",{style:{fontWeight:500},children:a.title||a.name})]},b)}function jL(a){return{level:a.level,message:a.message,path:a.path}}let jM={},jN=aK.route.create("/",[aK.route.intents("/intent"),aK.route.create("/edit/:type/:editDocumentId",[aK.route.create({path:"/:params",transform:{params:{toState:function(a){try{return JSON.parse(decodeURIComponent(a))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(a){return JSON.stringify(a)}}}})]),aK.route.create({path:"/:panes",children:[aK.route.create("/:action",aK.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(a){var b;return -1!==(b=decodeURIComponent(a)).indexOf(",{")?function(a){let b=[],c=a;for(;c.length;){let[a,d,e]=c.match(jO)||[];if(!a){c=c.slice(1);continue}let f=e&&function(a){try{return JSON.parse(a)}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(e);b.push({id:d,payload:f}),c=c.slice(a.length)}return[b]}(b):b.split(";").map(a=>{let[b,...c]=a.split("|").map(a=>{let b,[c,...d]=a.split(",");return b={id:c,params:jM,payload:void 0},d.reduce((a,b)=>{if(/^[a-z0-9]+=[^=]+/i.test(b)){let c=b.slice(0,b.indexOf("=")),d=b.slice(c.length+1);a.params={...a.params,[decodeURIComponent(c)]:decodeURIComponent(d)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(b)?a.payload=function(a){try{return a?(0,aK.decodeJsonParams)(a):void 0}catch(a){console.warn(`Failed to parse parameters: ${a.message}`);return}}(b):console.warn("Unknown pane segment: %s - skipping",b);return a},b)});return[b,...c.map(a=>({...b,...a,id:a.id||b.id,params:{...(0,aP.omit)(b.params,jP),...a.params},payload:a.payload||b.payload}))]}).filter(a=>a.length>0)},toPath:function(a){return(a||[]).map(a=>a.map(jR).join("|")).map(encodeURIComponent).join(";")}}}})]),jO=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,jP=["view","since","rev","inspect","comment"],jQ=Boolean;function jR(a,b,c){let{payload:d,params:e={},id:f}=a,[g]=c,h=a===g,i=0!==b&&f===g.id,j=typeof d>"u"?void 0:(0,aK.encodeJsonParams)(d),k=Object.entries(e).filter(a=>{let[b,c]=a;return!!c&&(!!h||!(c===g.params?.[b]&&!jP.includes(b)))}).map(([a,b])=>`${encodeURIComponent(a)}=${encodeURIComponent(b)}`);return[i?"":f].concat([k.length>0&&k,j].filter(jQ).flat()).join(",")||","}let jS=[fz,fB,fq,fs,fn,eO],jT=["delete","discardChanges"],jU=[i_],jV=[{name:"sanity/structure/validation",component:function(a){let b,c,d,e,f,i,k,l=(0,h.c)(23),{onClose:m}=a,{onFocus:n,onPathOpen:o,schemaType:p,validation:q,value:r,editState:s}=dh(),{t}=(0,j.useTranslation)("validation");l[0]!==n||l[1]!==o?(b=a=>{o(a),n(a)},l[0]=n,l[1]=o,l[2]=b):b=l[2];let u=b;l[3]!==s?(c=s&&s.version&&(0,j.isGoingToUnpublish)(s.version),l[3]=s,l[4]=c):c=l[4];let v=c;return l[5]!==t?(d=t("panel.close-button-aria-label"),l[5]=t,l[6]=d):d=l[6],l[7]!==t?(e=t("panel.title"),l[7]=t,l[8]=e):e=l[8],l[9]!==m||l[10]!==d||l[11]!==e?(f=(0,g.jsx)(dB,{as:"header",closeButtonLabel:d,flex:"none",onClose:m,title:e}),l[9]=m,l[10]=d,l[11]=e,l[12]=f):f=l[12],l[13]!==u||l[14]!==v||l[15]!==p||l[16]!==t||l[17]!==q||l[18]!==r?(i=(0,g.jsx)(aB.Card,{flex:1,overflow:"auto",padding:3,children:v?(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsx)(aB.Text,{muted:!0,size:1,children:t("panel.unpublish-message")})}):(0,g.jsxs)(g.Fragment,{children:[0===q.length&&(0,g.jsx)(aB.Box,{padding:2,children:(0,g.jsx)(aB.Text,{muted:!0,size:1,children:t("panel.no-errors-message")})}),q.length>0&&(0,g.jsx)(aB.Stack,{space:2,children:q.map((a,b)=>(0,g.jsx)(jI,{marker:a,onOpen:u,schemaType:p,value:r},b))})]})}),l[13]=u,l[14]=v,l[15]=p,l[16]=t,l[17]=q,l[18]=r,l[19]=i):i=l[19],l[20]!==f||l[21]!==i?(k=(0,g.jsxs)(aB.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[f,i]}),l[20]=f,l[21]=i,l[22]=k):k=l[22],k},useMenuItem:function(a){let b,c,d,e,f,g,i=(0,h.c)(11),{documentType:k}=a,{t:l}=(0,j.useTranslation)("validation"),{selectedReleaseId:m}=(0,j.usePerspective)(),{value:o}=dh(),{validation:p}=(0,j.useValidationStatus)(o._id,k,!m);i[0]!==p?(b=p.map(jL),i[0]=p,i[1]=b):b=i[1];let q=b,r=q.some(aD.isValidationError),s=q.some(aD.isValidationWarning);i[2]!==o?(c=(0,j.isGoingToUnpublish)(o),i[2]=o,i[3]=c):c=i[3];let t=c;a:{if(r){d=n.ErrorOutlineIcon;break a}if(s){d=n.WarningOutlineIcon;break a}d=n.CheckmarkCircleIcon}let u=d;b:{if(r){e="critical";break b}if(s){e="caution";break b}e="positive"}let v=e,w=0===q.length||t;return i[4]!==l?(f=l("panel.title"),i[4]=l,i[5]=f):f=i[5],i[6]!==u||i[7]!==w||i[8]!==f||i[9]!==v?(g={hidden:w,icon:u,title:f,tone:v,showAsAction:!0},i[6]=u,i[7]=w,i[8]=f,i[9]=v,i[10]=g):g=i[10],g}},{name:dt,useMenuItem:()=>{let{features:a}=dp(),{t:b}=(0,j.useTranslation)();return{hidden:!a.reviewChanges,icon:n.RestoreIcon,title:b("changes.title")}},component:function(a){let b,c,d,e,f,k,l,m,o,p,q,r,s,t,u,v,w,x,z,A,B,C,D,E,F,G,H,I=(0,h.c)(72),{params:J,setParams:K}=d9(),L=(0,j.useSource)(),[M,N]=(0,i.useState)(null),{t:O}=(0,j.useTranslation)(y),P=J?.inspect===dt,{selectedPerspective:Q}=(0,j.usePerspective)();I[0]!==J?(b=(H=J?.changesInspectorTab)&&jF.includes(H)?J.changesInspectorTab:jF[0],I[0]=J,I[1]=b):b=I[1];let R=b;I[2]!==J||I[3]!==K?(c=a=>K({...J,changesInspectorTab:a,since:"history"===a?void 0:J?.since}),I[2]=J,I[3]=K,I[4]=c):c=I[4];let S=c,T=P?"":void 0;I[5]!==O?(d=O("changes.tab.history"),I[5]=O,I[6]=d):d=I[6],I[7]!==S?(e=()=>S("history"),I[7]=S,I[8]=e):e=I[8];let U="history"===R;I[9]!==d||I[10]!==e||I[11]!==U?(f=(0,g.jsx)(aA.Tab,{"aria-controls":"history-panel",id:"history-tab",label:d,onClick:e,selected:U}),I[9]=d,I[10]=e,I[11]=U,I[12]=f):f=I[12],I[13]!==O?(k=O("changes.tab.review-changes"),I[13]=O,I[14]=k):k=I[14],I[15]!==S?(l=()=>S("review"),I[15]=S,I[16]=l):l=I[16];let V="review"===R;I[17]!==k||I[18]!==l||I[19]!==V?(m=(0,g.jsx)(aA.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:k,onClick:l,selected:V}),I[17]=k,I[18]=l,I[19]=V,I[20]=m):m=I[20],I[21]!==m||I[22]!==f?(o=(0,g.jsxs)(aB.TabList,{space:1,flex:1,children:[f,m]}),I[21]=m,I[22]=f,I[23]=o):o=I[23],I[24]!==O?(p=O("changes.action.close-label"),I[24]=O,I[25]=p):p=I[25];let W=a.onClose;I[26]!==O?(q=O("document-inspector.close-button.tooltip"),I[26]=O,I[27]=q):q=I[27],I[28]!==q?(r={content:q},I[28]=q,I[29]=r):r=I[29],I[30]!==a.onClose||I[31]!==p||I[32]!==r?(s=(0,g.jsx)(aA.Button,{"aria-label":p,icon:n.CloseIcon,mode:"bleed",onClick:W,tooltipProps:r}),I[30]=a.onClose,I[31]=p,I[32]=r,I[33]=s):s=I[33],I[34]!==o||I[35]!==s?(t=(0,g.jsx)(aB.Card,{paddingBottom:1,children:(0,g.jsxs)(aB.Flex,{align:"center",padding:3,gap:2,children:[o,s]})}),I[34]=o,I[35]=s,I[36]=t):t=I[36],I[37]!==O?(u=(0,g.jsx)(aB.Box,{flex:1,padding:1,children:(0,g.jsx)(aB.Text,{size:1,children:(0,g.jsx)(j.Translate,{t:O,i18nKey:"changes.banner.tooltip"})})}),I[37]=O,I[38]=u):u=I[38],I[39]===Symbol.for("react.memo_cache_sentinel")?(v=(0,g.jsx)(aB.Text,{size:0,muted:!0,children:(0,g.jsx)(n.InfoOutlineIcon,{fontSize:1})}),I[39]=v):v=I[39],I[40]!==M||I[41]!==u?(w=(0,g.jsx)(aA.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:M,content:u,children:v}),I[40]=M,I[41]=u,I[42]=w):w=I[42],I[43]!==Q||I[44]!==O?(x=function(a,{t:b}){return(0,j.isReleaseDocument)(a)?a.metadata.title??a._id:"drafts"===a?b("compare-versions.status.draft"):"published"===a?b("compare-versions.status.published"):a}(Q,{t:O}),I[43]=Q,I[44]=O,I[45]=x):x=I[45],I[46]!==x?(z={perspective:x},I[46]=x,I[47]=z):z=I[47],I[48]!==O||I[49]!==z?(A=(0,g.jsx)(aB.Text,{size:0,muted:!0,children:(0,g.jsx)(j.Translate,{t:O,values:z,i18nKey:"changes.banner.description"})}),I[48]=O,I[49]=z,I[50]=A):A=I[50],I[51]!==w||I[52]!==A?(B=(0,g.jsx)(aB.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,g.jsxs)(aB.Flex,{gap:2,align:"flex-start",children:[w,A]})}),I[51]=w,I[52]=A,I[53]=B):B=I[53];let X="history"!==R;I[54]!==R||I[55]!==L.beta?.eventsAPI?.documents?(C=L.beta?.eventsAPI?.documents?(0,g.jsx)(jx,{showList:"history"===R}):(0,g.jsx)(jz,{showList:"history"===R}),I[54]=R,I[55]=L.beta?.eventsAPI?.documents,I[56]=C):C=I[56],I[57]!==X||I[58]!==C?(D=(0,g.jsx)(aC.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:X,id:"history-panel",children:C}),I[57]=X,I[58]=C,I[59]=D):D=I[59];let Y="review"!==R;return I[60]!==R||I[61]!==L.beta?.eventsAPI?.documents?(E=L.beta?.eventsAPI?.documents?(0,g.jsx)(g.Fragment,{children:"review"===R?(0,g.jsx)(jr,{showChanges:"review"===R}):null}):(0,g.jsx)(i5,{showChanges:"review"===R}),I[60]=R,I[61]=L.beta?.eventsAPI?.documents,I[62]=E):E=I[62],I[63]!==Y||I[64]!==E?(F=(0,g.jsx)(aC.TabPanel,{"aria-labelledby":"review-tab",hidden:Y,id:"review-panel",height:"fill",children:E}),I[63]=Y,I[64]=E,I[65]=F):F=I[65],I[66]!==t||I[67]!==T||I[68]!==B||I[69]!==D||I[70]!==F?(G=(0,g.jsxs)(jE,{direction:"column",padding:0,height:"fill","data-ready":T,ref:N,children:[t,B,D,F]}),I[66]=t,I[67]=T,I[68]=B,I[69]=D,I[70]=F,I[71]=G):G=I[71],G},onClose:({params:a})=>({params:{...a,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:a})=>({params:{...a,since:"@lastPublished"}})}],jW=(0,j.definePlugin)(b=>{let c=b?.icon||n.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(a,b)=>{let c=Array.from(new Set([...a,...jS])),d=c.filter(a=>jT.includes(a.action)),e=c.filter(a=>!jT.includes(a.action));return"published"===b.versionType?[...[...e].sort((a,b)=>"unpublish"===a.action?-1:+("unpublish"===b.action)),...d]:[...e,...d]},badges:a=>Array.from(new Set([...a,...jU])),inspectors:a=>Array.from(new Set([...a,...jV]))},tools:[{name:b?.name||"structure",title:b?.title||"Structure",icon:c,component:(0,i.lazy)(()=>a.A(694330)),canHandleIntent:(a,b)=>{var c;return"create"===a?function(a){if(!("type"in a))return!1;let b={};return"mode"in a&&(b.mode="structure"===a.mode),"template"in a&&(b.template=!0),!Object.keys(b).length||b}(b):"edit"===a&&"id"in(c=b)&&(!("mode"in c)||{mode:"structure"===c.mode})},getIntentState:i2,controlsDocumentTitle:!0,options:b,router:jN,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[z]}}});var jX=Object.freeze({__proto__:null,default:g8}),jY=Object.freeze({__proto__:null,default:i$});a.s(["BackLink",()=>hc,"ConfirmDeleteDialogContainer",()=>hL,"DocumentInspectorHeader",()=>dB,"DocumentPane",()=>g8,"DocumentPaneProviderWrapper",()=>g7,"LOADING_PANE",()=>eA,"LoadingPane",()=>dg,"Pane",()=>cJ,"PaneContainer",()=>i$,"PaneContent",()=>cM,"PaneHeader",()=>c2,"PaneHeaderActions",()=>hU,"PaneItem",()=>h0,"PaneLayout",()=>da,"StructureToolPane",()=>hl,"_DEBUG",()=>!1,"setActivePanes",()=>i1,"structureTool",()=>jW,"useDocumentLastRev",()=>gQ,"useDocumentPane",()=>dh,"useDocumentTitle",()=>dx,"usePane",()=>cL,"usePaneLayout",()=>cF,"usePaneRouter",()=>d9,"useStructureTool",()=>dp],416905)}];

//# sourceMappingURL=node_modules_85b461e7._.js.map