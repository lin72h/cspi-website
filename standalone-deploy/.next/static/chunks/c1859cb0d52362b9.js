(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,766482,(e,t,n)=>{function i(e,t,n){function i(){var d=Date.now()-s;d<t&&d>=0?l=setTimeout(i,t-d):(l=null,n||(a=e.apply(o,r),o=r=null))}null==t&&(t=100);var l,r,o,s,a,d=function(){o=this,r=arguments,s=Date.now();var d=n&&!l;return l||(l=setTimeout(i,t)),d&&(a=e.apply(o,r),o=r=null),a};return d.clear=function(){l&&(clearTimeout(l),l=null)},d.flush=function(){l&&(a=e.apply(o,r),o=r=null,clearTimeout(l),l=null)},d}i.debounce=i,t.exports=i},274789,(e,t,n)=>{"use strict";t.exports=function(e){for(var t=function(e){var t,n=(e.length+8>>6)+1,i=Array(16*n);for(t=0;t<16*n;t++)i[t]=0;for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(8*e.length+t)%4*8;i[t>>2]|=128<<(8*e.length+t)%4*8;var l=8*e.length;return i[16*n-2]=255&l,i[16*n-2]|=(l>>>8&255)<<8,i[16*n-2]|=(l>>>16&255)<<16,i[16*n-2]|=(l>>>24&255)<<24,i}(e),n=0x67452301,i=-0x10325477,l=-0x67452302,r=0x10325476,o=0;o<t.length;o+=16){var d=n,h=i,g=l,f=r;n=c(n,i,l,r,t[o+0],7,-0x28955b88),r=c(r,n,i,l,t[o+1],12,-0x173848aa),l=c(l,r,n,i,t[o+2],17,0x242070db),i=c(i,l,r,n,t[o+3],22,-0x3e423112),n=c(n,i,l,r,t[o+4],7,-0xa83f051),r=c(r,n,i,l,t[o+5],12,0x4787c62a),l=c(l,r,n,i,t[o+6],17,-0x57cfb9ed),i=c(i,l,r,n,t[o+7],22,-0x2b96aff),n=c(n,i,l,r,t[o+8],7,0x698098d8),r=c(r,n,i,l,t[o+9],12,-0x74bb0851),l=c(l,r,n,i,t[o+10],17,-42063),i=c(i,l,r,n,t[o+11],22,-0x76a32842),n=c(n,i,l,r,t[o+12],7,0x6b901122),r=c(r,n,i,l,t[o+13],12,-0x2678e6d),l=c(l,r,n,i,t[o+14],17,-0x5986bc72),i=c(i,l,r,n,t[o+15],22,0x49b40821),n=u(n,i,l,r,t[o+1],5,-0x9e1da9e),r=u(r,n,i,l,t[o+6],9,-0x3fbf4cc0),l=u(l,r,n,i,t[o+11],14,0x265e5a51),i=u(i,l,r,n,t[o+0],20,-0x16493856),n=u(n,i,l,r,t[o+5],5,-0x29d0efa3),r=u(r,n,i,l,t[o+10],9,0x2441453),l=u(l,r,n,i,t[o+15],14,-0x275e197f),i=u(i,l,r,n,t[o+4],20,-0x182c0438),n=u(n,i,l,r,t[o+9],5,0x21e1cde6),r=u(r,n,i,l,t[o+14],9,-0x3cc8f82a),l=u(l,r,n,i,t[o+3],14,-0xb2af279),i=u(i,l,r,n,t[o+8],20,0x455a14ed),n=u(n,i,l,r,t[o+13],5,-0x561c16fb),r=u(r,n,i,l,t[o+2],9,-0x3105c08),l=u(l,r,n,i,t[o+7],14,0x676f02d9),i=u(i,l,r,n,t[o+12],20,-0x72d5b376),n=p(n,i,l,r,t[o+5],4,-378558),r=p(r,n,i,l,t[o+8],11,-0x788e097f),l=p(l,r,n,i,t[o+11],16,0x6d9d6122),i=p(i,l,r,n,t[o+14],23,-0x21ac7f4),n=p(n,i,l,r,t[o+1],4,-0x5b4115bc),r=p(r,n,i,l,t[o+4],11,0x4bdecfa9),l=p(l,r,n,i,t[o+7],16,-0x944b4a0),i=p(i,l,r,n,t[o+10],23,-0x41404390),n=p(n,i,l,r,t[o+13],4,0x289b7ec6),r=p(r,n,i,l,t[o+0],11,-0x155ed806),l=p(l,r,n,i,t[o+3],16,-0x2b10cf7b),i=p(i,l,r,n,t[o+6],23,0x4881d05),n=p(n,i,l,r,t[o+9],4,-0x262b2fc7),r=p(r,n,i,l,t[o+12],11,-0x1924661b),l=p(l,r,n,i,t[o+15],16,0x1fa27cf8),i=p(i,l,r,n,t[o+2],23,-0x3b53a99b),n=m(n,i,l,r,t[o+0],6,-0xbd6ddbc),r=m(r,n,i,l,t[o+7],10,0x432aff97),l=m(l,r,n,i,t[o+14],15,-0x546bdc59),i=m(i,l,r,n,t[o+5],21,-0x36c5fc7),n=m(n,i,l,r,t[o+12],6,0x655b59c3),r=m(r,n,i,l,t[o+3],10,-0x70f3336e),l=m(l,r,n,i,t[o+10],15,-1051523),i=m(i,l,r,n,t[o+1],21,-0x7a7ba22f),n=m(n,i,l,r,t[o+8],6,0x6fa87e4f),r=m(r,n,i,l,t[o+15],10,-0x1d31920),l=m(l,r,n,i,t[o+6],15,-0x5cfebcec),i=m(i,l,r,n,t[o+13],21,0x4e0811a1),n=m(n,i,l,r,t[o+4],6,-0x8ac817e),r=m(r,n,i,l,t[o+11],10,-0x42c50dcb),l=m(l,r,n,i,t[o+2],15,0x2ad7d2bb),i=m(i,l,r,n,t[o+9],21,-0x14792c6f),n=s(n,d),i=s(i,h),l=s(l,g),r=s(r,f)}return a(n)+a(i)+a(l)+a(r)};var i="0123456789abcdef";function l(e,t){return 1&e|1&t|(e>>>1|t>>>1)<<1}function r(e,t){return(e>>>1^t>>>1)<<1|1&e^1&t}function o(e,t){return(e>>>1&t>>>1)<<1|1&e&(1&t)}function s(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function a(e){var t,n="";for(t=0;t<=3;t++)n+=i.charAt(e>>8*t+4&15)+i.charAt(e>>8*t&15);return n}function d(e,t,n,i,l,r){var o;return s((o=s(s(t,e),s(i,r)))<<l|o>>>32-l,n)}function c(e,t,n,i,r,s,a){return d(l(o(t,n),o(~t,i)),e,t,r,s,a)}function u(e,t,n,i,r,s,a){return d(l(o(t,i),o(n,~i)),e,t,r,s,a)}function p(e,t,n,i,l,o,s){return d(r(r(t,n),i),e,t,l,o,s)}function m(e,t,n,i,o,s,a){return d(r(n,l(t,~i)),e,t,o,s,a)}},126047,988942,e=>{"use strict";let t,n,i,l;var r,o=e.i(843476),s=e.i(500932),a=e.i(271645),d=e.i(677160),c=e.i(216024),u=e.i(548837),p=e.i(383066),m=e.i(447912),h=e.i(181625),g=e.i(948253),f=(0,g.default)(function(e,t,n){return t=t.toLowerCase(),e+(n?(0,h.default)(t):t)}),x=e.i(984199),b=(0,g.default)(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),y=e.i(540589),v=e.i(735962),j=e.i(398017),w=e.i(809054),S=e.i(101391);let _="structure",I=(0,d.defineLocaleResourceBundle)({locale:"en-US",namespace:_,resources:()=>e.A(353713)}),C=["_id","_type","_createdAt","_updatedAt","_rev"];function T(e,t,n=!1){return t.map(t=>(function e(t,n,i=!1){let[l,...r]=n;if(!("fields"in t))return"";let o=t.fields.find(e=>e.name===l);if(!o){if(!C.includes(l)){let e=`The current ordering config targeted the nonexistent field "${l}" on schema type "${t.name}". It should be one of ${t.fields.map(e=>e.name).join(", ")}`;if(i)throw Error(e);console.warn(e)}return""}if("to"in o.type&&"reference"===o.type.name){let t=o.type.to;return`${l}->{${t.map(t=>e(t,r)).join(",")}}`}let s=r.length>0&&e(o.type,r),a=s?`{${s}}`:"";return r.length>0?`${l}${a}`:l})(e,t.field.split("."),n)).join(", ")}class R extends Error{constructor(e,t,n,i){super(e),this.name="SerializeError";const l=typeof n>"u"?"<unknown>":`${n}`;this.path=(t||[]).concat(i?`${l} (${i})`:l)}withHelpUrl(e){return this.helpId=e,this}}let P={ID_REQUIRED:"structure-node-id-required",TITLE_REQUIRED:"structure-title-required",FILTER_REQUIRED:"structure-filter-required",INVALID_LIST_ITEM:"structure-invalid-list-item",COMPONENT_REQUIRED:"structure-view-component-required",DOCUMENT_ID_REQUIRED:"structure-document-id-required",DOCUMENT_TYPE_REQUIRED:"structure-document-type-required",SCHEMA_TYPE_REQUIRED:"structure-schema-type-required",SCHEMA_TYPE_NOT_FOUND:"structure-schema-type-not-found",LIST_ITEMS_MUST_BE_ARRAY:"structure-list-items-must-be-array",QUERY_PROVIDED_FOR_FILTER:"structure-query-provided-for-filter",ACTION_OR_INTENT_REQUIRED:"structure-action-or-intent-required",LIST_ITEM_IDS_MUST_BE_UNIQUE:"structure-list-item-ids-must-be-unique",ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE:"structure-action-and-intent-mutually-exclusive",API_VERSION_REQUIRED_FOR_CUSTOM_FILTER:"structure-api-version-required-for-custom-filter"},E={title:"Last edited",i18n:{title:{key:"menu-items.sort-by.last-edited",ns:_}},name:"lastEditedDesc",by:[{field:"_updatedAt",direction:"desc"}]},D=[E,{title:"Created",i18n:{title:{key:"menu-items.sort-by.created",ns:_}},name:"lastCreatedDesc",by:[{field:"_createdAt",direction:"desc"}]}];function k(e,t,n){return e instanceof F?e.serialize({path:n,index:t}):e}class F{constructor(e,t){this._context=e,this.spec=t||{}}action(e){return this.clone({action:e})}getAction(){return this.spec.action}intent(e){return this.clone({intent:e})}getIntent(){return this.spec.intent}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}group(e){return this.clone({group:e})}getGroup(){return this.spec.group}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}params(e){return this.clone({params:e})}getParams(){return this.spec.params}showAsAction(e=!0){return this.clone({showAsAction:!!e})}getShowAsAction(){return this.spec.showAsAction}serialize(e={path:[]}){let{title:t,action:n,intent:i}=this.spec;if(!t){let t="string"==typeof n?`action: "${n}"`:void 0;throw new R("`title` is required for menu item",e.path,e.index,t).withHelpUrl(P.TITLE_REQUIRED)}if(!n&&!i)throw new R(`\`action\` or \`intent\` required for menu item with title ${this.spec.title}`,e.path,e.index,`"${t}"`).withHelpUrl(P.ACTION_OR_INTENT_REQUIRED);if(i&&n)throw new R("cannot set both `action` AND `intent`",e.path,e.index,`"${t}"`).withHelpUrl(P.ACTION_AND_INTENT_MUTUALLY_EXCLUSIVE);return{...this.spec,title:t}}clone(e){let t=new F(this._context);return t.spec={...this.spec,...e},t}}function A(e,{by:t,title:n,i18n:i},l){let r=new F(e).group("sorting").title(e.i18n.t("default-menu-item.fallback-title",{ns:"studio",replace:{title:n}})).icon(m.SortIcon).action("setSortOrder").params({by:t,extendedProjection:l});return i&&(r=r.i18n(i)),r}function L(e,t){let{schema:n}=e,i="string"==typeof t?n.get(t):t;return i&&"orderings"in i?(i.orderings?i.orderings.concat(D):D).map(t=>A(e,t,T(i,t.by))):[]}function V(e,t,n){return e instanceof M?e.serialize({path:n,index:t}):e}class M{constructor(e,t){this._context=e,this._id=t?t.id:"",this._title=t?t.title:"",this._i18n=t?t.i18n:void 0}id(e){return new M(this._context,{id:e,title:this._title,i18n:this._i18n})}getId(){return this._id}title(e){return new M(this._context,{title:e,id:this._id,i18n:this._i18n})}getTitle(){return this._title}i18n(e){return new M(this._context,{i18n:e,id:this._id,title:this._title})}getI18n(){return this._i18n}serialize(e={path:[]}){if(!this._id)throw new R("`id` is required for a menu item group",e.path,e.index,this._title).withHelpUrl(P.ID_REQUIRED);if(!this._title)throw new R("`title` is required for a menu item group",e.path,this._id).withHelpUrl(P.TITLE_REQUIRED);return{id:this._id,title:this._title,i18n:this._i18n}}}let O=/([^A-Za-z0-9-_.])/;function z(e,t,n){if("string"!=typeof e)throw new R(`Structure node id must be of type string, got ${typeof e}`,t,n);let[i]=e.match(O)||[];if(i)throw new R(`Structure node id cannot contain character "${i}"`,t,n);if(e.startsWith("__edit__"))throw new R("Structure node id cannot start with __edit__",t,n);return e}function B(e,t){if(t)return t;let n=f(e);return O.test(n)?f((0,w.default)(e)):n}class N{constructor(e){this.spec={options:{},...e||{}}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:B(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}canHandleIntent(e){return this.clone({canHandleIntent:e})}serialize(e={path:[]}){let{id:t,title:n,child:i,options:l,component:r}=this.spec;if(!t)throw new R("`id` is required for `component` structure item",e.path,e.index).withHelpUrl(P.ID_REQUIRED);if(!r)throw new R("`component` is required for `component` structure item",e.path,e.index).withHelpUrl(P.ID_REQUIRED);return{id:z(t,e.path,e.index),title:n,type:"component",child:i,component:r,canHandleIntent:this.spec.canHandleIntent,options:l||{},menuItems:(this.spec.menuItems||[]).map((t,n)=>k(t,n,e.path)),menuItemGroups:(this.spec.menuItemGroups||[]).map((t,n)=>V(t,n,e.path))}}clone(e){let t=new N;return t.spec={...this.spec,...e},t}}class H{constructor(e){this.spec={id:(0,x.uniqueId)("__divider__"),type:"divider",...e}}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}serialize(){return{...this.spec}}clone(e){let t=new H;return t.spec={...this.spec,...e},t}}async function $(e,t){return await e(d.DEFAULT_STUDIO_CLIENT_OPTIONS).fetch("*[sanity::versionOf($publishedId)][0]._type",{publishedId:(0,c.getPublishedId)(t)},{tag:"structure.resolve-type"})}class U{spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:this.spec.id||b(e)})}getTitle(){return this.spec.title}icon(e){return this.clone({icon:e})}getIcon(){return this.spec.icon}serialize(e={path:[]}){let{id:t,title:n,icon:i}=this.spec;if(!t)throw new R("`id` is required for view item",e.path,e.index).withHelpUrl(P.ID_REQUIRED);if(!n)throw new R("`title` is required for view item",e.path,e.index).withHelpUrl(P.TITLE_REQUIRED);return{id:z(t,e.path,e.index),title:n,icon:i}}}function G(e,t,n){return"function"==typeof e.serialize?e.serialize({path:n,index:t}):e}class q extends U{constructor(e){const t=(e=>(0,d.isRecord)(e)&&"component"===e.type)(e)?{...e}:{options:{}};super(),this.spec=t;const n="function"==typeof e?e:this.spec.component;n&&(this.spec=this.component(n).spec)}component(e){return this.clone({component:e})}getComponent(){return this.spec.component}options(e){return this.clone({options:e})}getOptions(){return this.spec.options||{}}serialize(e={path:[]}){let t=super.serialize(e),n=this.spec.component;if("function"!=typeof n)throw new R("`component` is required and must be a function for `component()` view item",e.path,e.index).withHelpUrl(P.COMPONENT_REQUIRED);return{...t,component:n,options:this.spec.options||{},type:"component"}}clone(e){let t=new q;return t.spec={...this.spec,...e},t}}class W extends U{constructor(e){super(),this.spec={id:"editor",title:"Editor",...e||{}}}serialize(e={path:[]}){return{...super.serialize(e),type:"form"}}clone(e){let t=new W;return t.spec={...this.spec,...e},t}}let K=e=>new W(e),Y=e=>new q(e);var X=Object.freeze({__proto__:null,ComponentViewBuilder:q,FormViewBuilder:W,GenericViewBuilder:U,component:Y,form:K,maybeSerializeView:G});class Q{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:B(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}child(e){return this.clone({child:e})}getChild(){return this.spec.child}documentId(e){let t=this.spec.id||e;return this.clone({id:t,options:{...this.spec.options,id:e}})}getDocumentId(){return this.spec.options?.id}schemaType(e){return this.clone({options:{...this.spec.options,type:"string"==typeof e?e:e.name}})}getSchemaType(){return this.spec.options?.type}initialValueTemplate(e,t){return this.clone({options:{...this.spec.options,template:e,templateParameters:t}})}getInitialValueTemplate(){return this.spec.options?.template}getInitialValueTemplateParameters(){return this.spec.options?.templateParameters}views(e){return this.clone({views:e})}getViews(){return this.spec.views||[]}serialize({path:e=[],index:t,hint:n}={path:[]}){var i;let l,r=e[t||e.length-1],o=this.spec.id||r&&`${r}`||"",s={id:o,type:void 0,template:void 0,templateParameters:void 0,...this.spec.options};if("string"!=typeof o||!o)throw new R("`id` is required for document nodes",e,t,n).withHelpUrl(P.ID_REQUIRED);if(!s||!s.id)throw new R("document id (`id`) is required for document nodes",e,o,n).withHelpUrl(P.DOCUMENT_ID_REQUIRED);if(!s||!s.type)throw new R("document type (`schemaType`) is required for document nodes",e,o,n);let a=(this.spec.views&&this.spec.views.length>0?this.spec.views:[K()]).map((t,n)=>G(t,n,e)),d=a.map(e=>e.id),c=(0,y.uniq)(d.filter((e,t)=>d.includes(e,t+1)));if(c.length>0)throw new R(`document node has views with duplicate IDs: ${c.join(",  ")}`,e,o,n);return{...this.spec,child:this.spec.child||(({resolveDocumentNode:e,getClient:t})=>async(n,{params:i,path:l})=>{let r=i.type,o=l.slice(0,l.length-1),s=l[l.length-1];if(r||(r=await $(t,n)),!r)throw new R("Failed to resolve document, and no type provided in parameters.",o,s);return e({documentId:n,schemaType:r})})(this._context),id:z(o,e,t),type:"document",options:(l={id:(i=s).id||"",type:i.type||"*"},i.template&&(l.template=i.template),i.templateParameters&&(l.templateParameters=i.templateParameters),l),views:a}}clone(e={}){let t=new Q(this._context),n={...this.spec.options,...e.options};return t.spec={...this.spec,...e,options:n},t}}function J(e,t){let n=t?.type?e.resolveDocumentNode({schemaType:t.type}):new Q(e);if(!t)return n;let{id:i,type:l,template:r,templateParameters:o}=t.options;return n=n.id(t.id).documentId(i),l&&(n=n.schemaType(l)),r&&(n=n.initialValueTemplate(r,o)),t.child&&(n=n.child(t.child)),n}function Z({resolveDocumentNode:e,templates:t},n,i){let l=t.find(e=>e.id===n);if(!l)throw Error(`Template with ID "${n}" not defined`);return e({schemaType:l.schemaType}).initialValueTemplate(n,i)}class ee{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e})}getTitle(){return this.spec.title}description(e){return this.clone({description:e})}getDescription(){return this.spec.description}templateId(e){let t=this.spec.id||e;return this.clone({id:t,templateId:e})}getTemplateId(){return this.spec.templateId}parameters(e){return this.clone({parameters:e})}getParameters(){return this.spec.parameters}serialize({path:e=[],index:t,hint:n}={path:[]}){if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for initial value template item nodes",e,t,n).withHelpUrl(P.ID_REQUIRED);if(!this.spec.templateId)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P.ID_REQUIRED);let i=this._context.templates.find(e=>e.id===this.spec.templateId);if(!i)throw new R("template id (`templateId`) is required for initial value template item nodes",e,this.spec.id,n).withHelpUrl(P.ID_REQUIRED);return{id:this.spec.id,templateId:this.spec.id,schemaType:i.schemaType,type:"initialValueTemplateItem",description:this.spec.description||i.description,title:this.spec.title||i.title,subtitle:this.spec.subtitle,icon:this.spec.icon||i.icon,initialDocumentId:this.spec.initialDocumentId,parameters:this.spec.parameters}}clone(e={}){let t=new ee(this._context);return t.spec={...this.spec,...e},t}}function et(e){let{schema:t,getStructureBuilder:n,templates:i}=e,l=t.getTypeNames();return i.filter(e=>!e.parameters?.length).sort((e,t)=>l.indexOf(e.schemaType)-l.indexOf(t.schemaType)).map(e=>n().initialValueTemplateItem(e.id))}function en(e,t,n){return e instanceof ee?e.serialize({path:n,index:t}):e}function ei(e,t){let{schema:n,templates:i}=e;return t.map(t=>{let l=i.find(e=>e.id===t.templateId),r=t.title||l?.title||"Create",o={};l&&l.schemaType&&(o.type=l.schemaType),t.templateId&&(o.template=t.templateId);let s=t.parameters?[o,t.parameters]:o,a=l&&n.get(l.schemaType),d=t.i18n||l?.i18n,c=new F(e).title(r).icon(l&&l.icon||a?.icon||m.AddIcon).intent({type:"create",params:s});return d&&(c=c.i18n(d)),c.serialize()})}let el=Symbol("Document type list canHandleIntent"),er=(e,t,{pane:n})=>{let i="create"===e,l=n.options?.filter||"",r=n.options?.params||{},o=n.schemaTypeName?[n.schemaTypeName]:eu(l,r),s=n.initialValueTemplates||[];return i&&t.template?s.some(e=>e.templateId===t.template):"edit"===e&&t.id&&o.includes(t.type)||i&&o.includes(t.type)};er.identity=el;let eo=["default","card","media","detail","block"];function es(){}let ea=(e,t,{pane:n,index:i})=>i<=1&&er(e,t,{pane:n});class ed{initialValueTemplatesSpecified=!1;spec={};id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:B(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}defaultLayout(e){return this.clone({defaultLayout:e})}getDefaultLayout(){return this.spec.defaultLayout}menuItems(e){return this.clone({menuItems:e})}getMenuItems(){return this.spec.menuItems}menuItemGroups(e){return this.clone({menuItemGroups:e})}getMenuItemGroups(){return this.spec.menuItemGroups}child(e){return this.clone({child:e})}getChild(){return this.spec.child}canHandleIntent(e){return this.clone({canHandleIntent:e})}getCanHandleIntent(){return this.spec.canHandleIntent}showIcons(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcons:e}})}getShowIcons(){return this.spec.displayOptions?this.spec.displayOptions.showIcons:void 0}initialValueTemplates(e){return this.initialValueTemplatesSpecified=!0,this.clone({initialValueTemplates:Array.isArray(e)?e:[e]})}getInitialValueTemplates(){return this.spec.initialValueTemplates}serialize(e={path:[]}){let t=this.spec.id||"",n=e.path,i=this.spec.defaultLayout;if(i&&!eo.includes(i))throw new R(`\`layout\` must be one of ${eo.map(e=>`"${e}"`).join(", ")}`,n,t||e.index,this.spec.title);let l=(this.spec.initialValueTemplates||[]).map((e,t)=>en(e,t,n));return{id:z(t,e.path,t||e.index),title:this.spec.title,i18n:this.spec.i18n,type:"genericList",defaultLayout:i,child:this.spec.child||es,canHandleIntent:this.spec.canHandleIntent||ea,displayOptions:this.spec.displayOptions,initialValueTemplates:l,menuItems:(this.spec.menuItems||[]).map((e,t)=>k(e,t,n)),menuItemGroups:(this.spec.menuItemGroups||[]).map((e,t)=>V(e,t,n))}}}class ec extends ed{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!t?.initialValueTemplates}apiVersion(e){return this.clone({options:{...this.spec.options||{filter:""},apiVersion:e}})}getApiVersion(){return this.spec.options?.apiVersion}filter(e){return this.clone({options:{...this.spec.options,filter:e}})}getFilter(){return this.spec.options?.filter}schemaType(e){let t="string"==typeof e?e:e.name;return this.clone({schemaTypeName:t})}getSchemaType(){return this.spec.schemaTypeName}params(e){return this.clone({options:{...this.spec.options||{filter:""},params:e}})}getParams(){return this.spec.options?.params}defaultOrdering(e){if(!Array.isArray(e))throw Error("`defaultOrdering` must be an array of order clauses");return this.clone({options:{...this.spec.options||{filter:""},defaultOrdering:e}})}getDefaultOrdering(){return this.spec.options?.defaultOrdering}serialize(e={path:[]}){let t;if("string"!=typeof this.spec.id||!this.spec.id)throw new R("`id` is required for document lists",e.path,e.index,this.spec.title).withHelpUrl(P.ID_REQUIRED);if(!this.spec.options||!this.spec.options.filter)throw new R("`filter` is required for document lists",e.path,this.spec.id,this.spec.title).withHelpUrl(P.FILTER_REQUIRED);return this.spec.options?.filter!=="_type == $type"&&this.spec.options.filter&&!this.spec.options.apiVersion&&console.warn(`No apiVersion specified for document type list with custom filter: \`${this.spec.options.filter}\`. This will be required in the future. See %s for more info.`,(0,S.generateHelpUrl)(P.API_VERSION_REQUIRED_FOR_CUSTOM_FILTER)),{...super.serialize(e),type:"documentList",schemaTypeName:this.spec.schemaTypeName,child:this.spec.child||(t=this._context,(e,n)=>{let i=n.parent,l=n.params?.template?t.templates.find(e=>e.id===n.params.template):void 0;return Promise.resolve(l?l.schemaType:i.schemaTypeName||$(t.getClient,e)).then(n=>n?t.resolveDocumentNode({schemaType:n,documentId:e}):new Q(t).id("editor").documentId(e).schemaType(""))}),options:{...this.spec.options,apiVersion:this.spec.options.apiVersion||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion,filter:((e,t)=>{let n=e.options?.filter.trim()||"";if(["*","{"].includes(n[0]))throw new R(`\`filter\` cannot start with \`${n[0]}\` - looks like you are providing a query, not a filter`,t.path,e.id,e.title).withHelpUrl(P.QUERY_PROVIDED_FOR_FILTER);return n})(this.spec,e)}}}clone(e){let t=new ec(this._context);return t.spec={...this.spec,...e},this.initialValueTemplatesSpecified||(t.spec.initialValueTemplates=function(e,t){let{document:n}=e,{schemaTypeName:i,options:l}=t,{filter:r,params:o}=l||{filter:"",params:{}},s=i?[i]:Array.from(new Set(eu(r,o)));if(0!==s.length)return s.flatMap(e=>n.resolveNewDocumentOptions({type:"structure",schemaType:e})).map(e=>({...e,icon:m.AddIcon}))}(this._context,t.spec)),t.spec.schemaTypeName||(t.spec.schemaTypeName=function(e){let{options:t}=e,{filter:n,params:i}=t||{filter:"",params:{}},l=eu(n,i);return 1===l.length?l[0]:void 0}(t.spec)),t}getSpec(){return this.spec}}function eu(e,t={}){let n=function(e,t={}){let n,i=/\b_type\s*==\s*(['"].*?['"]|\$.*?(?:\s|$))|\B(['"].*?['"]|\$.*?(?:\s|$))\s*==\s*_type/g,l=[];for(;null!==(n=i.exec(e));)l.push(n[1]||n[2]);return l.map(e=>(("$"===e[0]?t[e.slice(1)]:e)||"").trim().replace(/^["']|["']$/g,"")).filter(Boolean)}(e,t);return 0===n.length&&(n=function(e,t={}){let n=e.match(/\b_type\s+in\s+\[(.*?)\]/);return n?n[1].split(/,\s*/).map(e=>e.trim().replace(/^["']+|["']+$/g,"")).map(e=>"$"===e[0]?t[e.slice(1)]:e).filter(Boolean):[]}(e,t)),n}let ep=e=>"listItem"===e.type,em=(e,t,n)=>(n.pane.items||[]).filter(eb).some(e=>e.schemaType.name===t.type&&e._id===t.id)||ea(e,t,n),eh=(e,t)=>{let n=(t.parent.items.filter(ep).find(t=>t.id===e)||{child:void 0}).child;return n&&"function"==typeof n&&"function"==typeof n?n(e,t):n};class eg extends ed{constructor(e,t){super(),this._context=e,this.spec=t||{},this.initialValueTemplatesSpecified=!!(t&&t.initialValueTemplates)}items(e){return this.clone({items:e})}getItems(){return this.spec.items}serialize(e={path:[]}){let t=this.spec.id;if("string"!=typeof t||!t)throw new R("`id` is required for lists",e.path,e.index).withHelpUrl(P.ID_REQUIRED);let n=typeof this.spec.items>"u"?[]:this.spec.items;if(!Array.isArray(n))throw new R("`items` must be an array of items",e.path,e.index).withHelpUrl(P.LIST_ITEMS_MUST_BE_ARRAY);let i=(e.path||[]).concat(t),l=n.map((e,t)=>(function(e,t,n){if(e instanceof ef)return e.serialize({path:n,index:t});if(e instanceof H)return e.serialize();if(e&&"divider"===e.type)return e;if(!e||"listItem"!==e.type){var i;let l=e&&e.type||(e instanceof eg?"ListBuilder":(i=e,(0,d.isRecord)(i)&&"function"==typeof i.then)?"Promise":Array.isArray(e)?"array":typeof e);throw new R(`List items must be of type "listItem", got "${l}"${"array"===l?" - did you forget to spread (...moreItems)?":""}`,n,t).withHelpUrl(P.INVALID_LIST_ITEM)}return e})(e,t,i)),r=l.filter((e,t)=>(0,v.find)(l,{id:e.id},t+1));if(r.length>0){let t=r.map(e=>e.id).slice(0,5),n=r.length>5?`${t.join(", ")}...`:t.join(", ");throw new R(`List items with same ID found (${n})`,e.path,e.index).withHelpUrl(P.LIST_ITEM_IDS_MUST_BE_UNIQUE)}return{...super.serialize(e),type:"list",canHandleIntent:this.spec.canHandleIntent||em,child:this.spec.child||eh,items:l}}clone(e){let t=new eg(this._context);return t.spec={...this.spec,...e},t}}class ef{constructor(e,t){this._context=e,this.spec=t||{}}id(e){return this.clone({id:e})}getId(){return this.spec.id}title(e){return this.clone({title:e,id:B(e,this.spec.id)})}getTitle(){return this.spec.title}i18n(e){return this.clone({i18n:e})}getI18n(){return this.spec.i18n}icon(e){return this.clone({icon:e})}showIcon(e=!0){return this.clone({displayOptions:{...this.spec.displayOptions,showIcon:e}})}getShowIcon(){return this.spec.displayOptions?this.spec.displayOptions.showIcon:void 0}getIcon(){return this.spec.icon}child(e){return this.clone({child:e})}getChild(){return this.spec.child}schemaType(e){return this.clone({schemaType:e})}getSchemaType(){let e=this.spec.schemaType;return"string"==typeof e?this._context.schema.get(e):this.spec.schemaType}serialize(e={path:[]}){let{id:t,title:n,child:i}=this.spec;if("string"!=typeof t||!t)throw new R("`id` is required for list items",e.path,e.index).withHelpUrl(P.ID_REQUIRED);if(!e.titleIsOptional&&("string"!=typeof n||!n))throw new R("`title` is required for list items",e.path,t).withHelpUrl(P.TITLE_REQUIRED);let l=this.spec.schemaType;if("string"==typeof l){let n=this._context.schema.get(l);if(!n)throw new R(`Could not find type "${l}" in schema`,e.path,t).withHelpUrl(P.SCHEMA_TYPE_NOT_FOUND);l=n}let r={path:e.path.concat(t),hint:"child"},o=i instanceof N||i instanceof ec||i instanceof Q||i instanceof eg?i.serialize(r):i;if("function"==typeof o){let e=o;o=(t,n)=>e(t,{...n,serializeOptions:r})}return{...this.spec,id:z(t,e.path,e.index),schemaType:l,child:o,title:n,type:"listItem"}}clone(e){let t=new ef(this._context);return t.spec={...this.spec,...e},t}}class ex extends ef{constructor(e,t){super(e,t),this._context=e,this.spec=t||{}}serialize(e={path:[]}){let t,n=super.serialize({...e,titleIsOptional:!0});if(!n.schemaType)throw new R("`schemaType` is required for document list items",e.path,e.index).withHelpUrl(P.SCHEMA_TYPE_REQUIRED);let i=n.child||(t=this._context,e=>{let i=n.schemaType&&("string"==typeof n.schemaType?n.schemaType:n.schemaType.name);return i?t.resolveDocumentNode({schemaType:i,documentId:e}):new Q(t).id("documentEditor").documentId(e)});return{...n,child:i,schemaType:n.schemaType,_id:n.id}}clone(e){let t=new ex(this._context);return t.spec={...this.spec,...e},t}}function eb(e){return(0,d.isRecord)(e)&&"u">typeof e.schemaType&&"string"==typeof e._id}class ey extends ec{constructor(e,t){super(e),this._context=e,this.spec=t||{}}child(e){return this.cloneWithoutDefaultIntentHandler({child:e})}clone(e){let t=super.clone(e),n=new ey(this._context);return n.spec={...this.spec,...t.getSpec(),...e},n}cloneWithoutDefaultIntentHandler(e){let t=super.clone(e),n=new ey(this._context),i=this.spec.canHandleIntent,l=i&&i.identity===el?{canHandleIntent:void 0}:{};return n.spec={...t.getSpec(),...this.spec,...e,...l},n}}let ev=["sanity.imageAsset","sanity.fileAsset"];function ej(e){return(function({schema:e}){return e.getTypeNames().filter(t=>{let n=e.get(t);return n&&n.type?.name==="document"}).filter(e=>!ev.includes(e))})(e).map(t=>ew(e,t))}function ew(e,t){let{schema:n}=e,i=n.get(t);if(!i)throw Error(`Schema type with name "${t}" not found`);let l=i.title||(0,j.startCase)(t);return new ef(e).id(t).title(l).schemaType(i).child((n,i)=>{let l=i.parent,r="list"===l.type?l.items.find(e=>e.id===n):null,o=eS(e,t);return r&&r.title&&(o=o.title(r.title)),o})}function eS(e,t){let{schema:n,resolveDocumentNode:i}=e,l="string"==typeof t?t:t.schemaType,r="string"==typeof l?l:l.name,o="string"==typeof t?{}:t,s=n.get(r);if(!s)throw Error(`Schema type with name "${r}" not found`);let a=s.title||(0,j.startCase)(r);return new ey(e).id(o.id||r).title(o.title||a).filter("_type == $type").params({type:r}).schemaType(s).defaultOrdering(E.by).menuItemGroups(o.menuItemGroups||[{id:"sorting",title:"Sort",i18n:{title:{key:"menu-item-groups.actions-group",ns:_}}},{id:"layout",title:"Layout",i18n:{title:{key:"menu-item-groups.layout-group",ns:_}}},{id:"actions",title:"Actions",i18n:{title:{key:"menu-item-groups.sorting-group",ns:_}}}]).child(o.child||(e=>i({schemaType:r,documentId:e}))).canHandleIntent(o.canHandleIntent||er).menuItems(o.menuItems||[...L(e,s),new F(e).group("layout").i18n({title:{key:"menu-items.layout.compact-view",ns:_}}).title("Compact view").icon(m.StackCompactIcon).action("setLayout").params({layout:"default"}),new F(e).group("layout").i18n({title:{key:"menu-items.layout.detailed-view",ns:_}}).title("Detailed view").icon(m.StackIcon).action("setLayout").params({layout:"detail"})])}function e_({defaultDocumentNode:e,source:t,perspectiveStack:n}){let i=(0,d.getConfigContextFromSource)(t),l={...t,getStructureBuilder:()=>r,resolveDocumentNode:t=>{let n=e?.(r,{...t,...i})||new Q(l);return n.getId()||(n=n.id("documentEditor")),t.documentId&&(n=n.documentId((0,c.getPublishedId)(t.documentId))),n.schemaType(t.schemaType)},perspectiveStack:n},r={defaults:()=>{let e;return e=ej(l),new eg(l).id("__root__").title("Content").i18n({title:{key:"default-definition.content-title",ns:_}}).items(e).showIcons(e.some(e=>{var t;return!!(t=e.getSchemaType())&&"string"!=typeof t&&!!t.icon}))},documentTypeList:(...e)=>eS(l,...e),documentTypeListItem:(...e)=>ew(l,...e),documentTypeListItems:(...e)=>ej(l,...e),document:(...e)=>new Q(l,...e),documentWithInitialValueTemplate:(...e)=>Z(l,...e),defaultDocument:l.resolveDocumentNode,list:(...e)=>new eg(l,...e),listItem:(...e)=>new ef(l,...e),menuItem:(...e)=>new F(l,...e),menuItemGroup:(...e)=>new M(l,...e),menuItemsFromInitialValueTemplateItems:(...e)=>ei(l,...e),documentList:(...e)=>new ec(l,...e),documentListItem:(...e)=>new ex(l,...e),orderingMenuItem:(...e)=>A(l,...e),orderingMenuItemsForType:(...e)=>L(l,...e),editor:(...e)=>J(l,...e),defaultInitialValueTemplateItems:(...e)=>et(l,...e),initialValueTemplateItem:(e,t)=>new ee(l,{id:e,parameters:t,templateId:e}),component:e=>(0,p.isValidElementType)(e)?new N().component(e):new N(e),divider:e=>new H(e),view:X,context:l};return r}function eI(e){let t,n,i,l,r,c=(0,s.c)(26),{defaultDocumentNode:p,structure:m,children:h}=e,[g,f]=(0,a.useState)(!1),x=(0,d.useSource)(),b=(0,d.useConfigContextFromSource)(x),y=(0,d.useDocumentStore)(),{perspectiveStack:v}=(0,d.usePerspective)();c[0]!==p||c[1]!==v||c[2]!==x?(t=e_({defaultDocumentNode:p,source:x,perspectiveStack:v}),c[0]=p,c[1]=v,c[2]=x,c[3]=t):t=c[3];let j=t;e:{let e;if(m){let e;c[4]!==j||c[5]!==b||c[6]!==y||c[7]!==v||c[8]!==m?(e=m(j,{...b,documentStore:y,perspectiveStack:v}),c[4]=j,c[5]=b,c[6]=y,c[7]=v,c[8]=m,c[9]=e):e=c[9],n=e;break e}c[10]!==j?(e=j.defaults(),c[10]=j,c[11]=e):e=c[11],n=e}let w=n,S=!g,_=!g,I=!g,C=!g;c[12]!==g||c[13]!==S||c[14]!==_||c[15]!==I||c[16]!==C?(i={backButton:g,resizablePanes:S,reviewChanges:_,splitPanes:I,splitViews:C},c[12]=g,c[13]=S,c[14]=_,c[15]=I,c[16]=C,c[17]=i):i=c[17];let T=i;c[18]!==j.context||c[19]!==T||c[20]!==g||c[21]!==w?(l={features:T,layoutCollapsed:g,setLayoutCollapsed:f,rootPaneNode:w,structureContext:j.context},c[18]=j.context,c[19]=T,c[20]=g,c[21]=w,c[22]=l):l=c[22];let R=l;return c[23]!==h||c[24]!==R?(r=(0,o.jsx)(u.StructureToolContext.Provider,{value:R,children:h}),c[23]=h,c[24]=R,c[25]=r):r=c[25],r}e.s(["ComponentBuilder",()=>N,"ComponentViewBuilder",()=>q,"DEFAULT_INTENT_HANDLER",()=>el,"DocumentBuilder",()=>Q,"DocumentListBuilder",()=>ec,"DocumentListItemBuilder",()=>ex,"DocumentTypeListBuilder",()=>ey,"FormViewBuilder",()=>W,"GenericListBuilder",()=>ed,"GenericViewBuilder",()=>U,"HELP_URL",()=>P,"InitialValueTemplateItemBuilder",()=>ee,"ListBuilder",()=>eg,"ListItemBuilder",()=>ef,"MenuItemBuilder",()=>F,"MenuItemGroupBuilder",()=>M,"SerializeError",()=>R,"StructureToolProvider",()=>eI,"component",()=>Y,"createStructureBuilder",()=>e_,"defaultInitialValueTemplateItems",()=>et,"defaultIntentChecker",()=>er,"documentFromEditor",()=>J,"documentFromEditorWithInitialValue",()=>Z,"form",()=>K,"getExtendedProjection",()=>T,"getOrderingMenuItem",()=>A,"getOrderingMenuItemsForSchemaType",()=>L,"getTypeNamesFromFilter",()=>eu,"isDocumentListItem",()=>eb,"maybeSerializeInitialValueTemplateItem",()=>en,"maybeSerializeMenuItem",()=>k,"maybeSerializeMenuItemGroup",()=>V,"maybeSerializeView",()=>G,"menuItemsFromInitialValueTemplateItems",()=>ei,"shallowIntentChecker",()=>ea,"structureLocaleNamespace",()=>_,"structureUsEnglishLocaleBundle",()=>I],988942);var eC=e.i(263486),eT=e.i(725917),eR=e.i(678491),eP=e.i(364308),eE=e.i(963647),eD=e.i(997053),ek=e.i(433483),eF=e.i(846932),eA=e.i(88653),eL=e.i(597083),eV=e.i(528696),eM=e.i(567e3),eO=e.i(128676),ez=e.i(856179),eB=e.i(666133),eB=eB,eN=e.i(421634),eH=e.i(61510),e$=e.i(343894),eU=e.i(368233),eG=e.i(100374),eq=e.i(449242),eW=e.i(94059),eK=e.i(992481),eY=e.i(58832),eX=e.i(827492),eQ=e.i(218692),eJ=e.i(374e3),eZ=e.i(134352),e0=e.i(827341),e1=e.i(711308),e2=e.i(960739),e3=e.i(722249),e4=e.i(10839),e5=e.i(484973),e6=e.i(277497),e8=e.i(800879),e7=e.i(408659),e9=e.i(245281),te=e.i(993817),tt=e.i(602400),tn=e.i(839338),ti=e.i(878856),tl=e.i(330823),tr=e.i(807136),to=e.i(817312),ts=e.i(96623),ta=e.i(172441),td=e.i(254201),tc=e.i(873904),tu=e.i(55083),tp=e.i(629437),tm=e.i(789196),th=e.i(424981),tg=e.i(714494),tf=e.i(733327),tx=e.i(482065),tb=e.i(645456);let ty=({clientWidth:e,clientHeight:t,scrollWidth:n,scrollHeight:i})=>i>t||n>e,tv=e=>{let t=window.getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")},tj=e=>{if(null==e)return{x:0,y:0};let{scrollTop:t,scrollHeight:n,clientHeight:i,scrollLeft:l,scrollWidth:r,clientWidth:o}=e;return{x:l?l/Math.max(1e-5,r-o):0,y:t?t/Math.max(1e-5,n-i):0}};function tw(){return(tw=Object.assign.bind()).apply(null,arguments)}function tS(e){return e.matches("body *")?e:window}class t_{constructor(e,t={}){var n,i=this;this.elements=void 0,this.defaults={vertical:!0,horizontal:!0,debug:!0},this.options=void 0,this.paused=!1,this.logger=void 0,this.handleScroll=async function(e){if(i.paused||!e.currentTarget)return;let t=i.getScrollContainer(e.currentTarget);await new Promise(e=>{requestAnimationFrame(()=>e())}),i.mirrorScrollPositions(tj(t),t)},this.elements=[...e].filter(Boolean).map(e=>this.getScrollContainer(e)),this.elements=[...new Set(this.elements)],this.options=tw({},this.defaults,t),this.options.debug&&(this.logger=(n="[scroll-mirror]",{log:(...e)=>console.log(n,...e),warn:(...e)=>console.warn(n,...e),error:(...e)=>console.error(n,...e)}),function(e,t){if(e.length<1)null==t||t.warn("No elements provided.");else for(let n of(e.length<2&&(null==t||t.warn("Only one element provided.",e)),e.some(e=>!e)&&(null==t||t.error("Some elements are not defined.",e)),e))n instanceof HTMLElement&&!ty(n)&&(null==t||t.warn("Element doesn't have overflow:",n)),n instanceof HTMLElement&&n.matches("body *")&&!tv(n)&&(null==t||t.warn('No "overflow: auto;" or "overflow: scroll;" set on element:',n))}(this.elements,this.logger)),this.elements.forEach(e=>this.addScrollHandler(e)),this.elements.includes(document.documentElement)&&this.mirrorScrollPositions(tj(document.documentElement),document.documentElement)}pause(){this.paused=!0}resume(){this.paused=!1}destroy(){this.elements.forEach(e=>this.removeScrollHandler(e))}addScrollHandler(e){this.removeScrollHandler(e),tS(e).addEventListener("scroll",this.handleScroll,{passive:!0})}removeScrollHandler(e){tS(e).removeEventListener("scroll",this.handleScroll)}getScrollContainer(e){return e instanceof HTMLElement&&e.matches("body *")?e:document.documentElement}mirrorScrollPositions(e,t){this.elements.forEach(n=>{t!==n&&(this.removeScrollHandler(n),this.setScrollPosition(e,n),window.requestAnimationFrame(()=>{this.addScrollHandler(n)}))})}setScrollPosition(e,t){let{vertical:n,horizontal:i}=this.options,l=t.scrollWidth-t.clientWidth,r=t.scrollHeight-t.clientHeight;n&&r&&t.scrollTo({top:r*e.y,behavior:"instant"}),i&&l&&t.scrollTo({left:l*e.x,behavior:"instant"})}get progress(){return tj(this.elements.find(e=>ty(e)))}set progress(e){"number"==typeof e&&(e={x:e,y:e});let t=tw({},this.progress,e);(function(e,t){let n=!0;for(let[i,l]of Object.entries(e))("number"!=typeof l||l<0||l>1)&&(null==t||t.error(`progress.${i} must be a number between 0-1`),n=!1);return n})(t,this.logger)&&this.mirrorScrollPositions(t)}}var tI=e.i(432892),tC=e.i(224019),tT=a,tR=e.i(766482),tP=e.i(274789);let tE=Math.ceil(10*Math.random());function tD(e){return Object.prototype.toString.call(e).slice(8,-1)}function tk(e){let t=tD(e);return"Object"!==t&&"Array"!==t}class tF extends tT.Component{shouldComponentUpdate(e){return e.highlight!==this.props.highlight}render(){let e=this.props.string||"",t=this.props.highlight||"",n=e.search(t);if(!t||-1===n)return(0,o.jsx)("span",{children:e});let i=t.source.length,l=e.slice(n,n+i);return(0,o.jsx)("span",{children:e.split(t).map(function(e,t){return(0,o.jsxs)("span",{children:[t>0?(0,o.jsx)("span",{className:"json-inspector__hl",children:l}):null,e]},t)})})}}function tA(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}class tL extends tT.Component{constructor(e){super(e),this.state={expanded:this._isInitiallyExpanded(this.props)}}render(){let{label:e,data:t,root:n,id:i}=this.props,l="id_"+ ++tE,r={path:this.keypath(),key:e.toString(),value:t},s=this._onClick.bind(this,r);return(0,o.jsxs)("div",{"data-testid":n?"leaf-root":"leaf-child","aria-expanded":this.state.expanded,"data-root":n||void 0,className:this.getClassName(),id:"leaf-"+this._rootPath(),children:[(0,o.jsx)("input",{className:"json-inspector__radio",type:"radio",name:l,id:i,tabIndex:-1}),(0,o.jsxs)("label",{className:"json-inspector__line",htmlFor:l,onClick:s,children:[(0,o.jsx)("div",{className:"json-inspector__flatpath",children:r.path}),(0,o.jsxs)("span",{className:"json-inspector__key",children:[this.format(r.key),":",this.renderInteractiveLabel(r.key,!0)]}),this.renderTitle(),this.renderShowOriginalButton()]}),this.renderChildren()]})}renderTitle(){var e,t;let n=this.data(),i=tD(n);if(Array.isArray(n)){let t=n.length;return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[t>0?"[…] ":"[] ",(e=t)+(1===e?" item":" items")]})}if("object"==typeof n&&null!==n){let e=Object.keys(n).length;return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_helper",children:[e>0?"{…} ":"{} ",(t=e)+(1===t?" property":" properties")]})}return(0,o.jsxs)("span",{className:"json-inspector__value json-inspector__value_"+i.toLowerCase(),children:[this.format(String(n)),this.renderInteractiveLabel(n,!1)]})}renderChildren(){let{verboseShowOriginal:e,query:t,id:n,isExpanded:i,interactiveLabel:l,onClick:r,getOriginal:s}=this.props,a=this._rootPath(),d=this.data();return this.state.expanded&&(tA(d)||Array.isArray(d))?Object.keys(d).map(c=>{var u,p;let m=d[c],h=!this.state.original||!!e&&t;return(0,o.jsx)(tL,{data:m,label:c,prefix:a,onClick:r,id:n,query:t,getOriginal:h?s:void 0,isExpanded:i,interactiveLabel:l,verboseShowOriginal:e},(u=c,tk(p=m)?u+":"+(0,tP.default)(String(p)):u+"["+tD(p)+"]"))}):null}renderShowOriginalButton(){let{data:e,getOriginal:t,query:n}=this.props;return tk(e)||this.state.original||!t||!n||n.test(this.keypath())?null:(0,o.jsx)("span",{className:"json-inspector__show-original",onClick:this._onShowOriginalClick})}renderInteractiveLabel(e,t){let n=this.props.interactiveLabel;return"function"==typeof n?(0,o.jsx)(n,{value:String(e),originalValue:e,isKey:t,keypath:this.keypath()}):null}static getDerivedStateFromProps(e,t){return e.query?{expanded:!e.query.test(e.label)}:null}componentDidUpdate(e){e.query&&!this.props.query&&this.setState({expanded:this._isInitiallyExpanded(this.props)})}_rootPath(){return(this.props.prefix||"")+"."+this.props.label}keypath(){return this._rootPath().slice(6)}data(){return this.state.original||this.props.data}format(e){return(0,o.jsx)(tF,{string:e,highlight:this.props.query})}getClassName(){let e="json-inspector__leaf";return this.props.root&&(e+=" json-inspector__leaf_root"),this.state.expanded&&(e+=" json-inspector__leaf_expanded"),tk(this.props.data)||(e+=" json-inspector__leaf_composite"),e}toggle(){this.setState({expanded:!this.state.expanded})}_onClick(e,t){this.toggle(),this.props.onClick&&this.props.onClick(e),t.stopPropagation()}_onShowOriginalClick=e=>{this.setState({original:this.props.getOriginal?.(this.keypath())}),e.stopPropagation()};_isInitiallyExpanded(e){if(e.root)return!0;let t=this.keypath();return e.query?!e.query.test(t)&&"function"==typeof e.getOriginal:!!e.isExpanded&&e.isExpanded(t,e.data)}}let tV=(...e)=>{},tM=({onChange:e=tV})=>{let t=(0,tT.useCallback)(t=>e(t.target.value),[e]);return(0,o.jsx)("input",{className:"json-inspector__search",type:"search",placeholder:"Search",onChange:t})};function tO(e){return tA(e)?0===Object.keys(e).length:Array.isArray(e)?0===e.length:null===e||"string"!=typeof e||"number"!=typeof e||0===Object.keys(e).length}let tz=(r=(e,t)=>{let n=t||{cacheResults:!0},i={};return function(t){let l;if(!n.cacheResults)return tB(e,t,n);if(!i[t]){for(var r=t.length-1;r>0;r-=1)if(i[l=t.slice(0,r)]){i[t]=tB(i[l],t,n);break}}return i[t]||(i[t]=tB(e,t,n)),i[t]}},(e,t)=>(l&&e===n&&t===i||(n=e,i=t,l=r(e,t)),l));function tB(e,t,n){return tA(e)||Array.isArray(e)?Object.keys(e).reduce(function(i,l){let r,o=e[l];return o&&("object"!=typeof o?(tN(t,l,n)||tN(t,o,n))&&(i[l]=o):tN(t,l,n)?i[l]=o:tO(r=tB(o,t,n))||Object.assign(i,{[l]:r})),i},{}):{}}function tN(e,t,n){if(!t)return!1;var i=String(t),l=e;return n?.ignoreCase&&(i=i.toLowerCase(),l=l.toLowerCase()),-1!==i.indexOf(l)}function tH(e){return parseInt(e,10)}let t$=e=>e.length>=2,tU={cacheResults:!0,ignoreCase:!1};class tG extends tT.Component{static defaultProps={data:null,search:tM,searchOptions:{debounceTime:0},className:"",id:"json-"+Date.now(),onClick:tV,filterOptions:{cacheResults:!0,ignoreCase:!1},validateQuery:function(e){return e.length>=2},isExpanded:function(e,t){return!1},verboseShowOriginal:!1};constructor(e){super(e),this.state={query:"",filterer:tz(e.data,e.filterOptions)}}render(){let{data:e,className:t,onClick:n,id:i,isExpanded:l,interactiveLabel:r,verboseShowOriginal:s,filterOptions:a=tU,validateQuery:d=t$}=this.props,c=""!==this.state.query&&d(this.state.query),u=c?this.state.filterer(this.state.query):e,p=c&&tO(u);return(0,o.jsxs)("div",{"data-testid":"json-inspector",className:"json-inspector "+t,children:[this.renderToolbar(),p?(0,o.jsx)("div",{className:"json-inspector__not-found",children:"Nothing found"}):(0,o.jsx)(tL,{data:u,onClick:n,id:i,getOriginal:this.getOriginal,query:c?new RegExp(this.state.query,a.ignoreCase?"i":""):null,label:"root",root:!0,isExpanded:l,interactiveLabel:r,verboseShowOriginal:s})]})}renderToolbar(){let e=this.props.search;return e?(0,o.jsx)("div",{className:"json-inspector__toolbar",children:(0,o.jsx)(e,{onChange:(0,tR.default)(this.search,this.props.searchOptions?.debounceTime),data:this.props.data,query:this.state.query})}):null}search=e=>{this.setState({query:e})};static getDerivedStateFromProps(e,t){let n=tz(e.data,e.filterOptions);return n===t.filterer?null:{...t,filterer:n}}shouldComponentUpdate(e,t){return t.query!==this.state.query||e.data!==this.props.data||e.onClick!==this.props.onClick}createFilterer=(e,t)=>{this.setState({filterer:tz(e,t)})};getOriginal=e=>(function e(t,n){var i=n.split("."),l=i.shift();return l?Array.isArray(t)&&t[tH(l)]?e(t[tH(l)],i.join(".")):tA(t)&&l in t?e(t[l],i.join(".")):void 0:t})(this.props.data,e)}var tq=e.i(760719),tW=e.i(173380),tK=e.i(582643),tY=e.i(7432),tX=e.i(422236),tQ=e.i(640289),tJ=e.i(83107),tZ=e.i(945736),t0=e.i(991426),t1=e.i(408551);function t2(e,t){return"function"==typeof e?e(t):e}function t3(e,t){return n=>{t.setState(t=>({...t,[e]:t2(n,t[e])}))}}function t4(e){return e instanceof Function}function t5(e,t,n){let i,l=[];return r=>{let o,s;n.key&&n.debug&&(o=Date.now());let a=e(r);if(!(a.length!==l.length||a.some((e,t)=>l[t]!==e)))return i;if(l=a,n.key&&n.debug&&(s=Date.now()),i=t(...a),null==n||null==n.onChange||n.onChange(i),n.key&&n.debug&&null!=n&&n.debug()){let e=Math.round((Date.now()-o)*100)/100,t=Math.round((Date.now()-s)*100)/100,i=t/16,l=(e,t)=>{for(e=String(e);e.length<t;)e=" "+e;return e};console.info(`%c⏱ ${l(t,5)} /${l(e,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*i,120))}deg 100% 31%);`,null==n?void 0:n.key)}return i}}function t6(e,t,n,i){return{debug:()=>{var n;return null!=(n=null==e?void 0:e.debugAll)?n:e[t]},key:!1,onChange:i}}e.i(247167);let t8="debugHeaders";function t7(e,t,n){var i;let l={id:null!=(i=n.id)?i:t.id,column:t,index:n.index,isPlaceholder:!!n.isPlaceholder,placeholderId:n.placeholderId,depth:n.depth,subHeaders:[],colSpan:0,rowSpan:0,headerGroup:null,getLeafHeaders:()=>{let e=[],t=n=>{n.subHeaders&&n.subHeaders.length&&n.subHeaders.map(t),e.push(n)};return t(l),e},getContext:()=>({table:e,header:l,column:t})};return e._features.forEach(t=>{null==t.createHeader||t.createHeader(l,e)}),l}function t9(e,t,n,i){var l,r;let o=0,s=function(e,t){void 0===t&&(t=1),o=Math.max(o,t),e.filter(e=>e.getIsVisible()).forEach(e=>{var n;null!=(n=e.columns)&&n.length&&s(e.columns,t+1)},0)};s(e);let a=[],d=(e,t)=>{let l={depth:t,id:[i,`${t}`].filter(Boolean).join("_"),headers:[]},r=[];e.forEach(e=>{let o,s=[...r].reverse()[0],a=e.column.depth===l.depth,d=!1;if(a&&e.column.parent?o=e.column.parent:(o=e.column,d=!0),s&&(null==s?void 0:s.column)===o)s.subHeaders.push(e);else{let l=t7(n,o,{id:[i,t,o.id,null==e?void 0:e.id].filter(Boolean).join("_"),isPlaceholder:d,placeholderId:d?`${r.filter(e=>e.column===o).length}`:void 0,depth:t,index:r.length});l.subHeaders.push(e),r.push(l)}l.headers.push(e),e.headerGroup=l}),a.push(l),t>0&&d(r,t-1)};d(t.map((e,t)=>t7(n,e,{depth:o,index:t})),o-1),a.reverse();let c=e=>e.filter(e=>e.column.getIsVisible()).map(e=>{let t=0,n=0,i=[0];return e.subHeaders&&e.subHeaders.length?(i=[],c(e.subHeaders).forEach(e=>{let{colSpan:n,rowSpan:l}=e;t+=n,i.push(l)})):t=1,n+=Math.min(...i),e.colSpan=t,e.rowSpan=n,{colSpan:t,rowSpan:n}});return c(null!=(l=null==(r=a[0])?void 0:r.headers)?l:[]),a}let ne=(e,t,n,i,l,r,o)=>{let s={id:t,index:i,original:n,depth:l,parentId:o,_valuesCache:{},_uniqueValuesCache:{},getValue:t=>{if(s._valuesCache.hasOwnProperty(t))return s._valuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return s._valuesCache[t]=n.accessorFn(s.original,i),s._valuesCache[t]},getUniqueValues:t=>{if(s._uniqueValuesCache.hasOwnProperty(t))return s._uniqueValuesCache[t];let n=e.getColumn(t);if(null!=n&&n.accessorFn)return n.columnDef.getUniqueValues?s._uniqueValuesCache[t]=n.columnDef.getUniqueValues(s.original,i):s._uniqueValuesCache[t]=[s.getValue(t)],s._uniqueValuesCache[t]},renderValue:t=>{var n;return null!=(n=s.getValue(t))?n:e.options.renderFallbackValue},subRows:null!=r?r:[],getLeafRows:()=>{var e,t;let n,i;return e=s.subRows,t=e=>e.subRows,n=[],(i=e=>{e.forEach(e=>{n.push(e);let l=t(e);null!=l&&l.length&&i(l)})})(e),n},getParentRow:()=>s.parentId?e.getRow(s.parentId,!0):void 0,getParentRows:()=>{let e=[],t=s;for(;;){let n=t.getParentRow();if(!n)break;e.push(n),t=n}return e.reverse()},getAllCells:t5(()=>[e.getAllLeafColumns()],t=>t.map(t=>{var n;let i;return n=t.id,i={id:`${s.id}_${t.id}`,row:s,column:t,getValue:()=>s.getValue(n),renderValue:()=>{var t;return null!=(t=i.getValue())?t:e.options.renderFallbackValue},getContext:t5(()=>[e,t,s,i],(e,t,n,i)=>({table:e,column:t,row:n,cell:i,getValue:i.getValue,renderValue:i.renderValue}),t6(e.options,"debugCells","cell.getContext"))},e._features.forEach(n=>{null==n.createCell||n.createCell(i,t,s,e)},{}),i}),t6(e.options,"debugRows","getAllCells")),_getAllCellsByColumnId:t5(()=>[s.getAllCells()],e=>e.reduce((e,t)=>(e[t.column.id]=t,e),{}),t6(e.options,"debugRows","getAllCellsByColumnId"))};for(let t=0;t<e._features.length;t++){let n=e._features[t];null==n||null==n.createRow||n.createRow(s,e)}return s},nt=(e,t,n)=>{var i,l;let r=null==n||null==(i=n.toString())?void 0:i.toLowerCase();return!!(null==(l=e.getValue(t))||null==(l=l.toString())||null==(l=l.toLowerCase())?void 0:l.includes(r))};nt.autoRemove=e=>nu(e);let nn=(e,t,n)=>{var i;return!!(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.includes(n))};nn.autoRemove=e=>nu(e);let ni=(e,t,n)=>{var i;return(null==(i=e.getValue(t))||null==(i=i.toString())?void 0:i.toLowerCase())===(null==n?void 0:n.toLowerCase())};ni.autoRemove=e=>nu(e);let nl=(e,t,n)=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)};nl.autoRemove=e=>nu(e);let nr=(e,t,n)=>!n.some(n=>{var i;return!(null!=(i=e.getValue(t))&&i.includes(n))});nr.autoRemove=e=>nu(e)||!(null!=e&&e.length);let no=(e,t,n)=>n.some(n=>{var i;return null==(i=e.getValue(t))?void 0:i.includes(n)});no.autoRemove=e=>nu(e)||!(null!=e&&e.length);let ns=(e,t,n)=>e.getValue(t)===n;ns.autoRemove=e=>nu(e);let na=(e,t,n)=>e.getValue(t)==n;na.autoRemove=e=>nu(e);let nd=(e,t,n)=>{let[i,l]=n,r=e.getValue(t);return r>=i&&r<=l};nd.resolveFilterValue=e=>{let[t,n]=e,i="number"!=typeof t?parseFloat(t):t,l="number"!=typeof n?parseFloat(n):n,r=null===t||Number.isNaN(i)?-1/0:i,o=null===n||Number.isNaN(l)?1/0:l;if(r>o){let e=r;r=o,o=e}return[r,o]},nd.autoRemove=e=>nu(e)||nu(e[0])&&nu(e[1]);let nc={includesString:nt,includesStringSensitive:nn,equalsString:ni,arrIncludes:nl,arrIncludesAll:nr,arrIncludesSome:no,equals:ns,weakEquals:na,inNumberRange:nd};function nu(e){return null==e||""===e}function np(e,t,n){return!!e&&!!e.autoRemove&&e.autoRemove(t,n)||void 0===t||"string"==typeof t&&!t}let nm={sum:(e,t,n)=>n.reduce((t,n)=>{let i=n.getValue(e);return t+("number"==typeof i?i:0)},0),min:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i>n||void 0===i&&n>=n)&&(i=n)}),i},max:(e,t,n)=>{let i;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(i<n||void 0===i&&n>=n)&&(i=n)}),i},extent:(e,t,n)=>{let i,l;return n.forEach(t=>{let n=t.getValue(e);null!=n&&(void 0===i?n>=n&&(i=l=n):(i>n&&(i=n),l<n&&(l=n)))}),[i,l]},mean:(e,t)=>{let n=0,i=0;if(t.forEach(t=>{let l=t.getValue(e);null!=l&&(l*=1)>=l&&(++n,i+=l)}),n)return i/n},median:(e,t)=>{if(!t.length)return;let n=t.map(t=>t.getValue(e));if(!(Array.isArray(n)&&n.every(e=>"number"==typeof e)))return;if(1===n.length)return n[0];let i=Math.floor(n.length/2),l=n.sort((e,t)=>e-t);return n.length%2!=0?l[i]:(l[i-1]+l[i])/2},unique:(e,t)=>Array.from(new Set(t.map(t=>t.getValue(e))).values()),uniqueCount:(e,t)=>new Set(t.map(t=>t.getValue(e))).size,count:(e,t)=>t.length},nh=()=>({left:[],right:[]}),ng={size:150,minSize:20,maxSize:Number.MAX_SAFE_INTEGER},nf=()=>({startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,isResizingColumn:!1,columnSizingStart:[]}),nx=null;function nb(e){return"touchstart"===e.type}function ny(e,t){return t?"center"===t?e.getCenterVisibleLeafColumns():"left"===t?e.getLeftVisibleLeafColumns():e.getRightVisibleLeafColumns():e.getVisibleLeafColumns()}let nv=()=>({pageIndex:0,pageSize:10}),nj=()=>({top:[],bottom:[]}),nw=(e,t,n,i,l)=>{var r;let o=l.getRow(t,!0);n?(o.getCanMultiSelect()||Object.keys(e).forEach(t=>delete e[t]),o.getCanSelect()&&(e[t]=!0)):delete e[t],i&&null!=(r=o.subRows)&&r.length&&o.getCanSelectSubRows()&&o.subRows.forEach(t=>nw(e,t.id,n,i,l))};function nS(e,t){let n=e.getState().rowSelection,i=[],l={},r=function(e,t){return e.map(e=>{var t;let o=n_(e,n);if(o&&(i.push(e),l[e.id]=e),null!=(t=e.subRows)&&t.length&&(e={...e,subRows:r(e.subRows)}),o)return e}).filter(Boolean)};return{rows:r(t.rows),flatRows:i,rowsById:l}}function n_(e,t){var n;return null!=(n=t[e.id])&&n}function nI(e,t,n){var i;if(!(null!=(i=e.subRows)&&i.length))return!1;let l=!0,r=!1;return e.subRows.forEach(e=>{if((!r||l)&&(e.getCanSelect()&&(n_(e,t)?r=!0:l=!1),e.subRows&&e.subRows.length)){let n=nI(e,t);"all"===n?r=!0:("some"===n&&(r=!0),l=!1)}}),l?"all":!!r&&"some"}let nC=/([0-9]+)/gm;function nT(e,t){return e===t?0:e>t?1:-1}function nR(e){return"number"==typeof e?isNaN(e)||e===1/0||e===-1/0?"":String(e):"string"==typeof e?e:""}function nP(e,t){let n=e.split(nC).filter(Boolean),i=t.split(nC).filter(Boolean);for(;n.length&&i.length;){let e=n.shift(),t=i.shift(),l=parseInt(e,10),r=parseInt(t,10),o=[l,r].sort();if(isNaN(o[0])){if(e>t)return 1;if(t>e)return -1;continue}if(isNaN(o[1]))return isNaN(l)?-1:1;if(l>r)return 1;if(r>l)return -1}return n.length-i.length}let nE={alphanumeric:(e,t,n)=>nP(nR(e.getValue(n)).toLowerCase(),nR(t.getValue(n)).toLowerCase()),alphanumericCaseSensitive:(e,t,n)=>nP(nR(e.getValue(n)),nR(t.getValue(n))),text:(e,t,n)=>nT(nR(e.getValue(n)).toLowerCase(),nR(t.getValue(n)).toLowerCase()),textCaseSensitive:(e,t,n)=>nT(nR(e.getValue(n)),nR(t.getValue(n))),datetime:(e,t,n)=>{let i=e.getValue(n),l=t.getValue(n);return i>l?1:i<l?-1:0},basic:(e,t,n)=>nT(e.getValue(n),t.getValue(n))},nD=[{createTable:e=>{e.getHeaderGroups=t5(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>{var r,o;let s=null!=(r=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?r:[],a=null!=(o=null==l?void 0:l.map(e=>n.find(t=>t.id===e)).filter(Boolean))?o:[];return t9(t,[...s,...n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),...a],e)},t6(e.options,t8,"getHeaderGroups")),e.getCenterHeaderGroups=t5(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(t,n,i,l)=>t9(t,n=n.filter(e=>!(null!=i&&i.includes(e.id))&&!(null!=l&&l.includes(e.id))),e,"center"),t6(e.options,t8,"getCenterHeaderGroups")),e.getLeftHeaderGroups=t5(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.left],(t,n,i)=>{var l;return t9(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"left")},t6(e.options,t8,"getLeftHeaderGroups")),e.getRightHeaderGroups=t5(()=>[e.getAllColumns(),e.getVisibleLeafColumns(),e.getState().columnPinning.right],(t,n,i)=>{var l;return t9(t,null!=(l=null==i?void 0:i.map(e=>n.find(t=>t.id===e)).filter(Boolean))?l:[],e,"right")},t6(e.options,t8,"getRightHeaderGroups")),e.getFooterGroups=t5(()=>[e.getHeaderGroups()],e=>[...e].reverse(),t6(e.options,t8,"getFooterGroups")),e.getLeftFooterGroups=t5(()=>[e.getLeftHeaderGroups()],e=>[...e].reverse(),t6(e.options,t8,"getLeftFooterGroups")),e.getCenterFooterGroups=t5(()=>[e.getCenterHeaderGroups()],e=>[...e].reverse(),t6(e.options,t8,"getCenterFooterGroups")),e.getRightFooterGroups=t5(()=>[e.getRightHeaderGroups()],e=>[...e].reverse(),t6(e.options,t8,"getRightFooterGroups")),e.getFlatHeaders=t5(()=>[e.getHeaderGroups()],e=>e.map(e=>e.headers).flat(),t6(e.options,t8,"getFlatHeaders")),e.getLeftFlatHeaders=t5(()=>[e.getLeftHeaderGroups()],e=>e.map(e=>e.headers).flat(),t6(e.options,t8,"getLeftFlatHeaders")),e.getCenterFlatHeaders=t5(()=>[e.getCenterHeaderGroups()],e=>e.map(e=>e.headers).flat(),t6(e.options,t8,"getCenterFlatHeaders")),e.getRightFlatHeaders=t5(()=>[e.getRightHeaderGroups()],e=>e.map(e=>e.headers).flat(),t6(e.options,t8,"getRightFlatHeaders")),e.getCenterLeafHeaders=t5(()=>[e.getCenterFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t6(e.options,t8,"getCenterLeafHeaders")),e.getLeftLeafHeaders=t5(()=>[e.getLeftFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t6(e.options,t8,"getLeftLeafHeaders")),e.getRightLeafHeaders=t5(()=>[e.getRightFlatHeaders()],e=>e.filter(e=>{var t;return!(null!=(t=e.subHeaders)&&t.length)}),t6(e.options,t8,"getRightLeafHeaders")),e.getLeafHeaders=t5(()=>[e.getLeftHeaderGroups(),e.getCenterHeaderGroups(),e.getRightHeaderGroups()],(e,t,n)=>{var i,l,r,o,s,a;return[...null!=(i=null==(l=e[0])?void 0:l.headers)?i:[],...null!=(r=null==(o=t[0])?void 0:o.headers)?r:[],...null!=(s=null==(a=n[0])?void 0:a.headers)?s:[]].map(e=>e.getLeafHeaders()).flat()},t6(e.options,t8,"getLeafHeaders"))}},{getInitialState:e=>({columnVisibility:{},...e}),getDefaultOptions:e=>({onColumnVisibilityChange:t3("columnVisibility",e)}),createColumn:(e,t)=>{e.toggleVisibility=n=>{e.getCanHide()&&t.setColumnVisibility(t=>({...t,[e.id]:null!=n?n:!e.getIsVisible()}))},e.getIsVisible=()=>{var n,i;let l=e.columns;return null==(n=l.length?l.some(e=>e.getIsVisible()):null==(i=t.getState().columnVisibility)?void 0:i[e.id])||n},e.getCanHide=()=>{var n,i;return(null==(n=e.columnDef.enableHiding)||n)&&(null==(i=t.options.enableHiding)||i)},e.getToggleVisibilityHandler=()=>t=>{null==e.toggleVisibility||e.toggleVisibility(t.target.checked)}},createRow:(e,t)=>{e._getAllVisibleCells=t5(()=>[e.getAllCells(),t.getState().columnVisibility],e=>e.filter(e=>e.column.getIsVisible()),t6(t.options,"debugRows","_getAllVisibleCells")),e.getVisibleCells=t5(()=>[e.getLeftVisibleCells(),e.getCenterVisibleCells(),e.getRightVisibleCells()],(e,t,n)=>[...e,...t,...n],t6(t.options,"debugRows","getVisibleCells"))},createTable:e=>{let t=(t,n)=>t5(()=>[n(),n().filter(e=>e.getIsVisible()).map(e=>e.id).join("_")],e=>e.filter(e=>null==e.getIsVisible?void 0:e.getIsVisible()),t6(e.options,"debugColumns",t));e.getVisibleFlatColumns=t("getVisibleFlatColumns",()=>e.getAllFlatColumns()),e.getVisibleLeafColumns=t("getVisibleLeafColumns",()=>e.getAllLeafColumns()),e.getLeftVisibleLeafColumns=t("getLeftVisibleLeafColumns",()=>e.getLeftLeafColumns()),e.getRightVisibleLeafColumns=t("getRightVisibleLeafColumns",()=>e.getRightLeafColumns()),e.getCenterVisibleLeafColumns=t("getCenterVisibleLeafColumns",()=>e.getCenterLeafColumns()),e.setColumnVisibility=t=>null==e.options.onColumnVisibilityChange?void 0:e.options.onColumnVisibilityChange(t),e.resetColumnVisibility=t=>{var n;e.setColumnVisibility(t?{}:null!=(n=e.initialState.columnVisibility)?n:{})},e.toggleAllColumnsVisible=t=>{var n;t=null!=(n=t)?n:!e.getIsAllColumnsVisible(),e.setColumnVisibility(e.getAllLeafColumns().reduce((e,n)=>({...e,[n.id]:t||!(null!=n.getCanHide&&n.getCanHide())}),{}))},e.getIsAllColumnsVisible=()=>!e.getAllLeafColumns().some(e=>!(null!=e.getIsVisible&&e.getIsVisible())),e.getIsSomeColumnsVisible=()=>e.getAllLeafColumns().some(e=>null==e.getIsVisible?void 0:e.getIsVisible()),e.getToggleAllColumnsVisibilityHandler=()=>t=>{var n;e.toggleAllColumnsVisible(null==(n=t.target)?void 0:n.checked)}}},{getInitialState:e=>({columnOrder:[],...e}),getDefaultOptions:e=>({onColumnOrderChange:t3("columnOrder",e)}),createColumn:(e,t)=>{e.getIndex=t5(e=>[ny(t,e)],t=>t.findIndex(t=>t.id===e.id),t6(t.options,"debugColumns","getIndex")),e.getIsFirstColumn=n=>{var i;return(null==(i=ny(t,n)[0])?void 0:i.id)===e.id},e.getIsLastColumn=n=>{var i;let l=ny(t,n);return(null==(i=l[l.length-1])?void 0:i.id)===e.id}},createTable:e=>{e.setColumnOrder=t=>null==e.options.onColumnOrderChange?void 0:e.options.onColumnOrderChange(t),e.resetColumnOrder=t=>{var n;e.setColumnOrder(t?[]:null!=(n=e.initialState.columnOrder)?n:[])},e._getOrderColumnsFn=t5(()=>[e.getState().columnOrder,e.getState().grouping,e.options.groupedColumnMode],(e,t,n)=>i=>{let l=[];if(null!=e&&e.length){let t=[...e],n=[...i];for(;n.length&&t.length;){let e=t.shift(),i=n.findIndex(t=>t.id===e);i>-1&&l.push(n.splice(i,1)[0])}l=[...l,...n]}else l=i;var r=l;if(!(null!=t&&t.length)||!n)return r;let o=r.filter(e=>!t.includes(e.id));return"remove"===n?o:[...t.map(e=>r.find(t=>t.id===e)).filter(Boolean),...o]},t6(e.options,"debugTable","_getOrderColumnsFn"))}},{getInitialState:e=>({columnPinning:nh(),...e}),getDefaultOptions:e=>({onColumnPinningChange:t3("columnPinning",e)}),createColumn:(e,t)=>{e.pin=n=>{let i=e.getLeafColumns().map(e=>e.id).filter(Boolean);t.setColumnPinning(e=>{var t,l,r,o,s,a;return"right"===n?{left:(null!=(r=null==e?void 0:e.left)?r:[]).filter(e=>!(null!=i&&i.includes(e))),right:[...(null!=(o=null==e?void 0:e.right)?o:[]).filter(e=>!(null!=i&&i.includes(e))),...i]}:"left"===n?{left:[...(null!=(s=null==e?void 0:e.left)?s:[]).filter(e=>!(null!=i&&i.includes(e))),...i],right:(null!=(a=null==e?void 0:e.right)?a:[]).filter(e=>!(null!=i&&i.includes(e)))}:{left:(null!=(t=null==e?void 0:e.left)?t:[]).filter(e=>!(null!=i&&i.includes(e))),right:(null!=(l=null==e?void 0:e.right)?l:[]).filter(e=>!(null!=i&&i.includes(e)))}})},e.getCanPin=()=>e.getLeafColumns().some(e=>{var n,i,l;return(null==(n=e.columnDef.enablePinning)||n)&&(null==(i=null!=(l=t.options.enableColumnPinning)?l:t.options.enablePinning)||i)}),e.getIsPinned=()=>{let n=e.getLeafColumns().map(e=>e.id),{left:i,right:l}=t.getState().columnPinning,r=n.some(e=>null==i?void 0:i.includes(e)),o=n.some(e=>null==l?void 0:l.includes(e));return r?"left":!!o&&"right"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();return l?null!=(n=null==(i=t.getState().columnPinning)||null==(i=i[l])?void 0:i.indexOf(e.id))?n:-1:0}},createRow:(e,t)=>{e.getCenterVisibleCells=t5(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left,t.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.column.id))},t6(t.options,"debugRows","getCenterVisibleCells")),e.getLeftVisibleCells=t5(()=>[e._getAllVisibleCells(),t.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"left"})),t6(t.options,"debugRows","getLeftVisibleCells")),e.getRightVisibleCells=t5(()=>[e._getAllVisibleCells(),t.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.column.id===t)).filter(Boolean).map(e=>({...e,position:"right"})),t6(t.options,"debugRows","getRightVisibleCells"))},createTable:e=>{e.setColumnPinning=t=>null==e.options.onColumnPinningChange?void 0:e.options.onColumnPinningChange(t),e.resetColumnPinning=t=>{var n,i;return e.setColumnPinning(t?nh():null!=(n=null==(i=e.initialState)?void 0:i.columnPinning)?n:nh())},e.getIsSomeColumnsPinned=t=>{var n,i,l;let r=e.getState().columnPinning;return t?!!(null==(n=r[t])?void 0:n.length):!!((null==(i=r.left)?void 0:i.length)||(null==(l=r.right)?void 0:l.length))},e.getLeftLeafColumns=t5(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t6(e.options,"debugColumns","getLeftLeafColumns")),e.getRightLeafColumns=t5(()=>[e.getAllLeafColumns(),e.getState().columnPinning.right],(e,t)=>(null!=t?t:[]).map(t=>e.find(e=>e.id===t)).filter(Boolean),t6(e.options,"debugColumns","getRightLeafColumns")),e.getCenterLeafColumns=t5(()=>[e.getAllLeafColumns(),e.getState().columnPinning.left,e.getState().columnPinning.right],(e,t,n)=>{let i=[...null!=t?t:[],...null!=n?n:[]];return e.filter(e=>!i.includes(e.id))},t6(e.options,"debugColumns","getCenterLeafColumns"))}},{createColumn:(e,t)=>{e._getFacetedRowModel=t.options.getFacetedRowModel&&t.options.getFacetedRowModel(t,e.id),e.getFacetedRowModel=()=>e._getFacetedRowModel?e._getFacetedRowModel():t.getPreFilteredRowModel(),e._getFacetedUniqueValues=t.options.getFacetedUniqueValues&&t.options.getFacetedUniqueValues(t,e.id),e.getFacetedUniqueValues=()=>e._getFacetedUniqueValues?e._getFacetedUniqueValues():new Map,e._getFacetedMinMaxValues=t.options.getFacetedMinMaxValues&&t.options.getFacetedMinMaxValues(t,e.id),e.getFacetedMinMaxValues=()=>{if(e._getFacetedMinMaxValues)return e._getFacetedMinMaxValues()}}},{getDefaultColumnDef:()=>({filterFn:"auto"}),getInitialState:e=>({columnFilters:[],...e}),getDefaultOptions:e=>({onColumnFiltersChange:t3("columnFilters",e),filterFromLeafRows:!1,maxLeafRowFilterDepth:100}),createColumn:(e,t)=>{e.getAutoFilterFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"string"==typeof i?nc.includesString:"number"==typeof i?nc.inNumberRange:"boolean"==typeof i||null!==i&&"object"==typeof i?nc.equals:Array.isArray(i)?nc.arrIncludes:nc.weakEquals},e.getFilterFn=()=>{var n,i;return t4(e.columnDef.filterFn)?e.columnDef.filterFn:"auto"===e.columnDef.filterFn?e.getAutoFilterFn():null!=(n=null==(i=t.options.filterFns)?void 0:i[e.columnDef.filterFn])?n:nc[e.columnDef.filterFn]},e.getCanFilter=()=>{var n,i,l;return(null==(n=e.columnDef.enableColumnFilter)||n)&&(null==(i=t.options.enableColumnFilters)||i)&&(null==(l=t.options.enableFilters)||l)&&!!e.accessorFn},e.getIsFiltered=()=>e.getFilterIndex()>-1,e.getFilterValue=()=>{var n;return null==(n=t.getState().columnFilters)||null==(n=n.find(t=>t.id===e.id))?void 0:n.value},e.getFilterIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().columnFilters)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.setFilterValue=n=>{t.setColumnFilters(t=>{var i,l;let r=e.getFilterFn(),o=null==t?void 0:t.find(t=>t.id===e.id),s=t2(n,o?o.value:void 0);if(np(r,s,e))return null!=(i=null==t?void 0:t.filter(t=>t.id!==e.id))?i:[];let a={id:e.id,value:s};return o?null!=(l=null==t?void 0:t.map(t=>t.id===e.id?a:t))?l:[]:null!=t&&t.length?[...t,a]:[a]})}},createRow:(e,t)=>{e.columnFilters={},e.columnFiltersMeta={}},createTable:e=>{e.setColumnFilters=t=>{let n=e.getAllLeafColumns();null==e.options.onColumnFiltersChange||e.options.onColumnFiltersChange(e=>{var i;return null==(i=t2(t,e))?void 0:i.filter(e=>{let t=n.find(t=>t.id===e.id);return!(t&&np(t.getFilterFn(),e.value,t))&&!0})})},e.resetColumnFilters=t=>{var n,i;e.setColumnFilters(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.columnFilters)?n:[])},e.getPreFilteredRowModel=()=>e.getCoreRowModel(),e.getFilteredRowModel=()=>(!e._getFilteredRowModel&&e.options.getFilteredRowModel&&(e._getFilteredRowModel=e.options.getFilteredRowModel(e)),e.options.manualFiltering||!e._getFilteredRowModel)?e.getPreFilteredRowModel():e._getFilteredRowModel()}},{createTable:e=>{e._getGlobalFacetedRowModel=e.options.getFacetedRowModel&&e.options.getFacetedRowModel(e,"__global__"),e.getGlobalFacetedRowModel=()=>e.options.manualFiltering||!e._getGlobalFacetedRowModel?e.getPreFilteredRowModel():e._getGlobalFacetedRowModel(),e._getGlobalFacetedUniqueValues=e.options.getFacetedUniqueValues&&e.options.getFacetedUniqueValues(e,"__global__"),e.getGlobalFacetedUniqueValues=()=>e._getGlobalFacetedUniqueValues?e._getGlobalFacetedUniqueValues():new Map,e._getGlobalFacetedMinMaxValues=e.options.getFacetedMinMaxValues&&e.options.getFacetedMinMaxValues(e,"__global__"),e.getGlobalFacetedMinMaxValues=()=>{if(e._getGlobalFacetedMinMaxValues)return e._getGlobalFacetedMinMaxValues()}}},{getInitialState:e=>({globalFilter:void 0,...e}),getDefaultOptions:e=>({onGlobalFilterChange:t3("globalFilter",e),globalFilterFn:"auto",getColumnCanGlobalFilter:t=>{var n;let i=null==(n=e.getCoreRowModel().flatRows[0])||null==(n=n._getAllCellsByColumnId()[t.id])?void 0:n.getValue();return"string"==typeof i||"number"==typeof i}}),createColumn:(e,t)=>{e.getCanGlobalFilter=()=>{var n,i,l,r;return(null==(n=e.columnDef.enableGlobalFilter)||n)&&(null==(i=t.options.enableGlobalFilter)||i)&&(null==(l=t.options.enableFilters)||l)&&(null==(r=null==t.options.getColumnCanGlobalFilter?void 0:t.options.getColumnCanGlobalFilter(e))||r)&&!!e.accessorFn}},createTable:e=>{e.getGlobalAutoFilterFn=()=>nc.includesString,e.getGlobalFilterFn=()=>{var t,n;let{globalFilterFn:i}=e.options;return t4(i)?i:"auto"===i?e.getGlobalAutoFilterFn():null!=(t=null==(n=e.options.filterFns)?void 0:n[i])?t:nc[i]},e.setGlobalFilter=t=>{null==e.options.onGlobalFilterChange||e.options.onGlobalFilterChange(t)},e.resetGlobalFilter=t=>{e.setGlobalFilter(t?void 0:e.initialState.globalFilter)}}},{getInitialState:e=>({sorting:[],...e}),getDefaultColumnDef:()=>({sortingFn:"auto",sortUndefined:1}),getDefaultOptions:e=>({onSortingChange:t3("sorting",e),isMultiSortEvent:e=>e.shiftKey}),createColumn:(e,t)=>{e.getAutoSortingFn=()=>{let n=t.getFilteredRowModel().flatRows.slice(10),i=!1;for(let t of n){let n=null==t?void 0:t.getValue(e.id);if("[object Date]"===Object.prototype.toString.call(n))return nE.datetime;if("string"==typeof n&&(i=!0,n.split(nC).length>1))return nE.alphanumeric}return i?nE.text:nE.basic},e.getAutoSortDir=()=>{let n=t.getFilteredRowModel().flatRows[0];return"string"==typeof(null==n?void 0:n.getValue(e.id))?"asc":"desc"},e.getSortingFn=()=>{var n,i;if(!e)throw Error();return t4(e.columnDef.sortingFn)?e.columnDef.sortingFn:"auto"===e.columnDef.sortingFn?e.getAutoSortingFn():null!=(n=null==(i=t.options.sortingFns)?void 0:i[e.columnDef.sortingFn])?n:nE[e.columnDef.sortingFn]},e.toggleSorting=(n,i)=>{let l=e.getNextSortingOrder(),r=null!=n;t.setSorting(o=>{let s,a=null==o?void 0:o.find(t=>t.id===e.id),d=null==o?void 0:o.findIndex(t=>t.id===e.id),c=[],u=r?n:"desc"===l;if("toggle"!=(s=null!=o&&o.length&&e.getCanMultiSort()&&i?a?"toggle":"add":null!=o&&o.length&&d!==o.length-1?"replace":a?"toggle":"replace")||r||l||(s="remove"),"add"===s){var p;(c=[...o,{id:e.id,desc:u}]).splice(0,c.length-(null!=(p=t.options.maxMultiSortColCount)?p:Number.MAX_SAFE_INTEGER))}else c="toggle"===s?o.map(t=>t.id===e.id?{...t,desc:u}:t):"remove"===s?o.filter(t=>t.id!==e.id):[{id:e.id,desc:u}];return c})},e.getFirstSortDir=()=>{var n,i;return(null!=(n=null!=(i=e.columnDef.sortDescFirst)?i:t.options.sortDescFirst)?n:"desc"===e.getAutoSortDir())?"desc":"asc"},e.getNextSortingOrder=n=>{var i,l;let r=e.getFirstSortDir(),o=e.getIsSorted();return o?(o===r||null!=(i=t.options.enableSortingRemoval)&&!i||!!n&&null!=(l=t.options.enableMultiRemove)&&!l)&&("desc"===o?"asc":"desc"):r},e.getCanSort=()=>{var n,i;return(null==(n=e.columnDef.enableSorting)||n)&&(null==(i=t.options.enableSorting)||i)&&!!e.accessorFn},e.getCanMultiSort=()=>{var n,i;return null!=(n=null!=(i=e.columnDef.enableMultiSort)?i:t.options.enableMultiSort)?n:!!e.accessorFn},e.getIsSorted=()=>{var n;let i=null==(n=t.getState().sorting)?void 0:n.find(t=>t.id===e.id);return!!i&&(i.desc?"desc":"asc")},e.getSortIndex=()=>{var n,i;return null!=(n=null==(i=t.getState().sorting)?void 0:i.findIndex(t=>t.id===e.id))?n:-1},e.clearSorting=()=>{t.setSorting(t=>null!=t&&t.length?t.filter(t=>t.id!==e.id):[])},e.getToggleSortingHandler=()=>{let n=e.getCanSort();return i=>{n&&(null==i.persist||i.persist(),null==e.toggleSorting||e.toggleSorting(void 0,!!e.getCanMultiSort()&&(null==t.options.isMultiSortEvent?void 0:t.options.isMultiSortEvent(i))))}}},createTable:e=>{e.setSorting=t=>null==e.options.onSortingChange?void 0:e.options.onSortingChange(t),e.resetSorting=t=>{var n,i;e.setSorting(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.sorting)?n:[])},e.getPreSortedRowModel=()=>e.getGroupedRowModel(),e.getSortedRowModel=()=>(!e._getSortedRowModel&&e.options.getSortedRowModel&&(e._getSortedRowModel=e.options.getSortedRowModel(e)),e.options.manualSorting||!e._getSortedRowModel)?e.getPreSortedRowModel():e._getSortedRowModel()}},{getDefaultColumnDef:()=>({aggregatedCell:e=>{var t,n;return null!=(t=null==(n=e.getValue())||null==n.toString?void 0:n.toString())?t:null},aggregationFn:"auto"}),getInitialState:e=>({grouping:[],...e}),getDefaultOptions:e=>({onGroupingChange:t3("grouping",e),groupedColumnMode:"reorder"}),createColumn:(e,t)=>{e.toggleGrouping=()=>{t.setGrouping(t=>null!=t&&t.includes(e.id)?t.filter(t=>t!==e.id):[...null!=t?t:[],e.id])},e.getCanGroup=()=>{var n,i;return(null==(n=e.columnDef.enableGrouping)||n)&&(null==(i=t.options.enableGrouping)||i)&&(!!e.accessorFn||!!e.columnDef.getGroupingValue)},e.getIsGrouped=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.includes(e.id)},e.getGroupedIndex=()=>{var n;return null==(n=t.getState().grouping)?void 0:n.indexOf(e.id)},e.getToggleGroupingHandler=()=>{let t=e.getCanGroup();return()=>{t&&e.toggleGrouping()}},e.getAutoAggregationFn=()=>{let n=t.getCoreRowModel().flatRows[0],i=null==n?void 0:n.getValue(e.id);return"number"==typeof i?nm.sum:"[object Date]"===Object.prototype.toString.call(i)?nm.extent:void 0},e.getAggregationFn=()=>{var n,i;if(!e)throw Error();return t4(e.columnDef.aggregationFn)?e.columnDef.aggregationFn:"auto"===e.columnDef.aggregationFn?e.getAutoAggregationFn():null!=(n=null==(i=t.options.aggregationFns)?void 0:i[e.columnDef.aggregationFn])?n:nm[e.columnDef.aggregationFn]}},createTable:e=>{e.setGrouping=t=>null==e.options.onGroupingChange?void 0:e.options.onGroupingChange(t),e.resetGrouping=t=>{var n,i;e.setGrouping(t?[]:null!=(n=null==(i=e.initialState)?void 0:i.grouping)?n:[])},e.getPreGroupedRowModel=()=>e.getFilteredRowModel(),e.getGroupedRowModel=()=>(!e._getGroupedRowModel&&e.options.getGroupedRowModel&&(e._getGroupedRowModel=e.options.getGroupedRowModel(e)),e.options.manualGrouping||!e._getGroupedRowModel)?e.getPreGroupedRowModel():e._getGroupedRowModel()},createRow:(e,t)=>{e.getIsGrouped=()=>!!e.groupingColumnId,e.getGroupingValue=n=>{if(e._groupingValuesCache.hasOwnProperty(n))return e._groupingValuesCache[n];let i=t.getColumn(n);return null!=i&&i.columnDef.getGroupingValue?(e._groupingValuesCache[n]=i.columnDef.getGroupingValue(e.original),e._groupingValuesCache[n]):e.getValue(n)},e._groupingValuesCache={}},createCell:(e,t,n,i)=>{e.getIsGrouped=()=>t.getIsGrouped()&&t.id===n.groupingColumnId,e.getIsPlaceholder=()=>!e.getIsGrouped()&&t.getIsGrouped(),e.getIsAggregated=()=>{var t;return!e.getIsGrouped()&&!e.getIsPlaceholder()&&!!(null!=(t=n.subRows)&&t.length)}}},{getInitialState:e=>({expanded:{},...e}),getDefaultOptions:e=>({onExpandedChange:t3("expanded",e),paginateExpandedRows:!0}),createTable:e=>{let t=!1,n=!1;e._autoResetExpanded=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetExpanded)?i:!e.options.manualExpanding){if(n)return;n=!0,e._queue(()=>{e.resetExpanded(),n=!1})}},e.setExpanded=t=>null==e.options.onExpandedChange?void 0:e.options.onExpandedChange(t),e.toggleAllRowsExpanded=t=>{(null!=t?t:!e.getIsAllRowsExpanded())?e.setExpanded(!0):e.setExpanded({})},e.resetExpanded=t=>{var n,i;e.setExpanded(t?{}:null!=(n=null==(i=e.initialState)?void 0:i.expanded)?n:{})},e.getCanSomeRowsExpand=()=>e.getPrePaginationRowModel().flatRows.some(e=>e.getCanExpand()),e.getToggleAllRowsExpandedHandler=()=>t=>{null==t.persist||t.persist(),e.toggleAllRowsExpanded()},e.getIsSomeRowsExpanded=()=>{let t=e.getState().expanded;return!0===t||Object.values(t).some(Boolean)},e.getIsAllRowsExpanded=()=>{let t=e.getState().expanded;return"boolean"==typeof t?!0===t:!(!Object.keys(t).length||e.getRowModel().flatRows.some(e=>!e.getIsExpanded()))},e.getExpandedDepth=()=>{let t=0;return(!0===e.getState().expanded?Object.keys(e.getRowModel().rowsById):Object.keys(e.getState().expanded)).forEach(e=>{let n=e.split(".");t=Math.max(t,n.length)}),t},e.getPreExpandedRowModel=()=>e.getSortedRowModel(),e.getExpandedRowModel=()=>(!e._getExpandedRowModel&&e.options.getExpandedRowModel&&(e._getExpandedRowModel=e.options.getExpandedRowModel(e)),e.options.manualExpanding||!e._getExpandedRowModel)?e.getPreExpandedRowModel():e._getExpandedRowModel()},createRow:(e,t)=>{e.toggleExpanded=n=>{t.setExpanded(i=>{var l;let r=!0===i||!!(null!=i&&i[e.id]),o={};if(!0===i?Object.keys(t.getRowModel().rowsById).forEach(e=>{o[e]=!0}):o=i,n=null!=(l=n)?l:!r,!r&&n)return{...o,[e.id]:!0};if(r&&!n){let{[e.id]:t,...n}=o;return n}return i})},e.getIsExpanded=()=>{var n;let i=t.getState().expanded;return!!(null!=(n=null==t.options.getIsRowExpanded?void 0:t.options.getIsRowExpanded(e))?n:!0===i||(null==i?void 0:i[e.id]))},e.getCanExpand=()=>{var n,i,l;return null!=(n=null==t.options.getRowCanExpand?void 0:t.options.getRowCanExpand(e))?n:(null==(i=t.options.enableExpanding)||i)&&!!(null!=(l=e.subRows)&&l.length)},e.getIsAllParentsExpanded=()=>{let n=!0,i=e;for(;n&&i.parentId;)n=(i=t.getRow(i.parentId,!0)).getIsExpanded();return n},e.getToggleExpandedHandler=()=>{let t=e.getCanExpand();return()=>{t&&e.toggleExpanded()}}}},{getInitialState:e=>({...e,pagination:{...nv(),...null==e?void 0:e.pagination}}),getDefaultOptions:e=>({onPaginationChange:t3("pagination",e)}),createTable:e=>{let t=!1,n=!1;e._autoResetPageIndex=()=>{var i,l;if(!t)return void e._queue(()=>{t=!0});if(null!=(i=null!=(l=e.options.autoResetAll)?l:e.options.autoResetPageIndex)?i:!e.options.manualPagination){if(n)return;n=!0,e._queue(()=>{e.resetPageIndex(),n=!1})}},e.setPagination=t=>null==e.options.onPaginationChange?void 0:e.options.onPaginationChange(e=>t2(t,e)),e.resetPagination=t=>{var n;e.setPagination(t?nv():null!=(n=e.initialState.pagination)?n:nv())},e.setPageIndex=t=>{e.setPagination(n=>{let i=t2(t,n.pageIndex);return i=Math.max(0,Math.min(i,void 0===e.options.pageCount||-1===e.options.pageCount?Number.MAX_SAFE_INTEGER:e.options.pageCount-1)),{...n,pageIndex:i}})},e.resetPageIndex=t=>{var n,i;e.setPageIndex(t?0:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageIndex)?n:0)},e.resetPageSize=t=>{var n,i;e.setPageSize(t?10:null!=(n=null==(i=e.initialState)||null==(i=i.pagination)?void 0:i.pageSize)?n:10)},e.setPageSize=t=>{e.setPagination(e=>{let n=Math.max(1,t2(t,e.pageSize)),i=Math.floor(e.pageSize*e.pageIndex/n);return{...e,pageIndex:i,pageSize:n}})},e.setPageCount=t=>e.setPagination(n=>{var i;let l=t2(t,null!=(i=e.options.pageCount)?i:-1);return"number"==typeof l&&(l=Math.max(-1,l)),{...n,pageCount:l}}),e.getPageOptions=t5(()=>[e.getPageCount()],e=>{let t=[];return e&&e>0&&(t=[...Array(e)].fill(null).map((e,t)=>t)),t},t6(e.options,"debugTable","getPageOptions")),e.getCanPreviousPage=()=>e.getState().pagination.pageIndex>0,e.getCanNextPage=()=>{let{pageIndex:t}=e.getState().pagination,n=e.getPageCount();return -1===n||0!==n&&t<n-1},e.previousPage=()=>e.setPageIndex(e=>e-1),e.nextPage=()=>e.setPageIndex(e=>e+1),e.firstPage=()=>e.setPageIndex(0),e.lastPage=()=>e.setPageIndex(e.getPageCount()-1),e.getPrePaginationRowModel=()=>e.getExpandedRowModel(),e.getPaginationRowModel=()=>(!e._getPaginationRowModel&&e.options.getPaginationRowModel&&(e._getPaginationRowModel=e.options.getPaginationRowModel(e)),e.options.manualPagination||!e._getPaginationRowModel)?e.getPrePaginationRowModel():e._getPaginationRowModel(),e.getPageCount=()=>{var t;return null!=(t=e.options.pageCount)?t:Math.ceil(e.getRowCount()/e.getState().pagination.pageSize)},e.getRowCount=()=>{var t;return null!=(t=e.options.rowCount)?t:e.getPrePaginationRowModel().rows.length}}},{getInitialState:e=>({rowPinning:nj(),...e}),getDefaultOptions:e=>({onRowPinningChange:t3("rowPinning",e)}),createRow:(e,t)=>{e.pin=(n,i,l)=>{let r=i?e.getLeafRows().map(e=>{let{id:t}=e;return t}):[],o=new Set([...l?e.getParentRows().map(e=>{let{id:t}=e;return t}):[],e.id,...r]);t.setRowPinning(e=>{var t,i,l,r,s,a;return"bottom"===n?{top:(null!=(l=null==e?void 0:e.top)?l:[]).filter(e=>!(null!=o&&o.has(e))),bottom:[...(null!=(r=null==e?void 0:e.bottom)?r:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)]}:"top"===n?{top:[...(null!=(s=null==e?void 0:e.top)?s:[]).filter(e=>!(null!=o&&o.has(e))),...Array.from(o)],bottom:(null!=(a=null==e?void 0:e.bottom)?a:[]).filter(e=>!(null!=o&&o.has(e)))}:{top:(null!=(t=null==e?void 0:e.top)?t:[]).filter(e=>!(null!=o&&o.has(e))),bottom:(null!=(i=null==e?void 0:e.bottom)?i:[]).filter(e=>!(null!=o&&o.has(e)))}})},e.getCanPin=()=>{var n;let{enableRowPinning:i,enablePinning:l}=t.options;return"function"==typeof i?i(e):null==(n=null!=i?i:l)||n},e.getIsPinned=()=>{let n=[e.id],{top:i,bottom:l}=t.getState().rowPinning,r=n.some(e=>null==i?void 0:i.includes(e)),o=n.some(e=>null==l?void 0:l.includes(e));return r?"top":!!o&&"bottom"},e.getPinnedIndex=()=>{var n,i;let l=e.getIsPinned();if(!l)return -1;let r=null==(n="top"===l?t.getTopRows():t.getBottomRows())?void 0:n.map(e=>{let{id:t}=e;return t});return null!=(i=null==r?void 0:r.indexOf(e.id))?i:-1}},createTable:e=>{e.setRowPinning=t=>null==e.options.onRowPinningChange?void 0:e.options.onRowPinningChange(t),e.resetRowPinning=t=>{var n,i;return e.setRowPinning(t?nj():null!=(n=null==(i=e.initialState)?void 0:i.rowPinning)?n:nj())},e.getIsSomeRowsPinned=t=>{var n,i,l;let r=e.getState().rowPinning;return t?!!(null==(n=r[t])?void 0:n.length):!!((null==(i=r.top)?void 0:i.length)||(null==(l=r.bottom)?void 0:l.length))},e._getPinnedRows=(t,n,i)=>{var l;return(null==(l=e.options.keepPinnedRows)||l?(null!=n?n:[]).map(t=>{let n=e.getRow(t,!0);return n.getIsAllParentsExpanded()?n:null}):(null!=n?n:[]).map(e=>t.find(t=>t.id===e))).filter(Boolean).map(e=>({...e,position:i}))},e.getTopRows=t5(()=>[e.getRowModel().rows,e.getState().rowPinning.top],(t,n)=>e._getPinnedRows(t,n,"top"),t6(e.options,"debugRows","getTopRows")),e.getBottomRows=t5(()=>[e.getRowModel().rows,e.getState().rowPinning.bottom],(t,n)=>e._getPinnedRows(t,n,"bottom"),t6(e.options,"debugRows","getBottomRows")),e.getCenterRows=t5(()=>[e.getRowModel().rows,e.getState().rowPinning.top,e.getState().rowPinning.bottom],(e,t,n)=>{let i=new Set([...null!=t?t:[],...null!=n?n:[]]);return e.filter(e=>!i.has(e.id))},t6(e.options,"debugRows","getCenterRows"))}},{getInitialState:e=>({rowSelection:{},...e}),getDefaultOptions:e=>({onRowSelectionChange:t3("rowSelection",e),enableRowSelection:!0,enableMultiRowSelection:!0,enableSubRowSelection:!0}),createTable:e=>{e.setRowSelection=t=>null==e.options.onRowSelectionChange?void 0:e.options.onRowSelectionChange(t),e.resetRowSelection=t=>{var n;return e.setRowSelection(t?{}:null!=(n=e.initialState.rowSelection)?n:{})},e.toggleAllRowsSelected=t=>{e.setRowSelection(n=>{t=void 0!==t?t:!e.getIsAllRowsSelected();let i={...n},l=e.getPreGroupedRowModel().flatRows;return t?l.forEach(e=>{e.getCanSelect()&&(i[e.id]=!0)}):l.forEach(e=>{delete i[e.id]}),i})},e.toggleAllPageRowsSelected=t=>e.setRowSelection(n=>{let i=void 0!==t?t:!e.getIsAllPageRowsSelected(),l={...n};return e.getRowModel().rows.forEach(t=>{nw(l,t.id,i,!0,e)}),l}),e.getPreSelectedRowModel=()=>e.getCoreRowModel(),e.getSelectedRowModel=t5(()=>[e.getState().rowSelection,e.getCoreRowModel()],(t,n)=>Object.keys(t).length?nS(e,n):{rows:[],flatRows:[],rowsById:{}},t6(e.options,"debugTable","getSelectedRowModel")),e.getFilteredSelectedRowModel=t5(()=>[e.getState().rowSelection,e.getFilteredRowModel()],(t,n)=>Object.keys(t).length?nS(e,n):{rows:[],flatRows:[],rowsById:{}},t6(e.options,"debugTable","getFilteredSelectedRowModel")),e.getGroupedSelectedRowModel=t5(()=>[e.getState().rowSelection,e.getSortedRowModel()],(t,n)=>Object.keys(t).length?nS(e,n):{rows:[],flatRows:[],rowsById:{}},t6(e.options,"debugTable","getGroupedSelectedRowModel")),e.getIsAllRowsSelected=()=>{let t=e.getFilteredRowModel().flatRows,{rowSelection:n}=e.getState(),i=!!(t.length&&Object.keys(n).length);return i&&t.some(e=>e.getCanSelect()&&!n[e.id])&&(i=!1),i},e.getIsAllPageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows.filter(e=>e.getCanSelect()),{rowSelection:n}=e.getState(),i=!!t.length;return i&&t.some(e=>!n[e.id])&&(i=!1),i},e.getIsSomeRowsSelected=()=>{var t;let n=Object.keys(null!=(t=e.getState().rowSelection)?t:{}).length;return n>0&&n<e.getFilteredRowModel().flatRows.length},e.getIsSomePageRowsSelected=()=>{let t=e.getPaginationRowModel().flatRows;return!e.getIsAllPageRowsSelected()&&t.filter(e=>e.getCanSelect()).some(e=>e.getIsSelected()||e.getIsSomeSelected())},e.getToggleAllRowsSelectedHandler=()=>t=>{e.toggleAllRowsSelected(t.target.checked)},e.getToggleAllPageRowsSelectedHandler=()=>t=>{e.toggleAllPageRowsSelected(t.target.checked)}},createRow:(e,t)=>{e.toggleSelected=(n,i)=>{let l=e.getIsSelected();t.setRowSelection(r=>{var o;if(n=void 0!==n?n:!l,e.getCanSelect()&&l===n)return r;let s={...r};return nw(s,e.id,n,null==(o=null==i?void 0:i.selectChildren)||o,t),s})},e.getIsSelected=()=>{let{rowSelection:n}=t.getState();return n_(e,n)},e.getIsSomeSelected=()=>{let{rowSelection:n}=t.getState();return"some"===nI(e,n)},e.getIsAllSubRowsSelected=()=>{let{rowSelection:n}=t.getState();return"all"===nI(e,n)},e.getCanSelect=()=>{var n;return"function"==typeof t.options.enableRowSelection?t.options.enableRowSelection(e):null==(n=t.options.enableRowSelection)||n},e.getCanSelectSubRows=()=>{var n;return"function"==typeof t.options.enableSubRowSelection?t.options.enableSubRowSelection(e):null==(n=t.options.enableSubRowSelection)||n},e.getCanMultiSelect=()=>{var n;return"function"==typeof t.options.enableMultiRowSelection?t.options.enableMultiRowSelection(e):null==(n=t.options.enableMultiRowSelection)||n},e.getToggleSelectedHandler=()=>{let t=e.getCanSelect();return n=>{var i;t&&e.toggleSelected(null==(i=n.target)?void 0:i.checked)}}}},{getDefaultColumnDef:()=>ng,getInitialState:e=>({columnSizing:{},columnSizingInfo:nf(),...e}),getDefaultOptions:e=>({columnResizeMode:"onEnd",columnResizeDirection:"ltr",onColumnSizingChange:t3("columnSizing",e),onColumnSizingInfoChange:t3("columnSizingInfo",e)}),createColumn:(e,t)=>{e.getSize=()=>{var n,i,l;let r=t.getState().columnSizing[e.id];return Math.min(Math.max(null!=(n=e.columnDef.minSize)?n:ng.minSize,null!=(i=null!=r?r:e.columnDef.size)?i:ng.size),null!=(l=e.columnDef.maxSize)?l:ng.maxSize)},e.getStart=t5(e=>[e,ny(t,e),t.getState().columnSizing],(t,n)=>n.slice(0,e.getIndex(t)).reduce((e,t)=>e+t.getSize(),0),t6(t.options,"debugColumns","getStart")),e.getAfter=t5(e=>[e,ny(t,e),t.getState().columnSizing],(t,n)=>n.slice(e.getIndex(t)+1).reduce((e,t)=>e+t.getSize(),0),t6(t.options,"debugColumns","getAfter")),e.resetSize=()=>{t.setColumnSizing(t=>{let{[e.id]:n,...i}=t;return i})},e.getCanResize=()=>{var n,i;return(null==(n=e.columnDef.enableResizing)||n)&&(null==(i=t.options.enableColumnResizing)||i)},e.getIsResizing=()=>t.getState().columnSizingInfo.isResizingColumn===e.id},createHeader:(e,t)=>{e.getSize=()=>{let t=0,n=e=>{if(e.subHeaders.length)e.subHeaders.forEach(n);else{var i;t+=null!=(i=e.column.getSize())?i:0}};return n(e),t},e.getStart=()=>{if(e.index>0){let t=e.headerGroup.headers[e.index-1];return t.getStart()+t.getSize()}return 0},e.getResizeHandler=n=>{let i=t.getColumn(e.column.id),l=null==i?void 0:i.getCanResize();return r=>{if(!i||!l||(null==r.persist||r.persist(),nb(r)&&r.touches&&r.touches.length>1))return;let o=e.getSize(),s=e?e.getLeafHeaders().map(e=>[e.column.id,e.column.getSize()]):[[i.id,i.getSize()]],a=nb(r)?Math.round(r.touches[0].clientX):r.clientX,d={},c=(e,n)=>{"number"==typeof n&&(t.setColumnSizingInfo(e=>{var i,l;let r="rtl"===t.options.columnResizeDirection?-1:1,o=(n-(null!=(i=null==e?void 0:e.startOffset)?i:0))*r,s=Math.max(o/(null!=(l=null==e?void 0:e.startSize)?l:0),-.999999);return e.columnSizingStart.forEach(e=>{let[t,n]=e;d[t]=Math.round(100*Math.max(n+n*s,0))/100}),{...e,deltaOffset:o,deltaPercentage:s}}),("onChange"===t.options.columnResizeMode||"end"===e)&&t.setColumnSizing(e=>({...e,...d})))},u=e=>{c("end",e),t.setColumnSizingInfo(e=>({...e,isResizingColumn:!1,startOffset:null,startSize:null,deltaOffset:null,deltaPercentage:null,columnSizingStart:[]}))},p=n||("undefined"!=typeof document?document:null),m={moveHandler:e=>c("move",e.clientX),upHandler:e=>{null==p||p.removeEventListener("mousemove",m.moveHandler),null==p||p.removeEventListener("mouseup",m.upHandler),u(e.clientX)}},h={moveHandler:e=>(e.cancelable&&(e.preventDefault(),e.stopPropagation()),c("move",e.touches[0].clientX),!1),upHandler:e=>{var t;null==p||p.removeEventListener("touchmove",h.moveHandler),null==p||p.removeEventListener("touchend",h.upHandler),e.cancelable&&(e.preventDefault(),e.stopPropagation()),u(null==(t=e.touches[0])?void 0:t.clientX)}},g=!!function(){if("boolean"==typeof nx)return nx;let e=!1;try{let t=()=>{};window.addEventListener("test",t,{get passive(){return e=!0,!1}}),window.removeEventListener("test",t)}catch(t){e=!1}return nx=e}()&&{passive:!1};nb(r)?(null==p||p.addEventListener("touchmove",h.moveHandler,g),null==p||p.addEventListener("touchend",h.upHandler,g)):(null==p||p.addEventListener("mousemove",m.moveHandler,g),null==p||p.addEventListener("mouseup",m.upHandler,g)),t.setColumnSizingInfo(e=>({...e,startOffset:a,startSize:o,deltaOffset:0,deltaPercentage:0,columnSizingStart:s,isResizingColumn:i.id}))}}},createTable:e=>{e.setColumnSizing=t=>null==e.options.onColumnSizingChange?void 0:e.options.onColumnSizingChange(t),e.setColumnSizingInfo=t=>null==e.options.onColumnSizingInfoChange?void 0:e.options.onColumnSizingInfoChange(t),e.resetColumnSizing=t=>{var n;e.setColumnSizing(t?{}:null!=(n=e.initialState.columnSizing)?n:{})},e.resetHeaderSizeInfo=t=>{var n;e.setColumnSizingInfo(t?nf():null!=(n=e.initialState.columnSizingInfo)?n:nf())},e.getTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getLeftTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getLeftHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getCenterTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getCenterHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0},e.getRightTotalSize=()=>{var t,n;return null!=(t=null==(n=e.getRightHeaderGroups()[0])?void 0:n.headers.reduce((e,t)=>e+t.getSize(),0))?t:0}}}];function nk(e,t){var n,i,l;let r;return e?"function"==typeof(i=n=e)&&(r=Object.getPrototypeOf(i)).prototype&&r.prototype.isReactComponent||"function"==typeof n||"object"==typeof(l=n)&&"symbol"==typeof l.$$typeof&&["react.memo","react.forward_ref"].includes(l.$$typeof.description)?a.createElement(e,t):e:null}let nF="diffView",nA="previousDocument",nL="nextDocument";function nV(){let e,t,n,i=(0,s.c)(9),{navigate:l,state:r}=(0,eV.useRouter)();i[0]!==l||i[1]!==r?(e=e=>{let{mode:t,previousDocument:n,nextDocument:i}=e,o={...(0,eM.fromPairs)(r._searchParams),...t?{[nF]:t}:{},...n?{[nA]:[n.type,n.id].join(",")}:{},...i?{[nL]:[i.type,i.id].join(",")}:{}};l({...r,_searchParams:(0,eO.toPairs)(o)})},i[0]=l,i[1]=r,i[2]=e):e=i[2];let o=e;i[3]!==l||i[4]!==r?(t=()=>{l({...r,_searchParams:(r._searchParams??[]).filter(nM)})},i[3]=l,i[4]=r,i[5]=t):t=i[5];let a=t;return i[6]!==a||i[7]!==o?(n={navigateDiffView:o,exitDiffView:a},i[6]=a,i[7]=o,i[8]=n):n=i[8],n}function nM(e){let[t]=e;return![nF,nA,nL].includes(t)}let nO=["version"];function nz(e){let t,n,i,l,r,o,d,c,u=(0,s.c)(22);u[0]!==e?(t=void 0===e?{}:e,u[0]=e,u[1]=t):t=u[1];let{onParamsError:p}=t,{state:m}=(0,eV.useRouter)();if(u[2]!==m._searchParams){let e=new URLSearchParams(m._searchParams);i=e.get(nA),n=e.get(nL),l=e.get(nF),u[2]=m._searchParams,u[3]=n,u[4]=i,u[5]=l}else n=u[3],i=u[4],l=u[5];let h=l,g=[i,n,h].some(nB),f=i??"",x=n??"",b=h??"";u[6]!==f||u[7]!==x||u[8]!==b?(r=function({previousDocument:e,nextDocument:t,mode:n}){let i=[],[l,r]=e.split(",").filter(Boolean),[o,s]=t.split(",").filter(Boolean);return nO.includes(n)||i.push(["invalidModeParam",n]),(typeof l>"u"||typeof r>"u")&&i.push(["invalidPreviousDocumentParam",e]),(typeof o>"u"||typeof s>"u")&&i.push(["invalidNextDocumentParam",t]),0!==i.length?{result:"error",errors:i}:{result:"success",params:{mode:n,documents:{previous:{type:l,id:r},next:{type:o,id:s}}}}}({previousDocument:f,nextDocument:x,mode:b}),u[6]=f,u[7]=x,u[8]=b,u[9]=r):r=u[9];let y=r;if(u[10]!==g||u[11]!==p||u[12]!==y.errors||u[13]!==y.result?(o=()=>{"error"===y.result&&g&&p?.(y.errors)},u[10]=g,u[11]=p,u[12]=y.errors,u[13]=y.result,u[14]=o):o=u[14],u[15]!==g||u[16]!==p||u[17]!==y?(d=[g,p,y],u[15]=g,u[16]=p,u[17]=y,u[18]=d):d=u[18],(0,a.useEffect)(o,d),"error"===y.result){let e;return u[19]===Symbol.for("react.memo_cache_sentinel")?(e={isActive:!1},u[19]=e):e=u[19],e}return u[20]!==y.params?(c={state:"ready",isActive:!0,...y.params},u[20]=y.params,u[21]=c):c=u[21],c}function nB(e){return null!==e}function nN(e){return null!==e}function nH(e,t){return(0,c.isPublishedId)(e)?"published":(0,c.isDraftId)(e)?"draft":t.find(({_id:t})=>(0,d.getReleaseIdFromReleaseDocumentId)(t)===(0,c.getVersionFromId)(e))}let n$=eD.styled.header`
  display: grid;
  grid-area: header;
  grid-template-columns: 1fr min-content 1fr;
  border-block-end: 1px solid var(--card-border-color);
`,nU=eD.styled.div`
  display: flex;
  justify-content: space-between;
  align-items: center;
`,nG=e=>{let t,n,i,l,r,a,c,u,p,h,g,f,x,b,y,v=(0,s.c)(44),{documentId:j,state:w}=e,{t:S}=(0,d.useTranslation)(_);v[0]!==j?(t={documentId:j},v[0]=j,v[1]=t):t=v[1];let{data:I}=(0,d.useDocumentVersions)(t),{exitDiffView:C,navigateDiffView:T}=nV(),{documents:R}=nz(),P=(0,d.useActiveReleases)();v[2]!==I?(n=I.flatMap(nK),v[2]=I,v[3]=n):n=v[3];let E=n;if(v[4]!==P.data||v[5]!==E){let e;v[7]!==E?(e=e=>{let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id);return"u">typeof t&&E.includes(t)},v[7]=E,v[8]=e):e=v[8],i=P.data.filter(e),v[4]=P.data,v[5]=E,v[6]=i}else i=v[6];let D=i;v[9]!==R||v[10]!==T?(l=e=>{"u">typeof R?.previous&&T({previousDocument:{...R.previous,id:e}})},v[9]=R,v[10]=T,v[11]=l):l=v[11];let k=l;v[12]!==R||v[13]!==T?(r=e=>{"u">typeof R?.next&&T({nextDocument:{...R.next,id:e}})},v[12]=R,v[13]=T,v[14]=r):r=v[14];let F=r;return v[15]!==S?(a=S("compare-versions.title"),v[15]=S,v[16]=a):a=v[16],v[17]!==a?(c=(0,o.jsx)(eT.Box,{padding:4,children:(0,o.jsx)(eT.Text,{as:"h1",size:1,muted:!0,children:a})}),v[17]=a,v[18]=c):c=v[18],v[19]!==j||v[20]!==R||v[21]!==k||v[22]!==D||v[23]!==w?(u="u">typeof R?.previous&&(0,o.jsx)(nq,{releases:D,onSelectRelease:k,role:"previous",documentId:j,state:w,document:R.previous}),v[19]=j,v[20]=R,v[21]=k,v[22]=D,v[23]=w,v[24]=u):u=v[24],v[25]!==c||v[26]!==u?(p=(0,o.jsxs)(nU,{children:[c,u]}),v[25]=c,v[26]=u,v[27]=p):p=v[27],v[28]===Symbol.for("react.memo_cache_sentinel")?(h=(0,o.jsx)(eT.Flex,{align:"center",paddingX:3,children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(m.TransferIcon,{})})}),v[28]=h):h=v[28],v[29]!==j||v[30]!==R||v[31]!==F||v[32]!==D||v[33]!==w?(g="u">typeof R?.next&&(0,o.jsx)(nq,{releases:D,onSelectRelease:F,role:"next",documentId:j,state:w,document:R.next}),v[29]=j,v[30]=R,v[31]=F,v[32]=D,v[33]=w,v[34]=g):g=v[34],v[35]===Symbol.for("react.memo_cache_sentinel")?(f={justifySelf:"end"},v[35]=f):f=v[35],v[36]!==C?(x=(0,o.jsx)(eT.Box,{padding:3,style:f,children:(0,o.jsx)(eT.Button,{icon:m.CloseIcon,mode:"bleed",onClick:C,padding:2})}),v[36]=C,v[37]=x):x=v[37],v[38]!==g||v[39]!==x?(b=(0,o.jsxs)(nU,{children:[g,x]}),v[38]=g,v[39]=x,v[40]=b):b=v[40],v[41]!==b||v[42]!==p?(y=(0,o.jsxs)(n$,{children:[p,h,b]}),v[41]=b,v[42]=p,v[43]=y):y=v[43],y},nq=e=>{let t,n,i,l,r,a,u,p,h,g,f=(0,s.c)(41),{releases:x,onSelectRelease:b,role:y,documentId:v,document:j}=e;f[0]!==x?(t=void 0===x?[]:x,f[0]=x,f[1]=t):t=f[1];let w=t;f[2]!==j.id?(n=(0,c.getPublishedId)(j.id),f[2]=j.id,f[3]=n):n=f[3];let{published:S,draft:I}=(0,d.useEditState)(n,j.type);f[4]!==j.id||f[5]!==w?(i=nH(j.id,w),f[4]=j.id,f[5]=w,f[6]=i):i=f[6];let C=i,{t:T}=(0,d.useTranslation)(_),{t:R}=(0,d.useTranslation)(),{document:P}=(0,d.useWorkspace)(),{drafts:E}=P,{enabled:D}=E;if(f[7]!==C||f[8]!==R||f[9]!==T?(l=function({selected:e,tCore:t,tStructure:n}){if(typeof e>"u")return{text:t("common.loading"),tone:"neutral",disabled:!0};if((0,d.isReleaseDocument)(e)){let n=e?(0,d.getReleaseTone)(e):"neutral";return{text:e?.metadata.title||t("release.placeholder-untitled-release"),icon:(0,o.jsx)(d.ReleaseAvatar,{padding:1,tone:n}),iconRight:e&&(0,d.isReleaseScheduledOrScheduling)(e)?(0,o.jsx)(m.LockIcon,{}):void 0,tone:n}}let i="published"===e?"positive":"caution";return{text:n(["compare-versions.status",e].join(".")),icon:(0,o.jsx)(d.ReleaseAvatar,{padding:1,tone:i}),tone:i}}({selected:C,tCore:R,tStructure:T}),f[7]=C,f[8]=R,f[9]=T,f[10]=l):l=f[10],f[11]!==l?(r=(0,o.jsx)(eT.Button,{type:"button",mode:"bleed",padding:2,paddingRight:3,radius:"full",selected:!0,...l}),f[11]=l,f[12]=r):r=f[12],f[13]!==v||f[14]!==b||f[15]!==S||f[16]!==C?(a=S&&(0,o.jsx)(nW,{type:"published",onSelect:b,isSelected:"published"===C,documentId:v}),f[13]=v,f[14]=b,f[15]=S,f[16]=C,f[17]=a):a=f[17],f[18]!==v||f[19]!==I||f[20]!==D||f[21]!==b||f[22]!==C?(u=D&&I&&(0,o.jsx)(nW,{type:"draft",onSelect:b,isSelected:"draft"===C,documentId:v}),f[18]=v,f[19]=I,f[20]=D,f[21]=b,f[22]=C,f[23]=u):u=f[23],f[24]!==v||f[25]!==b||f[26]!==w||f[27]!==C){let e;f[29]!==v||f[30]!==b||f[31]!==C?(e=e=>(0,o.jsx)(nW,{release:e,onSelect:b,isSelected:"string"!=typeof C&&C?._id===e._id,documentId:v},e._id),f[29]=v,f[30]=b,f[31]=C,f[32]=e):e=f[32],p=w.map(e),f[24]=v,f[25]=b,f[26]=w,f[27]=C,f[28]=p}else p=f[28];return f[33]!==u||f[34]!==p||f[35]!==a?(h=(0,o.jsxs)(eT.Menu,{children:[a,u,p]}),f[33]=u,f[34]=p,f[35]=a,f[36]=h):h=f[36],f[37]!==y||f[38]!==h||f[39]!==r?(g=(0,o.jsx)(eC.MenuButton,{id:y,button:r,menu:h}),f[37]=y,f[38]=h,f[39]=r,f[40]=g):g=f[40],g},nW=e=>{let t,n,i,l,r,a,u,p,h,g,f,x,b=(0,s.c)(51),{type:y,release:v,onSelect:j,isSelected:w,documentId:S}=e,{t:I}=(0,d.useTranslation)(),{t:C}=(0,d.useTranslation)(_);b[0]!==S||b[1]!==j||b[2]!==v||b[3]!==y?(t=()=>{"draft"===y?j((0,c.getDraftId)(S)):"published"===y?j((0,c.getPublishedId)(S)):"u">typeof v?._id&&j((0,c.getVersionId)(S,(0,d.getReleaseIdFromReleaseDocumentId)(v._id)))},b[0]=S,b[1]=j,b[2]=v,b[3]=y,b[4]=t):t=b[4];let T=t;if(y){let e,t,n,i,l,r,s="published"===y?"positive":"caution";b[5]!==s?(e=(0,o.jsx)(d.ReleaseAvatar,{padding:2,tone:s}),b[5]=s,b[6]=e):e=b[6],b[7]!==y?(t=["compare-versions.status",y],b[7]=y,b[8]=t):t=b[8];let a=t.join(".");return b[9]!==a||b[10]!==C?(n=C(a),b[9]=a,b[10]=C,b[11]=n):n=b[11],b[12]!==n?(i=(0,o.jsx)(eT.Box,{paddingY:2,children:(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:n})}),b[12]=n,b[13]=i):i=b[13],b[14]!==e||b[15]!==i?(l=(0,o.jsxs)(eT.Flex,{gap:1,children:[e,i]}),b[14]=e,b[15]=i,b[16]=l):l=b[16],b[17]!==w||b[18]!==T||b[19]!==l?(r=(0,o.jsx)(eT.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:l}),b[17]=w,b[18]=T,b[19]=l,b[20]=r):r=b[20],r}b[21]!==v?(n=v?(0,d.getReleaseTone)(v):"neutral",b[21]=v,b[22]=n):n=b[22];let R=n;return b[23]!==R?(i=(0,o.jsx)(d.ReleaseAvatar,{padding:2,tone:R}),b[23]=R,b[24]=i):i=b[24],b[25]!==v.metadata.title||b[26]!==I?(l=v.metadata.title||I("release.placeholder-untitled-release"),b[25]=v.metadata.title,b[26]=I,b[27]=l):l=b[27],b[28]!==l?(r=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:l}),b[28]=l,b[29]=r):r=b[29],b[30]!==v.metadata.releaseType||b[31]!==I?(a=["asap","undecided"].includes(v.metadata.releaseType)&&(0,o.jsx)(eT.Text,{muted:!0,size:1,children:I(`release.type.${v.metadata.releaseType}`)}),b[30]=v.metadata.releaseType,b[31]=I,b[32]=a):a=b[32],b[33]!==v?(u="scheduled"===v.metadata.releaseType&&(0,o.jsx)(eT.Text,{muted:!0,size:1,children:(0,d.formatRelativeLocalePublishDate)(v)}),b[33]=v,b[34]=u):u=b[34],b[35]!==r||b[36]!==a||b[37]!==u?(p=(0,o.jsxs)(eT.Stack,{flex:1,paddingY:2,paddingRight:2,space:2,children:[r,a,u]}),b[35]=r,b[36]=a,b[37]=u,b[38]=p):p=b[38],b[39]!==v?(h=(0,d.isReleaseScheduledOrScheduling)(v)&&(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(m.LockIcon,{})})}),b[39]=v,b[40]=h):h=b[40],b[41]!==h?(g=(0,o.jsx)(eT.Flex,{flex:"none",children:h}),b[41]=h,b[42]=g):g=b[42],b[43]!==g||b[44]!==i||b[45]!==p?(f=(0,o.jsxs)(eT.Flex,{gap:1,children:[i,p,g]}),b[43]=g,b[44]=i,b[45]=p,b[46]=f):f=b[46],b[47]!==w||b[48]!==T||b[49]!==f?(x=(0,o.jsx)(eT.MenuItem,{padding:1,paddingRight:3,onClick:T,pressed:w,children:f}),b[47]=w,b[48]=T,b[49]=f,b[50]=x):x=b[50],x};function nK(e){return(0,c.getVersionFromId)(e)??[]}let nY=eD.styled.div`
  --offset-block: 40px;
  display: grid;
  height: calc(100vh - var(--offset-block));
  min-height: 0;
  overflow: hidden;
  grid-template-areas:
    'header header'
    'previous-document next-document';
  grid-template-columns: 1fr 1fr;
  grid-template-rows: min-content minmax(0, 1fr);
`;function nX(e){return e.document?.components?.unstable_layout}function nQ(e){return e.path}function nJ(e,t){return(0,tI.default)(e.path,t.path)}let nZ=eD.styled.div`
  position: relative;
  height: 100%;
  overflow: auto;
  scroll-behavior: smooth;
  scrollbar-width: var(--scrollbar-width);
  overscroll-behavior: contain;
  will-change: scroll-position;
`,n0=(0,eD.styled)(eT.Card)`
  position: relative;
  grid-area: var(--grid-area);
`,n1=(0,eD.styled)(eT.Container)`
  width: auto;
`,n2=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h,g,f,x,b,y=(0,s.c)(36),{role:v,documentType:j,documentId:w,scrollElement:S,syncChannel:_,compareDocument:I}=e,C=(0,a.useRef)(null),[T,R]=(0,a.useState)(null),[P,E]=(0,a.useState)(null);y[0]!==I||y[1]!==w||y[2]!==j||y[3]!==v||y[4]!==S||y[5]!==_?(n=()=>(0,o.jsx)(n3,{compareDocument:I,documentId:w,documentType:j,role:v,scrollElement:S,syncChannel:_}),y[0]=I,y[1]=w,y[2]=j,y[3]=v,y[4]=S,y[5]=_,y[6]=n):n=y[6];let D=n;y[7]!==D?(i={pick:nX,defaultComponent:D},y[7]=D,y[8]=i):i=y[8];let k=(0,d.useMiddlewareComponents)(i);y[9]===Symbol.for("react.memo_cache_sentinel")?(l={isInteractive:!1,onOpenReviewChanges:ez.noop,onSetFocus:ez.noop,isReviewChangesOpen:!1},y[9]=l):l=y[9];let F=`${v}-document`;y[10]!==F?(r={"--grid-area":F},y[10]=F,y[11]=r):r=y[11];let A=r,L="next"===v,V="next"!==v&&"none";y[12]!==V?(c={"--scrollbar-width":V},y[12]=V,y[13]=c):c=y[13];let M=c;return y[14]!==k||y[15]!==w||y[16]!==j?(p=(0,o.jsx)(eR.DialogProvider,{position:"absolute",children:(0,o.jsx)(n1,{ref:C,padding:4,width:1,children:(0,o.jsx)(k,{documentId:w,documentType:j})})}),y[14]=k,y[15]=w,y[16]=j,y[17]=p):p=y[17],y[18]!==T||y[19]!==p?(m=(0,o.jsx)(eT.PortalProvider,{element:T,children:p}),y[18]=T,y[19]=p,y[20]=m):m=y[20],y[21]!==t||y[22]!==M||y[23]!==m?(h=(0,o.jsx)(nZ,{ref:t,style:M,children:m}),y[21]=t,y[22]=M,y[23]=m,y[24]=h):h=y[24],y[25]===Symbol.for("react.memo_cache_sentinel")?(g=(0,o.jsx)("div",{"data-testid":"diffView-document-panel-portal",ref:R}),y[25]=g):g=y[25],y[26]!==h||y[27]!==A||y[28]!==L?(f=(0,o.jsxs)(n0,{ref:E,style:A,borderLeft:L,children:[h,g]}),y[26]=h,y[27]=A,y[28]=L,y[29]=f):f=y[29],y[30]!==P||y[31]!==f?(x=(0,o.jsx)(eT.BoundaryElementProvider,{element:P,children:f}),y[30]=P,y[31]=f,y[32]=x):x=y[32],y[33]!==S||y[34]!==x?(b=(0,o.jsx)(u.ReviewChangesContext.Provider,{value:l,children:(0,o.jsx)(d.ChangeIndicatorsTracker,{children:(0,o.jsx)(d.VirtualizerScrollInstanceProvider,{scrollElement:S,containerElement:C,children:x})})}),y[33]=S,y[34]=x,y[35]=b):b=y[35],b}),n3=e=>{var t,n;let i,l,r,p,m,h,g,f,x,b,y,v=(0,s.c)(52),{role:j,documentType:w,documentId:S,syncChannel:_,compareDocument:I}=e;v[0]!==I?(i={compareDocument:I},v[0]=I,v[1]=i):i=v[1];let C=function(e){let t,n,i,l=(0,s.c)(4),{compareDocument:r}=e;l[0]!==r.id?(t=(0,c.getPublishedId)(r.id),l[0]=r.id,l[1]=t):t=l[1];let o=r.type;l[2]!==r.id?(n=(0,c.getVersionFromId)(r.id),l[2]=r.id,l[3]=n):n=l[3];let a=(0,d.useEditState)(t,o,"low",n);e:{if((0,c.isVersionId)(r.id)){i=a.version??void 0;break e}if((0,c.isDraftId)(r.id)){i=a.draft??void 0;break e}if((0,c.isPublishedId)(r.id)){i=a.published??void 0;break e}i=void 0}return i}(i),{data:T}=(0,d.useActiveReleases)(),[R]=(0,a.useState)(n4);v[2]!==S||v[3]!==T?(l=nH(S,T),v[2]=S,v[3]=T,v[4]=l):l=v[4];let P=l;v[5]!==S?(r=(0,c.getPublishedId)(S),v[5]=S,v[6]=r):r=v[6],v[7]!==S?(t=S,p=(0,c.isVersionId)(t)?(0,c.getVersionFromId)(t):(0,c.isPublishedId)(t)?"published":void 0,v[7]=S,v[8]=p):p=v[8],v[9]!==S?(m=(0,c.getVersionFromId)(S),v[9]=S,v[10]=m):m=v[10],v[11]!==C||v[12]!==w||v[13]!==r||v[14]!==p||v[15]!==m?(h={documentId:r,documentType:w,selectedPerspectiveName:p,releaseId:m,comparisonValue:C,displayInlineChanges:!0},v[11]=C,v[12]=w,v[13]=r,v[14]=p,v[15]=m,v[16]=h):h=v[16];let{formState:E,onChange:D,onFocus:k,onBlur:F,onSetActiveFieldGroup:A,onSetCollapsedFieldSet:L,onSetCollapsedPath:V,collapsedFieldSets:M,ready:O,collapsedPaths:z,schemaType:B,value:N,onProgrammaticFocus:H,openPath:$,onPathOpen:U}=(0,d.useDocumentForm)(h),G=null===E||!O;v[17]!==j||v[18]!==_?(g={id:j,syncChannel:_},v[17]=j,v[18]=_,v[19]=g):g=v[19];let q=function(e){let t,n,i,l=(0,s.c)(11),{syncChannel:r,id:o}=e;l[0]!==o||l[1]!==r?(t=e=>r.next({...e,source:o}),l[0]=o,l[1]=r,l[2]=t):t=l[2];let a=t;if(l[3]!==o||l[4]!==r){let e;l[6]!==o?(e=e=>{let{source:t}=e;return t!==o},l[6]=o,l[7]=e):e=l[7],n=r.pipe((0,eJ.distinctUntilChanged)(nJ),(0,e3.filter)(e),(0,eW.map)(nQ)),l[3]=o,l[4]=r,l[5]=n}else n=l[5];let d=n;return l[8]!==d||l[9]!==a?(i={path:d,push:a},l[8]=d,l[9]=a,l[10]=i):i=l[10],i}(g);v[20]!==U||v[21]!==q||v[22]!==j?(f=e=>{U(e),q.push({source:j,path:e})},v[20]=U,v[21]=q,v[22]=j,v[23]=f):f=v[23];let W=f;return v[24]!==U||v[25]!==H||v[26]!==q.path?(x=()=>{let e=q.path.subscribe(e=>{U(e),H(e)});return()=>e.unsubscribe()},v[24]=U,v[25]=H,v[26]=q.path,v[27]=x):x=v[27],v[28]!==U||v[29]!==H||v[30]!==q.path||v[31]!==j?(b=[U,H,q.path,j],v[28]=U,v[29]=H,v[30]=q.path,v[31]=j,v[32]=b):b=v[32],(0,a.useEffect)(x,b),v[33]!==M||v[34]!==z||v[35]!==C||v[36]!==E||v[37]!==G||v[38]!==F||v[39]!==D||v[40]!==k||v[41]!==W||v[42]!==A||v[43]!==L||v[44]!==V||v[45]!==$||v[46]!==R||v[47]!==P||v[48]!==j||v[49]!==B||v[50]!==N?(y=G?(0,o.jsx)(d.LoadingBlock,{showText:!0}):(0,o.jsx)(u.CommentsEnabledContext.Provider,{value:{enabled:!1,mode:null},children:(0,o.jsx)(d.FormBuilder,{__internal_patchChannel:R,id:`diffView-pane-${j}`,onChange:D,onPathFocus:k,onPathOpen:W,onPathBlur:F,onFieldGroupSelect:A,onSetFieldSetCollapsed:L,onSetPathCollapsed:V,collapsedPaths:z,collapsedFieldSets:M,focusPath:E.focusPath,openPath:$,changed:E.changed,focused:E.focused,groups:E.groups,validation:E.validation,members:E.members,perspective:"draft"===(n=P)?"drafts":n,hasUpstreamVersion:E.hasUpstreamVersion,presence:E.presence,schemaType:B,value:N,compareValue:C})}),v[33]=M,v[34]=z,v[35]=C,v[36]=E,v[37]=G,v[38]=F,v[39]=D,v[40]=k,v[41]=W,v[42]=A,v[43]=L,v[44]=V,v[45]=$,v[46]=R,v[47]=P,v[48]=j,v[49]=B,v[50]=N,v[51]=y):y=v[51],y};function n4(){return(0,d.createPatchChannel)()}let n5=eD.styled.a`
  flex: 1;
  text-decoration: none;
  color: inherit;
`,n6=e=>{let t,n,i=(0,s.c)(6),{children:l,documentId:r,documentType:a}=e;i[0]!==r||i[1]!==a?(t={intent:"edit",params:{id:r,type:a}},i[0]=r,i[1]=a,i[2]=t):t=i[2];let{href:d}=(0,eV.useIntentLink)(t);return i[3]!==l||i[4]!==d?(n=(0,o.jsx)(n5,{href:d,target:"_blank",rel:"noopener noreferrer",children:l}),i[3]=l,i[4]=d,i[5]=n):n=i[5],n},n8=e=>{var t;let n,i,l,r,d,c,p,m,h,g,f,x,b=(0,s.c)(24),{documentId:y}=e,{documents:v,state:j,mode:w}=nz(),{exitDiffView:S}=nV(),_=((h=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(m=new e7.Subject,h[0]=m):m=h[0],m),[I,C]=(0,a.useState)(null),[T,R]=(0,a.useState)(null),P=(0,a.useContext)(u.ReferenceInputOptionsContext);b[0]!==P?(n={...P,disableNew:!0,EditReferenceLinkComponent:n6},b[0]=P,b[1]=n):n=b[1];let E=n;return b[2]!==T||b[3]!==I?(i=[I,T],b[2]=T,b[3]=I,b[4]=i):i=b[4],t=i,(x=(0,s.c)(3))[0]!==t?(g=()=>{let e=t.filter(nN);if(0===e.length)return;let n=new t_(e);return()=>n.destroy()},f=[t],x[0]=t,x[1]=g,x[2]=f):(g=x[1],f=x[2]),(0,a.useEffect)(g,f),b[5]!==y||b[6]!==w||b[7]!==j?(l="version"===w&&(0,o.jsx)(nG,{documentId:y,state:j}),b[5]=y,b[6]=w,b[7]=j,b[8]=l):l=b[8],b[9]!==v||b[10]!==T||b[11]!==I||b[12]!==j||b[13]!==_?(r="ready"===j&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n2,{documentType:v.previous.type,documentId:v.previous.id,role:"previous",ref:C,scrollElement:I,syncChannel:_,compareDocument:v.previous}),(0,o.jsx)(n2,{documentType:v.next.type,documentId:v.next.id,role:"next",ref:R,scrollElement:T,syncChannel:_,compareDocument:v.previous})]}),b[9]=v,b[10]=T,b[11]=I,b[12]=j,b[13]=_,b[14]=r):r=b[14],b[15]!==l||b[16]!==r?(d=(0,o.jsxs)(nY,{children:[l,r]}),b[15]=l,b[16]=r,b[17]=d):d=b[17],b[18]!==S||b[19]!==d?(c=(0,o.jsx)(eC.Dialog,{id:"diffView",width:"auto",onClose:S,padding:!1,__unstable_hideCloseButton:!0,children:d}),b[18]=S,b[19]=d,b[20]=c):c=b[20],b[21]!==E||b[22]!==c?(p=(0,o.jsx)(u.ReferenceInputOptionsContext.Provider,{value:E,children:c}),b[21]=E,b[22]=c,b[23]=p):p=b[23],p},n7=e=>{let t,n,i,l=(0,s.c)(9),{children:r,documentId:a}=e,c=(0,eR.useToast)(),{t:u}=(0,d.useTranslation)(_);l[0]!==u||l[1]!==c?(t={onParamsError:e=>{c.push({id:"diffViewParamsParsingError",status:"error",title:u("compare-version.error.invalidParams.title"),description:(0,o.jsx)("ul",{children:e.map(e=>{let[t,n]=e;return(0,o.jsx)("li",{children:u(`compare-version.error.${t}`,{input:n})},t)})})})}},l[0]=u,l[1]=c,l[2]=t):t=l[2];let{isActive:p}=nz(t);return l[3]!==a||l[4]!==p?(n=p&&(0,o.jsx)(n8,{documentId:a}),l[3]=a,l[4]=p,l[5]=n):n=l[5],l[6]!==r||l[7]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[r,n]}),l[6]=r,l[7]=n,l[8]=i):i=l[8],i};function n9(){let e=(0,a.useContext)(u.PaneLayoutContext);if(!e)throw Error("PaneLayout: missing context value");return e}let ie=(0,eD.styled)(eT.Layer)`
  position: relative;
  width: 1px;
  min-width: 1px;

  &:before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    width: 1px;
    background-color: var(--card-border-color);
  }

  &:not([data-disabled]) {
    cursor: ew-resize;
    width: 9px;
    min-width: 9px;
    margin: 0 -4px;

    &:before {
      left: 4px;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 0;
      left: 0;
      width: 9px;
      bottom: 0;
      background-color: var(--card-border-color);
      opacity: 0;
      transition: opacity 150ms;
    }

    &[data-dragging]:after,
    &:hover:after {
      opacity: 0.2;
    }
  }
`;function it(e){let t,n,i=(0,s.c)(7),{disabled:l,element:r}=e,{resize:d}=n9(),[c,u]=(0,a.useState)(!1);i[0]!==r||i[1]!==d?(t=e=>{if(!r)return;u(!0),e.preventDefault();let t=e.pageX;d("start",r,0);let n=e=>{e.preventDefault(),d("move",r,e.pageX-t)},i=e=>{e.preventDefault(),u(!1),window.removeEventListener("mousemove",n),window.removeEventListener("mouseup",i),d("end",r,0)};window.addEventListener("mousemove",n),window.addEventListener("mouseup",i)},i[0]=r,i[1]=d,i[2]=t):t=i[2];let p=t,m=l?"":void 0,h=c?"":void 0;return i[3]!==p||i[4]!==m||i[5]!==h?(n=(0,o.jsx)(ie,{"data-disabled":m,"data-dragging":h,onMouseDown:p}),i[3]=p,i[4]=m,i[5]=h,i[6]=n):n=i[6],n}let ii=(0,eD.styled)(eT.Card)`
  outline: none;

  // NOTE: This will render a border to the right side of each pane
  // without taking up physical space.
  box-shadow: 1px 0 0 var(--card-border-color);
`,il=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h,g,f,x,b,y,v,j,w,S,_,I,C,T,R,P,E,D,k,F,A,L,V=(0,s.c)(86);V[0]!==e?({children:n,currentMinWidth:l,currentMaxWidth:i,flex:h,id:r,minWidth:p,maxWidth:c,selected:g,...m}=e,V[0]=e,V[1]=n,V[2]=i,V[3]=l,V[4]=r,V[5]=c,V[6]=p,V[7]=m,V[8]=h,V[9]=g):(n=V[1],i=V[2],l=V[3],r=V[4],c=V[5],p=V[6],m=V[7],h=V[8],g=V[9]);let M=void 0===h?1:h,O=void 0!==g&&g,[z,B]=(0,a.useState)(null),{collapse:N,collapsed:H,expand:$,expandedElement:U,mount:G,panes:q}=n9();if(V[10]!==q||V[11]!==z){let e;V[14]!==z?(e=e=>e.element===z,V[14]=z,V[15]=e):e=V[15],x=(f=q.find(e))&&q.indexOf(f),V[10]=q,V[11]=z,V[12]=f,V[13]=x}else f=V[12],x=V[13];let W=x,K="number"==typeof W?q[W+1]:void 0,Y=W===q.length-1,X=U===z,Q=!H&&(f?.collapsed||!1),J=K?.collapsed||!1,Z=(0,a.useRef)(null),ee=f?.flex??M,et=f?.currentMinWidth??l,en=f?.currentMaxWidth??i;V[16]===Symbol.for("react.memo_cache_sentinel")?(b=()=>Z.current,V[16]=b):b=V[16],(0,a.useImperativeHandle)(t,b),V[17]===Symbol.for("react.memo_cache_sentinel")?(y=e=>{B(e),Z.current=e},V[17]=y):y=V[17];let ei=y;V[18]!==i||V[19]!==l||V[20]!==M||V[21]!==r||V[22]!==c||V[23]!==p||V[24]!==G||V[25]!==z?(v=()=>{if(z)return G(z,{currentMinWidth:l,currentMaxWidth:i,flex:M,id:r,minWidth:p,maxWidth:c})},j=[l,i,M,r,p,c,G,z],V[18]=i,V[19]=l,V[20]=M,V[21]=r,V[22]=c,V[23]=p,V[24]=G,V[25]=z,V[26]=v,V[27]=j):(v=V[26],j=V[27]),(0,a.useLayoutEffect)(v,j),V[28]!==N||V[29]!==z?(w=()=>{z&&N(z)},V[28]=N,V[29]=z,V[30]=w):w=V[30];let el=w;V[31]!==$||V[32]!==z?(S=()=>{z&&$(z)},V[31]=$,V[32]=z,V[33]=S):S=V[33];let er=S,eo=!H&&Q;V[34]!==el||V[35]!==er||V[36]!==Y||V[37]!==W||V[38]!==z||V[39]!==eo?(_={collapse:el,collapsed:eo,expand:er,index:W,isLast:Y,rootElement:z},V[34]=el,V[35]=er,V[36]=Y,V[37]=W,V[38]=z,V[39]=eo,V[40]=_):_=V[40];let es=_;e:{if(H){I=void 0;break e}if(Q){I=51;break e}if(0===et||Y){I=p||204;break e}I=et||p||204}let ea=I;t:{if(Q){C=51;break t}if(H&&Y){C=void 0;break t}if(Y){if(c){C=en??c;break t}C=void 0;break t}C=en??c}let ed=C,ec=H&&!Y;V[41]!==Q||V[42]!==Y||V[43]!==H||V[44]!==J||V[45]!==z?(T=!Y&&!H&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneResizer",children:(0,o.jsx)(it,{disabled:Q||J,element:z})}),V[41]=Q,V[42]=Y,V[43]=H,V[44]=J,V[45]=z,V[46]=T):T=V[46];let eu=T,ep=ed===1/0?void 0:ed;V[47]!==ee||V[48]!==ea||V[49]!==ep?(R={flex:ee,minWidth:ea,maxWidth:ep},V[47]=ee,V[48]=ea,V[49]=ep,V[50]=R):R=V[50];let em=R,eh=H?void 0:"hidden",eg=Q?"":void 0,ef=O?"":void 0;return V[51]!==Q||V[52]!==en||V[53]!==et||V[54]!==X||V[55]!==ee||V[56]!==ed||V[57]!==ea||V[58]!==W?(P=!1,V[51]=Q,V[52]=en,V[53]=et,V[54]=X,V[55]=ee,V[56]=ed,V[57]=ea,V[58]=W,V[59]=P):P=V[59],V[60]!==n||V[61]!==ec?(E=!ec&&(0,o.jsx)(eT.Flex,{direction:"column",height:"fill",children:n}),V[60]=n,V[61]=ec,V[62]=E):E=V[62],V[63]!==z||V[64]!==E?(D=(0,o.jsx)(eT.BoundaryElementProvider,{element:z,children:E}),V[63]=z,V[64]=E,V[65]=D):D=V[65],V[66]!==ec||V[67]!==r||V[68]!==W||V[69]!==m||V[70]!==em||V[71]!==eh||V[72]!==eg||V[73]!==ef||V[74]!==P||V[75]!==D?(k=(0,o.jsxs)(ii,{"data-testid":"pane","data-ui":"Pane",tone:"inherit",hidden:ec,id:r,overflow:eh,...m,"data-pane-collapsed":eg,"data-pane-index":W,"data-pane-selected":ef,ref:ei,style:em,children:[P,D]}),V[66]=ec,V[67]=r,V[68]=W,V[69]=m,V[70]=em,V[71]=eh,V[72]=eg,V[73]=ef,V[74]=P,V[75]=D,V[76]=k):k=V[76],V[77]!==Y||V[78]!==k?(F=(0,o.jsx)(d.IsLastPaneProvider,{isLastPane:Y,children:k}),V[77]=Y,V[78]=k,V[79]=F):F=V[79],V[80]!==es||V[81]!==F?(A=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"pane",children:(0,o.jsx)(u.PaneContext.Provider,{value:es,children:F})}),V[80]=es,V[81]=F,V[82]=A):A=V[82],V[83]!==eu||V[84]!==A?(L=(0,o.jsxs)(o.Fragment,{children:[A,eu]}),V[83]=eu,V[84]=A,V[85]=L):L=V[85],L}),ir=(0,eD.styled)(eT.Card)`
  position: relative;
  outline: none;
`;function io(){let e=(0,a.useContext)(u.PaneContext);if(!e)throw Error("Pane: missing context value");return e}ir.displayName="PaneContent__root";let is=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,d,c=(0,s.c)(14);c[0]!==e?({as:n,children:i,overflow:l,padding:r,...a}=e,c[0]=e,c[1]=n,c[2]=i,c[3]=l,c[4]=r,c[5]=a):(n=c[1],i=c[2],l=c[3],r=c[4],a=c[5]);let{collapsed:u}=io(),{collapsed:p}=n9(),m=p?void 0:l;return c[6]!==n||c[7]!==i||c[8]!==u||c[9]!==r||c[10]!==t||c[11]!==a||c[12]!==m?(d=(0,o.jsx)(ir,{"data-testid":"pane-content",forwardedAs:n,...a,flex:1,hidden:u,overflow:m,padding:r,ref:t,tone:"inherit",children:i}),c[6]=n,c[7]=i,c[8]=u,c[9]=r,c[10]=t,c[11]=a,c[12]=m,c[13]=d):d=c[13],d});function ia(e){return e?e.toLocaleLowerCase().replaceAll(" ",""):""}let id={constrainSize:!0,placement:"left-start",portal:!0};function ic(e){let t,n,i,l,r=(0,s.c)(35),{disabled:a,isAfterGroup:c,node:u}=e,p=(0,d.useGetI18nText)("i18n"in u?u:void 0);if("divider"===u.type){let e;return r[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(eT.MenuDivider,{}),r[0]=e):e=r[0],e}r[1]!==p||r[2]!==u?(t=p(u),r[1]=p,r[2]=u,r[3]=t):t=r[3];let{title:m}=t;if("group"===u.type){let e,t,n,i;if(0===u.children.length)return null;if(u.expanded){let e,t,n;return r[4]!==c?(e=c&&(0,o.jsx)(eT.MenuDivider,{}),r[4]=c,r[5]=e):e=r[5],r[6]!==a||r[7]!==u.children||r[8]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(ic,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[6]=a,r[7]=u.children,r[8]=u.disabled,r[9]=t):t=r[9],r[10]!==e||r[11]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),r[10]=e,r[11]=t,r[12]=n):n=r[12],n}r[13]!==c?(e=c&&(0,o.jsx)(eT.MenuDivider,{}),r[13]=c,r[14]=e):e=r[14];let l=u.icon;return r[15]!==a||r[16]!==u.children||r[17]!==u.disabled?(t=u.children.map((e,t)=>(0,o.jsx)(ic,{disabled:a||!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),r[15]=a,r[16]=u.children,r[17]=u.disabled,r[18]=t):t=r[18],r[19]!==a||r[20]!==u.icon||r[21]!==t||r[22]!==m?(n=(0,o.jsx)(tf.MenuGroup,{disabled:a,icon:l,popover:id,text:m,children:t}),r[19]=a,r[20]=u.icon,r[21]=t,r[22]=m,r[23]=n):n=r[23],r[24]!==e||r[25]!==n?(i=(0,o.jsxs)(o.Fragment,{children:[e,n]}),r[24]=e,r[25]=n,r[26]=i):i=r[26],i}return r[27]!==c?(n=c&&(0,o.jsx)(eT.MenuDivider,{}),r[27]=c,r[28]=n):n=r[28],r[29]!==a||r[30]!==u?(i=(0,o.jsx)(iu,{disabled:a,node:u}),r[29]=a,r[30]=u,r[31]=i):i=r[31],r[32]!==n||r[33]!==i?(l=(0,o.jsxs)(o.Fragment,{children:[n,i]}),r[32]=n,r[33]=i,r[34]=l):l=r[34],l}function iu(e){let t,n=(0,s.c)(5),{node:i}=e;if(i.intent){let t;return n[0]!==i.intent||n[1]!==e?(t=(0,o.jsx)(im,{...e,intent:i.intent}),n[0]=i.intent,n[1]=e,n[2]=t):t=n[2],t}return n[3]!==e?(t=(0,o.jsx)(ip,{...e}),n[3]=e,n[4]=t):t=n[4],t}function ip(e){let t,n,i,l,r,a=(0,s.c)(19),{disabled:c,node:u}=e;a[0]!==u.disabled?(t="object"==typeof u.disabled&&(0,o.jsx)(eT.Text,{size:1,children:u.disabled.reason}),a[0]=u.disabled,a[1]=t):t=a[1];let p=t,{title:h}=(0,d.useI18nText)(u),g=c||!!u.disabled;a[2]!==u.hotkey?(n=u.hotkey?.split("+"),a[2]=u.hotkey,a[3]=n):n=a[3];let f=u.icon,x=u.iconRight||u.selected&&m.CheckmarkIcon,b=u.onAction,y=u.selected,v=u.tone;a[4]!==u.title?(i=ia(u.title),a[4]=u.title,a[5]=i):i=a[5];let j=`action-${i}`;return a[6]!==u.icon||a[7]!==u.onAction||a[8]!==u.selected||a[9]!==u.tone||a[10]!==g||a[11]!==n||a[12]!==x||a[13]!==j||a[14]!==h?(l=(0,o.jsx)(eC.MenuItem,{disabled:g,hotkeys:n,icon:f,iconRight:x,onClick:b,pressed:y,text:h,tone:v,"data-testid":j}),a[6]=u.icon,a[7]=u.onAction,a[8]=u.selected,a[9]=u.tone,a[10]=g,a[11]=n,a[12]=x,a[13]=j,a[14]=h,a[15]=l):l=a[15],a[16]!==l||a[17]!==p?(r=(0,o.jsx)(d.TooltipOfDisabled,{content:p,placement:"left",children:l}),a[16]=l,a[17]=p,a[18]=r):r=a[18],r}function im(e){let t,n,i,l,r,a,c=(0,s.c)(23),{disabled:u,intent:p,node:h}=e;c[0]!==h.disabled?(t="object"==typeof h.disabled&&(0,o.jsx)(eT.Text,{size:1,children:h.disabled.reason}),c[0]=h.disabled,c[1]=t):t=c[1];let g=t;c[2]!==p.params||c[3]!==p.type?(n={intent:p.type,params:p.params},c[2]=p.params,c[3]=p.type,c[4]=n):n=c[4];let f=(0,eV.useIntentLink)(n);c[5]!==f||c[6]!==h?(i=e=>{f.onClick(e),h.onAction()},c[5]=f,c[6]=h,c[7]=i):i=c[7];let x=i,{title:b}=(0,d.useI18nText)(h),y=u||!!h.disabled;c[8]!==h.hotkey?(l=h.hotkey?.split("+"),c[8]=h.hotkey,c[9]=l):l=c[9];let v=h.selected?m.CheckmarkIcon:void 0;return c[10]!==x||c[11]!==f.href||c[12]!==h.icon||c[13]!==h.selected||c[14]!==h.tone||c[15]!==y||c[16]!==l||c[17]!==v||c[18]!==b?(r=(0,o.jsx)(eC.MenuItem,{as:"a",disabled:y,hotkeys:l,href:f.href,icon:h.icon,iconRight:v,onClick:x,pressed:h.selected,text:b,tone:h.tone}),c[10]=x,c[11]=f.href,c[12]=h.icon,c[13]=h.selected,c[14]=h.tone,c[15]=y,c[16]=l,c[17]=v,c[18]=b,c[19]=r):r=c[19],c[20]!==r||c[21]!==g?(a=(0,o.jsx)(d.TooltipOfDisabled,{content:g,placement:"left",children:r}),c[20]=r,c[21]=g,c[22]=a):a=c[22],a}let ih={constrainSize:!0,placement:"bottom",portal:!0};function ig(e,t){return e.some(e=>"item"===e.type&&e.tone===t||"group"===e.type&&ig(e.children,t))}function ix(e){let t,n,i,l,r,c=(0,s.c)(13),{nodes:u,actionsNodes:p}=e,m=(0,a.useId)(),h=ig(u,"critical"),g=ig(u,"caution"),f=h?"critical":g?"caution":void 0;return c[0]!==f?(t=(0,o.jsx)(d.ContextMenuButton,{tone:f,"data-testid":"pane-context-menu-button"}),c[0]=f,c[1]=t):t=c[1],c[2]!==p?(n=p&&(0,o.jsxs)(o.Fragment,{children:[p,(0,o.jsx)(eT.MenuDivider,{})]}),c[2]=p,c[3]=n):n=c[3],c[4]!==u?(i=u.map((e,t)=>{let n=u[t-1]?.type==="group";return(0,o.jsx)(ic,{isAfterGroup:n,node:e},e.key)}),c[4]=u,c[5]=i):i=c[5],c[6]!==n||c[7]!==i?(l=(0,o.jsxs)(eT.Menu,{children:[n,i]}),c[6]=n,c[7]=i,c[8]=l):l=c[8],c[9]!==m||c[10]!==t||c[11]!==l?(r=(0,o.jsx)(eC.MenuButton,{button:t,id:m,menu:l,popover:ih}),c[9]=m,c[10]=t,c[11]=l,c[12]=r):r=c[12],r}let ib=(0,eD.styled)(eT.Layer)`
  position: sticky;
  bottom: 0;
`,iy=(0,eD.styled)(eT.Card)`
  padding-bottom: env(safe-area-inset-bottom);
`,iv=(0,a.forwardRef)(function(e,t){let n,i,l=(0,s.c)(7),{children:r,padding:a}=e,{collapsed:c}=io();return l[0]!==r||l[1]!==a?(n=(0,o.jsx)(iy,{tone:"inherit",children:(0,o.jsx)(eT.Box,{padding:a,children:r})}),l[0]=r,l[1]=a,l[2]=n):n=l[2],l[3]!==c||l[4]!==t||l[5]!==n?(i=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(ib,{"data-testid":"pane-footer",hidden:c,ref:t,children:n})}),l[3]=c,l[4]=t,l[5]=n,l[6]=i):i=l[6],i}),ij=(0,eD.styled)(eT.Layer)(({$border:e})=>eD.css`
    line-height: 0;
    position: sticky;
    top: 0;

    &:not([data-collapsed]):after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: -1px;
      border-bottom: 1px solid ${e?"var(--card-border-color)":"transparent"};
      opacity: 1;
    }
  `),iw=(0,eD.styled)(eT.Flex)`
  transform-origin: calc(51px / 2);

  [data-collapsed] > div > & {
    transform: rotate(90deg);
  }
`,iS=(0,eD.styled)(eT.Card)(({theme:e})=>{let{fg:t,bg:n}=e.sanity.color.card.enabled;return eD.css`
    background-color: ${n};

    [data-ui='Text'] {
      color: ${t};
    }
  `}),i_=(0,eD.styled)(eR.TextSkeleton)`
  width: 66%;
  max-width: 175px;
`,iI=(0,eD.styled)(eT.Text)`
  cursor: default;
  outline: none;
`,iC=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,c,u,p,m,h,g,f,x,b=(0,s.c)(48),{actions:y,backButton:v,border:j,contentAfter:w,loading:S,subActions:_,tabs:I,tabIndex:C,title:T,appendTitle:R}=e,{collapse:P,collapsed:E,expand:D,rootElement:k}=io(),F=(0,eR.useElementRect)(k||null),A=E?F?.height||window.innerHeight:void 0;b[0]!==A?(n={width:A},b[0]=A,b[1]=n):n=b[1];let L=n;b[2]!==P||b[3]!==E?(i=()=>{E||P()},b[2]=P,b[3]=E,b[4]=i):i=b[4];let V=i;b[5]!==E||b[6]!==D?(l=()=>{E&&D()},b[5]=E,b[6]=D,b[7]=l):l=b[7];let M=l,O=!!(!E&&(I||_)),z=E?"":void 0,B=E?"":void 0;b[8]!==v?(r=v&&(0,o.jsx)(eT.Box,{flex:"none",children:v}),b[8]=v,b[9]=r):r=b[9];let N=v?1:2;b[10]!==S?(a=S&&(0,o.jsx)(eT.Box,{children:(0,o.jsx)(i_,{animated:!0,radius:1,size:1})}),b[10]=S,b[11]=a):a=b[11],b[12]!==R||b[13]!==S||b[14]!==T?(c=!S&&(0,o.jsxs)(eT.Flex,{align:"center",gap:1,children:[(0,o.jsx)(iI,{size:1,textOverflow:"ellipsis",weight:"semibold",children:T}),R]}),b[12]=R,b[13]=S,b[14]=T,b[15]=c):c=b[15],b[16]!==V||b[17]!==N||b[18]!==a||b[19]!==c||b[20]!==C?(u=(0,o.jsxs)(iS,{__unstable_focusRing:!0,flex:1,onClick:V,paddingLeft:N,padding:2,tabIndex:C,children:[a,c]}),b[16]=V,b[17]=N,b[18]=a,b[19]=c,b[20]=C,b[21]=u):u=b[21],b[22]!==y||b[23]!==E?(p=y&&(0,o.jsx)(eT.Box,{hidden:E,children:(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:y})}),b[22]=y,b[23]=E,b[24]=p):p=b[24],b[25]!==u||b[26]!==p||b[27]!==r?(m=(0,o.jsxs)(eT.Flex,{align:"flex-start",gap:3,children:[r,u,p]}),b[25]=u,b[26]=p,b[27]=r,b[28]=m):m=b[28],b[29]!==E||b[30]!==O||b[31]!==_||b[32]!==I?(h=O&&(0,o.jsxs)(eT.Flex,{align:"center",hidden:E,overflow:"auto",children:[(0,o.jsx)(eT.Box,{flex:1,marginRight:3*!!_,children:I}),_]}),b[29]=E,b[30]=O,b[31]=_,b[32]=I,b[33]=h):h=b[33],b[34]!==M||b[35]!==L||b[36]!==m||b[37]!==h?(g=(0,o.jsxs)(iw,{direction:"column",gap:3,onClick:M,padding:3,sizing:"border",style:L,children:[m,h]}),b[34]=M,b[35]=L,b[36]=m,b[37]=h,b[38]=g):g=b[38];let H=!E&&w;return b[39]!==g||b[40]!==H||b[41]!==B?(f=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:(0,o.jsxs)(eT.Card,{"data-collapsed":B,tone:"inherit",children:[g,H]})}),b[39]=g,b[40]=H,b[41]=B,b[42]=f):f=b[42],b[43]!==j||b[44]!==t||b[45]!==f||b[46]!==z?(x=(0,o.jsx)(eT.LayerProvider,{zOffset:100,children:(0,o.jsx)(ij,{$border:j,"data-collapsed":z,"data-testid":"pane-header",ref:t,children:f})}),b[43]=j,b[44]=t,b[45]=f,b[46]=z,b[47]=x):x=b[47],x});function iT(e){return e.disabled?{disabledReason:"object"==typeof e.disabled?e.disabled.reason:void 0,ariaLabel:"object"==typeof e.disabled&&"string"==typeof e.disabled?.reason?e.disabled.reason:"This is disabled",isDisabled:!!e.disabled}:{disabledReason:void 0,ariaLabel:void 0,isDisabled:!1}}function iR(e){let t=(0,s.c)(4),{node:n}=e;if("item"===n.type){let e;return t[0]!==n?(e=(0,o.jsx)(iP,{node:n}),t[0]=n,t[1]=e):e=t[1],e}if("group"===n.type){let e;return t[2]!==n?(e=(0,o.jsx)(iD,{node:n}),t[2]=n,t[3]=e):e=t[3],e}return console.warn('unknown menu node (expected `type: "item" | "group"`):',n),null}function iP(e){let t,n,i,l,r,a=(0,s.c)(23),{node:c}=e,{title:u}=(0,d.useI18nText)(c),{t:p}=(0,d.useTranslation)();if(c.intent){let t;return a[0]!==c.intent||a[1]!==e?(t=(0,o.jsx)(iE,{...e,intent:c.intent}),a[0]=c.intent,a[1]=e,a[2]=t):t=a[2],t}a[3]!==c?(t=iT(c),a[3]=c,a[4]=t):t=a[4];let{disabledReason:m,ariaLabel:h,isDisabled:g}=t;a[5]!==h||a[6]!==p||a[7]!==u?(n=h||u||p("status-button.aria-label"),a[5]=h,a[6]=p,a[7]=u,a[8]=n):n=a[8],a[9]!==g||a[10]!==c.hotkey?(i=!g&&c.hotkey?c.hotkey.split("+"):void 0,a[9]=g,a[10]=c.hotkey,a[11]=i):i=a[11];let f=g?m:u;return a[12]!==i||a[13]!==f?(l={hotkeys:i,content:f},a[12]=i,a[13]=f,a[14]=l):l=a[14],a[15]!==g||a[16]!==c.icon||a[17]!==c.onAction||a[18]!==c.selected||a[19]!==c.tone||a[20]!==n||a[21]!==l?(r=(0,o.jsx)(d.StatusButton,{disabled:g,icon:c.icon,onClick:c.onAction,selected:c.selected,tone:c.tone,"aria-label":n,tooltipProps:l}),a[15]=g,a[16]=c.icon,a[17]=c.onAction,a[18]=c.selected,a[19]=c.tone,a[20]=n,a[21]=l,a[22]=r):r=a[22],r}function iE(e){let t,n,i,l,r,a,c,u=(0,s.c)(27),{intent:p,node:m}=e;u[0]!==p.params||u[1]!==p.type?(t={intent:p.type,params:p.params},u[0]=p.params,u[1]=p.type,u[2]=t):t=u[2];let h=(0,eV.useIntentLink)(t),{t:g}=(0,d.useTranslation)();u[3]!==h||u[4]!==m?(n=e=>{h.onClick(e),m.onAction()},u[3]=h,u[4]=m,u[5]=n):n=u[5];let f=n;u[6]!==m?(i=iT(m),u[6]=m,u[7]=i):i=u[7];let{disabledReason:x,ariaLabel:b,isDisabled:y}=i;u[8]!==b||u[9]!==m.title||u[10]!==g?(l=b||m.title||g("status-button.aria-label"),u[8]=b,u[9]=m.title,u[10]=g,u[11]=l):l=u[11],u[12]!==y||u[13]!==m.hotkey?(r=!y&&m.hotkey?m.hotkey.split("+"):void 0,u[12]=y,u[13]=m.hotkey,u[14]=r):r=u[14];let v=y?x:m.title;return u[15]!==r||u[16]!==v?(a={hotkeys:r,content:v,placement:"bottom",portal:!0},u[15]=r,u[16]=v,u[17]=a):a=u[17],u[18]!==f||u[19]!==h.href||u[20]!==y||u[21]!==m.icon||u[22]!==m.selected||u[23]!==m.tone||u[24]!==l||u[25]!==a?(c=(0,o.jsx)(d.StatusButton,{forwardedAs:"a",disabled:y,href:h.href,icon:m.icon,onClick:f,selected:m.selected,tone:m.tone,"aria-label":l,tooltipProps:a}),u[18]=f,u[19]=h.href,u[20]=y,u[21]=m.icon,u[22]=m.selected,u[23]=m.tone,u[24]=l,u[25]=a,u[26]=c):c=u[26],c}function iD(e){let t,n,i,l,r,c=(0,s.c)(16),{node:u}=e,{title:p}=(0,d.useI18nText)(u),h=!!u.disabled,g=u.icon??m.UnknownIcon;c[0]!==u.title?(t={content:u.title,portal:!0},c[0]=u.title,c[1]=t):t=c[1],c[2]!==h||c[3]!==g||c[4]!==t||c[5]!==p?(n=(0,o.jsx)(eC.Button,{disabled:h,icon:g,label:p,mode:"bleed",tooltipProps:t}),c[2]=h,c[3]=g,c[4]=t,c[5]=p,c[6]=n):n=c[6];let f=(0,a.useId)();return c[7]!==u.children||c[8]!==u.disabled?(i=u.children.map((e,t)=>(0,o.jsx)(ic,{disabled:!!u.disabled,isAfterGroup:u.children[t-1]?.type==="group",node:e},e.key)),c[7]=u.children,c[8]=u.disabled,c[9]=i):i=c[9],c[10]!==i?(l=(0,o.jsx)(eT.Menu,{children:i}),c[10]=i,c[11]=l):l=c[11],c[12]!==n||c[13]!==f||c[14]!==l?(r=(0,o.jsx)(eC.MenuButton,{button:n,id:f,menu:l}),c[12]=n,c[13]=f,c[14]=l,c[15]=r):r=c[15],r}let ik=(0,eD.styled)(eT.Card)`
  transition: opacity 200ms;
  position: relative;
  z-index: 1;
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  opacity: 0;

  &:not([hidden]) {
    display: flex;
  }

  &:not([data-collapsed]) {
    overflow: auto;
  }

  &[data-mounted] {
    opacity: 1;
  }

  &[data-resizing] {
    pointer-events: none;
  }
`,iF=[];function iA(e){let t,n,i,l,r,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(41);w[0]!==e?({children:t,minWidth:n,onCollapse:i,onExpand:l,...r}=e,w[0]=e,w[1]=t,w[2]=n,w[3]=i,w[4]=l,w[5]=r):(t=w[1],n=w[2],i=w[3],l=w[4],r=w[5]);let[S]=(0,a.useState)(iL),[_,I]=(0,a.useState)(null),C=(0,eR.useElementRect)(_)?.width||0,T=void 0!==C&&n?C<n:void 0;w[6]===Symbol.for("react.memo_cache_sentinel")?(d={expandedElement:null,panes:[],resizing:!1},w[6]=d):d=w[6];let[R,P]=(0,a.useState)(d);w[7]!==S||w[8]!==_?(c=()=>S.setRootElement(_),p=[S,_],w[7]=S,w[8]=_,w[9]=c,w[10]=p):(c=w[9],p=w[10]),(0,a.useEffect)(c,p),w[11]!==S||w[12]!==C?(m=()=>S.setRootWidth(C),h=[S,C],w[11]=S,w[12]=C,w[13]=m,w[14]=h):(m=w[13],h=w[14]),(0,a.useEffect)(m,h),w[15]!==S?(g=()=>S.subscribe(P),f=[S],w[15]=S,w[16]=g,w[17]=f):(g=w[16],f=w[17]),(0,a.useEffect)(g,f),w[18]!==T||w[19]!==i||w[20]!==l?(x=()=>{void 0!==T&&(T&&i&&i(),!T&&l&&l())},b=[T,i,l],w[18]=T,w[19]=i,w[20]=l,w[21]=x,w[22]=b):(x=w[21],b=w[22]),(0,a.useEffect)(x,b),w[23]!==T||w[24]!==S.collapse||w[25]!==S.expand||w[26]!==S.mount||w[27]!==S.resize||w[28]!==R.expandedElement||w[29]!==R.panes||w[30]!==R.resizing?(y={collapse:S.collapse,collapsed:T,expand:S.expand,expandedElement:R.expandedElement,mount:S.mount,panes:R.panes,resize:S.resize,resizing:R.resizing},w[23]=T,w[24]=S.collapse,w[25]=S.expand,w[26]=S.mount,w[27]=S.resize,w[28]=R.expandedElement,w[29]=R.panes,w[30]=R.resizing,w[31]=y):y=w[31];let E=y,D=T?"":void 0,k=R.resizing?"":void 0,F=C?"":void 0;return w[32]!==t||w[33]!==r||w[34]!==D||w[35]!==k||w[36]!==F?(v=(0,o.jsx)(ik,{"data-ui":"PaneLayout",...r,"data-collapsed":D,"data-resizing":k,"data-mounted":F,ref:I,children:t}),w[32]=t,w[33]=r,w[34]=D,w[35]=k,w[36]=F,w[37]=v):v=w[37],w[38]!==E||w[39]!==v?(j=(0,o.jsx)(u.PaneLayoutContext.Provider,{value:E,children:v}),w[38]=E,w[39]=v,w[40]=j):j=w[40],j}function iL(){return function(){let e=[],t=[],n=new WeakMap,i=new Set,l={},r=null,o=0,s=null,a=null,d=new Map,c=!1;function u(e){i.delete(e),s=e,p()}return{collapse:function(e){i.add(e),s===e&&(s=null),p()},expand:u,maximize:function(e){a=e,p()},mount:function(e,i){return n.set(e,{...i,original:i}),t.push(e),r&&function(e,t){let n=new WeakMap;for(let i of t)n.set(i,function(e,t){let n=[],i=t;for(;i!==e;){let t=i.parentElement;if(!t)break;let l=Array.from(t.childNodes).indexOf(i);if(n.unshift(l),t===e)break;i=t}return n}(e,i));t.sort((e,t)=>{let i=n.get(e)||iF,l=n.get(t)||iF,r=Math.max(i.length,l.length);for(let e=0;e<r;e+=1){let t=i[e]||-1,n=l[e]||-1;if(t!==n)return t-n}return 0})}(r,t),u(e),()=>{let i=t.indexOf(e);i>-1&&t.splice(i,1),n.delete(e),a===e&&(a=null),p()}},resize:function(e,i,r){let o=t.indexOf(i),s=n.get(i);if(!s)return;let a=t[o+1],u=n.get(a);if(u){if("start"===e&&(c=!0,l.left={element:i,flex:s.flex||1,width:i.offsetWidth},l.right={element:a,flex:u.flex||1,width:a.offsetWidth},p()),"move"===e&&l.left&&l.right){let e,t,n,o,c,m,h,g,f,x,b,y;d=new Map;let{leftW:v,rightW:j,leftFlex:w,rightFlex:S}=(e={flex:l.left.flex+l.right.flex,width:l.left.width+l.right.width},t=s.minWidth??204,n=u.minWidth??204,o=Math.min(s.maxWidth||1/0,e.width-n),c=Math.min(u.maxWidth||1/0,e.width-t),m=t-l.left.width,m<(h=l.right.width-c)&&(m=h),g=l.right.width-n,g>(f=o-l.left.width)&&(g=f),x=Math.min(Math.max(r,m),g),b=l.left.width+x,y=l.right.width-x,{leftFlex:b/e.width*e.flex,leftW:b,rightFlex:y/e.width*e.flex,rightW:y});d.set(i,{flex:w,width:v}),d.set(a,{flex:S,width:j}),p()}if("end"===e){c=!1;let e=d.get(i),t=d.get(a);n.set(i,{...s,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:e?.flex??s.flex}),n.set(a,{...u,currentMinWidth:0,currentMaxWidth:s.maxWidth??1/0,flex:t?.flex??u.flex}),d=new Map,delete l.left,delete l.right,p()}}},setRootElement:function(e){r=e},setRootWidth:function(e){o=e,p()},subscribe:function(t){return e.push(t),()=>{let n=e.push(t);n>-1&&e.splice(n,1)}}};function p(){if(!o)return;let l=[];for(let e of t)e!==s&&l.unshift(e);s&&l.unshift(s);let r=new WeakMap,u=l.length,p=l[0],m=o-(u-1)*51;for(let e of l){let t=n.get(e);if(!t)continue;let l=t.currentMinWidth||t.minWidth||204,o=e===p,s=i.has(e),c=l>m,u=!o&&(s||c),h=d.get(e);r.set(e,{element:e,collapsed:u,currentMinWidth:h?.width??t.currentMinWidth,currentMaxWidth:h?.width??t.currentMaxWidth,flex:h?.flex??t.flex??1,maximized:e===a}),u?m-=51:m-=l-51}let h=[];for(let e of t){let t=r.get(e);t&&h.push(t)}for(let n of e)n({expandedElement:s||t[t.length-1]||null,panes:h,resizing:c})}}()}function iV(e){let t,n,i,l=(0,s.c)(12),{children:r,currentMinWidth:a,flex:d,minWidth:c,paneKey:u,title:p,tone:m}=e,h=void 0===p?"Error":p,g=void 0===m?"critical":m;return l[0]!==h?(t=(0,o.jsx)(iC,{title:h}),l[0]=h,l[1]=t):t=l[1],l[2]!==r?(n=(0,o.jsx)(is,{overflow:"auto",children:(0,o.jsx)(eT.Box,{paddingX:4,paddingY:5,children:r})}),l[2]=r,l[3]=n):n=l[3],l[4]!==a||l[5]!==d||l[6]!==c||l[7]!==u||l[8]!==t||l[9]!==n||l[10]!==g?(i=(0,o.jsxs)(il,{currentMinWidth:a,flex:d,id:u,minWidth:c,tone:g,children:[t,n]}),l[4]=a,l[5]=d,l[6]=c,l[7]=u,l[8]=t,l[9]=n,l[10]=g,l[11]=i):i=l[11],i}function iM(e){let t,n,i,l=(0,s.c)(6),{children:r,ms:d}=e,c=void 0===d?0:d,[u,p]=(0,a.useState)(c<=0);if(l[0]!==c?(t=()=>{if(c<=0)return;let e=setTimeout(()=>p(!0),c);return()=>{clearTimeout(e)}},n=[c],l[0]=c,l[1]=t,l[2]=n):(t=l[1],n=l[2]),(0,a.useEffect)(t,n),!u||!r){let e;return l[3]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),l[3]=e):e=l[3],e}return l[4]!==r?(i="function"==typeof r?r():r,l[4]=r,l[5]=i):i=l[5],i}function iO(e){let t=[{ms:300,messageKey:"panes.resolving.default-message"},{ms:5e3,messageKey:"panes.resolving.slow-resolve-message"}];if(d.isDev){let n=["Check console for errors?","Is your observable/promise resolving?",e.length>0?`Structure path: ${e.join(" ➝ ")}`:""];t.push({ms:1e4,message:n.join(`
`)})}let n=(0,e9.of)(null);return(0,te.merge)(...t.map(e=>n.pipe((0,eG.mapTo)("messageKey"in e?{messageKey:e.messageKey}:{message:e.message}),(0,eq.delay)(e.ms))))}let iz=(0,eD.styled)(eT.Flex)`
  opacity: 0;
  transition: opacity 200ms;

  &[data-mounted] {
    opacity: 1;
  }
`,iB=(0,a.memo)(e=>{let t,n,i,l,r,c,u,p,m,h,g=(0,s.c)(28),{delay:f,flex:x,message:b,minWidth:y,paneKey:v,path:j,selected:w,title:S,tone:I}=e,C=void 0===f?300:f,T=void 0===b?iO:b,{t:R}=(0,d.useTranslation)(_);e:{if("function"==typeof T){let e;g[0]!==T||g[1]!==j?(e=T(j?j.split(";"):[]),g[0]=T,g[1]=j,g[2]=e):e=g[2],t=e;break e}t=T}let P=t;g[3]!==P||g[4]!==R?(n=()=>"string"==typeof P?P:R("panes.resolving.default-message"),g[3]=P,g[4]=R,g[5]=n):n=g[5];let[E,D]=(0,a.useState)(n);g[6]!==P||g[7]!==R?(i=()=>{if("object"!=typeof P||"function"!=typeof P.subscribe)return;let e=P.subscribe(e=>{D("messageKey"in e?R(e.messageKey):e.message)});return()=>e.unsubscribe()},l=[P,R],g[6]=P,g[7]=R,g[8]=i,g[9]=l):(i=g[8],l=g[9]),(0,a.useEffect)(i,l);let[k,F]=(0,a.useState)(null),[A,L]=(0,a.useState)(!1);g[10]!==k?(r=()=>{if(k)return(0,eR._raf2)(()=>L(!0))},c=[k],g[10]=k,g[11]=r,g[12]=c):(r=g[11],c=g[12]),(0,a.useEffect)(r,c);let V=A?"":void 0,M=S||E;g[13]!==M?(u=(0,o.jsx)(d.LoadingBlock,{showText:!0,title:M}),g[13]=M,g[14]=u):u=g[14],g[15]!==u||g[16]!==V?(p=(0,o.jsx)(iz,{align:"center","data-mounted":V,direction:"column",height:"fill",justify:"center",ref:F,children:u}),g[15]=u,g[16]=V,g[17]=p):p=g[17];let O=p;return g[18]!==O||g[19]!==C?(m=(0,o.jsx)(is,{children:O}),g[18]=O,g[19]=C,g[20]=m):m=g[20],g[21]!==x||g[22]!==y||g[23]!==v||g[24]!==w||g[25]!==m||g[26]!==I?(h=(0,o.jsx)(il,{flex:x,id:v,minWidth:y,selected:w,tone:I,children:m}),g[21]=x,g[22]=y,g[23]=v,g[24]=w,g[25]=m,g[26]=I,g[27]=h):h=g[27],h});function iN(){let e=(0,a.useContext)(u.DocumentPaneContext);if(!e)throw Error("DocumentPane: missing context value");return e}function iH(e){let t,n,i=(0,s.c)(8),{children:l,documentId:r,documentType:a}=e;return i[0]!==l||i[1]!==r||i[2]!==a?(t=(0,o.jsx)(i$,{documentId:r,documentType:a,children:l}),i[0]=l,i[1]=r,i[2]=a,i[3]=t):t=i[3],i[4]!==r||i[5]!==a||i[6]!==t?(n=(0,o.jsx)(d.CommentsEnabledProvider,{documentId:r,documentType:a,children:t}),i[4]=r,i[5]=a,i[6]=t,i[7]=n):n=i[7],n}function i$(e){let t,n,i,l,r,c,u=(0,s.c)(26),{children:p,documentId:m,documentType:h}=e,{enabled:g}=(0,d.useCommentsEnabled)(),{connectionState:f,onPathOpen:x,inspector:b,openInspector:y}=iN(),{selectedReleaseId:v}=(0,d.usePerspective)(),{params:j,setParams:w}=lk(),{resolveIntentLink:S}=(0,eV.useRouter)(),_=j?.comment,I=(0,a.useRef)(j);u[0]!==j?(t=()=>{I.current=j},n=[j],u[0]=j,u[1]=t,u[2]=n):(t=u[1],n=u[2]),(0,a.useLayoutEffect)(t,n),u[3]!==m||u[4]!==h||u[5]!==S?(i=e=>{let t=S("edit",{id:m,type:h,inspect:d.COMMENTS_INSPECTOR_NAME,comment:e});return`${window.location.origin}${t}`},u[3]=m,u[4]=h,u[5]=S,u[6]=i):i=u[6];let C=i;u[7]!==w?(l=()=>{w({...I.current,comment:void 0})},u[7]=w,u[8]=l):l=u[8];let T=l;u[9]!==b?.name||u[10]!==y?(r=()=>{b?.name!==d.COMMENTS_INSPECTOR_NAME&&y(d.COMMENTS_INSPECTOR_NAME)},u[9]=b?.name,u[10]=y,u[11]=r):r=u[11];let R=r;if(!g){let e;return u[12]!==p?(e=(0,o.jsx)(o.Fragment,{children:p}),u[12]=p,u[13]=e):e=u[13],e}let P=b?.name===d.COMMENTS_INSPECTOR_NAME,E="connecting"===f;return u[14]!==p||u[15]!==m||u[16]!==h||u[17]!==C||u[18]!==T||u[19]!==R||u[20]!==x||u[21]!==_||u[22]!==v||u[23]!==P||u[24]!==E?(c=(0,o.jsx)(d.CommentsProvider,{documentId:m,documentType:h,getCommentLink:C,isCommentsOpen:P,isConnecting:E,onClearSelectedComment:T,onCommentsOpen:R,onPathOpen:x,selectedCommentId:_,sortOrder:"desc",type:"field",releaseId:v,children:p}),u[14]=p,u[15]=m,u[16]=h,u[17]=C,u[18]=T,u[19]=R,u[20]=x,u[21]=_,u[22]=v,u[23]=P,u[24]=E,u[25]=c):c=u[25],c}function iU(e){let t,n,i,l,r,c,u=(0,s.c)(20),{children:p}=e,{data:m}=(0,d.useActiveReleases)(),{actions:h,editState:g,isInitialValueLoading:f,revisionId:x}=iN(),b=(0,a.useRef)(null);if(u[0]!==m||u[1]!==g?.release){let e;u[3]!==g?.release?(e=e=>e===g?.release,u[3]=g?.release,u[4]=e):e=u[4],t=m.map(iG).find(e),u[0]=m,u[1]=g?.release,u[2]=t}else t=u[2];let y=t;u[5]!==g||u[6]!==f||u[7]!==y||u[8]!==x?(n=g?{...g,release:y,revision:x||void 0,initialValueResolved:!f}:null,u[5]=g,u[6]=f,u[7]=y,u[8]=x,u[9]=n):n=u[9];let v=n;if(!v)return null;u[10]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b.current?.(),u[10]=i):i=u[10],u[11]!==v?(l={...v,onComplete:i},u[11]=v,u[12]=l):l=u[12];let j=h||d.EMPTY_ARRAY;return u[13]!==v||u[14]!==p?(r=e=>{let{states:t}=e;return(0,o.jsx)(iW,{states:t,actionProps:v,children:p})},u[13]=v,u[14]=p,u[15]=r):r=u[15],u[16]!==l||u[17]!==j||u[18]!==r?(c=(0,o.jsx)(d.GetHookCollectionState,{args:l,hooks:j,resetRef:b,children:r}),u[16]=l,u[17]=j,u[18]=r,u[19]=c):c=u[19],c}function iG(e){return(0,d.getReleaseIdFromReleaseDocumentId)(e._id)}iB.displayName="Memo(LoadingPane)";let iq=["delete","duplicate","publish","unpublish","unlinkFromCanvas","editInCanvas","linkToCanvas","schedule","discardVersion","unpublishVersion"];function iW(e){let t,n,i,l=(0,s.c)(9),{states:r,children:a,actionProps:c}=e,{t:p}=(0,d.useTranslation)(_);l[0]!==c?(t=(0,d.getDocumentIdForCanvasLink)(c),l[0]=c,l[1]=t):t=l[1];let{isLinked:m}=(0,d.useCanvasCompanionDoc)(t);return l[2]!==m||l[3]!==r||l[4]!==p?(n=m?r.map(e=>e.action&&iq.includes(e.action)?e:{...e,disabled:!0,title:p("action.disabled-by-canvas.tooltip")}):r,l[2]=m,l[3]=r,l[4]=p,l[5]=n):n=l[5],l[6]!==a||l[7]!==n?(i=(0,o.jsx)(u.DocumentActionsStateContext.Provider,{value:n,children:a}),l[6]=a,l[7]=n,l[8]=i):i=l[8],i}function iK(){let e=(0,a.useContext)(u.StructureToolContext);if(!e)throw Error("StructureTool: missing context value");return e}let iY={},iX="inspect:",iQ=[{id:"inspectors"},{id:"links"}],iJ="sanity/structure/history";function iZ(e){let t,n,i,l,r,c,u,p,m,h=(0,s.c)(22),{documentId:g,documentType:f,inspectors:x,onMenuItems:b}=e,y=x.length;h[0]!==y?(t=()=>Array.from(Array(y)),h[0]=y,h[1]=t):t=h[1];let[v,j]=(0,a.useState)(t);h[2]!==y||h[3]!==v?(n=()=>{if(v.length!==y){let e=Array.from(Array(y));for(let t=0;t<y;t++)e[t]=v[t];j(e)}},i=[y,v],h[2]=y,h[3]=v,h[4]=n,h[5]=i):(n=h[4],i=h[5]),(0,a.useEffect)(n,i),h[6]===Symbol.for("react.memo_cache_sentinel")?(l=(e,t)=>{j(n=>{let i=[...n];return i[e]=t,i})},h[6]=l):l=h[6];let w=l;if(h[7]!==v||h[8]!==b?(r=()=>{b(v.filter(Boolean))},c=[v,b],h[7]=v,h[8]=b,h[9]=r,h[10]=c):(r=h[9],c=h[10]),(0,a.useEffect)(r,c),h[11]!==g||h[12]!==f||h[13]!==x){let e;h[15]!==g||h[16]!==f?(e=(e,t)=>e.useMenuItem?[function({documentId:e,documentType:t,index:n,setMenuItem:i,useMenuItem:l}){return(0,a.memo)(function(){let r,o,c,u=(0,s.c)(4);u[0]===Symbol.for("react.memo_cache_sentinel")?(r={documentId:e,documentType:t},u[0]=r):r=u[0];let p=l(r),m=(0,d.useUnique)(p);return u[1]!==m?(o=()=>{i(n,m)},c=[m],u[1]=m,u[2]=o,u[3]=c):(o=u[2],c=u[3]),(0,a.useEffect)(o,c),null})}({documentId:g,documentType:f,index:t,setMenuItem:w,useMenuItem:e.useMenuItem}),e.name]:[i1,""],h[15]=g,h[16]=f,h[17]=e):e=h[17],u=x.map(e),h[11]=g,h[12]=f,h[13]=x,h[14]=u}else u=h[14];let S=u;return h[18]!==S?(p=S.map(i0),h[18]=S,h[19]=p):p=h[19],h[20]!==p?(m=(0,o.jsx)(o.Fragment,{children:p}),h[20]=p,h[21]=m):m=h[21],m}function i0(e){let[t,n]=e;return n&&(0,o.jsx)(t,{},n)}function i1(){return null}function i2(){let e,t,n,i,l=(0,s.c)(22),{connectionState:r,schemaType:o,editState:a,isDeleted:c,lastRevisionDocument:u}=iN(),{selectedPerspectiveName:p}=(0,d.usePerspective)(),{t:m}=(0,d.useTranslation)(_);e:{if(c){e=u;break e}if(p&&(0,d.isPublishedPerspective)(p)){e=a?.published;break e}e=a?.version||a?.draft||a?.published}let h=e,g=!!h;t:{if(c&&u&&o)try{let e;l[0]!==u||l[1]!==o?(e=(0,d.prepareForPreview)(u,o),l[0]=u,l[1]=o,l[2]=e):e=l[2],t=e;break t}catch(e){console.warn("Failed to prepare preview for deleted document:",e),t=null;break t}t=null}let f=t,x=g&&!c;l[3]!==h||l[4]!==o||l[5]!==x?(n={enabled:x,schemaType:o,value:h},l[3]=h,l[4]=o,l[5]=x,l[6]=n):n=l[6];let{error:b,value:y}=(0,d.unstable_useValuePreview)(n);if("connecting"===r&&!g){let e;return l[7]===Symbol.for("react.memo_cache_sentinel")?(e={error:void 0,title:void 0},l[7]=e):e=l[7],e}if(c&&f){let e;return l[8]!==f.title?(e={error:void 0,title:f.title},l[8]=f.title,l[9]=e):e=l[9],e}if(!y&&!c){let e,t,n=o?.title||o?.name;return l[10]!==m||l[11]!==n?(e=m("panes.document-header-title.new.text",{schemaType:n}),l[10]=m,l[11]=n,l[12]=e):e=l[12],l[13]!==e?(t={error:void 0,title:e},l[13]=e,l[14]=t):t=l[14],t}if(b){let e,t;return l[15]!==b.message||l[16]!==m?(e=m("panes.document-list-pane.error.text",{error:b.message}),l[15]=b.message,l[16]=m,l[17]=e):e=l[17],l[18]!==e?(t={error:e,title:void 0},l[18]=e,l[19]=t):t=l[19],t}let v=y?.title;return l[20]!==v?(i={error:void 0,title:v},l[20]=v,l[21]=i):i=l[21],i}iZ.displayName="DocumentInspectorMenuItemsResolver";let i3=["patch","commit"],i4=(0,a.memo)(function(){let e,t,n,i,l,r=(0,s.c)(13),{push:c}=(0,eR.useToast)(),{documentId:u,documentType:p,value:m}=iN(),h=i2(),g=h.error,f=(0,d.useDocumentOperationEvent)(u,p),x=(0,a.useRef)(f),b=lk(),{t:y}=(0,d.useTranslation)(_),{handleOpenDialog:v}=(0,d.useDocumentLimitsUpsellContext)();e:{if(!h.title&&!g&&!i3.includes(f?.op)&&"string"==typeof m.title&&f?.type==="success"){e=m.title;break e}e=h.title}let j=e;r[0]!==y||r[1]!==j?(t=j||y("panes.document-operation-results.operation-undefined-title"),r[0]=y,r[1]=j,r[2]=t):t=r[2];let w=t;r[3]!==w?(n=w.length>25?`${w.slice(0,25)}...`:w,r[3]=w,r[4]=n):n=r[4];let S=n;return r[5]!==S||r[6]!==f||r[7]!==v||r[8]!==b||r[9]!==c||r[10]!==y?(i=()=>{let e;if(f&&f!==x.current){if("error"===f.type){if((0,d.isDocumentLimitError)(f.error))return void v("document_action");c({closable:!0,duration:3e4,status:"error",title:y("panes.document-operation-results.operation-error",{context:f.op}),description:(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{children:y("panes.document-operation-results.error.summary.title")}),f.error.message]})})}return"success"!==f.type||i3.includes(f.op)||c({closable:!0,status:"success",title:(0,o.jsx)(d.Translate,{context:f.op,i18nKey:"panes.document-operation-results.operation-success",t:y,values:{op:f.op,title:S},components:{Strong:"strong"}})}),"success"===f.type&&"delete"===f.op&&(e=setTimeout(()=>b.closeCurrentAndAfter(),0)),x.current=f,()=>clearTimeout(e)}},l=[f,b,c,y,S,v],r[5]=S,r[6]=f,r[7]=v,r[8]=b,r[9]=c,r[10]=y,r[11]=i,r[12]=l):(i=r[11],l=r[12]),(0,a.useEffect)(i,l),null}),i5=(0,eD.styled)(eT.Card)({position:"relative",zIndex:"1",lineHeight:"0"});function i6(e){let t,n,i,l,r,a,c,u,p,h,g,f,x=(0,s.c)(25);x[0]!==e?({as:i,children:t,closeButtonLabel:n,onClose:l,title:a,...r}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=r,x[6]=a):(t=x[1],n=x[2],i=x[3],l=x[4],r=x[5],a=x[6]);let{t:b}=(0,d.useTranslation)(_);return x[7]!==a?(c=(0,o.jsx)(eT.Box,{flex:1,padding:3,children:(0,o.jsx)(eT.Text,{as:"h1",size:1,weight:"medium",children:a})}),x[7]=a,x[8]=c):c=x[8],x[9]!==b?(u=b("document-inspector.close-button.tooltip"),x[9]=b,x[10]=u):u=x[10],x[11]!==u?(p={content:u},x[11]=u,x[12]=p):p=x[12],x[13]!==n||x[14]!==l||x[15]!==p?(h=(0,o.jsx)(eT.Box,{flex:"none",padding:1,children:(0,o.jsx)(eC.Button,{"aria-label":n,icon:m.CloseIcon,mode:"bleed",onClick:l,tooltipProps:p})}),x[13]=n,x[14]=l,x[15]=p,x[16]=h):h=x[16],x[17]!==c||x[18]!==h?(g=(0,o.jsxs)(eT.Flex,{padding:2,children:[c,h]}),x[17]=c,x[18]=h,x[19]=g):g=x[19],x[20]!==t||x[21]!==i||x[22]!==r||x[23]!==g?(f=(0,o.jsxs)(i5,{...r,as:i,children:[g,t]}),x[20]=t,x[21]=i,x[22]=r,x[23]=g,x[24]=f):f=x[24],f}function i8(e){let t,n,i,l=(0,s.c)(14),{documentId:r,documentType:a,flex:c}=e,{collapsed:u}=io(),{closeInspector:p,inspector:m}=iN(),{features:h}=iK();l[0]!==p||l[1]!==m?(t=()=>{m&&p(m.name)},l[0]=p,l[1]=m,l[2]=t):t=l[2];let g=t;if(u||!m)return null;let f=m.component;l[3]!==f||l[4]!==r||l[5]!==a||l[6]!==g?(n=(0,o.jsx)(f,{onClose:g,documentId:r,documentType:a}),l[3]=f,l[4]=r,l[5]=a,l[6]=g,l[7]=n):n=l[7];let x=n;if(h.resizablePanes){let e;return l[8]!==x||l[9]!==c?(e=(0,o.jsx)(d.Resizable,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,resizerPosition:"left",maxWidth:540,minWidth:320,children:x}),l[8]=x,l[9]=c,l[10]=e):e=l[10],e}return l[11]!==x||l[12]!==c?(i=(0,o.jsx)(eT.Box,{as:"aside","data-ui":"DocumentInspectorPanel",flex:c,children:x}),l[11]=x,l[12]=c,l[13]=i):i=l[13],i}function i7(e,t,n){let i,l,r,o,a=(0,s.c)(16),c=(0,d.useKeyValueStore)();a[0]!==t||a[1]!==e?(i=["studio.structure-tool",e,t].filter(Boolean),a[0]=t,a[1]=e,a[2]=i):i=a[2];let u=i.join(".");if(a[3]!==n||a[4]!==c||a[5]!==u){let e;a[7]!==n?(e=e=>null===e?n:e,a[7]=n,a[8]=e):e=a[8],l=c.getKey(u).pipe((0,eW.map)(e)),a[3]=n,a[4]=c,a[5]=u,a[6]=l}else l=a[6];let p=(0,eL.useObservable)(l,n);a[9]!==c||a[10]!==u||a[11]!==p?(r=async e=>{e!==p&&await c.setKey(u,e)},a[9]=c,a[10]=u,a[11]=p,a[12]=r):r=a[12];let m=r;return a[13]!==m||a[14]!==p?(o=[p,m],a[13]=m,a[14]=p,a[15]=o):o=a[15],o}let i9={id:"parsed",title:"document-inspector.view-mode.parsed"},le={id:"raw",title:"document-inspector.view-mode.raw-json"},lt=[i9,le],ln=new tq.default({maxSize:1e3});function li(e){let{path:t}=e,n=ln.get(t);void 0!==n&&ln.set(t,!n)}function ll(e){let t=window.getSelection();if(t){let n=document.createRange();t.removeAllRanges(),n.selectNodeContents(e),t.addRange(n)}}function lr(e){ll(e.target)}function lo(e){65===e.keyCode&&(e.metaKey||e.ctrlKey)&&(e.preventDefault(),ll(e.currentTarget))}let ls=eD.styled.div(({theme:e})=>{let{color:t,fonts:n,space:i}=e.sanity;return eD.css`
    & .json-inspector,
    & .json-inspector .json-inspector__selection {
      font-family: ${n.code.family};
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
      color: var(--card-code-fg-color);
    }

    & .json-inspector .json-inspector__leaf {
      padding-left: ${(0,eT.rem)(i[4])};
    }

    & .json-inspector .json-inspector__leaf.json-inspector__leaf_root {
      padding-top: ${(0,eT.rem)(i[3])};
      padding-left: 0;
    }

    & .json-inspector > .json-inspector__leaf_root > .json-inspector__line > .json-inspector__key {
      display: none;
    }

    & .json-inspector .json-inspector__line {
      display: block;
      position: relative;
      cursor: default;
    }

    & .json-inspector .json-inspector__line::after {
      content: '';
      position: absolute;
      top: 0;
      left: -200px;
      right: -50px;
      bottom: 0;
      z-index: -1;
      pointer-events: none;
    }

    & .json-inspector .json-inspector__line:hover::after {
      background: var(--card-code-bg-color);
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line {
      cursor: pointer;
    }

    & .json-inspector .json-inspector__leaf_composite > .json-inspector__line::before {
      content: '▸ ';
      margin-left: calc(0 - ${(0,eT.rem)(i[4])} + 3px);
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    &
      .json-inspector
      .json-inspector__leaf_expanded.json-inspector__leaf_composite
      > .json-inspector__line::before {
      content: '▾ ';
      font-size: ${n.code.sizes[1].fontSize}px;
      line-height: ${n.code.sizes[1].lineHeight}px;
    }

    & .json-inspector .json-inspector__radio,
    & .json-inspector .json-inspector__flatpath {
      display: none;
    }

    & .json-inspector .json-inspector__value {
      margin-left: ${(0,eT.rem)(i[4]/2)};
    }

    &
      .json-inspector
      > .json-inspector__leaf_root
      > .json-inspector__line
      > .json-inspector__key
      + .json-inspector__value {
      margin: 0;
    }

    & .json-inspector .json-inspector__key {
      color: ${t.syntax.property};
    }

    & .json-inspector .json-inspector__value_helper,
    & .json-inspector .json-inspector__value_null {
      color: ${t.syntax.constant};
    }

    & .json-inspector .json-inspector__not-found {
      padding-top: ${(0,eT.rem)(i[3])};
    }

    & .json-inspector .json-inspector__value_string {
      color: ${t.syntax.string};
    }

    & .json-inspector .json-inspector__value_boolean {
      color: ${t.syntax.boolean};
    }

    & .json-inspector .json-inspector__value_number {
      color: ${t.syntax.number};
    }

    & .json-inspector .json-inspector__show-original {
      display: inline-block;
      padding: 0 6px;
      cursor: pointer;
    }

    & .json-inspector .json-inspector__show-original:hover {
      color: inherit;
    }

    & .json-inspector .json-inspector__show-original::before {
      content: '↔';
    }

    & .json-inspector .json-inspector__show-original:hover::after {
      content: ' expand';
    }
  `});function la(e){let t,n,i,l=(0,s.c)(8),{onChange:r,query:a}=e;l[0]!==r?(t=e=>r(e.target.value),l[0]=r,l[1]=t):t=l[1];let c=t,{t:u}=(0,d.useTranslation)(_);l[2]!==u?(n=u("document-inspector.search.placeholder"),l[2]=u,l[3]=n):n=l[3];let p=a||"";return l[4]!==c||l[5]!==n||l[6]!==p?(i=(0,o.jsx)(eT.TextInput,{icon:m.SearchIcon,onChange:c,placeholder:n,radius:2,value:p}),l[4]=c,l[5]=n,l[6]=p,l[7]=i):i=l[7],i}function ld(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(49),{value:j}=e,{onInspectClose:w,paneKey:S}=iN(),I=`${S}_inspect_`,[C,T]=i7("inspect-view-mode",null,"parsed");v[0]!==C?(t=lt.find(e=>e.id===C),v[0]=C,v[1]=t):t=v[1];let R=t;v[2]!==T?(n=async()=>{await T(i9.id)},v[2]=T,v[3]=n):n=v[3];let P=n;v[4]!==T?(i=async()=>{await T(le.id)},v[4]=T,v[5]=i):i=v[5];let E=i,{t:D}=(0,d.useTranslation)(_),k=`${I}dialog`;v[6]!==D||v[7]!==j?(l=(0,d.isRecord)(j)&&(0,d.isString)(j._id)&&(0,d.isString)(j._type)?(0,o.jsx)(d.Translate,{t:D,i18nKey:"document-inspector.dialog.title",components:{DocumentTitle:()=>(0,o.jsx)("em",{children:(0,o.jsx)(sG,{document:j})})}}):(0,o.jsx)("em",{children:D("document-inspector.dialog.title-no-value")}),v[6]=D,v[7]=j,v[8]=l):l=v[8],v[9]===Symbol.for("react.memo_cache_sentinel")?(r={position:"sticky",bottom:0,zIndex:3},v[9]=r):r=v[9];let F=`${I}tabpanel`,A=`${I}tab-${i9.id}`;v[10]!==D?(a=D(i9.title),v[10]=D,v[11]=a):a=v[11];let L=R===i9;v[12]!==P||v[13]!==F||v[14]!==A||v[15]!==a||v[16]!==L?(c=(0,o.jsx)(eC.Tab,{"aria-controls":F,id:A,label:a,onClick:P,selected:L}),v[12]=P,v[13]=F,v[14]=A,v[15]=a,v[16]=L,v[17]=c):c=v[17];let V=`${I}tabpanel`,M=`${I}tab-${le.id}`;v[18]!==D?(u=D(le.title),v[18]=D,v[19]=u):u=v[19];let O=R===le;v[20]!==E||v[21]!==V||v[22]!==M||v[23]!==u||v[24]!==O?(p=(0,o.jsx)(eC.Tab,{"aria-controls":V,id:M,label:u,onClick:E,selected:O}),v[20]=E,v[21]=V,v[22]=M,v[23]=u,v[24]=O,v[25]=p):p=v[25],v[26]!==c||v[27]!==p?(m=(0,o.jsx)(eT.Card,{padding:3,paddingTop:0,shadow:1,style:r,children:(0,o.jsxs)(eT.TabList,{space:1,children:[c,p]})}),v[26]=c,v[27]=p,v[28]=m):m=v[28];let z=`${I}tab-${C}`,B=`${I}tabpanel`;return v[29]===Symbol.for("react.memo_cache_sentinel")?(h={outline:"none"},v[29]=h):h=v[29],v[30]!==j||v[31]!==R?(g=R===i9&&(0,o.jsx)(ls,{children:(0,o.jsx)(tG,{data:j,isExpanded:function e(t,n){let i=ln.get(t);return void 0===i?(ln.set(t,Array.isArray(n)||(0,d.isRecord)(n)),e(t,n)):i},onClick:li,search:la,filterOptions:{ignoreCase:!0}})}),v[30]=j,v[31]=R,v[32]=g):g=v[32],v[33]!==j||v[34]!==R?(f=R===le&&(0,o.jsx)(eT.Code,{language:"json",tabIndex:0,onKeyDown:lo,onDoubleClick:lr,size:1,children:JSON.stringify(j,null,2)}),v[33]=j,v[34]=R,v[35]=f):f=v[35],v[36]!==z||v[37]!==B||v[38]!==g||v[39]!==f?(x=(0,o.jsxs)(eR.TabPanel,{"aria-labelledby":z,flex:1,id:B,overflow:"auto",padding:4,style:h,children:[g,f]}),v[36]=z,v[37]=B,v[38]=g,v[39]=f,v[40]=x):x=v[40],v[41]!==m||v[42]!==x?(b=(0,o.jsxs)(eT.Flex,{direction:"column",height:"fill",children:[m,x]}),v[41]=m,v[42]=x,v[43]=b):b=v[43],v[44]!==w||v[45]!==b||v[46]!==k||v[47]!==l?(y=(0,o.jsx)(eC.Dialog,{bodyHeight:"fill",id:k,header:l,onClose:w,onClickOutside:w,padding:!1,width:2,children:b}),v[44]=w,v[45]=b,v[46]=k,v[47]=l,v[48]=y):y=v[48],y}function lc(e){let t,n,i,l,r,a,d,c,u,p,m,h=(0,s.c)(22);h[0]!==e?({action:n,content:i,icon:t,tone:r,paddingY:a,...l}=e,h[0]=e,h[1]=t,h[2]=n,h[3]=i,h[4]=l,h[5]=r,h[6]=a):(t=h[1],n=h[2],i=h[3],l=h[4],r=h[5],a=h[6]);let g=void 0===r?"transparent":r,f=void 0===a?2:a;return h[7]!==t?(d=t&&(0,o.jsx)(eT.Text,{size:0,children:(0,o.jsx)(t,{})}),h[7]=t,h[8]=d):d=h[8],h[9]!==i?(c=(0,o.jsx)(eT.Flex,{align:"center",flex:1,gap:2,paddingY:2,children:i}),h[9]=i,h[10]=c):c=h[10],h[11]!==n?(u=n&&(0,o.jsx)(eC.Button,{...n,mode:n.mode||"ghost",tone:n.tone||"default"}),h[11]=n,h[12]=u):u=h[12],h[13]!==d||h[14]!==c||h[15]!==u?(p=(0,o.jsxs)(eT.Flex,{align:"center",gap:3,paddingX:2,children:[d,c,u]}),h[13]=d,h[14]=c,h[15]=u,h[16]=p):p=h[16],h[17]!==f||h[18]!==l||h[19]!==p||h[20]!==g?(m=(0,o.jsx)(eT.Box,{padding:1,children:(0,o.jsx)(eT.Card,{radius:3,paddingX:2,paddingY:f,tone:g,...l,children:p})}),h[17]=f,h[18]=l,h[19]=p,h[20]=g,h[21]=m):m=h[21],m}function lu(){let e=(0,s.c)(3),{isDeleted:t,isDeleting:n,ready:i}=iN(),{selectedPerspective:l}=(0,d.usePerspective)();if(!i)return null;if(!(0,d.isPublishedPerspective)(l)&&!(0,d.isDraftPerspective)(l)&&(0,d.isReleaseDocument)(l)&&"archived"===l.state){let t;return e[0]!==l?(t=(0,o.jsx)(lm,{release:l}),e[0]=l,e[1]=t):t=e[1],t}if(t&&!n){let t;return e[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(lp,{}),e[2]=t):t=e[2],t}}function lp(){let e,t,n,i,l,r,a=(0,s.c)(17),{documentId:c,documentType:u}=iN(),{restore:p}=(0,d.useDocumentOperation)(c,u),{navigateIntent:h}=(0,eV.useRouter)();a[0]!==c||a[1]!==u||a[2]!==h||a[3]!==p?(e=()=>{p.execute("lastRevision"),h("edit",{id:c,type:u})},a[0]=c,a[1]=u,a[2]=h,a[3]=p,a[4]=e):e=a[4];let g=e,{t:f}=(0,d.useTranslation)(_);return a[5]!==f?(t=f("banners.deleted-document-banner.restore-button.text"),a[5]=f,a[6]=t):t=a[6],a[7]!==g||a[8]!==t?(n={onClick:g,text:t},a[7]=g,a[8]=t,a[9]=n):n=a[9],a[10]!==f?(i=f("banners.deleted-document-banner.text"),a[10]=f,a[11]=i):i=a[11],a[12]!==i?(l=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:i}),a[12]=i,a[13]=l):l=a[13],a[14]!==n||a[15]!==l?(r=(0,o.jsx)(lc,{action:n,content:l,"data-testid":"deleted-document-banner",icon:m.ReadOnlyIcon}),a[14]=n,a[15]=l,a[16]=r):r=a[16],r}let lm=e=>{let t,n,i,l=(0,s.c)(8),{release:r}=e,{t:a}=(0,d.useTranslation)();return l[0]!==r.metadata?.title||l[1]!==a?(t=r.metadata?.title||a("release.placeholder-untitled-release"),l[0]=r.metadata?.title,l[1]=a,l[2]=t):t=l[2],l[3]!==t?(n={title:t},l[3]=t,l[4]=n):n=l[4],l[5]!==a||l[6]!==n?(i=(0,o.jsx)(lc,{tone:"caution",content:(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:a,i18nKey:"banners.deleted-release-banner.text",values:n})}),"data-testid":"deleted-release-banner",icon:m.DocumentRemoveIcon}),l[5]=a,l[6]=n,l[7]=i):i=l[7],i};function lh(){let e,t,n=(0,s.c)(5),{schemaType:i}=iN(),{t:l}=(0,d.useTranslation)(_);return(0,eP.isDeprecatedSchemaType)(i)?(n[0]!==l?(e=(0,o.jsx)(d.Translate,{t:l,i18nKey:"banners.deprecated-document-type-banner.text"}),n[0]=l,n[1]=e):e=n[1],n[2]!==i.deprecated.reason||n[3]!==e?(t=(0,o.jsx)(lc,{content:(0,o.jsxs)(eT.Text,{size:1,weight:"medium",children:[e," ",i.deprecated.reason]}),"data-testid":"deprecated-document-type-banner",icon:m.ErrorOutlineIcon}),n[2]=i.deprecated.reason,n[3]=e,n[4]=t):t=n[4],t):null}let lg=(0,tb.defineEvent)({name:"Ask To Edit Dialog Opened",version:1,description:'User clicked the "Ask to edit" button in the document permissions banner'}),lf=(0,tb.defineEvent)({name:"Ask To Edit Request Sent",version:1,description:"User sent a role change request from the dialog"}),lx=(0,eD.styled)(eT.Box)`
  box-sizing: border-box;
`;function lb(e){let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(56),{onClose:j,onRequestSubmitted:w}=e,{t:S}=(0,d.useTranslation)(_),I=(0,tx.useTelemetry)(),C=`request-permissions-${(0,a.useId)()}`,T=(0,d.useProjectId)();v[0]===Symbol.for("react.memo_cache_sentinel")?(t={apiVersion:"2024-09-26"},v[0]=t):t=v[0];let R=(0,d.useClient)(t),P=(0,eR.useToast)(),E=(0,d.useZIndex)(),[D,k]=(0,a.useState)(!1),[F,A]=(0,a.useState)(""),[L,V]=(0,a.useState)(),[M,O]=(0,a.useState)(!1),[z,B]=(0,a.useState)(!1);e:{let e,t="administrator";if(!T||!R){let e;v[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e9.of)(t),v[1]=e):e=v[1],n=e;break e}if(v[2]!==R.observable||v[3]!==T){let n,i;v[5]===Symbol.for("react.memo_cache_sentinel")?(n=e=>e.filter(lv).find(ly)?"editor":t,v[5]=n):n=v[5],v[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(0,e9.of)(t),v[6]=i):i=v[6],e=R.observable.request({url:`/projects/${T}/roles`}).pipe((0,eW.map)(n),(0,eY.startWith)(t),(0,eK.catchError)(i)),v[2]=R.observable,v[3]=T,v[4]=e}else e=v[4];n=e}let N=(0,eL.useObservable)(n);v[7]!==R||v[8]!==F||v[9]!==w||v[10]!==T||v[11]!==N||v[12]!==I||v[13]!==P?(i=()=>{k(!0),R.request({url:`/access/project/${T}/requests`,method:"post",body:{note:F,requestUrl:window?.location.href,requestedRole:N,type:"role"}}).then(e=>{e&&(w&&w(),I.log(lf),P.push({title:"Edit access requested"}))}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(O(!0),V(n)),409===t?(B(!0),V(n)):P.push({title:"There was a problem submitting your request.",status:"error"})}).finally(()=>{k(!1)})},v[7]=R,v[8]=F,v[9]=w,v[10]=T,v[11]=N,v[12]=I,v[13]=P,v[14]=i):i=v[14];let H=i,$=E.fullscreen;v[15]!==S?(l=S("request-permission-dialog.header.text"),v[15]=S,v[16]=l):l=v[16],v[17]!==S?(r=S("confirm-dialog.cancel-button.fallback-text"),v[17]=S,v[18]=r):r=v[18],v[19]!==j||v[20]!==r?(c={onClick:j,text:r},v[19]=j,v[20]=r,v[21]=c):c=v[21];let U=M||z;return v[22]!==S?(u=S("request-permission-dialog.confirm-button.text"),v[22]=S,v[23]=u):u=v[23],v[24]!==D||v[25]!==H||v[26]!==U||v[27]!==u?(p={onClick:H,loading:D,disabled:U,text:u,tone:"primary",type:"submit"},v[24]=D,v[25]=H,v[26]=U,v[27]=u,v[28]=p):p=v[28],v[29]!==p||v[30]!==c?(m={cancelButton:c,confirmButton:p},v[29]=p,v[30]=c,v[31]=m):m=v[31],v[32]!==S?(h=S("request-permission-dialog.description.text"),v[32]=S,v[33]=h):h=v[33],v[34]!==h?(g=(0,o.jsx)(eT.Text,{children:h}),v[34]=h,v[35]=g):g=v[35],v[36]!==z||v[37]!==M||v[38]!==D||v[39]!==L||v[40]!==F||v[41]!==H||v[42]!==S?(f=M||z?(0,o.jsx)(eT.Card,{tone:"caution",padding:3,radius:2,shadow:1,children:(0,o.jsxs)(eT.Text,{size:1,children:[M&&(0,o.jsx)(o.Fragment,{children:L??S("request-permission-dialog.warning.limit-reached.text")}),z&&(0,o.jsx)(o.Fragment,{children:L??S("request-permission-dialog.warning.denied.text")})]})}):(0,o.jsxs)(eT.Stack,{space:3,paddingBottom:0,children:[(0,o.jsx)(eT.TextInput,{placeholder:S("request-permission-dialog.note-input.placeholder.text"),disabled:D,onKeyDown:e=>{"Enter"===e.key&&H()},maxLength:150,value:F,onChange:e=>{A(e.currentTarget.value)}}),(0,o.jsx)(eT.Text,{align:"right",muted:!0,size:1,children:`${F.length}/150`})]}),v[36]=z,v[37]=M,v[38]=D,v[39]=L,v[40]=F,v[41]=H,v[42]=S,v[43]=f):f=v[43],v[44]!==g||v[45]!==f?(x=(0,o.jsx)(lx,{children:(0,o.jsxs)(eT.Stack,{space:4,children:[g,f]})}),v[44]=g,v[45]=f,v[46]=x):x=v[46],v[47]!==C||v[48]!==j||v[49]!==m||v[50]!==x||v[51]!==l?(b=(0,o.jsx)(eC.Dialog,{width:1,id:C,header:l,footer:m,onClose:j,onClickOutside:j,children:x}),v[47]=C,v[48]=j,v[49]=m,v[50]=x,v[51]=l,v[52]=b):b=v[52],v[53]!==b||v[54]!==E.fullscreen?(y=(0,o.jsx)(eR.DialogProvider,{position:"fixed",zOffset:$,children:b}),v[53]=b,v[54]=E.fullscreen,v[55]=y):y=v[55],y}function ly(e){return"editor"===e.name}function lv(e){return e?.appliesToUsers}(0,eD.styled)(eT.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;let lj={loading:!0,error:!1,status:void 0},lw={loading:!1,error:!1,status:"none"},lS={loading:!1,error:!1,status:"declined"},l_={loading:!1,error:!1,status:"pending"},lI={loading:!1,error:!1,status:"expired"};function lC(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(29),{requiredPermission:g}=e,f=(0,d.useCurrentUser)(),{data:x,loading:b,error:y}=(()=>{let e,t,n,i=(0,s.c)(9);i[0]===Symbol.for("react.memo_cache_sentinel")?(e={apiVersion:"2024-07-01"},i[0]=e):e=i[0];let l=(0,d.useClient)(e),r=(0,d.useProjectId)();e:{var o,a;let e;if(!l||!r){let e;i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e9.of)(lw),i[1]=e):e=i[1],t=e;break e}i[2]!==l||i[3]!==r?(o=l,a=r,e=o.observable.request({url:"/access/requests/me",tag:"use-role-requests-status"}).pipe((0,eW.map)(e=>{if(!e||0===e.length)return lw;let t=e.filter(e=>e.resourceId===a&&"role"===e.type),n=t.find(e=>"declined"===e.status);return n&&(0,tW.isAfter)((0,tK.addWeeks)(new Date(n.createdAt),2),new Date)?lS:t.find(e=>"pending"===e.status&&(0,tW.isAfter)((0,tK.addWeeks)(new Date(e.createdAt),2),new Date))?l_:t.find(e=>"pending"===e.status&&(0,tY.isBefore)((0,tK.addWeeks)(new Date(e.createdAt),2),new Date))?lI:lw}),(0,eK.catchError)(e=>(console.error("Failed to fetch access requests",e),(0,e9.of)({loading:!1,error:!0,status:void 0}))),(0,eY.startWith)(lj)),i[2]=l,i[3]=r,i[4]=e):e=i[4],t=e}let c=t,{loading:u,error:p,status:m}=(0,eL.useObservable)(c,lj);return i[5]!==p||i[6]!==u||i[7]!==m?(n={data:m,loading:u,error:p},i[5]=p,i[6]=u,i[7]=m,i[8]=n):n=i[8],n})(),[v,j]=(0,a.useState)(!1),w="pending"===x||"declined"===x||v,S=f?.roles||[],I=1===S.length&&"viewer"===S[0].name,[C,T]=(0,a.useState)(!1);h[0]===Symbol.for("react.memo_cache_sentinel")?(t={style:"short"},h[0]=t):t=h[0];let R=(0,d.useListFormat)(t),{t:P}=(0,d.useTranslation)(_),E=(0,tx.useTelemetry)(),D=S.map(lR),k=R.formatToParts(D).map(lT);return h[1]!==k?(n={Roles:()=>(0,o.jsx)(o.Fragment,{children:k})},h[1]=k,h[2]=n):n=h[2],h[3]!==D||h[4]!==k.length?(i={count:k.length,roles:D},h[3]=D,h[4]=k.length,h[5]=i):i=h[5],h[6]!==g||h[7]!==P||h[8]!==n||h[9]!==i?(l=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:P,i18nKey:"banners.permission-check-banner.missing-permission",components:n,values:i,context:g})}),h[6]=g,h[7]=P,h[8]=n,h[9]=i,h[10]=l):l=h[10],h[11]!==I||h[12]!==w||h[13]!==y||h[14]!==b||h[15]!==x||h[16]!==T||h[17]!==P||h[18]!==E?(r=I&&x&&!y&&!b?{onClick:w?void 0:()=>{T(!0),E.log(lg)},text:P(w?"banners.permission-check-banner.request-permission-button.sent":"banners.permission-check-banner.request-permission-button.text"),tone:w?"default":"primary",disabled:w,mode:w?"bleed":void 0}:void 0,h[11]=I,h[12]=w,h[13]=y,h[14]=b,h[15]=x,h[16]=T,h[17]=P,h[18]=E,h[19]=r):r=h[19],h[20]!==l||h[21]!==r?(c=(0,o.jsx)(lc,{content:l,action:r,"data-testid":"permission-check-banner",icon:m.ReadOnlyIcon}),h[20]=l,h[21]=r,h[22]=c):c=h[22],h[23]!==T||h[24]!==C?(u=C&&(0,o.jsx)(lb,{onClose:()=>T(!1),onRequestSubmitted:()=>{j(!0),T(!1)}}),h[23]=T,h[24]=C,h[25]=u):u=h[25],h[26]!==c||h[27]!==u?(p=(0,o.jsxs)(o.Fragment,{children:[c,u]}),h[26]=c,h[27]=u,h[28]=p):p=h[28],p}function lT(e){return"element"===e.type?(0,o.jsx)("code",{children:e.value},e.value):e.value}function lR(e){return e.title}let lP=(0,a.memo)(()=>{let e,t,n,i,l,r,a,u,p=(0,s.c)(30),h=(0,d.useDocumentPreviewStore)(),{selectedPerspectiveName:g}=(0,d.usePerspective)(),{params:f,groupIndex:x,routerPanesState:b,replaceCurrent:y,BackLink:v}=lk(),j=b[x]?.[0].id,w=b[x-1]?.[0],S=w?.id,I=!!w?.params?.rev;p[0]!==f?(e=f?.parentRefPath&&(0,tg.fromString)(f.parentRefPath)||null,p[0]=f,p[1]=e):e=p[1];let C=e,{t:T}=(0,d.useTranslation)(_);e:{let e,n=C?.[0];if(!S||!n||!C){let e;p[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e9.of)({loading:!1}),p[2]=e):e=p[2],t=e;break e}if(p[3]!==h||p[4]!==S||p[5]!==C||p[6]!==n||p[7]!==g){let t,i=(0,c.getPublishedId)(S),l=(0,tg.fromString)(n),r=l.findIndex(lE);p[9]!==C?(t=e=>{let{draft:t,published:n,version:i}=e;return{loading:!1,result:{availability:{draft:t.availability,published:n.availability,...i?.availability?{version:i.availability}:{}},refValue:(0,tg.get)(i?.snapshot||t.snapshot||n.snapshot,C)?._ref}}},p[9]=C,p[10]=t):t=p[10],e=(0,tt.concat)((0,e9.of)({loading:!0}),h.unstable_observePathsDocumentPair(i,-1===r?l:l.slice(0,r),{version:g}).pipe((0,eX.debounceTime)(750),(0,eW.map)(t))),p[3]=h,p[4]=S,p[5]=C,p[6]=n,p[7]=g,p[8]=e}else e=p[8];t=e}let R=t;p[11]===Symbol.for("react.memo_cache_sentinel")?(n={loading:!0},p[11]=n):n=p[11];let P=(0,eL.useObservable)(R,n);p[12]!==f||p[13]!==P.loading||p[14]!==P.result||p[15]!==y?(i=()=>{P.loading||P.result?.refValue&&y({id:P.result.refValue,params:f})},p[12]=f,p[13]=P.loading,p[14]=P.result,p[15]=y,p[16]=i):i=p[16];let E=i;return S&&C&&!I&&!P.loading&&(P.result?.availability.draft.available||P.result?.availability.published.available)&&P.result?.refValue!==j?(p[17]!==v||p[18]!==E||p[19]!==P.result?.refValue||p[20]!==T?(l=P.result?.refValue?{onClick:E,icon:m.SyncIcon,text:T("banners.reference-changed-banner.reason-changed.reload-button.text")}:{as:v,icon:m.CloseIcon,text:T("banners.reference-changed-banner.reason-removed.close-button.text")},p[17]=v,p[18]=E,p[19]=P.result?.refValue,p[20]=T,p[21]=l):l=p[21],p[22]!==P.result?.refValue||p[23]!==T?(r=T(P.result?.refValue?"banners.reference-changed-banner.reason-changed.text":"banners.reference-changed-banner.reason-removed.text"),p[22]=P.result?.refValue,p[23]=T,p[24]=r):r=p[24],p[25]!==r?(a=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:r}),p[25]=r,p[26]=a):a=p[26],p[27]!==l||p[28]!==a?(u=(0,o.jsx)(lc,{action:l,"data-testid":"reference-changed-banner",content:a,icon:m.WarningOutlineIcon,tone:"caution"}),p[27]=l,p[28]=a,p[29]=u):u=p[29],u):null});function lE(e){return"object"==typeof e&&"_key"in e}function lD(){let e,t=(0,s.c)(2),{t:n}=(0,d.useTranslation)(_);return t[0]!==n?(e=(0,o.jsx)(lc,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:n,i18nKey:"banners.scheduled-draft-override-banner.text"})})}),t[0]=n,t[1]=e):e=t[1],e}function lk(){return(0,a.useContext)(u.PaneRouterContext)}function lF(){let e,t,n,i,l,r,a,c,u,p,m=(0,s.c)(28),{t:h}=(0,d.useTranslation)(_),{t:g}=(0,d.useTranslation)(),{data:f}=(0,d.useArchivedReleases)(),{params:x,setParams:b}=lk();m[0]!==x||m[1]!==b?(e=()=>{b({...x,rev:x?.historyEvent||void 0,since:void 0,historyVersion:void 0})},m[0]=x,m[1]=b,m[2]=e):e=m[2];let y=e;if(m[3]!==f||m[4]!==x?.historyVersion){let e;m[6]!==x?.historyVersion?(e=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===x?.historyVersion,m[6]=x?.historyVersion,m[7]=e):e=m[7],t=f.find(e),m[3]=f,m[4]=x?.historyVersion,m[5]=t}else t=m[5];let v=t;e:{if(v?.state==="published"){n="banners.published-release.description";break e}if(v&&(0,d.isCardinalityOneRelease)(v)){n="banners.archived-scheduled-draft.description";break e}n="banners.archived-release.description"}let j=n;m[8]!==v?.metadata.title||m[9]!==g?(i=v?.metadata.title||g("release.placeholder-untitled-release"),m[8]=v?.metadata.title,m[9]=g,m[10]=i):i=m[10];let w=i;return m[11]!==w?(l={title:w},m[11]=w,m[12]=l):l=m[12],m[13]!==v?(r=(0,d.getVersionInlineBadge)(v),m[13]=v,m[14]=r):r=m[14],m[15]!==r?(a={VersionBadge:r},m[15]=r,m[16]=a):a=m[16],m[17]!==j||m[18]!==h||m[19]!==l||m[20]!==a?(c=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:j,values:l,components:a})}),m[17]=j,m[18]=h,m[19]=l,m[20]=a,m[21]=c):c=m[21],m[22]!==y||m[23]!==x?.archivedRelease?(u=x?.archivedRelease?void 0:{text:"Go back to published version",onClick:y},m[22]=y,m[23]=x?.archivedRelease,m[24]=u):u=m[24],m[25]!==c||m[26]!==u?(p=(0,o.jsx)(lc,{tone:"caution",content:c,action:u}),m[25]=c,m[26]=u,m[27]=p):p=m[27],p}lP.displayName="Memo(ReferenceChangedBanner)";let lA=eD.styled.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
  display: flex;
`,lL=e=>{let t,n,i,l,r,c,u,p,h,g,f,x,b=(0,s.c)(24),{onClose:y,isLockedByCanvas:v}=e,{t:j}=(0,d.useTranslation)(_),w=(0,a.useRef)(null);b[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>[w.current],b[0]=t):t=b[0],(0,eT.useClickOutsideEvent)(y,t),b[1]!==v||b[2]!==j?(n=j(v?"canvas.banner.popover-heading":"canvas.banner.editable.popover-heading"),b[1]=v,b[2]=j,b[3]=n):n=b[3];let S=n;b[4]!==v||b[5]!==j?(i=j(v?"canvas.banner.popover-description":"canvas.banner.editable.popover-description"),b[4]=v,b[5]=j,b[6]=i):i=b[6];let I=i;return b[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(lA,{src:"https://cdn.sanity.io/images/pyrmmpch/production/b47224e2f3a7d1747e43b9da1ac31739250e628b-632x376.png",alt:"Canvas"}),b[7]=l):l=b[7],b[8]===Symbol.for("react.memo_cache_sentinel")?(r=(0,o.jsx)(eT.Text,{size:1,weight:"semibold",children:"Canvas"}),b[8]=r):r=b[8],b[9]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsxs)(eT.Flex,{paddingY:1,gap:2,children:[r,(0,o.jsx)(eT.Text,{size:1,muted:!0,children:(0,o.jsx)(m.ComposeSparklesIcon,{})})]}),b[9]=c):c=b[9],b[10]!==S?(u=(0,o.jsx)(eT.Box,{paddingTop:3,children:(0,o.jsx)(eT.Heading,{size:1,children:S})}),b[10]=S,b[11]=u):u=b[11],b[12]!==I?(p=(0,o.jsx)(eT.Box,{paddingTop:4,children:(0,o.jsx)(eT.Text,{size:1,children:I})}),b[12]=I,b[13]=p):p=b[13],b[14]!==u||b[15]!==p?(h=(0,o.jsxs)(eT.Flex,{paddingX:4,paddingBottom:4,paddingTop:3,direction:"column",children:[c,u,p]}),b[14]=u,b[15]=p,b[16]=h):h=b[16],b[17]!==j?(g=j("canvas.banner.popover-button-text"),b[17]=j,b[18]=g):g=b[18],b[19]!==g?(f=(0,o.jsx)(eT.Flex,{width:"full",gap:3,justify:"flex-end",paddingX:4,paddingBottom:4,children:(0,o.jsx)(eC.Button,{mode:"bleed",text:g,autoFocus:!0,tone:"primary",href:"https://snty.link/canvas-docs",target:"_blank",rel:"noopener noreferrer",as:"a",iconRight:m.LaunchIcon})}),b[19]=g,b[20]=f):f=b[20],b[21]!==f||b[22]!==h?(x=(0,o.jsx)(eT.Card,{radius:3,overflow:"hidden",width:0,ref:w,children:(0,o.jsxs)(eT.Container,{width:0,children:[l,h,f]})}),b[21]=f,b[22]=h,b[23]=x):x=b[23],x},lV=e=>{let t,n,i,l,r,c,u,p,h=(0,s.c)(21),{documentId:g}=e,{t:f}=(0,d.useTranslation)(_),[x,b]=(0,a.useState)(!1),y=(0,d.getDocumentVariantType)(g),{isLockedByCanvas:v}=(0,d.useCanvasCompanionDoc)(g);e:{let e;if(!v){let e;h[0]!==f?(e=f("canvas.banner.editable.linked-text"),h[0]=f,h[1]=e):e=h[1],t=e;break e}if("published"===y){let e;h[2]!==f?(e=f("canvas.banner.linked-text.published"),h[2]=f,h[3]=e):e=h[3],t=e;break e}if("draft"===y){let e;h[4]!==f?(e=f("canvas.banner.linked-text.draft"),h[4]=f,h[5]=e):e=h[5],t=e;break e}h[6]!==f?(e=f("canvas.banner.linked-text.version"),h[6]=f,h[7]=e):e=h[7],t=e}let j=t;h[8]===Symbol.for("react.memo_cache_sentinel")?(n=()=>b(lO),h[8]=n):n=h[8];let w=n;h[9]===Symbol.for("react.memo_cache_sentinel")?(i=()=>b(!1),h[9]=i):i=h[9];let S=i;return h[10]!==j?(l=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:j}),h[10]=j,h[11]=l):l=h[11],h[12]!==v?(r=(0,o.jsx)(lL,{onClose:S,isLockedByCanvas:v}),h[12]=v,h[13]=r):r=h[13],h[14]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(eC.Button,{tooltipProps:null,mode:"bleed",tone:"default",icon:m.InfoOutlineIcon,onClick:w}),h[14]=c):c=h[14],h[15]!==x||h[16]!==r?(u=(0,o.jsx)(eC.Popover,{open:x,size:0,tone:"default",portal:!0,placement:"bottom-start",content:r,children:c}),h[15]=x,h[16]=r,h[17]=u):u=h[17],h[18]!==l||h[19]!==u?(p=(0,o.jsxs)(eT.Flex,{align:"center",gap:2,children:[l,u]}),h[18]=l,h[19]=u,h[20]=p):p=h[20],p};function lM(){let e,t,n,i,l=(0,s.c)(10),{documentId:r,displayed:a}=iN(),{t:c}=(0,d.useTranslation)(_),u=a?._id||r,{companionDoc:p}=(0,d.useCanvasCompanionDoc)(u),m=(0,d.useNavigateToCanvasDoc)(p?.canvasDocumentId,"banner");return p?(l[0]!==u?(e=(0,o.jsx)(lV,{documentId:u}),l[0]=u,l[1]=e):e=l[1],l[2]!==c?(t=c("canvas.banner.edit-in-canvas-action"),l[2]=c,l[3]=t):t=l[3],l[4]!==m||l[5]!==t?(n={mode:"ghost",text:t,onClick:m},l[4]=m,l[5]=t,l[6]=n):n=l[6],l[7]!==e||l[8]!==n?(i=(0,o.jsx)(lc,{tone:"neutral","data-test-id":"canvas-linked-banner",paddingY:0,content:e,action:n}),l[7]=e,l[8]=n,l[9]=i):i=l[9],i):null}function lO(e){return!e}let lz=e=>{let t,n,i,l,r,a,c,u,p,h=(0,s.c)(27),{schemaType:g,selectedPerspective:f,reason:x}=e,{t:b}=(0,d.useTranslation)(_),{document:y}=(0,d.useWorkspace)(),{drafts:v}=y,{enabled:j}=v;h[0]!==j||h[1]!==g?(t=e=>{let{perspective:t}=e;return{disabled:!(0,d.isPerspectiveWriteable)({selectedPerspective:t,isDraftModelEnabled:j,schemaType:g}).result}},h[0]=j,h[1]=g,h[2]=t):t=h[2];let w=t;return h[3]!==x||h[4]!==b?(n="PUBLISHED_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-published-document"),h[3]=x,h[4]=b,h[5]=n):n=h[5],h[6]!==x||h[7]!==b?(i="DRAFTS_NOT_WRITEABLE"===x&&b("banners.choose-new-document-destination.cannot-create-draft-document"),h[6]=x,h[7]=b,h[8]=i):i=h[8],h[9]!==x||h[10]!==f||h[11]!==b?(l="RELEASE_NOT_ACTIVE"===x&&(0,d.isReleaseDocument)(f)&&(0,o.jsx)(d.Translate,{t:b,i18nKey:"banners.choose-new-document-destination.release-inactive",values:{title:f.metadata.title},components:{VersionBadge:(0,d.getVersionInlineBadge)(f)}}),h[9]=x,h[10]=f,h[11]=b,h[12]=l):l=h[12],h[13]!==b?(r=b("banners.choose-new-document-destination.choose-destination"),h[13]=b,h[14]=r):r=h[14],h[15]!==r?(a=(0,o.jsxs)(o.Fragment,{children:[" ",r]}),h[15]=r,h[16]=a):a=h[16],h[17]!==n||h[18]!==i||h[19]!==l||h[20]!==a?(c=(0,o.jsxs)(eT.Text,{size:1,children:[n,i,l,a]}),h[17]=n,h[18]=i,h[19]=l,h[20]=a,h[21]=c):c=h[21],h[22]!==w?(u=(0,o.jsx)(d.ReleasesNav,{menuItemProps:w}),h[22]=w,h[23]=u):u=h[23],h[24]!==u||h[25]!==c?(p=(0,o.jsx)(lc,{tone:"caution",icon:m.WarningOutlineIcon,content:(0,o.jsxs)(eT.Flex,{align:"center",gap:2,children:[c,u]})}),h[24]=u,h[25]=c,h[26]=p):p=h[26],p};function lB(){let e,t,n=(0,s.c)(5),{value:i}=iN(),{documentLinkedBannerContent:l}=(0,d.useSanityCreateConfig)().components??{};n[0]!==i?(e=(0,d.getSanityCreateLinkMetadata)(i),n[0]=i,n[1]=e):e=n[1];let r=e;return l&&r?(n[2]!==l||n[3]!==r?(t=(0,o.jsx)(lc,{tone:"transparent","data-test-id":"sanity-create-read-only-banner",content:(0,o.jsx)(l,{metadata:r})}),n[2]=l,n[3]=r,n[4]=t):t=n[4],t):null}function lN(e){let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(39),{documentId:b,currentRelease:y,isScheduledRelease:v}=e,j=y??d.LATEST;x[0]!==j?(t=(0,d.getReleaseTone)(j),x[0]=j,x[1]=t):t=x[1];let w=t,{t:S}=(0,d.useTranslation)(_),{t:I}=(0,d.useTranslation)(),{createVersion:C}=(0,d.useVersionOperations)(),[T,R]=(0,a.useState)(),P=(0,eR.useToast)();x[2]!==C||x[3]!==y._id||x[4]!==b||x[5]!==S||x[6]!==P?(n=async()=>{if(y._id){R({status:"creating",lastUpdate:new Date});try{await C((0,d.getReleaseIdFromReleaseDocumentId)(y._id),b),R({status:"created",lastUpdate:new Date})}catch(e){P.push({status:"error",closable:!0,title:S("banners.release.error.title"),description:S("banners.release.error.description",{message:e.message})}),R(void 0)}}},x[2]=C,x[3]=y._id,x[4]=b,x[5]=S,x[6]=P,x[7]=n):n=x[7];let E=n,D=function(e){let t,n,i,l=(0,s.c)(4);l[0]===Symbol.for("react.memo_cache_sentinel")?(t=new Date,l[0]=t):t=l[0];let[r,o]=(0,a.useState)(t);return 200!==l[1]?(n=()=>{let e=setInterval(()=>{o(new Date)},200);return()=>clearInterval(e)},i=[200],l[1]=200,l[2]=n,l[3]=i):(n=l[2],i=l[3]),(0,a.useEffect)(n,i),r}(200),k=T?.status==="created"&&D.getTime()-T.lastUpdate.getTime()>1e3;return x[8]!==S?(i=S("banners.release.waiting.title"),x[8]=S,x[9]=i):i=x[9],x[10]!==S?(l=S("banners.release.waiting.description"),x[10]=S,x[11]=l):l=x[11],x[12]!==k||x[13]!==i||x[14]!==l?(r={status:"info",id:"add-document-to-release",enabled:k,closable:!0,title:i,description:l},x[12]=k,x[13]=i,x[14]=l,x[15]=r):r=x[15],(0,d.useConditionalToast)(r),x[16]!==y.metadata?.title||x[17]!==I?(c=y?.metadata?.title||I("release.placeholder-untitled-release"),x[16]=y.metadata?.title,x[17]=I,x[18]=c):c=x[18],x[19]!==c?(u={title:c},x[19]=c,x[20]=u):u=x[20],x[21]!==y?(p=(0,d.getVersionInlineBadge)(y),x[21]=y,x[22]=p):p=x[22],x[23]!==p?(m={VersionBadge:p},x[23]=p,x[24]=m):m=x[24],x[25]!==S||x[26]!==m||x[27]!==u?(h=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"banners.release.not-in-release",t:S,values:u,components:m})}),x[25]=S,x[26]=m,x[27]=u,x[28]=h):h=x[28],x[29]!==E||x[30]!==v||x[31]!==S||x[32]!==w||x[33]!==T?(g=v?void 0:{text:S("banners.release.action.add-to-release"),tone:w,disabled:!!T,onClick:E,mode:"default"},x[29]=E,x[30]=v,x[31]=S,x[32]=w,x[33]=T,x[34]=g):g=x[34],x[35]!==h||x[36]!==g||x[37]!==w?(f=(0,o.jsx)(lc,{tone:w,content:h,action:g}),x[35]=h,x[36]=g,x[37]=w,x[38]=f):f=x[38],f}let lH=(0,tb.defineEvent)({name:"LiveEdit Draft Resolved",version:1,description:"User resolved a draft of a live edit document to continue editing"}),l$=e=>{let t,n,i,l,r,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(47),{displayed:S,documentId:I,schemaType:C,i18nKey:T,isEditBlocking:R}=e,{t:P}=(0,d.useTranslation)(_),[E,D]=(0,a.useState)(!1),[k,F]=(0,a.useState)(!1),A=(0,tx.useTelemetry)(),{publish:L,discardChanges:V}=(0,d.useDocumentOperation)(I,S?._type||"");w[0]!==L||w[1]!==A?(t=()=>{L.execute(),D(!0),A.log(lH,{liveEditResolveType:"publish"})},w[0]=L,w[1]=A,w[2]=t):t=w[2];let M=t;w[3]!==V||w[4]!==A?(n=()=>{V.execute(),F(!0),A.log(lH,{liveEditResolveType:"discard"})},w[3]=V,w[4]=A,w[5]=n):n=w[5];let O=n;w[6]===Symbol.for("react.memo_cache_sentinel")?(i=()=>()=>{D(!1),F(!1)},w[6]=i):i=w[6],(0,a.useEffect)(i);let z=nV();w[7]!==z||w[8]!==S?._id||w[9]!==C.name?(l=()=>{typeof S?._id>"u"||z.navigateDiffView({mode:"version",previousDocument:{type:C.name,id:(0,c.getPublishedId)(S?._id)},nextDocument:{type:C.name,id:(0,c.getDraftId)(S?._id)}})},w[7]=z,w[8]=S?._id,w[9]=C.name,w[10]=l):l=w[10];let B=l;return w[11]!==C.title?(r={schemaType:C.title},w[11]=C.title,w[12]=r):r=w[12],w[13]!==T||w[14]!==P||w[15]!==r?(u=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:(0,o.jsx)(d.Translate,{t:P,i18nKey:T,values:r})}),w[13]=T,w[14]=P,w[15]=r,w[16]=u):u=w[16],w[17]!==P?(p=P("banners.obsolete-draft.actions.compare-draft.text"),w[17]=P,w[18]=p):p=w[18],w[19]!==B||w[20]!==p?(h=(0,o.jsx)(eC.Button,{text:p,mode:"ghost",onClick:B}),w[19]=B,w[20]=p,w[21]=h):h=w[21],w[22]!==P?(g=P("banners.obsolete-draft.actions.publish-draft.text"),w[22]=P,w[23]=g):g=w[23],w[24]!==R||w[25]!==P?(f=R?{content:P("banners.live-edit-draft-banner.publish.tooltip")}:{},w[24]=R,w[25]=P,w[26]=f):f=w[26],w[27]!==M||w[28]!==E||w[29]!==f||w[30]!==g?(x=(0,o.jsx)(eC.Button,{onClick:M,text:g,tooltipProps:f,loading:E,tone:"positive"}),w[27]=M,w[28]=E,w[29]=f,w[30]=g,w[31]=x):x=w[31],w[32]!==P?(b=P("banners.obsolete-draft.actions.discard-draft.text"),w[32]=P,w[33]=b):b=w[33],w[34]!==R||w[35]!==P?(y=R?{content:P("banners.live-edit-draft-banner.discard.tooltip")}:{},w[34]=R,w[35]=P,w[36]=y):y=w[36],w[37]!==O||w[38]!==k||w[39]!==b||w[40]!==y?(v=(0,o.jsx)(eC.Button,{onClick:O,text:b,tooltipProps:y,loading:k,tone:"caution"}),w[37]=O,w[38]=k,w[39]=b,w[40]=y,w[41]=v):v=w[41],w[42]!==x||w[43]!==v||w[44]!==u||w[45]!==h?(j=(0,o.jsx)(lc,{content:(0,o.jsxs)(eT.Flex,{align:"center",justify:"space-between",gap:2,children:[u,h,x,v]}),"data-testid":"live-edit-type-banner",icon:m.ErrorOutlineIcon}),w[42]=x,w[43]=v,w[44]=u,w[45]=h,w[46]=j):j=w[46],j};function lU(e){let t,n,i=(0,s.c)(4),{documentId:l,isPinnedDraftOrPublished:r}=e;i[0]!==l?(t={documentId:l},i[0]=l,i[1]=t):t=i[1];let a=(0,d.useOnlyHasVersions)(t);return(0,c.isVersionId)(l)&&a&&r?(i[2]!==l?(n=(0,o.jsx)(lG,{documentId:l}),i[2]=l,i[3]=n):n=i[3],n):null}function lG(e){let t,n,i,l,r,a,u,p,m,h=(0,s.c)(35),{documentId:g}=e,{data:f}=(0,d.useActiveReleases)(),x=(0,d.useSetPerspective)();h[0]!==g?(t=(0,c.getVersionFromId)(g)??"",h[0]=g,h[1]=t):t=h[1];let b=t;if(h[2]!==f||h[3]!==b){let e;h[5]!==b?(e=e=>e._id.includes(b),h[5]=b,h[6]=e):e=h[6],n=f.find(e),h[2]=f,h[3]=b,h[4]=n}else n=h[4];let y=n,{t:v}=(0,d.useTranslation)();h[7]!==g?(i={documentId:g},h[7]=g,h[8]=i):i=h[8];let{data:j}=(0,d.useDocumentVersions)(i);if(h[9]!==f||h[10]!==j||h[11]!==v){let e,t;h[13]!==j?(e=e=>j.find(t=>{let n=(0,c.getVersionFromId)(t)??"";return(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===n})&&!(0,d.isCardinalityOneRelease)(e),h[13]=j,h[14]=e):e=h[14],h[15]!==v?(t=e=>e.metadata.title||v("release.placeholder-untitled-release"),h[15]=v,h[16]=t):t=h[16],l=f.filter(e).map(t),h[9]=f,h[10]=j,h[11]=v,h[12]=l}else l=h[12];let w=l;h[17]!==y?(r=y&&(0,d.getReleaseTone)(y),h[17]=y,h[18]=r):r=h[18];let S=r,{t:I}=(0,d.useTranslation)(_);h[19]!==b||h[20]!==x?(a=async()=>{x(b)},h[19]=b,h[20]=x,h[21]=a):a=h[21];let C=a;return 0===w.length?null:(h[22]!==w[0]||h[23]!==w.length||h[24]!==I?(u=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(eT.Flex,{direction:"row",gap:1,wrap:"wrap",children:w.length>1?(0,o.jsx)(d.Translate,{t:I,i18nKey:"banners.release.navigate-to-edit-description-multiple",components:{VersionBadge:()=>(0,o.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})},values:{count:w.length-1}}):(0,o.jsx)(d.Translate,{t:I,i18nKey:"banners.release.navigate-to-edit-description-single",components:{VersionBadge:()=>(0,o.jsxs)(d.VersionInlineBadge,{children:[" ",w[0]]})}})})}),h[22]=w[0],h[23]=w.length,h[24]=I,h[25]=u):u=h[25],h[26]!==w.length||h[27]!==C||h[28]!==I||h[29]!==S?(p=w.length>0?{text:I("banners.release.action.open-to-edit"),tone:S,onClick:C,mode:"default"}:void 0,h[26]=w.length,h[27]=C,h[28]=I,h[29]=S,h[30]=p):p=h[30],h[31]!==u||h[32]!==p||h[33]!==S?(m=(0,o.jsx)(lc,{tone:S,"data-testid":"open-release-to-edit-banner",content:u,action:p}),h[31]=u,h[32]=p,h[33]=S,h[34]=m):m=h[34],m)}function lq(){let e,t,n=(0,s.c)(4),{revisionNotFound:i}=iN(),{t:l}=(0,d.useTranslation)(_);return i?(n[0]!==l?(e=l("banners.revision-not-found.description"),n[0]=l,n[1]=e):e=n[1],n[2]!==e?(t=(0,o.jsx)(lc,{tone:"caution","data-test-id":"revision-not-found-banner",icon:m.WarningOutlineIcon,content:(0,o.jsx)(eT.Text,{size:1,children:e})}),n[2]=e,n[3]=t):t=n[3],t):null}function lW(e){let t,n,i,l,r,a=(0,s.c)(12),{currentRelease:c}=e,u=c??d.LATEST;a[0]!==u?(t=(0,d.getReleaseTone)(u),a[0]=u,a[1]=t):t=a[1];let p=t,{t:h}=(0,d.useTranslation)();return a[2]!==c?(n=(0,d.formatRelativeLocalePublishDate)(c),a[2]=c,a[3]=n):n=a[3],a[4]!==n?(i={date:n},a[4]=n,a[5]=i):i=a[5],a[6]!==i||a[7]!==h?(l=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"release.banner.scheduled-for-publishing-on",values:i})}),a[6]=i,a[7]=h,a[8]=l):l=a[8],a[9]!==l||a[10]!==p?(r=(0,o.jsx)(lc,{tone:p,icon:m.LockIcon,content:l}),a[9]=l,a[10]=p,a[11]=r):r=a[11],r}function lK(){let e=(0,s.c)(18),{value:t,editState:n}=iN(),{selectedPerspective:i}=(0,d.usePerspective)(),l=(0,d.isGoingToUnpublish)(t)||n?.version&&(0,d.isGoingToUnpublish)(n?.version),{t:r}=(0,d.useTranslation)(_),{t:a}=(0,d.useTranslation)();if((0,d.isReleaseDocument)(i)&&l){let t,n,l,s,c,u,p;e[0]!==i.metadata?.title||e[1]!==a?(t=i.metadata?.title||a("release.placeholder-untitled-release"),e[0]=i.metadata?.title,e[1]=a,e[2]=t):t=e[2];let h=t;return e[3]!==h?(n={title:h},e[3]=h,e[4]=n):n=e[4],e[5]!==i?(l=(0,d.getVersionInlineBadge)(i),e[5]=i,e[6]=l):l=e[6],e[7]!==l?(s={VersionBadge:l},e[7]=l,e[8]=s):s=e[8],e[9]!==r||e[10]!==n||e[11]!==s?(c=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:r,i18nKey:"banners.unpublished-release-banner.text",values:n,components:s})}),e[9]=r,e[10]=n,e[11]=s,e[12]=c):c=e[12],e[13]!==r?(u=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:r,i18nKey:"banners.unpublished-release-banner.text-with-published"})}),e[13]=r,e[14]=u):u=e[14],e[15]!==c||e[16]!==u?(p=(0,o.jsx)(lc,{tone:"critical",content:(0,o.jsxs)(eT.Stack,{space:2,children:[c,u]}),icon:m.UnpublishIcon}),e[15]=c,e[16]=u,e[17]=p):p=e[17],p}return null}let lY=(0,eD.styled)(eT.Stack)`
  ${({theme:e})=>eD.css`
      @supports not (container-type: inline-size) {
        display: none !important;
      }

      container-type: inline-size;

      [data-heading] {
        font-size: ${e.sanity.fonts.heading.sizes[4].fontSize}px;
        line-height: ${e.sanity.fonts.heading.sizes[4].lineHeight}px;
        overflow-wrap: break-word;
        text-wrap: pretty;
      }

      @container (max-width: 560px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[3].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[3].lineHeight}px;
        }
      }

      @container (max-width: 420px) {
        [data-heading] {
          font-size: ${e.sanity.fonts.heading.sizes[2].fontSize}px;
          line-height: ${e.sanity.fonts.heading.sizes[2].lineHeight}px;
        }
      }
    `}
`,lX=e=>{let t,n,i,l,r=(0,s.c)(14),{documentId:a,schemaType:c,title:u}=e,p=a===c.name,h=c.description,{t:g}=(0,d.useTranslation)(_);if(!1===c.__experimental_formPreviewTitle)return null;r[0]!==h||r[1]!==p||r[2]!==c.name||r[3]!==c.title?(t=!p&&(0,o.jsxs)(eT.Inline,{space:1,children:[(0,o.jsx)(eT.Text,{muted:!0,size:1,children:c.title??c.name}),h&&(0,o.jsx)(eC.Tooltip,{content:h,placement:"right",children:(0,o.jsx)(m.InfoOutlineIcon,{"data-testid":"schema-description-icon"})})]}),r[0]=h,r[1]=p,r[2]=c.name,r[3]=c.title,r[4]=t):t=r[4];let f=!u;return r[5]!==g||r[6]!==u?(n=u??g("document-view.form-view.form-title-fallback"),r[5]=g,r[6]=u,r[7]=n):n=r[7],r[8]!==f||r[9]!==n?(i=(0,o.jsx)(eT.Heading,{as:"h2","data-heading":!0,muted:f,"data-testid":"document-panel-document-title",children:n}),r[8]=f,r[9]=n,r[10]=i):i=r[10],r[11]!==t||r[12]!==i?(l=(0,o.jsxs)(lY,{marginBottom:6,space:4,children:[t,i]}),r[11]=t,r[12]=i,r[13]=l):l=r[13],l},lQ=e=>e.preventDefault(),lJ=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(77),{hidden:w,margins:S}=e,{collapsedFieldSets:I,collapsedPaths:C,displayed:T,editState:R,documentId:P,documentType:E,fieldActions:D,onChange:k,validation:F,ready:A,formState:L,onFocus:V,connectionState:M,onBlur:O,onSetCollapsedPath:z,onPathOpen:B,onSetCollapsedFieldSet:N,onSetActiveFieldGroup:H,openPath:$,compareValue:U,hasUpstreamVersion:G}=iN(),{selectedReleaseId:q,selectedPerspective:W}=(0,d.usePerspective)(),K=(0,d.useDocumentStore)(),Y=(0,d.useDocumentPresence)(P),{title:X}=i2(),[Q]=(0,a.useState)(lZ),J=R?.transactionSyncLock?.enabled,{t:Z}=(0,d.useTranslation)(_);j[0]!==Z?(n=Z("document-view.form-view.sync-lock-toast.title"),j[0]=Z,j[1]=n):n=j[1],j[2]!==Z?(i=Z("document-view.form-view.sync-lock-toast.description"),j[2]=Z,j[3]=i):i=j[3],j[4]!==J||j[5]!==n||j[6]!==i?(l={id:"sync-lock",status:"warning",enabled:J,title:n,description:i,closable:!0},j[4]=J,j[5]=n,j[6]=i,j[7]=l):l=j[7],(0,d.useConditionalToast)(l),j[8]!==P||j[9]!==K.pair||j[10]!==E||j[11]!==Q||j[12]!==q?(r=()=>{let e=K.pair.documentEvents(P,E,q).pipe((0,eQ.tap)(e=>{var t,n;let i,l,r;"mutation"===e.type&&Q.publish((i=(t=e).mutations.map(e=>e.patch).filter(Boolean),{type:"mutation",snapshot:t.document,patches:(0,d.fromMutationPatches)(t.origin,i)})),"rebase"===e.type&&Q.publish((l=(n=e).remoteMutations.map(e=>e.patch).filter(Boolean),r=n.localMutations.map(e=>e.patch).filter(Boolean),{type:"rebase",snapshot:n.document,patches:(0,d.fromMutationPatches)("remote",l).concat((0,d.fromMutationPatches)("local",r))}))})).subscribe();return()=>{e.unsubscribe()}},j[8]=P,j[9]=K.pair,j[10]=E,j[11]=Q,j[12]=q,j[13]=r):r=j[13],j[14]!==P||j[15]!==K||j[16]!==E||j[17]!==Q||j[18]!==q?(c=[P,K,E,Q,q],j[14]=P,j[15]=K,j[16]=E,j[17]=Q,j[18]=q,j[19]=c):c=j[19],(0,a.useEffect)(r,c);let ee=!!T?._rev;j[20]!==Q||j[21]!==T?(u=()=>{Q.publish({type:"mutation",patches:[],snapshot:T})},j[20]=Q,j[21]=T,j[22]=u):u=j[22];let et=(0,a.useEffectEvent)(u);j[23]!==et||j[24]!==ee?(p=()=>{ee&&et()},j[23]=et,j[24]=ee,j[25]=p):p=j[25],j[26]!==ee?(m=[ee],j[26]=ee,j[27]=m):m=j[27],(0,a.useEffect)(p,m);let[en,ei]=(0,a.useState)(null),[el,er]=(0,a.useState)(!1);j[28]!==el||j[29]!==en||j[30]!==L?.focusPath.length||j[31]!==A?(h=()=>{!el&&A&&!L?.focusPath.length&&en&&(er(!0),(0,eR.focusFirstDescendant)(en))},j[28]=el,j[29]=en,j[30]=L?.focusPath.length,j[31]=A,j[32]=h):h=j[32];let eo=L?.focusPath.length;j[33]!==el||j[34]!==en||j[35]!==A||j[36]!==eo?(g=[el,en,eo,A],j[33]=el,j[34]=en,j[35]=A,j[36]=eo,j[37]=g):g=j[37],(0,a.useEffect)(h,g),j[38]!==t?(f=e=>{ei(e),"function"==typeof t?t(e):t&&(t.current=e)},j[38]=t,j[39]=f):f=j[39];let es=f,ea="reconnecting"===M||L?.readOnly||!R?.ready,ed=ea?"true":void 0;return j[40]!==I||j[41]!==C||j[42]!==U||j[43]!==M||j[44]!==P||j[45]!==R?.draft||j[46]!==R?.published||j[47]!==D||j[48]!==L||j[49]!==G||j[50]!==w||j[51]!==ea||j[52]!==O||j[53]!==k||j[54]!==V||j[55]!==B||j[56]!==H||j[57]!==N||j[58]!==z||j[59]!==$||j[60]!==Q||j[61]!==Y||j[62]!==W||j[63]!==Z||j[64]!==X||j[65]!==F?(x="connecting"!==M||R?.draft||R?.published?null===L||w?(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsx)(eT.Text,{children:Z("document-view.form-view.form-hidden")})}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(lX,{documentId:P,schemaType:L.schemaType,title:X}),(0,o.jsx)(d.FormBuilder,{__internal_fieldActions:D,__internal_patchChannel:Q,changed:L.changed,collapsedFieldSets:I,collapsedPaths:C,compareValue:U??void 0,focused:L.focused,focusPath:L.focusPath,groups:L.groups,id:"root",members:L.members,onChange:k,onFieldGroupSelect:H,onPathBlur:O,onPathFocus:V,onPathOpen:B,onSetFieldSetCollapsed:N,onSetPathCollapsed:z,openPath:$,perspective:W,hasUpstreamVersion:G,presence:Y,readOnly:ea,schemaType:L.schemaType,validation:F,value:L.value})]}):(0,o.jsx)(iM,{ms:300,children:(0,o.jsxs)(eT.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:[(0,o.jsx)(eT.Spinner,{muted:!0}),(0,o.jsx)(eT.Box,{marginTop:3,children:(0,o.jsx)(eT.Text,{align:"center",muted:!0,size:1,children:Z("document-view.form-view.loading")})})]})}),j[40]=I,j[41]=C,j[42]=U,j[43]=M,j[44]=P,j[45]=R?.draft,j[46]=R?.published,j[47]=D,j[48]=L,j[49]=G,j[50]=w,j[51]=ea,j[52]=O,j[53]=k,j[54]=V,j[55]=B,j[56]=H,j[57]=N,j[58]=z,j[59]=$,j[60]=Q,j[61]=Y,j[62]=W,j[63]=Z,j[64]=X,j[65]=F,j[66]=x):x=j[66],j[67]!==es||j[68]!==ed||j[69]!==x?(b=(0,o.jsx)(eT.Box,{as:"form",onSubmit:lQ,ref:es,"data-testid":"form-view","data-read-only":ed,children:x}),j[67]=es,j[68]=ed,j[69]=x,j[70]=b):b=j[70],j[71]!==S||j[72]!==b?(y=(0,o.jsx)(d.PresenceOverlay,{margins:S,children:b}),j[71]=S,j[72]=b,j[73]=y):y=j[73],j[74]!==w||j[75]!==y?(v=(0,o.jsx)(eT.Container,{hidden:w,paddingX:4,paddingTop:5,paddingBottom:9,sizing:"border",width:1,children:y}),j[74]=w,j[75]=y,j[76]=v):v=j[76],v});function lZ(){return(0,d.createPatchChannel)()}function l0(){let e,t,n=(0,s.c)(11),{activeViewId:i,paneKey:l,views:r}=iN(),a=`${l}tabpanel`;if(n[0]!==i||n[1]!==l||n[2]!==a||n[3]!==r){let t;n[5]!==i||n[6]!==l||n[7]!==a?(t=(e,t)=>(0,o.jsx)(l1,{icon:e.icon,id:`${l}tab-${e.id}`,isActive:i===e.id,label:e.title,tabPanelId:a,viewId:0===t?null:e.id??null},e.id),n[5]=i,n[6]=l,n[7]=a,n[8]=t):t=n[8],e=r.map(t),n[0]=i,n[1]=l,n[2]=a,n[3]=r,n[4]=e}else e=n[4];return n[9]!==e?(t=(0,o.jsx)(eT.TabList,{space:1,children:e}),n[9]=e,n[10]=t):t=n[10],t}function l1(e){let t,n,i,l,r,a,d,c,u,p=(0,s.c)(20);p[0]!==e?({icon:t,id:n,isActive:i,label:l,tabPanelId:a,viewId:d,...r}=e,p[0]=e,p[1]=t,p[2]=n,p[3]=i,p[4]=l,p[5]=r,p[6]=a,p[7]=d):(t=p[1],n=p[2],i=p[3],l=p[4],r=p[5],a=p[6],d=p[7]);let{ready:m,editState:h}=iN(),{setView:g}=lk();p[8]!==g||p[9]!==d?(c=()=>g(d),p[8]=g,p[9]=d,p[10]=c):c=p[10];let f=c,x=!m&&!h?.draft&&!h?.published;return p[11]!==f||p[12]!==t||p[13]!==n||p[14]!==i||p[15]!==l||p[16]!==r||p[17]!==x||p[18]!==a?(u=(0,o.jsx)(eC.Tab,{...r,"aria-controls":a,disabled:x,icon:t,id:n,label:l,onClick:f,selected:i}),p[11]=f,p[12]=t,p[13]=n,p[14]=i,p[15]=l,p[16]=r,p[17]=x,p[18]=a,p[19]=u):u=p[19],u}let l2={paneDataItems:[],routerPanes:[],resolvedPanes:[],maximizedPane:null,setMaximizedPane:()=>{}};function l3(){return(0,a.useContext)(u.ResolvedPanesContext)??l2}let l4=Object.freeze({}),l5=Symbol("LOADING_PANE"),l6="documentPanelPortalElement",l8=(0,tb.defineEvent)({name:"Maximized Document Pane Clicked",version:1,description:"User pressed to maximize a document by click the focus pane button"}),l7=(0,tb.defineEvent)({name:"Maximized Document Pane Collapsed",version:1,description:"User disabled the maximization on a document pane by clicking the focus pane button"}),l9=(0,tb.defineEvent)({name:"Maximized Document Pane Navigated Via Breadcrumbs",version:1,description:"User navigated to a different document pane via the breadcrumbs in the document header"});function re(e){let t,n,i,l,r,a,c,u,p=(0,s.c)(27),{paneData:m,index:h}=e,{pane:g}=m,f=(0,eV.useRouter)(),{t:x}=(0,d.useTranslation)(_),b=(0,eV.useRouterState)(),y=(0,tx.useTelemetry)();p[0]!==b?.panes?(t=b?.panes||[],p[0]=b?.panes,p[1]=t):t=p[1];let v=t,{perspectiveStack:j}=(0,d.usePerspective)(),w=g!==l5&&"title"in g?g.title:null,S=g!==l5&&"document"===g.type?g.options.id:null,I=g!==l5&&"document"===g.type?g.options.type:null,C=S??"",T=I??"";p[2]!==j||p[3]!==C||p[4]!==T?(n={documentId:C,documentType:T,perspectiveStack:j},p[2]=j,p[3]=C,p[4]=T,p[5]=n):n=p[5];let{value:R,isLoading:P}=(0,d.useDocumentPreviewValues)(n);e:{if(S&&!P){let e;p[6]!==R?.title||p[7]!==x?(e=R?.title||x("panes.document-header-title.untitled.text"),p[6]=R?.title,p[7]=x,p[8]=e):e=p[8],i=e;break e}i=w}let E=i;p[9]!==m.groupIndex||p[10]!==f||p[11]!==v||p[12]!==y?(l=()=>{y.log(l9),f.navigate({panes:v.slice(0,m.groupIndex)})},p[9]=m.groupIndex,p[10]=f,p[11]=v,p[12]=y,p[13]=l):l=p[13];let D=l;if(!E&&!P)return null;p[14]!==E||p[15]!==x?(r=E||x("panes.document-header-title.untitled.text"),p[14]=E,p[15]=x,p[16]=r):r=p[16],p[17]!==E||p[18]!==x?(a=E||x("panes.document-header-title.untitled.text"),p[17]=E,p[18]=x,p[19]=a):a=p[19],p[20]!==a?(c={content:a},p[20]=a,p[21]=c):c=p[21];let k=+(0!==h);return p[22]!==D||p[23]!==k||p[24]!==r||p[25]!==c?(u=(0,o.jsx)(eC.Button,{mode:"bleed",text:r,tooltipProps:c,onClick:D,paddingLeft:k}),p[22]=D,p[23]=k,p[24]=r,p[25]=c,p[26]=u):u=p[26],u}function rt(e){let t,n,i=(0,s.c)(7),{paneDataItems:l,currentPaneIndex:r}=e;if(i[0]!==r||i[1]!==l){let e;i[3]!==r?(e=(e,t)=>{if(t>r)return null;let n=e.pane!==l5&&"document"===e.pane.type;return(0,o.jsxs)(a.Fragment,{children:[(0,o.jsx)(re,{paneData:e,index:t}),t<r&&(n?(0,o.jsx)(eT.Box,{padding:1,children:(0,o.jsx)(m.ArrowRightIcon,{})}):(0,o.jsx)(eT.Text,{children:"/"}))]},`breadcrumb-item-${e.key}-${t}`)},i[3]=r,i[4]=e):e=i[4],t=l.map(e),i[0]=r,i[1]=l,i[2]=t}else t=i[2];return i[5]!==t?(n=(0,o.jsx)(eT.Flex,{direction:"row",align:"center","data-testid":"document-header-breadcrumb",children:t}),i[5]=t,i[6]=n):n=i[6],n}function rn(){let e,t,n,i=(0,s.c)(23),{connectionState:l,schemaType:r,title:a,value:c,index:u}=iN(),{paneDataItems:p}=l3(),{title:m,error:h}=i2(),{t:g}=(0,d.useTranslation)(_);i[0]!==p?(e=p.some(ri),i[0]=p,i[1]=e):e=i[1];let f=e;if("connecting"===l&&!c){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o.Fragment,{}),i[2]=e):e=i[2],e}if(a){let e;return i[3]!==a?(e=(0,o.jsx)(o.Fragment,{children:a}),i[3]=a,i[4]=e):e=i[4],e}if(!c){let e,t,n=r?.title||r?.name;return i[5]!==g||i[6]!==n?(e=g("panes.document-header-title.new.text",{schemaType:n}),i[5]=g,i[6]=n,i[7]=e):e=i[7],i[8]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[8]=e,i[9]=t):t=i[9],t}if(h){let e,t;return i[10]!==h||i[11]!==g?(e=g("panes.document-header-title.error.text",{error:h}),i[10]=h,i[11]=g,i[12]=e):e=i[12],i[13]!==e?(t=(0,o.jsx)(o.Fragment,{children:e}),i[13]=e,i[14]=t):t=i[14],t}return i[15]!==m||i[16]!==f||i[17]!==u||i[18]!==p||i[19]!==g?(t=f?(0,o.jsx)(rt,{paneDataItems:p,currentPaneIndex:u}):m||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:g("panes.document-header-title.untitled.text")}),i[15]=m,i[16]=f,i[17]=u,i[18]=p,i[19]=g,i[20]=t):t=i[20],i[21]!==t?(n=(0,o.jsx)(o.Fragment,{children:t}),i[21]=t,i[22]=n):n=i[22],n}function ri(e){return e.maximized}let rl=e=>{let t,n,i,l,r,a,c=(0,s.c)(16);c[0]!==e?({documentExists:t,...n}=e,c[0]=e,c[1]=t,c[2]=n):(t=c[1],n=c[2]);let{isFavorited:u,isReady:p,favorite:h,unfavorite:g}=(0,d.useManageFavorite)(n),{t:f}=(0,d.useTranslation)(_),x=u?"document.favorites.remove-from-favorites":"document.favorites.add-to-favorites";c[3]!==f||c[4]!==x?(i=f(x),c[3]=f,c[4]=x,c[5]=i):i=c[5];let b=i,y=u?g:h,v=!p||!t;return c[6]!==b?(l={content:(0,o.jsx)(eT.Text,{size:1,children:b}),placement:"right"},c[6]=b,c[7]=l):l=c[7],c[8]!==u?(r=(0,o.jsx)(eT.Text,{size:1,children:u?(0,o.jsx)(m.StarFilledIcon,{}):(0,o.jsx)(m.StarIcon,{})}),c[8]=u,c[9]=r):r=c[9],c[10]!==b||c[11]!==y||c[12]!==v||c[13]!==l||c[14]!==r?(a=(0,o.jsx)(eC.Button,{mode:"bleed",onClick:y,disabled:v,"aria-label":b,"aria-live":"assertive",tooltipProps:l,children:r}),c[10]=b,c[11]=y,c[12]=v,c[13]=l,c[14]=r,c[15]=a):a=c[15],a},rr=(0,a.memo)(function(){let e,t,n,i,l,r,a=(0,s.c)(24),{editState:c,connectionState:u,views:p,documentId:h,displayed:g}=iN(),{features:f}=iK(),{index:x,BackLink:b}=lk(),{activeWorkspace:y}=(0,d.useActiveWorkspace)(),v=p.length>1,{collapsed:j,isLast:w}=io(),S=w&&!j?-1:0,I=f.backButton&&x>0,{t:C}=(0,d.useTranslation)(_);a[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(rn,{}),a[0]=e):e=a[0];let T=e;a[1]!==v?(t=v&&(0,o.jsx)(l0,{}),a[1]=v,a[2]=t):t=a[2];let R=t;a[3]!==b||a[4]!==I||a[5]!==C?(n=I&&(0,o.jsx)(eC.Button,{as:b,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:C("pane-header.back-button.text")}}),a[3]=b,a[4]=I,a[5]=C,a[6]=n):n=a[6];let P=n,E=g?._id??h,D=g?._type??"";a[7]!==y.dataset||a[8]!==y.projectId?(i=[y.projectId,y.dataset],a[7]=y.dataset,a[8]=y.projectId,a[9]=i):i=a[9];let k=i.join("."),F=(c?.ready&&(c.version??c.draft??c.published)!==null)??!1;a[10]!==y.dataset||a[11]!==y.name||a[12]!==y.projectId||a[13]!==E||a[14]!==D||a[15]!==k||a[16]!==F?(l=(0,o.jsx)(d.CapabilityGate,{capability:"comlink",condition:"available",children:(0,o.jsx)(rl,{resourceType:"studio",documentId:E,documentType:D,resourceId:k,schemaName:y.name,projectId:y.projectId,dataset:y.dataset,documentExists:F})}),a[10]=y.dataset,a[11]=y.name,a[12]=y.projectId,a[13]=E,a[14]=D,a[15]=k,a[16]=F,a[17]=l):l=a[17];let A=l,L="connecting"===u&&!c?.draft&&!c?.published;return a[18]!==P||a[19]!==A||a[20]!==L||a[21]!==S||a[22]!==R?(r=(0,o.jsx)(iC,{loading:L,title:T,tabs:R,tabIndex:S,backButton:P,appendTitle:A}),a[18]=P,a[19]=A,a[20]=L,a[21]=S,a[22]=R,a[23]=r):r=a[23],r}),ro=(0,eD.styled)(eT.Box)({position:"relative"}),rs=(0,eD.styled)(d.ScrollContainer)(({$disabled:e})=>e?{height:"100%"}:eD.css`
    height: 100%;
    overflow: auto;
    position: relative;
    scroll-behavior: smooth;
    outline: none;
  `),ra=function(e){let t,n,i,l,r,u,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(109),{footerHeight:S,headerHeight:_,isInspectOpen:I,rootElement:C,setDocumentPanelPortalElement:T,footer:R}=e,{activeViewId:P,displayed:E,documentId:D,editState:k,inspector:F,value:A,views:L,ready:V,schemaType:M,permissions:O,isPermissionsLoading:z}=iN();if(w[0]!==A){let e=(0,d.getSanityCreateLinkMetadata)(A);t=(0,d.isSanityCreateLinked)(e),w[0]=A,w[1]=t}else t=w[1];let B=t,{params:N}=lk(),{collapsed:H}=n9(),{collapsed:$}=io(),U=(0,eT.usePortal)(),{features:G}=iK(),[q,W]=(0,a.useState)(null),[K,Y]=(0,a.useState)(null),X=(0,a.useRef)(null),Q=(0,d.useWorkspace)(),J=A._createdAt?"update":"create";w[2]!==P||w[3]!==L?(n=L.find(e=>e.id===P)||L[0]||{type:"form"},w[2]=P,w[3]=L,w[4]=n):n=w[4];let Z=n,ee=G.splitPanes&&q||U.element;e:{let e;if(H){let e,t=_||0,n=S?S+2:2;w[5]!==t||w[6]!==n?(e=[t,0,n,0],w[5]=t,w[6]=n,w[7]=e):e=w[7],i=e;break e}w[8]===Symbol.for("react.memo_cache_sentinel")?(e=[0,0,2,0],w[8]=e):e=w[8],i=e}let et=i,en="form"!==Z.type;w[9]!==Z.component||w[10]!==Z.options||w[11]!==Z.type||w[12]!==E||w[13]!==D||w[14]!==k?.draft||w[15]!==k?.published||w[16]!==M||w[17]!==A?(l=()=>{if("component"===Z.type&&Z.component){let e=Z.component;return(0,o.jsx)(e,{document:{draft:k?.draft||null,displayed:E||A,historical:E,published:k?.published||null},documentId:D,options:Z.options,schemaType:M})}return!1},w[9]=Z.component,w[10]=Z.options,w[11]=Z.type,w[12]=E,w[13]=D,w[14]=k?.draft,w[15]=k?.published,w[16]=M,w[17]=A,w[18]=l):l=w[18],w[19]!==l?(r=l(),w[19]=l,w[20]=r):r=w[20];let ei=r;w[21]!==K?(u=()=>{K?.scrollTo&&K.scrollTo(0,0)},w[21]=K,w[22]=u):u=w[22],w[23]!==D||w[24]!==K?(p=[D,K],w[23]=D,w[24]=K,w[25]=p):p=w[25],(0,a.useEffect)(u,p),w[26]!==ee||w[27]!==T?(m=()=>{ee&&T(ee)},h=[ee,T],w[26]=ee,w[27]=T,w[28]=m,w[29]=h):(m=w[28],h=w[29]),(0,a.useEffect)(m,h),w[30]!==E||w[31]!==I||w[32]!==A?(g=I?(0,o.jsx)(ld,{value:E||A}):null,w[30]=E,w[31]=I,w[32]=A,w[33]=g):g=w[33];let el=g,er=!!(!$&&F),{selectedPerspective:eo,selectedReleaseId:es}=(0,d.usePerspective)(),ea=N?.historyVersion;w[34]!==E||w[35]!==D||w[36]!==ea?(f={historyVersion:ea,displayed:E,documentId:D},w[34]=E,w[35]=D,w[36]=ea,w[37]=f):f=w[37];let ed=(0,d.useFilteredReleases)(f);t:{let e,t,n,i,l,r,s,a,u,p,m,h,g,f;if(N?.historyVersion){let e;w[38]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(lF,{}),w[38]=e):e=w[38],x=e;break t}w[39]!==eo?(e=(0,d.isReleaseDocument)(eo)&&(0,d.isReleaseScheduledOrScheduling)(eo),w[39]=eo,w[40]=e):e=w[40];let b=e,y=!!(b&&E?._id&&(0,c.getVersionFromId)(E?._id)===es);if(w[41]!==k||w[42]!==M||w[43]!==eo||w[44]!==Q.document.drafts.enabled?(n=function({isSelectedPerspectiveWriteable:e,editState:t}){return(0,d.isNewDocument)(t)&&!e.result}({isSelectedPerspectiveWriteable:t=(0,d.isPerspectiveWriteable)({selectedPerspective:eo,isDraftModelEnabled:Q.document.drafts.enabled,schemaType:M}),editState:k}),w[41]=k,w[42]=M,w[43]=eo,w[44]=Q.document.drafts.enabled,w[45]=t,w[46]=n):(t=w[45],n=w[46]),n){let e;w[47]!==t.reason||w[48]!==t.result||w[49]!==M||w[50]!==eo?(e=!t.result&&(0,o.jsx)(lz,{schemaType:M,selectedPerspective:eo,reason:t.reason}),w[47]=t.reason,w[48]=t.result,w[49]=M,w[50]=eo,w[51]=e):e=w[51],x=e;break t}if(y){let e;w[52]!==eo?(e=(0,o.jsx)(lW,{currentRelease:eo}),w[52]=eo,w[53]=e):e=w[53],x=e;break t}let v=ed.currentReleases.some(d.isCardinalityOneRelease),j=E?._id&&(0,c.isDraftId)(E._id);if("drafts"===eo&&v&&j){let e;w[54]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(lD,{}),w[54]=e):e=w[54],x=e;break t}w[55]!==eo?(i=(0,d.isSystemBundle)(eo),w[55]=eo,w[56]=i):i=w[56];let S=i,_=k?.version&&(0,d.isGoingToUnpublish)(k?.version);if((0,d.isReleaseDocument)(eo)&&E?._id&&(0,c.getVersionFromId)(E._id)!==es&&V&&!S&&!1===(0,d.isNewDocument)(k)&&!_){let e;w[57]!==b||w[58]!==eo||w[59]!==A._id?(e=(0,o.jsx)(lN,{documentId:A._id,currentRelease:eo,isScheduledRelease:b}),w[57]=b,w[58]=eo,w[59]=A._id,w[60]=e):e=w[60],x=e;break t}let I=function({editState:e,workspace:t,schemaType:n}){if(!e?.ready)return{result:void 0};let i=null!==e.draft,{document:{drafts:{enabled:l}}}=t;return!1===i?{result:!1}:l?!0===n.liveEdit?{result:!0,reason:"LIVE_EDIT_ACTIVE"}:{result:!1}:{result:!0,reason:"DRAFT_MODEL_INACTIVE"}}({editState:k,workspace:Q,schemaType:M});if("form"===Z.type&&!es&&I.result){if("DRAFT_MODEL_INACTIVE"===I.reason){let e;w[61]!==E||w[62]!==D||w[63]!==M?(e=(0,o.jsx)(l$,{displayed:E,documentId:D,schemaType:M,i18nKey:"banners.obsolete-draft.draft-model-inactive.text"}),w[61]=E,w[62]=D,w[63]=M,w[64]=e):e=w[64],x=e;break t}if("LIVE_EDIT_ACTIVE"===I.reason){let e;w[65]!==E||w[66]!==D||w[67]!==M?(e=(0,o.jsx)(l$,{displayed:E,documentId:D,schemaType:M,i18nKey:"banners.live-edit-draft-banner.text",isEditBlocking:!0}),w[65]=E,w[66]=D,w[67]=M,w[68]=e):e=w[68],x=e;break t}}if("form"!==Z.type||z){x=null;break t}w[69]!==B?(l=B&&(0,o.jsx)(lB,{}),w[69]=B,w[70]=l):l=w[70],w[71]!==O?.granted||w[72]!==J?(r=!O?.granted&&(0,o.jsx)(lC,{requiredPermission:J}),w[71]=O?.granted,w[72]=J,w[73]=r):r=w[73],w[74]===Symbol.for("react.memo_cache_sentinel")?(s=(0,o.jsx)(lq,{}),a=(0,o.jsx)(lP,{}),u=(0,o.jsx)(lh,{}),p=(0,o.jsx)(lM,{}),m=(0,o.jsx)(lu,{}),h=(0,o.jsx)(lK,{}),w[74]=s,w[75]=a,w[76]=u,w[77]=p,w[78]=m,w[79]=h):(s=w[74],a=w[75],u=w[76],p=w[77],m=w[78],h=w[79]);let C=E?._id??D;w[80]!==S||w[81]!==C?(g=(0,o.jsx)(lU,{documentId:C,isPinnedDraftOrPublished:S}),w[80]=S,w[81]=C,w[82]=g):g=w[82],w[83]!==l||w[84]!==r||w[85]!==g?(f=(0,o.jsxs)(o.Fragment,{children:[l,r,s,a,u,p,m,h,g]}),w[83]=l,w[84]=r,w[85]=g,w[86]=f):f=w[86],x=f}let ec=x;w[87]!==K?(b={documentScrollElement:K},w[87]=K,w[88]=b):b=w[88];let eu=b,ep=G.resizablePanes||!er;return w[89]!==ei||w[90]!==ec||w[91]!==K||w[92]!==R||w[93]!==en||w[94]!==el||w[95]!==H||w[96]!==et||w[97]!==ee||w[98]!==eu||w[99]!==ep?(y=ep&&(0,o.jsxs)(eT.Flex,{height:"fill",direction:"column",width:"fill",flex:2,children:[(0,o.jsxs)(d.LegacyLayerProvider,{zOffset:"paneHeader",children:[ec,(0,o.jsx)(rr,{})]}),(0,o.jsx)(ro,{flex:2,children:(0,o.jsx)(eT.PortalProvider,{element:ee,__unstable_elements:eu,children:(0,o.jsx)(eT.BoundaryElementProvider,{element:K,children:(0,o.jsxs)(d.VirtualizerScrollInstanceProvider,{scrollElement:K,containerElement:X,children:[(0,o.jsxs)(rs,{$disabled:H||!1,"data-testid":"document-panel-scroller",ref:Y,children:[(0,o.jsx)(lJ,{hidden:en,margins:et,ref:X}),ei]}),el,(0,o.jsx)("div",{"data-testid":"document-panel-portal",ref:W})]})})})}),R]}),w[89]=ei,w[90]=ec,w[91]=K,w[92]=R,w[93]=en,w[94]=el,w[95]=H,w[96]=et,w[97]=ee,w[98]=eu,w[99]=ep,w[100]=y):y=w[100],w[101]!==D||w[102]!==C||w[103]!==M||w[104]!==er?(v=er&&(0,o.jsx)(eT.BoundaryElementProvider,{element:C,children:(0,o.jsx)(i8,{documentId:D,documentType:M.name,flex:1})}),w[101]=D,w[102]=C,w[103]=M,w[104]=er,w[105]=v):v=w[105],w[106]!==y||w[107]!==v?(j=(0,o.jsx)(is,{children:(0,o.jsxs)(eT.Flex,{height:"fill",children:[y,v]})}),w[106]=y,w[107]=v,w[108]=j):j=w[108],j};ra.displayName="DocumentPanel";let rd=e=>{let t,n,i,l,r,o,c,u=(0,s.c)(26),{id:p,type:h,revision:g,release:f}=e,{restore:x}=(0,d.useDocumentOperation)(p,h,f),{revisionNotFound:b}=iN(),y=(0,d.useDocumentOperationEvent)(p,h),{navigateIntent:v}=(0,eV.useRouter)(),j=(0,a.useRef)(y),[w,S]=(0,a.useState)(!1),{t:I}=(0,d.useTranslation)(_);u[0]!==x||u[1]!==g?(t=()=>{x.execute(g),S(!1)},u[0]=x,u[1]=g,u[2]=t):t=u[2];let C=t;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{S(!1)},u[3]=n):n=u[3];let T=n;u[4]!==y||u[5]!==p||u[6]!==v||u[7]!==h?(i=()=>{y&&y!==j.current&&("success"===y.type&&"restore"===y.op&&v("edit",{id:p,type:h}),j.current=y)},l=[y,p,v,h],u[4]=y,u[5]=p,u[6]=v,u[7]=h,u[8]=i,u[9]=l):(i=u[8],l=u[9]),(0,a.useEffect)(i,l),u[10]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{S(!0)},u[10]=r):r=u[10];let R=r;e:{if(w){let e,t;u[11]!==I?(e=I("action.restore.confirm.message"),u[11]=I,u[12]=e):e=u[12],u[13]!==C||u[14]!==e?(t={type:"confirm",tone:"critical",onCancel:T,onConfirm:C,message:e},u[13]=C,u[14]=e,u[15]=t):t=u[15],o=t;break e}o=null}let P=o,E="@initial"===g,D=void 0===g;t:{let e,t,n;if(D||b){c=null;break t}u[16]!==I?(e=I("action.restore.label"),u[16]=I,u[17]=e):e=u[17];let i=E?"action.restore.disabled.cannot-restore-initial":"action.restore.tooltip";u[18]!==I||u[19]!==i?(t=I(i),u[18]=I,u[19]=i,u[20]=t):t=u[20],u[21]!==P||u[22]!==E||u[23]!==t||u[24]!==e?(n={label:e,tone:"caution",onHandle:R,title:t,icon:m.RevertIcon,dialog:P,disabled:E},u[21]=P,u[22]=E,u[23]=t,u[24]=e,u[25]=n):n=u[25],c=n}return c};function rc(e){return("item"===e.type||"group"===e.type)&&e.renderAsButton}rd.action="restore",rd.displayName="HistoryRestoreAction";let ru=(0,eB.default)(rc);function rp(e){let{fieldActions:t=[],menuItems:n,menuItemGroups:i}=e,l=[],r=0;for(let e=0;e<t.length;e+=1){let n=t[e];l.push(function e(t,n){return"divider"===t.type?{type:"divider",key:n}:"group"===t.type?{type:"group",key:n,children:t.children.map((t,i)=>e(t,`${n}-${i}-${t.type}`)),disabled:t.disabled,expanded:t.expanded??!0,icon:t.icon,title:t.title,i18n:t.i18n,renderAsButton:t.renderAsButton??!1}:{type:"item",key:n,intent:t.intent,disabled:t.disabled,icon:t.icon,iconRight:t.iconRight,onAction:t.onAction,renderAsButton:t.renderAsButton??!1,selected:t.selected,title:t.title,i18n:t.i18n,tone:t.tone}}(n,`${e}-${n.type}`))}r+=l.length;let o=[];for(let e of i)o.find(t=>t.key===e.id)||o.push({type:"group",key:e.id,children:[],expanded:!0,renderAsButton:!1,title:e.title,i18n:e.i18n});let s=[];for(let t=0;t<n.length;t+=1){let i=n[t],l=i.group&&o.find(e=>e.key===i.group),a="string"==typeof i.disabled?{reason:i.disabled}:i.disabled;i.group&&!l&&(l={type:"group",key:i.group,disabled:a,expanded:!0,icon:i.icon,title:i.group,children:[],renderAsButton:!1},o.push(l)),l?l.children.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone}):s.push({type:"item",key:`${r+t}-item`,hotkey:i.shortcut,icon:i.icon,intent:i.intent,disabled:a,onAction:()=>e.actionHandler(i),renderAsButton:i.showAsAction??!1,selected:i.selected,title:i.title,i18n:i.i18n,tone:i.tone})}return[...s,...o,...l]}let rm=["left","bottom"],rh={small:0,medium:1,large:2,full:"auto"};function rg(e){let t,n,i,l=(0,s.c)(16),{dialog:r,referenceElement:a}=e,{t:c}=(0,d.useTranslation)(_),{cancelButtonIcon:u,cancelButtonText:p,confirmButtonIcon:m,confirmButtonText:h,message:g,onCancel:f,onConfirm:x,tone:b}=r;return l[0]!==p||l[1]!==c?(t=p||c("confirm-dialog.cancel-button.fallback-text"),l[0]=p,l[1]=c,l[2]=t):t=l[2],l[3]!==h||l[4]!==c?(n=h||c("confirm-dialog.confirm-button.fallback-text"),l[3]=h,l[4]=c,l[5]=n):n=l[5],l[6]!==u||l[7]!==m||l[8]!==g||l[9]!==f||l[10]!==x||l[11]!==a||l[12]!==t||l[13]!==n||l[14]!==b?(i=(0,o.jsx)(tf.ConfirmPopover,{cancelButtonIcon:u,cancelButtonText:t,confirmButtonIcon:m,confirmButtonText:n,message:g,onCancel:f,onConfirm:x,open:!0,referenceElement:a,tone:b,placement:"top",fallbackPlacements:rm}),l[6]=u,l[7]=m,l[8]=g,l[9]=f,l[10]=x,l[11]=a,l[12]=t,l[13]=n,l[14]=b,l[15]=i):i=l[15],i}function rf(e){let t,n,i,l=(0,s.c)(12),{dialog:r}=e,c=(0,a.useId)();l[0]!==r.footer?(t=r.footer&&(0,o.jsx)(eT.Box,{paddingX:4,paddingY:3,children:r.footer}),l[0]=r.footer,l[1]=t):t=l[1];let u=t,p=!1===r.showCloseButton,m=void 0===r.width?1:rh[r.width];return l[2]!==r.content?(n=(0,o.jsx)(eT.Box,{padding:4,children:r.content}),l[2]=r.content,l[3]=n):n=l[3],l[4]!==r.header||l[5]!==r.onClose||l[6]!==c||l[7]!==u||l[8]!==p||l[9]!==m||l[10]!==n?(i=(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"fullscreen",children:(0,o.jsx)(eR.Dialog,{animate:!0,__unstable_hideCloseButton:p,footer:u,header:r.header,id:c,onClose:r.onClose,onClickOutside:r.onClose,width:m,children:n})}),l[4]=r.header,l[5]=r.onClose,l[6]=c,l[7]=u,l[8]=p,l[9]=m,l[10]=n,l[11]=i):i=l[11],i}function rx(e){let t,n,i=(0,s.c)(5),{dialog:l,referenceElement:r}=e;return i[0]!==l?(t=(0,o.jsx)(rb,{dialog:l}),i[0]=l,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(eT.Popover,{content:t,fallbackPlacements:rm,open:!0,placement:"top",portal:!0,preventOverflow:!0,referenceElement:r}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n}function rb(e){let t,n,i,l=(0,s.c)(6),{dialog:r}=e,{content:d,onClose:c}=r,{isTopLayer:u}=(0,eT.useLayer)(),p=(0,a.useRef)(null);return l[0]!==u||l[1]!==c?(t=e=>{"Escape"===e.key&&u&&c()},l[0]=u,l[1]=c,l[2]=t):t=l[2],(0,eT.useGlobalKeyDown)(t),l[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>[p.current],l[3]=n):n=l[3],(0,eT.useClickOutsideEvent)(u&&c,n),l[4]!==d?(i=(0,o.jsx)("div",{ref:p,children:d}),l[4]=d,l[5]=i):i=l[5],i}function ry(e){let t,n=(0,s.c)(3),{children:i}=e,{element:l,elements:r}=(0,eT.usePortal)(),a=r?.[l6]||l;return n[0]!==i||n[1]!==a?(t=(0,o.jsx)(eT.PortalProvider,{element:a,children:i}),n[0]=i,n[1]=a,n[2]=t):t=n[2],t}function rv(e){let t,n,i=(0,s.c)(17),{dialog:l,referenceElement:r}=e,d=void 0===r?null:r,c=(0,a.useId)();if("confirm"===l.type){let e;return i[0]!==l||i[1]!==d?(e=(0,o.jsx)(rg,{dialog:l,referenceElement:d}),i[0]=l,i[1]=d,i[2]=e):e=i[2],e}if("popover"===l.type){let e;return i[3]!==l||i[4]!==d?(e=(0,o.jsx)(rx,{dialog:l,referenceElement:d}),i[3]=l,i[4]=d,i[5]=e):e=i[5],e}if("dialog"===l.type||!l.type){let e;return i[6]!==l?(e=(0,o.jsx)(ry,{children:(0,o.jsx)(rf,{dialog:l})}),i[6]=l,i[7]=e):e=i[7],e}if("custom"===l.type){let e,t=l?.component;return i[8]!==t?(e=(0,o.jsx)(ry,{children:t}),i[8]=t,i[9]=e):e=i[9],e}return console.warn(`Unsupported modal type ${l.type}`),i[10]!==l.content||i[11]!==l.type?(t=l.content||(0,o.jsxs)(eT.Text,{size:1,children:["Unexpected modal type (",(0,o.jsx)("code",{children:l.type}),")"]}),i[10]=l.content,i[11]=l.type,i[12]=t):t=i[12],i[13]!==c||i[14]!==t||i[15]!==l.onClose?(n=(0,o.jsx)(eC.Dialog,{id:c,onClose:l.onClose,onClickOutside:l.onClose,width:1,children:t}),i[13]=c,i[14]=t,i[15]=l.onClose,i[16]=n):n=i[16],n}let rj=(0,a.memo)(function(e){let t,n,i,l,r=(0,s.c)(9),{actionStates:c,children:u,referenceElement:p}=e,[m,h]=(0,a.useState)(-1),g=c[m];r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{h(e)},r[0]=t):t=r[0];let f=t;r[1]!==u?(n=u({handleAction:f}),r[1]=u,r[2]=n):n=r[2];let x=n;return r[3]!==g||r[4]!==p?(i=g&&g.dialog&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(rv,{dialog:g.dialog,referenceElement:p})}),r[3]=g,r[4]=p,r[5]=i):i=r[5],r[6]!==x||r[7]!==i?(l=(0,o.jsxs)(o.Fragment,{children:[i,x]}),r[6]=x,r[7]=i,r[8]=l):l=r[8],l});function rw(e){let t,n,i,l=(0,s.c)(10),{actionStates:r,disabled:c}=e,u=(0,a.useId)(),[p,m]=(0,a.useState)(null);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={placement:"top-end",portal:!0,preventOverflow:!0},l[0]=t):t=l[0];let h=t,{t:g}=(0,d.useTranslation)(_);l[1]!==r||l[2]!==c||l[3]!==u||l[4]!==g?(n=e=>{let{handleAction:t}=e;return(0,o.jsx)(eC.MenuButton,{id:`${u}-action-menu`,button:(0,o.jsx)(d.ContextMenuButton,{"aria-label":g("buttons.action-menu-button.aria-label"),disabled:c,"data-testid":"action-menu-button",tooltipProps:{content:g("buttons.action-menu-button.tooltip")}}),menu:(0,o.jsx)(eT.Menu,{padding:1,children:r.map((e,n)=>(0,o.jsx)(rS,{actionState:e,disabled:c,index:n,onAction:t},n))}),popover:h,ref:m})},l[1]=r,l[2]=c,l[3]=u,l[4]=g,l[5]=n):n=l[5];let f=n;return l[6]!==r||l[7]!==p||l[8]!==f?(i=(0,o.jsx)(rj,{actionStates:r,referenceElement:p,children:f}),l[6]=r,l[7]=p,l[8]=f,l[9]=i):i=l[9],i}function rS(e){let t,n,i,l,r,a=(0,s.c)(20),{actionState:d,disabled:c,index:u,onAction:p}=e,{onHandle:m}=d;a[0]!==u||a[1]!==p||a[2]!==m?(t=()=>{p(u),m&&m()},a[0]=u,a[1]=p,a[2]=m,a[3]=t):t=a[3];let h=t;a[4]!==d.shortcut?(n=d.shortcut?String(d.shortcut).split("+").map(r_):void 0,a[4]=d.shortcut,a[5]=n):n=a[5];let g=n;a[6]!==d.label?(i=d.label.replace(" ",""),a[6]=d.label,a[7]=i):i=a[7];let f=`action-${i}`,x=c||!!d.disabled;return a[8]!==d.disabled||a[9]!==d.title?(l=d.disabled&&{tooltipProps:{content:d.title}},a[8]=d.disabled,a[9]=d.title,a[10]=l):l=a[10],a[11]!==d.icon||a[12]!==d.label||a[13]!==d.tone||a[14]!==h||a[15]!==g||a[16]!==f||a[17]!==x||a[18]!==l?(r=(0,o.jsx)(eC.MenuItem,{"data-testid":f,disabled:x,hotkeys:g,icon:d.icon,onClick:h,text:d.label,tone:d.tone,...l}),a[11]=d.icon,a[12]=d.label,a[13]=d.tone,a[14]=h,a[15]=g,a[16]=f,a[17]=x,a[18]=l,a[19]=r):r=a[19],r}function r_(e){return e.slice(0,1).toUpperCase()+e.slice(1)}function rI(e){var t,n;let i,l,r,u,p,h,g,f,x,b,y,v,j=(0,s.c)(43),{nonReleaseVersions:w,selectedPerspective:S,onSelectBundle:_,onCopyToDraftsNavigate:I,documentType:C,releasesLoading:T,releases:R}=e,{t:P}=(0,d.useTranslation)(),[E,D]=(0,a.useState)(!1),[k,F]=(0,a.useState)(null);j[0]!==S?(l=e=>(0,c.getVersionFromId)(e)===S,j[0]=S,j[1]=l):l=j[1],j[2]!==w||j[3]!==l?(t=w,n=l,r=[-1===(i=t.findIndex(n))?void 0:t[i],-1===i?t:t.slice(0,i).concat(t.slice(i+1))],j[2]=w,j[3]=l,j[4]=r):r=j[4];let[A,L]=r,V=(0,a.useRef)(null);if(j[5]===Symbol.for("react.memo_cache_sentinel")?(u=e=>{e.target&&"matches"in e.target&&"function"==typeof e.target.matches&&e.target.matches("[data-portal] *")||D(!1)},p=()=>[V.current],j[5]=u,j[6]=p):(u=j[5],p=j[6]),(0,eT.useClickOutsideEvent)(u,p),0===w.length)return null;if(j[7]!==C||j[8]!==I||j[9]!==_||j[10]!==R||j[11]!==T||j[12]!==A?(h=A&&(v=(0,c.getVersionFromId)(A),(0,o.jsx)(d.VersionChip,{selected:!0,text:v,tone:"default",onClick:()=>_(v),onCopyToDraftsNavigate:I,contextValues:{documentId:(0,c.getPublishedId)(A),releases:R,releasesLoading:T,documentType:C,bundleId:v,isVersion:!0}},A)),j[7]=C,j[8]=I,j[9]=_,j[10]=R,j[11]=T,j[12]=A,j[13]=h):h=j[13],j[14]!==E||j[15]!==L.length||j[16]!==P?(g=L.length>0?(0,o.jsx)(eC.Tooltip,{content:P("release.chip.tooltip.other-versions",{count:L.length}),fallbackPlacements:[],portal:!0,placement:E?"top":"bottom",children:(0,o.jsx)(d.Chip,{mode:"bleed",fontSize:1,muted:!0,selected:E,iconRight:E?m.ChevronUpIcon:m.ChevronDownIcon,ref:F,onClick:()=>D(rC),text:P("release.chip.button.other-versions",{count:L.length})})}):null,j[14]=E,j[15]=L.length,j[16]=P,j[17]=g):g=j[17],j[18]!==C||j[19]!==I||j[20]!==_||j[21]!==L||j[22]!==R||j[23]!==T||j[24]!==S){let e;j[26]!==C||j[27]!==I||j[28]!==_||j[29]!==R||j[30]!==T||j[31]!==S?(e=e=>{let t=(0,c.getVersionFromId)(e);return(0,o.jsx)(d.VersionChip,{selected:S===t,text:t,disabled:!1,contextMenuPortal:!1,tone:"default",onClick:()=>_(t),onCopyToDraftsNavigate:I,contextValues:{documentId:(0,c.getPublishedId)(e),releases:R,releasesLoading:T,documentType:C,bundleId:t,isVersion:!0}},e)},j[26]=C,j[27]=I,j[28]=_,j[29]=R,j[30]=T,j[31]=S,j[32]=e):e=j[32],f=L.map(e),j[18]=C,j[19]=I,j[20]=_,j[21]=L,j[22]=R,j[23]=T,j[24]=S,j[25]=f}else f=j[25];return j[33]!==f?(x=(0,o.jsx)(eT.Container,{width:1,children:(0,o.jsx)(eT.Flex,{width:1,padding:3,gap:2,wrap:"wrap",children:f})}),j[33]=f,j[34]=x):x=j[34],j[35]!==E||j[36]!==k||j[37]!==x?(b=(0,o.jsx)(eC.Popover,{animate:!1,open:E,portal:!0,arrow:!0,ref:V,placement:"bottom",referenceElement:k,zOffset:10,content:x}),j[35]=E,j[36]=k,j[37]=x,j[38]=b):b=j[38],j[39]!==h||j[40]!==g||j[41]!==b?(y=(0,o.jsxs)(o.Fragment,{children:[h,g,b]}),j[39]=h,j[40]=g,j[41]=b,j[42]=y):y=j[42],y}function rC(e){return!e}let rT=e=>{let t=(0,s.c)(16),{release:n}=e,{t:i}=(0,d.useTranslation)();if("archived"===n.state){let e,n;return t[0]!==i?(e=i("release.chip.tooltip.archived"),t[0]=i,t[1]=e):e=t[1],t[2]!==e?(n=(0,o.jsx)(eT.Text,{size:1,children:e}),t[2]=e,t[3]=n):n=t[3],n}if("asap"===n.metadata.releaseType){let e,n;return t[4]!==i?(e=i("release.type.asap"),t[4]=i,t[5]=e):e=t[5],t[6]!==e?(n=(0,o.jsx)(eT.Text,{size:1,children:e}),t[6]=e,t[7]=n):n=t[7],n}if("scheduled"===n.metadata.releaseType){let e,l="active"===n.state;return t[8]!==l||t[9]!==n||t[10]!==i?(e=n.metadata.intendedPublishAt&&(0,o.jsx)(eT.Text,{size:1,children:l?(0,o.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.intended-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}}):(0,o.jsx)(d.Translate,{t:i,i18nKey:"release.chip.tooltip.scheduled-for-date",values:{date:(0,d.formatRelativeLocalePublishDate)(n)}})}),t[8]=l,t[9]=n,t[10]=i,t[11]=e):e=t[11],e}if("undecided"===n.metadata.releaseType){let e,n;return t[12]!==i?(e=i("release.type.undecided"),t[12]=i,t[13]=e):e=t[13],t[14]!==e?(n=(0,o.jsx)(eT.Text,{size:1,children:e}),t[14]=e,t[15]=n):n=t[15],n}return null},rR={dateStyle:"medium",timeStyle:"short"},rP=(0,a.memo)(function(){let e,t,n,i,l,r,a,u,p,m,h,g,f,x,b,y,v,j,w,S,_,I,C=(0,s.c)(112),{selectedReleaseId:T,selectedPerspectiveName:R}=(0,d.usePerspective)(),{t:P}=(0,d.useTranslation)(),E=(0,d.useSetPerspective)(),{params:D,setParams:k}=lk(),F=(0,d.useDateTimeFormat)(rR),{loading:A}=(0,d.useActiveReleases)(),L=(0,d.useSchema)(),{editState:V,displayed:M,documentType:O,documentId:z}=iN(),B=M&&!M._createdAt,N=(0,d.useGetDefaultPerspective)(),H=D?.historyVersion;C[0]!==M||C[1]!==z||C[2]!==H?(e={historyVersion:H,displayed:M,documentId:z},C[0]=M,C[1]=z,C[2]=H,C[3]=e):e=C[3];let $=(0,d.useFilteredReleases)(e);C[4]!==z?(t={documentId:z},C[4]=z,C[5]=t):t=C[5];let{data:U}=(0,d.useDocumentVersions)(t);C[6]!==U?(n=U&&U.length>0&&!U.some(rE),C[6]=U,C[7]=n):n=C[7];let G=n,q=(0,d.useWorkspace)(),{onSetScheduledDraftPerspective:W}=(0,d.useSingleDocRelease)();C[8]!==W||C[9]!==D?.scheduledDraft||C[10]!==E?(i=()=>{D?.scheduledDraft?W(""):E("drafts")},C[8]=W,C[9]=D?.scheduledDraft,C[10]=E,C[11]=i):i=C[11];let K=i;C[12]!==N||C[13]!==W||C[14]!==D||C[15]!==k||C[16]!==E?(l=e=>{if((0,d.isReleaseDocument)(e)&&(0,d.isCardinalityOneRelease)(e))return void W((0,d.getReleaseIdFromReleaseDocumentId)(e._id));"published"===e&&D?.historyVersion&&k({...D,rev:D?.historyEvent||void 0,since:void 0,historyVersion:void 0});let t=(0,d.isReleaseDocument)(e)?(0,d.getReleaseIdFromReleaseDocumentId)(e._id):e===N?"":e;D?.scheduledDraft?k({...D,scheduledDraft:void 0},{perspective:t}):E(t)},C[12]=N,C[13]=W,C[14]=D,C[15]=k,C[16]=E,C[17]=l):l=C[17];let Y=l;if(C[18]!==O||C[19]!==L){let e=L.get(O);r=!!e&&!0===e.liveEdit,C[18]=O,C[19]=L,C[20]=r}else r=C[20];let X=r;e:{if(X&&!T){a=!1;break e}a=!V?.published}let Q=a;C[21]!==M?._id||C[22]!==V?.version||C[23]!==D?(u=e=>{if(!D?.historyVersion){let t=V?.version&&(0,d.isGoingToUnpublish)(V?.version)&&(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(V?.version?._id);return{selected:!!((0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(M?._id||"")||t)}}let t=(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===D.historyVersion;return{selected:t,disabled:t}},C[21]=M?._id,C[22]=V?.version,C[23]=D,C[24]=u):u=C[24];let J=u;C[25]!==M?._id||C[26]!==V?.draft?._id||C[27]!==X||C[28]!==R||C[29]!==T?(p=()=>!!(X&&!V?.draft?._id&&!T||(0,c.isPublishedId)(M?._id||"")&&(0,d.isPublishedPerspective)(R||"")),C[25]=M?._id,C[26]=V?.draft?._id,C[27]=X,C[28]=R,C[29]=T,C[30]=p):p=C[30];let Z=p();t:{let e=M?._id||"";if(Z||D?.historyVersion||R||(0,c.isVersionId)(e)){m=!1;break t}if((0,c.isDraftId)(e)){m=!0;break t}if((0,c.isPublishedId)(e)&&V?.published&&(0,d.isPublishedPerspective)(R||"")){m=!1;break t}m=!0}let ee=m;C[31]!==V?.draft||C[32]!==B||C[33]!==X||C[34]!==G||C[35]!==T?(h=()=>!!G||!!B&&!!T||(!!V?.draft||!!X)&&!!(B&&T||X),C[31]=V?.draft,C[32]=B,C[33]=X,C[34]=G,C[35]=T,C[36]=h):h=C[36];let et=h(),en=q.document.drafts?.enabled;if(C[37]!==U||C[38]!==$.currentReleases){let e;C[40]!==$.currentReleases?(e=e=>!((0,c.isPublishedId)(e)||(0,c.isDraftId)(e))&&!$.currentReleases.some(t=>(0,d.getReleaseIdFromReleaseDocumentId)(t._id)===(0,c.getVersionFromId)(e)),C[40]=$.currentReleases,C[41]=e):e=C[41],g=U.filter(e),C[37]=U,C[38]=$.currentReleases,C[39]=g}else g=C[39];let ei=g;C[42]!==F||C[43]!==V?.published||C[44]!==P?(f=(0,o.jsx)(eT.Text,{size:1,children:V?.published&&V?.published?._updatedAt?(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.published-date",values:{date:F.format(new Date(V?.published._updatedAt))}}):(0,o.jsx)(o.Fragment,{children:P("release.chip.tooltip.not-published")})}),C[42]=F,C[43]=V?.published,C[44]=P,C[45]=f):f=C[45],C[46]!==Y?(x=()=>Y("published"),C[46]=Y,C[47]=x):x=C[47],C[48]!==P?(b=P("release.chip.published"),C[48]=P,C[49]=b):b=C[49];let el=V?.published?._id||V?.id||"",er=!V?.published;return C[50]!==O||C[51]!==$.notCurrentReleases||C[52]!==A||C[53]!==el||C[54]!==er?(y={documentId:el,releases:$.notCurrentReleases,releasesLoading:A,documentType:O,bundleId:"published",isVersion:!1,disabled:er},C[50]=O,C[51]=$.notCurrentReleases,C[52]=A,C[53]=el,C[54]=er,C[55]=y):y=C[55],C[56]!==K||C[57]!==Z||C[58]!==Q||C[59]!==f||C[60]!==x||C[61]!==b||C[62]!==y?(v=(0,o.jsx)(d.VersionChip,{tooltipContent:f,disabled:Q,onClick:x,selected:Z,text:b,tone:"positive",onCopyToDraftsNavigate:K,contextValues:y}),C[56]=K,C[57]=Z,C[58]=Q,C[59]=f,C[60]=x,C[61]=b,C[62]=y,C[63]=v):v=C[63],C[64]!==F||C[65]!==O||C[66]!==V?.draft||C[67]!==V?.id||C[68]!==V?.published?._id||C[69]!==$.notCurrentReleases||C[70]!==K||C[71]!==Y||C[72]!==et||C[73]!==en||C[74]!==ee||C[75]!==X||C[76]!==A||C[77]!==P?(j=en&&(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(eT.Text,{size:1,children:V?.draft?(0,o.jsx)(o.Fragment,{children:V?.draft._updatedAt?(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.edited-date",values:{date:F.format(new Date(V?.draft._updatedAt))}}):(0,o.jsx)(d.Translate,{t:P,i18nKey:"release.chip.tooltip.created-date",values:{date:F.format(new Date(V?.draft._createdAt))}})}):(0,o.jsx)(o.Fragment,{children:P(X?"release.chip.tooltip.draft-disabled.live-edit":"release.chip.tooltip.no-edits")})}),selected:ee,disabled:et,text:P("release.chip.draft"),tone:V?.draft?"caution":"neutral",onClick:()=>Y("drafts"),onCopyToDraftsNavigate:K,contextValues:{documentId:V?.draft?._id||V?.published?._id||V?.id||"",documentType:O,releases:$.notCurrentReleases,releasesLoading:A,bundleId:"draft",isVersion:!1}}),C[64]=F,C[65]=O,C[66]=V?.draft,C[67]=V?.id,C[68]=V?.published?._id,C[69]=$.notCurrentReleases,C[70]=K,C[71]=Y,C[72]=et,C[73]=en,C[74]=ee,C[75]=X,C[76]=A,C[77]=P,C[78]=j):j=C[78],C[79]!==M?._id||C[80]!==O||C[81]!==$.inCreation||C[82]!==$.notCurrentReleases||C[83]!==K||C[84]!==A||C[85]!==P?(w=$.inCreation&&(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(rT,{release:$.inCreation}),selected:!0,onClick:rD,locked:!1,tone:(0,d.getReleaseTone)($.inCreation),text:$.inCreation.metadata.title||P("release.placeholder-untitled-release"),onCopyToDraftsNavigate:K,contextValues:{documentId:M?._id||"",documentType:O,disabled:!0,releases:$.notCurrentReleases,releasesLoading:A,bundleId:(0,d.getReleaseIdFromReleaseDocumentId)($.inCreation._id),isVersion:!0,release:$.inCreation}}),C[79]=M?._id,C[80]=O,C[81]=$.inCreation,C[82]=$.notCurrentReleases,C[83]=K,C[84]=A,C[85]=P,C[86]=w):w=C[86],C[87]!==M||C[88]!==O||C[89]!==V?.version||C[90]!==$.currentReleases||C[91]!==$.notCurrentReleases||C[92]!==J||C[93]!==K||C[94]!==Y||C[95]!==A||C[96]!==P?(S=M&&$.currentReleases?.map(e=>(0,o.jsx)(d.VersionChip,{tooltipContent:(0,o.jsx)(rT,{release:e}),...J(e),onClick:()=>Y(e),text:e.metadata.title||P("release.placeholder-untitled-release"),tone:(0,d.getReleaseTone)(e),locked:(0,d.isReleaseScheduledOrScheduling)(e),onCopyToDraftsNavigate:K,contextValues:{documentId:M?._id||"",documentType:O,releases:$.notCurrentReleases,releasesLoading:A,bundleId:(0,d.getReleaseIdFromReleaseDocumentId)(e._id),isVersion:!0,release:e,isGoingToUnpublish:!!V?.version&&(0,d.isGoingToUnpublish)(V?.version)}},e._id)),C[87]=M,C[88]=O,C[89]=V?.version,C[90]=$.currentReleases,C[91]=$.notCurrentReleases,C[92]=J,C[93]=K,C[94]=Y,C[95]=A,C[96]=P,C[97]=S):S=C[97],C[98]!==O||C[99]!==$.notCurrentReleases||C[100]!==K||C[101]!==Y||C[102]!==A||C[103]!==ei||C[104]!==R?(_=(0,o.jsx)(rI,{nonReleaseVersions:ei,selectedPerspective:R,onSelectBundle:Y,onCopyToDraftsNavigate:K,releases:$.notCurrentReleases,releasesLoading:A,documentType:O}),C[98]=O,C[99]=$.notCurrentReleases,C[100]=K,C[101]=Y,C[102]=A,C[103]=ei,C[104]=R,C[105]=_):_=C[105],C[106]!==v||C[107]!==j||C[108]!==w||C[109]!==S||C[110]!==_?(I=(0,o.jsxs)(o.Fragment,{children:[v,j,w,S,_]}),C[106]=v,C[107]=j,C[108]=w,C[109]=S,C[110]=_,C[111]=I):I=C[111],I});function rE(e){return!(0,c.isVersionId)(e)}function rD(){}let rk=(0,eD.styled)(eT.Card)(e=>{let t=(0,tQ.getTheme_v2)(e.theme);return eD.css`
    scrollbar-width: none;
    z-index: 1;
    flex: 1;
    position: relative;
    > div {
      &::-webkit-scrollbar {
        width: 0;
        height: 0;
      }
    }

    ${e.$showGradient&&eD.css`
      &::after {
        content: '';
        display: block;
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        width: 150px;
        background: linear-gradient(to right, ${(0,tQ.rgba)(t.color.bg,0)}, var(--card-bg-color));
        transition: 'opacity 300ms ease-out';
        pointer-events: none;
      }
    `}
  `}),rF=(0,a.memo)((0,a.forwardRef)(function(e,t){let n,i,l,r,c,u,p,h=(0,s.c)(41),{menuItems:g}=e,{editState:f,onMenuAction:x,onPaneClose:b,onPaneSplit:y,onSetMaximizedPane:v,menuItemGroups:j,schemaType:w,connectionState:S,views:I,unstable_languageFilter:C,documentId:T}=iN(),{features:R}=iK(),{index:P,BackLink:E,hasGroupSiblings:D}=lk(),{maximizedPane:k}=l3(),{actions:F}=(0,d.useFieldActions)(),[A,L]=(0,a.useState)(null),V=(0,a.useRef)(null),M=function(e){let t,n,i=(0,s.c)(3),[l,r]=(0,a.useState)(!1);return i[0]!==e?(t=()=>{let t=()=>{let t=e.current;if(!t)return;let{scrollWidth:n,clientWidth:i}=t;if(!(n>i))return void r(!1);let{scrollLeft:l}=t;r(!(l+i>=n))},{intersectionObserver:n,mutationObserver:i}=function(){t();let n=e.current;if(!n)return{intersectionObserver:null,mutationObserver:null};let i=new IntersectionObserver(e=>{let t=e[0];t&&r(!t.isIntersecting)}),l=()=>{i.disconnect();let e=n.children[n.children.length-1];i.observe(e)};l();let o=new MutationObserver(()=>{l(),t()});return o.observe(n,{childList:!0,subtree:!1}),{intersectionObserver:i,mutationObserver:o}}();return()=>{n?.disconnect(),i?.disconnect()}},n=[e],i[0]=e,i[1]=t,i[2]=n):(t=i[1],n=i[2]),(0,a.useEffect)(t,n),l}(V),O=(0,tx.useTelemetry)();h[0]!==F||h[1]!==j||h[2]!==g||h[3]!==x?(n=rp({actionHandler:x,fieldActions:F,menuItems:g,menuItemGroups:j}),h[0]=F,h[1]=j,h[2]=g,h[3]=x,h[4]=n):n=h[4];let z=n;h[5]!==z?(i=z.filter(rc),h[5]=z,h[6]=i):i=h[6];let B=i;h[7]!==z?(l=z.filter(ru),h[7]=z,h[8]=l):l=h[8];let N=l,{collapsed:H,isLast:$}=io(),U=$&&!H?-1:0,G=R.splitViews&&y&&I.length>1,q=G&&D,W=R.backButton&&P>0,K=!q&&!W&&!!E,{t:Y}=(0,d.useTranslation)(_),X=k?.pane&&"object"==typeof k.pane&&"document"===k.pane.type&&k.pane.options.id===T;h[9]!==X||h[10]!==v||h[11]!==O?(r=()=>{v?.(),X?O.log(l7):O.log(l8)},h[9]=X,h[10]=v,h[11]=O,h[12]=r):r=h[12];let Q=r;h[13]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(rn,{}),h[13]=c):c=h[13];let J=c;h[14]!==E||h[15]!==W||h[16]!==Y?(u=W&&(0,o.jsx)(eC.Button,{as:E,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:Y("pane-header.back-button.text")}}),h[14]=E,h[15]=W,h[16]=Y,h[17]=u):u=h[17];let Z=u;return h[18]!==E||h[19]!==Z||h[20]!==H||h[21]!==S||h[22]!==N||h[23]!==f||h[24]!==Q||h[25]!==X||h[26]!==B||h[27]!==b||h[28]!==y||h[29]!==v||h[30]!==t||h[31]!==A||h[32]!==w||h[33]!==M||h[34]!==K||h[35]!==G||h[36]!==q||h[37]!==Y||h[38]!==U||h[39]!==C?(p=(0,o.jsx)(eC.TooltipDelayGroupProvider,{children:H?(0,o.jsx)(iC,{border:!0,ref:t,loading:"connecting"===S&&!f?.draft&&!f?.published,title:J,tabIndex:U,backButton:Z}):(0,o.jsx)(eT.Card,{hidden:H,style:{lineHeight:0},borderBottom:!0,children:(0,o.jsxs)(eT.Flex,{gap:3,paddingY:3,children:[(0,o.jsx)(rk,{$showGradient:M,children:(0,o.jsx)(eT.Flex,{flex:1,gap:1,overflow:"auto",paddingX:3,"data-testid":"document-perspective-list",ref:V,children:(0,o.jsx)(rP,{})})}),(0,o.jsx)(eT.Box,{flex:"none",paddingRight:3,children:(0,o.jsxs)(eT.Flex,{align:"center",gap:1,children:[C.length>0&&(0,o.jsx)(o.Fragment,{children:C.map((e,t)=>(0,o.jsx)(e,{schemaType:w},`language-filter-${t}`))}),B.map(rV),f&&(0,o.jsx)(aI,{group:"paneActions",children:e=>{let{states:t}=e;return(0,o.jsx)(rA,{contextMenuNodes:N,setReferenceElement:L,referenceElement:A,states:t})}}),G&&(0,o.jsx)(eC.Button,{"aria-label":Y("buttons.split-pane-button.aria-label"),icon:m.SplitVerticalIcon,mode:"bleed",onClick:y,tooltipProps:{content:Y("buttons.split-pane-button.tooltip")}},"split-pane-button"),q&&(0,o.jsx)(eC.Button,{icon:m.CloseIcon,mode:"bleed",onClick:b,tooltipProps:{content:Y("buttons.split-pane-close-button.title")}},"close-view-button"),v&&(0,o.jsx)(eC.Button,{"aria-label":Y(X?"buttons.focus-pane-button.aria-label.collapse":"buttons.focus-pane-button.aria-label.focus"),icon:X?m.CollapseIcon:m.ExpandIcon,mode:"bleed",onClick:Q,tooltipProps:{content:Y(X?"buttons.focus-pane-button.tooltip.collapse":"buttons.focus-pane-button.tooltip.focus")},"data-testid":X?"focus-pane-button-collapse":"focus-pane-button-focus"},"focus-pane-button"),K&&(0,o.jsx)(eC.Button,{icon:m.CloseIcon,mode:"bleed",tooltipProps:{content:Y("buttons.split-pane-close-group-button.title")},as:E},"close-view-button")]})})]})})}),h[18]=E,h[19]=Z,h[20]=H,h[21]=S,h[22]=N,h[23]=f,h[24]=Q,h[25]=X,h[26]=B,h[27]=b,h[28]=y,h[29]=v,h[30]=t,h[31]=A,h[32]=w,h[33]=M,h[34]=K,h[35]=G,h[36]=q,h[37]=Y,h[38]=U,h[39]=C,h[40]=p):p=h[40],p})),rA=(0,a.memo)(function(e){let t,n,i=(0,s.c)(7),{setReferenceElement:l,referenceElement:r,contextMenuNodes:d}=e,c=(0,a.useDeferredValue)(e.states);return i[0]!==c?(t=c.filter(rM),i[0]=c,i[1]=t):t=i[1],i[2]!==d||i[3]!==r||i[4]!==l||i[5]!==t?(n=(0,o.jsx)(rL,{setReferenceElement:l,referenceElement:r,contextMenuNodes:d,states:t}),i[2]=d,i[3]=r,i[4]=l,i[5]=t,i[6]=n):n=i[6],n}),rL=(0,a.memo)(function(e){let t,n,i=(0,s.c)(8),{states:l,setReferenceElement:r,contextMenuNodes:a,referenceElement:d}=e;i[0]!==a||i[1]!==r||i[2]!==l?(t=e=>{let{handleAction:t}=e;return(0,o.jsx)("div",{ref:r,children:(0,o.jsx)(ix,{nodes:a,actionsNodes:l.length>0?l.map((e,n)=>(0,o.jsx)(rS,{actionState:e,disabled:!!e.disabled,index:n,onAction:t},e.label)):void 0},"context-menu")})},i[0]=a,i[1]=r,i[2]=l,i[3]=t):t=i[3];let c=t;return i[4]!==d||i[5]!==c||i[6]!==l?(n=(0,o.jsx)(rj,{actionStates:l,referenceElement:d,children:c}),i[4]=d,i[5]=c,i[6]=l,i[7]=n):n=i[7],n});function rV(e){return(0,o.jsx)(iR,{node:e},e.key)}function rM(e){return!e.action||e.action!==rd.action}function rO(e){let t,n,i=(0,s.c)(3),{size:l}=e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(t={pointerEvents:"none",visibility:"hidden",width:0},i[0]=t):t=i[0],i[1]!==l?(n=(0,o.jsx)(eC.Button,{"aria-hidden":!0,disabled:!0,size:l,style:t,text:"-"}),i[1]=l,i[2]=n):n=i[2],n}let rz={primary:"primary",success:"positive",warning:"caution",danger:"critical"},rB=(0,a.memo)(function(e){let t,n,i=(0,s.c)(4),{states:l}=e;return 0===l.length?null:(i[0]!==l?(t=l.map(rU),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(eT.Inline,{space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n)}),rN=(0,a.memo)(function(e){let t,n=(0,s.c)(2),i=(0,a.useDeferredValue)(e.states);return n[0]!==i?(t=(0,o.jsx)(rB,{states:i}),n[0]=i,n[1]=t):t=n[1],t});function rH(){let e,t=(0,s.c)(3),{badges:n,editState:i}=iN();return i&&n?(t[0]!==n||t[1]!==i?(e=(0,o.jsx)(aC,{badges:n,badgeProps:i,children:r$}),t[0]=n,t[1]=i,t[2]=e):e=t[2],e):null}function r$(e){let{states:t}=e;return(0,o.jsx)(rN,{states:t})}function rU(e,t){return(0,o.jsx)(eC.Tooltip,{content:e.title,disabled:!e.title,placement:"top",portal:!0,children:(0,o.jsx)(eT.Badge,{fontSize:1,mode:"outline",paddingX:2,paddingY:1,radius:4,tone:e.color?rz[e.color]:void 0,style:{whiteSpace:"nowrap"},children:e.label})},`${e.label}-${t}`)}let rG={NOTHING_TO_DELETE:"action.delete.disabled.nothing-to-delete",NOT_READY:"action.delete.disabled.not-ready"},rq=e=>{let t,n,i,l,r,u,p=(0,s.c)(34),{id:h,type:g,draft:f,version:x}=e;p[0]!==x?(t=x?._id&&(0,c.getVersionFromId)(x._id),p[0]=x,p[1]=t):t=p[1];let b=t,{delete:y}=(0,d.useDocumentOperation)(h,g,b),[v,j]=(0,a.useState)(!1),[w,S]=(0,a.useState)(!1),{t:I}=(0,d.useTranslation)(_);p[2]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{S(!1)},p[2]=n):n=p[2];let C=n;p[3]!==y?(i=e=>{S(!1),j(!0),y.execute(e),j(!1)},p[3]=y,p[4]=i):i=p[4];let T=i;p[5]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{S(!0)},p[5]=l):l=p[5];let R=l;p[6]!==b||p[7]!==h||p[8]!==g?(r={id:h,type:g,version:b,permission:"delete"},p[6]=b,p[7]=h,p[8]=g,p[9]=r):r=p[9];let[P,E]=(0,d.useDocumentPairPermissions)(r),D=(0,d.useCurrentUser)();e:{let e,t,n,i;if(!E&&!P?.granted){let e,t,n;p[10]!==I?(e=I("action.delete.label"),p[10]=I,p[11]=e):e=p[11],p[12]!==D?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"delete-document",currentUser:D}),p[12]=D,p[13]=t):t=p[13],p[14]!==e||p[15]!==t?(n={tone:"critical",icon:m.TrashIcon,disabled:!0,label:e,title:t},p[14]=e,p[15]=t,p[16]=n):n=p[16],u=n;break e}let l=v||!!y.disabled||E;p[17]!==y.disabled||p[18]!==I?(e=y.disabled&&I(rG[y.disabled])||"",p[17]=y.disabled,p[18]=I,p[19]=e):e=p[19],p[20]!==v||p[21]!==I?(t=I(v?"action.delete.running.label":"action.delete.label"),p[20]=v,p[21]=I,p[22]=t):t=p[22],p[23]!==f?._id||p[24]!==T||p[25]!==h||p[26]!==w||p[27]!==g?(n=w&&{type:"custom",component:(0,o.jsx)(ao,{action:"delete",id:f?._id||h,type:g,onCancel:C,onConfirm:T})},p[23]=f?._id,p[24]=T,p[25]=h,p[26]=w,p[27]=g,p[28]=n):n=p[28],p[29]!==n||p[30]!==l||p[31]!==e||p[32]!==t?(i={tone:"critical",icon:m.TrashIcon,disabled:l,title:e,label:t,shortcut:"Ctrl+Alt+D",onHandle:R,dialog:n},p[29]=n,p[30]=l,p[31]=e,p[32]=t,p[33]=i):i=p[33],u=i}return u};function rW(e){let t,n,i,l,r,c,u=(0,s.c)(18),{publishedExists:p,onCancel:m,onConfirm:h}=e,{t:g}=(0,d.useTranslation)(_),f=`deletion-confirmation-${(0,a.useId)()}`;return u[0]!==g?(t=g("action.discard-changes.confirm-dialog.header.text"),u[0]=g,u[1]=t):t=u[1],u[2]!==g?(n=g("action.discard-changes.label"),u[2]=g,u[3]=n):n=u[3],u[4]!==h||u[5]!==n?(i={confirmButton:{text:n,onClick:h}},u[4]=h,u[5]=n,u[6]=i):i=u[6],u[7]!==p||u[8]!==g?(l=g(p?"action.discard-changes.confirm-dialog.confirm-discard-changes":"action.discard-changes.confirm-dialog.confirm-discard-changes-draft"),u[7]=p,u[8]=g,u[9]=l):l=u[9],u[10]!==l?(r=(0,o.jsx)(eT.Text,{size:1,children:l}),u[10]=l,u[11]=r):r=u[11],u[12]!==f||u[13]!==m||u[14]!==t||u[15]!==i||u[16]!==r?(c=(0,o.jsx)(eC.Dialog,{width:1,id:f,header:t,footer:i,onClose:m,onClickOutside:m,children:r}),u[12]=f,u[13]=m,u[14]=t,u[15]=i,u[16]=r,u[17]=c):c=u[17],c}rq.action="delete",rq.displayName="DeleteAction";let rK={NO_CHANGES:"action.discard-changes.disabled.no-change",NOT_PUBLISHED:"action.discard-changes.disabled.not-published",NOT_READY:"action.discard-changes.disabled.not-ready"},rY=e=>{let t,n,i,l,r,u,p=(0,s.c)(31),{id:h,type:g,published:f,version:x,draft:b}=e;p[0]!==x?(t=x?._id&&(0,c.getVersionFromId)(x._id),p[0]=x,p[1]=t):t=p[1];let y=t,{discardChanges:v}=(0,d.useDocumentOperation)(h,g,y),[j,w]=(0,a.useState)(!1);p[2]!==y||p[3]!==h||p[4]!==g?(n={id:h,type:g,version:y,permission:"discardDraft"},p[2]=y,p[3]=h,p[4]=g,p[5]=n):n=p[5];let[S,I]=(0,d.useDocumentPairPermissions)(n),C=(0,d.useCurrentUser)(),{displayed:T}=iN(),{t:R}=(0,d.useTranslation)(_),P=T?._id&&(0,c.isPublishedId)(T?._id);p[6]!==v?(i=()=>{v.execute(),w(!1)},p[6]=v,p[7]=i):i=p[7];let E=i;p[8]===Symbol.for("react.memo_cache_sentinel")?(l=()=>{w(!1)},p[8]=l):l=p[8];let D=l;p[9]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{w(!0)},p[9]=r):r=p[9];let k=r;e:{let e,t,n,i;if(!x&&!b||P){u=null;break e}if(!I&&!S?.granted){let e,t,n;p[10]!==R?(e=R("action.discard-changes.label"),p[10]=R,p[11]=e):e=p[11],p[12]!==C?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"discard-changes",currentUser:C}),p[12]=C,p[13]=t):t=p[13],p[14]!==e||p[15]!==t?(n={tone:"critical",icon:m.ResetIcon,disabled:!0,label:e,title:t},p[14]=e,p[15]=t,p[16]=n):n=p[16],u=n;break e}let l=!!v.disabled||I,r=v.disabled&&rK[v.disabled]||"";p[17]!==R||p[18]!==r?(e=R(r),p[17]=R,p[18]=r,p[19]=e):e=p[19],p[20]!==R?(t=R("action.discard-changes.label"),p[20]=R,p[21]=t):t=p[21],p[22]!==E||p[23]!==j||p[24]!==f?(n=j&&{type:"custom",component:(0,o.jsx)(rW,{onCancel:D,onConfirm:E,publishedExists:!!f})},p[22]=E,p[23]=j,p[24]=f,p[25]=n):n=p[25],p[26]!==t||p[27]!==n||p[28]!==l||p[29]!==e?(i={tone:"critical",icon:m.ResetIcon,disabled:l,title:e,label:t,onHandle:k,dialog:n},p[26]=t,p[27]=n,p[28]=l,p[29]=e,p[30]=i):i=p[30],u=i}return u};rY.action="discardChanges",rY.displayName="DiscardChangesAction";let rX={NOTHING_TO_DUPLICATE:"action.duplicate.disabled.nothing-to-duplicate",NOT_READY:"action.duplicate.disabled.not-ready"},rQ=e=>{let t,n,i,l,r=(0,s.c)(31),{id:u,type:p,release:h,mapDocument:g,version:f}=e,x=(0,d.useDocumentStore)();r[0]!==f?(t=f?._id&&(0,c.getVersionFromId)(f._id),r[0]=f,r[1]=t):t=r[1];let b=t,{duplicate:y}=(0,d.useDocumentOperation)(u,p,b),{navigateIntent:v}=(0,eV.useRouter)(),[j,w]=(0,a.useState)(!1);r[2]!==u||r[3]!==h||r[4]!==p?(n={id:u,type:p,version:h,permission:"duplicate"},r[2]=u,r[3]=h,r[4]=p,r[5]=n):n=r[5];let[S,I]=(0,d.useDocumentPairPermissions)(n),{t:C}=(0,d.useTranslation)(_),T=(0,d.useCurrentUser)();r[6]!==x.pair||r[7]!==y||r[8]!==u||r[9]!==g||r[10]!==v||r[11]!==p?(i=async()=>{let e=(0,eE.uuid)();w(!0);let t=(0,tn.firstValueFrom)(x.pair.operationEvents(u,p).pipe((0,e3.filter)(rJ)));y.execute(e,{mapDocument:g}),await t,v("edit",{id:e,type:p}),w(!1)},r[6]=x.pair,r[7]=y,r[8]=u,r[9]=g,r[10]=v,r[11]=p,r[12]=i):i=r[12];let R=i;e:{let e,t,n;if(!I&&!S?.granted){let e,t,n;r[13]!==C?(e=C("action.duplicate.label"),r[13]=C,r[14]=e):e=r[14],r[15]!==T?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"duplicate-document",currentUser:T}),r[15]=T,r[16]=t):t=r[16],r[17]!==e||r[18]!==t?(n={icon:m.CopyIcon,disabled:!0,label:e,title:t},r[17]=e,r[18]=t,r[19]=n):n=r[19],l=n;break e}let i=j||!!y.disabled||I;r[20]!==j||r[21]!==C?(e=C(j?"action.duplicate.running.label":"action.duplicate.label"),r[20]=j,r[21]=C,r[22]=e):e=r[22],r[23]!==y.disabled||r[24]!==C?(t=y.disabled?C(rX[y.disabled]):"",r[23]=y.disabled,r[24]=C,r[25]=t):t=r[25],r[26]!==R||r[27]!==i||r[28]!==e||r[29]!==t?(n={icon:m.CopyIcon,disabled:i,label:e,title:t,onHandle:R},r[26]=R,r[27]=i,r[28]=e,r[29]=t,r[30]=n):n=r[30],l=n}return l};function rJ(e){return"duplicate"===e.op&&"success"===e.type}rQ.action="duplicate",rQ.displayName="DuplicateAction";let rZ=(0,tb.defineEvent)({name:"Document Published",version:1,description:'User clicked the "Publish" button in the document pane'}),r0={LIVE_EDIT_ENABLED:"action.publish.live-edit.publish-disabled",ALREADY_PUBLISHED:"action.publish.already-published.no-time-ago.tooltip",NO_CHANGES:"action.publish.no-changes.tooltip",NOT_READY:"action.publish.disabled.not-ready"},r1={status:"published"};function r2(e,t,n){return"ALREADY_PUBLISHED"===e&&t?(0,o.jsx)(r3,{publishedAt:t}):n(r0[e])}function r3(e){let t,n,i,l=(0,s.c)(6),{publishedAt:r}=e,{t:a}=(0,d.useTranslation)(_);l[0]===Symbol.for("react.memo_cache_sentinel")?(t={useTemporalPhrase:!0},l[0]=t):t=l[0];let c=(0,d.useRelativeTime)(r,t);return l[1]!==a||l[2]!==c?(n=a("action.publish.already-published.tooltip",{timeSincePublished:c}),l[1]=a,l[2]=c,l[3]=n):n=l[3],l[4]!==n?(i=(0,o.jsx)(eT.Text,{children:n}),l[4]=n,l[5]=i):i=l[5],i}let r4=e=>{let t,n,i,l,r,u,p,h,g,f,x,b,y=(0,s.c)(81),{id:v,type:j,liveEdit:w,draft:S,published:I,release:C,version:T}=e,[R,P]=(0,a.useState)(null);y[0]!==T?(t=T?._id&&(0,c.getVersionFromId)(T._id),y[0]=T,y[1]=t):t=y[1];let E=t,{publish:D}=(0,d.useDocumentOperation)(v,j,E),{changesOpen:k,documentId:F,documentType:A,value:L}=iN(),V=(0,d.useValidationStatus)(L._id,j,!C),M=(0,d.useSyncState)(v,j),O=(0,d.useEditState)(F,A),{t:z}=(0,d.useTranslation)(_);y[2]!==O?.draft||y[3]!==O?.published?(n=O?.draft||O?.published||{},y[2]=O?.draft,y[3]=O?.published,y[4]=n):n=y[4];let B=n._rev;y[5]!==V.validation?(i=V.validation.some(eP.isValidationErrorMarker),y[5]=V.validation,y[6]=i):i=y[6];let N=i,[H,$]=(0,a.useState)(!1),U=M.isSyncing,G=V.isValidating;y[7]!==v||y[8]!==j?(l={id:v,type:j,permission:"publish"},y[7]=v,y[8]=j,y[9]=l):l=y[9];let[q,W]=(0,d.useDocumentPairPermissions)(l),K=(0,d.useCurrentUser)();y[10]!==N||y[11]!==D.disabled||y[12]!==I||y[13]!==z?(r=D.disabled?r2(D.disabled,(I||{})._updatedAt,z)||"":N?z("action.publish.validation-issues.tooltip"):"",y[10]=N,y[11]=D.disabled,y[12]=I,y[13]=z,y[14]=r):r=y[14];let Y=r,X=I?._rev;y[15]!==X||y[16]!==D?(u=()=>{D.execute(),P({status:"publishing",publishRevision:X})},y[15]=X,y[16]=D,y[17]=u):u=y[17];let Q=u;y[18]!==Q||y[19]!==N||y[20]!==U||y[21]!==H||y[22]!==B||y[23]!==V.isValidating||y[24]!==V.revision?(p=()=>{let e=!1===V.isValidating&&V.revision!==B;H&&!U&&e&&(N||Q(),$(!1))},y[18]=Q,y[19]=N,y[20]=U,y[21]=H,y[22]=B,y[23]=V.isValidating,y[24]=V.revision,y[25]=p):p=y[25],y[26]!==Q||y[27]!==N||y[28]!==U||y[29]!==G||y[30]!==H||y[31]!==B||y[32]!==V.isValidating||y[33]!==V.revision?(h=[U,Q,N,H,V.revision,B,G,V.isValidating],y[26]=Q,y[27]=N,y[28]=U,y[29]=G,y[30]=H,y[31]=B,y[32]=V.isValidating,y[33]=V.revision,y[34]=h):h=y[34],(0,a.useEffect)(p,h),y[35]!==X||y[36]!==R?(g=()=>{let e=R?.status==="publishing"&&X!==R.publishRevision,t=e?r1:null,n=setTimeout(()=>{P(t)},e?200:4e3);return()=>clearTimeout(n)},y[35]=X,y[36]=R,y[37]=g):g=y[37],y[38]!==k||y[39]!==X||y[40]!==R?(f=[k,R,X],y[38]=k,y[39]=X,y[40]=R,y[41]=f):f=y[41],(0,a.useEffect)(g,f);let J=(0,tx.useTelemetry)();y[42]!==Q||y[43]!==S?._createdAt||y[44]!==I||y[45]!==B||y[46]!==M.isSyncing||y[47]!==J||y[48]!==V.isValidating||y[49]!==V.revision?(x=()=>{J.log(rZ,{publishedImmediately:!S?._createdAt,previouslyPublished:!!I}),M.isSyncing||V.isValidating||V.revision!==B?$(!0):Q()},y[42]=Q,y[43]=S?._createdAt,y[44]=I,y[45]=B,y[46]=M.isSyncing,y[47]=J,y[48]=V.isValidating,y[49]=V.revision,y[50]=x):x=y[50];let Z=x;e:{let e,t,n;if(C&&T||w&&!T){b=null;break e}if(I&&!S&&!T){let e,t,n;y[51]!==z?(e=z("action.publish.label"),y[51]=z,y[52]=e):e=y[52];let i=I?._updatedAt;y[53]!==z||y[54]!==i?(t=r2("ALREADY_PUBLISHED",i,z),y[53]=z,y[54]=i,y[55]=t):t=y[55],y[56]!==e||y[57]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},y[56]=e,y[57]=t,y[58]=n):n=y[58],b=n;break e}if(!W&&!q?.granted){let e,t,n;y[59]!==z?(e=z("action.publish.label"),y[59]=z,y[60]=e):e=y[60],y[61]!==K?(t=(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"publish-document",currentUser:K}),y[61]=K,y[62]=t):t=y[62],y[63]!==e||y[64]!==t?(n={tone:"default",icon:m.PublishIcon,label:e,title:t,disabled:!0},y[63]=e,y[64]=t,y[65]=n):n=y[65],b=n;break e}let i=!!(H||O?.transactionSyncLock?.enabled||R?.status==="publishing"||R?.status==="published"||N||D.disabled),l=i||W;y[66]!==H||y[67]!==R?.status||y[68]!==z?(e=z(R?.status==="published"?"action.publish.published.label":H||R?.status==="publishing"?"action.publish.running.label":"action.publish.draft.label"),y[66]=H,y[67]=R?.status,y[68]=z,y[69]=e):e=y[69],y[70]!==H||y[71]!==R?.status||y[72]!==z||y[73]!==Y?(t=H?z("action.publish.waiting"):R?.status==="published"||R?.status==="publishing"?null:Y,y[70]=H,y[71]=R?.status,y[72]=z,y[73]=Y,y[74]=t):t=y[74];let r=i||H?null:"Ctrl+Alt+P";y[75]!==Z||y[76]!==l||y[77]!==e||y[78]!==t||y[79]!==r?(n={disabled:l,tone:"default",label:e,icon:m.PublishIcon,title:t,shortcut:r,onHandle:Z},y[75]=Z,y[76]=l,y[77]=e,y[78]=t,y[79]=r,y[80]=n):n=y[80],b=n}return b};r4.action="publish",r4.displayName="PublishAction";let r5={NOT_PUBLISHED:"action.unpublish.disabled.not-published",NOT_READY:"action.unpublish.disabled.not-ready",LIVE_EDIT_ENABLED:"action.unpublish.disabled.live-edit-enabled"},r6=e=>{let t,n,i,l,r,c,u=(0,s.c)(22),{id:p,type:h,draft:g,liveEdit:f,release:x}=e,{unpublish:b}=(0,d.useDocumentOperation)(p,h),[y,v]=(0,a.useState)(!1);u[0]!==p||u[1]!==h?(t={id:p,type:h,permission:"unpublish"},u[0]=p,u[1]=h,u[2]=t):t=u[2];let[j,w]=(0,d.useDocumentPairPermissions)(t),S=(0,d.useCurrentUser)(),{t:I}=(0,d.useTranslation)(_),{selectedPerspective:C}=(0,d.usePerspective)(),T="drafts"===C;u[3]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{v(!1)},u[3]=n):n=u[3];let R=n;u[4]!==b?(i=()=>{v(!1),b.execute()},u[4]=b,u[5]=i):i=u[5];let P=i;e:{if(y){let e,t=g?._id||p;u[6]!==P||u[7]!==t||u[8]!==h?(e={type:"dialog",onClose:R,content:(0,o.jsx)(ao,{id:t,type:h,action:"unpublish",onCancel:R,onConfirm:P})},u[6]=P,u[7]=t,u[8]=h,u[9]=e):e=u[9],l=e;break e}l=null}let E=l;return u[10]!==S||u[11]!==E||u[12]!==T||u[13]!==w||u[14]!==f||u[15]!==j?.granted||u[16]!==x||u[17]!==I||u[18]!==b.disabled?(r=()=>x||T||f?null:w||j?.granted?{tone:"critical",icon:m.UnpublishIcon,disabled:!!b.disabled||w,label:I("action.unpublish.label"),title:b.disabled?I(r5[b.disabled]):"",onHandle:()=>v(!0),dialog:E}:{tone:"critical",icon:m.UnpublishIcon,label:"Unpublish",title:(0,o.jsx)(d.InsufficientPermissionsMessage,{context:"unpublish-document",currentUser:S}),disabled:!0},u[10]=S,u[11]=E,u[12]=T,u[13]=w,u[14]=f,u[15]=j?.granted,u[16]=x,u[17]=I,u[18]=b.disabled,u[19]=r):r=u[19],u[20]!==r?(c=r(),u[20]=r,u[21]=c):c=u[21],c};r6.action="unpublish",r6.displayName="UnpublishAction";let r8=(0,a.memo)(function(e){let t,n,i,l,r,c,u,p,m,h=(0,s.c)(38),{disabled:g,states:f}=e,{__internal_tasks:x}=(0,d.useSource)(),{editState:b}=iN(),{params:y}=lk(),v=!!y?.rev,{selectedReleaseId:j}=(0,d.usePerspective)();h[0]!==f?([t,...n]=f,h[0]=f,h[1]=t,h[2]=n):(t=h[1],n=h[2]);let[w,S]=(0,a.useState)(null);e:{let e,n,l,r;if(!t||!t.title&&!t.shortcut){i=null;break e}h[3]===Symbol.for("react.memo_cache_sentinel")?(e={maxWidth:300},h[3]=e):e=h[3],h[4]!==t.title?(n=t.title&&(0,o.jsx)(eT.Text,{size:1,children:t.title}),h[4]=t.title,h[5]=n):n=h[5],h[6]!==t.shortcut?(l=t.shortcut&&(0,o.jsx)(eC.Hotkeys,{"data-testid":"document-status-bar-hotkeys",fontSize:1,style:{marginTop:-4,marginBottom:-4},keys:String(t.shortcut).split("+").map(ol)}),h[6]=t.shortcut,h[7]=l):l=h[7],h[8]!==n||h[9]!==l?(r=(0,o.jsxs)(eT.Flex,{style:e,align:"center",gap:3,children:[n,l]}),h[8]=n,h[9]=l,h[10]=r):r=h[10],i=r}let _=i;h[11]!==b?.liveEdit||h[12]!==b?.version||h[13]!==t||h[14]!==j||h[15]!==v?(l=v?!!t:j?t&&j&&!(0,d.isSanityDefinedAction)(t):t&&(!b?.liveEdit||b?.version),h[11]=b?.liveEdit,h[12]=b?.version,h[13]=t,h[14]=j,h[15]=v,h[16]=l):l=h[16];let I=l;h[17]!==t||h[18]!==n||h[19]!==I?(r=I?n:[t,...n].filter(Boolean),h[17]=t,h[18]=n,h[19]=I,h[20]=r):r=h[20];let C=r,T=x&&x.footerAction;return h[21]!==g||h[22]!==t||h[23]!==I||h[24]!==_?(c=I&&(0,o.jsx)(eT.LayerProvider,{zOffset:200,children:(0,o.jsx)(eC.Tooltip,{disabled:!_,content:_,placement:"top",children:(0,o.jsx)(eT.Stack,{children:(0,o.jsx)(eC.Button,{"data-testid":`action-${ia(t.label)}`,disabled:g||!!t.disabled,icon:t.icon,onClick:t.onHandle,ref:S,text:t.label,tone:t.tone||"primary"})})})}),h[21]=g,h[22]=t,h[23]=I,h[24]=_,h[25]=c):c=h[25],h[26]!==g||h[27]!==C?(u=C.length>0&&(0,o.jsx)(rw,{actionStates:C,disabled:g}),h[26]=g,h[27]=C,h[28]=u):u=h[28],h[29]!==w||h[30]!==t||h[31]!==I?(p=I&&t&&t.dialog&&(0,o.jsx)(rv,{dialog:t.dialog,referenceElement:w}),h[29]=w,h[30]=t,h[31]=I,h[32]=p):p=h[32],h[33]!==T||h[34]!==c||h[35]!==u||h[36]!==p?(m=(0,o.jsxs)(eT.Flex,{align:"center",gap:1,children:[T,c,u,p]}),h[33]=T,h[34]=c,h[35]=u,h[36]=p,h[37]=m):m=h[37],m}),r7=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aI,{group:"default",children:or}),t[0]=e):e=t[0],e});function r9(e){let t,n,i=(0,s.c)(6),{connectionState:l,documentId:r}=iN();i[0]!==e.states?(t=e.states.filter(oe),i[0]=e.states,i[1]=t):t=i[1];let a=t;if(0===a.length)return null;let d="connected"!==l;return i[2]!==r||i[3]!==a||i[4]!==d?(n=(0,o.jsx)(r8,{disabled:d,states:a},r),i[2]=r,i[3]=a,i[4]=d,i[5]=n):n=i[5],n}function oe(e){return!e.action||e.action!==rd.action}let ot=(0,a.memo)(function(){let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(aI,{group:"default",children:oo}),t[0]=e):e=t[0],e});function on(e){let t,n,i,l=(0,s.c)(8),{states:r}=e,{connectionState:a,editState:d,revisionId:c}=iN();l[0]!==d?.draft||l[1]!==d?.published?(t=d?.draft||d?.published||{},l[0]=d?.draft,l[1]=d?.published,l[2]=t):t=l[2];let u=t._rev===c,p="connected"!==a||!!u;return l[3]!==r?(n=r.filter(oi).slice(-1),l[3]=r,l[4]=n):n=l[4],l[5]!==p||l[6]!==n?(i=(0,o.jsx)(r8,{disabled:p,states:n}),l[5]=p,l[6]=n,l[7]=i):i=l[7],i}function oi(e){return!!e.action&&e.action===rd.action}function ol(e){return e.slice(0,1).toUpperCase()+e.slice(1).toLowerCase()}function or(e){let{states:t}=e;return(0,o.jsx)(r9,{states:t})}function oo(e){let{states:t}=e;return(0,o.jsx)(on,{states:t})}let os={create:m.AddIcon,delete:m.TrashIcon,discardDraft:m.CloseIcon,initial:m.AddIcon,editDraft:m.EditIcon,editLive:m.EditIcon,publish:m.PublishIcon,unpublish:m.UnpublishIcon},oa=(0,eD.styled)(m.ChevronLeftIcon)`
  transition: transform 200ms;
  &[data-expanded='true'] {
    transform: rotate(-90deg);
  }
`;function od(e){let t,n,i,l,r,a=(0,s.c)(14),{isExpanded:c,onExpand:u}=e,{t:p}=(0,d.useTranslation)(_);a[0]!==c||a[1]!==u?(t=e=>{e.stopPropagation(),function(e){if(e)return;let t=document.getElementById(oI);if(t){let e=t.children[0];if(!(e.scrollHeight>e.clientHeight)){let t=getComputedStyle(e).overflowY;e.style.overflowY="hidden",setTimeout(()=>{e.style.overflowY=t},0)}}}(c),u()},a[0]=c,a[1]=u,a[2]=t):t=a[2];let m=t;return a[3]!==c?(n=(0,o.jsx)(oa,{"data-expanded":c}),a[3]=c,a[4]=n):n=a[4],a[5]!==c||a[6]!==p?(i=p(c?"timeline-item.menu.action-collapse":"timeline-item.menu.action-expand"),a[5]=c,a[6]=p,a[7]=i):i=a[7],a[8]!==i?(l={content:i},a[8]=i,a[9]=l):l=a[9],a[10]!==m||a[11]!==n||a[12]!==l?(r=(0,o.jsx)(eC.Button,{mode:"bleed",icon:n,tooltipProps:l,onClick:m}),a[10]=m,a[11]=n,a[12]=l,a[13]=r):r=a[13],r}let oc=(0,eD.styled)(eT.Stack)`
  max-width: 200px;
`,ou=(0,eD.styled)(eT.Flex)`
  max-height: ${e=>e.$maxHeight};
  min-width: 244px;
`,op=(0,eD.styled)(eT.Box)(({$visible:e})=>eD.css`
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s;

    ${e&&eD.css`
      opacity: 1;
      pointer-events: auto;
    `}
  `),om={initial:"timeline.operation.created-initial",create:"timeline.operation.created",publish:"timeline.operation.published",editLive:"timeline.operation.edited-live",editDraft:"timeline.operation.edited-draft",unpublish:"timeline.operation.unpublished",discardDraft:"timeline.operation.draft-discarded",delete:"timeline.operation.deleted"};function oh(e){let t,n,i=(0,s.c)(9),{maxLength:l,userIds:r,size:a,withTooltip:c}=e,u=void 0===c||c;if(i[0]!==r||i[1]!==u){let e;i[3]!==u?(e=e=>(0,o.jsx)(d.UserAvatar,{user:e,withTooltip:u},e),i[3]=u,i[4]=e):e=i[4],t=r.map(e),i[0]=r,i[1]=u,i[2]=t}else t=i[2];return i[5]!==l||i[6]!==a||i[7]!==t?(n=(0,o.jsx)(eT.AvatarStack,{maxLength:l,size:a,children:t}),i[5]=l,i[6]=a,i[7]=t,i[8]=n):n=i[8],n}let og=(0,eD.styled)(eT.Flex)(e=>{let t=(0,tQ.getTheme_v2)(e.theme),n=e.$color;return eD.css`
    --card-icon-color: ${t.color.avatar[n].fg};
    background-color: ${t.color.avatar[n].bg};
    box-shadow: 0 0 0 1px var(--card-bg-color);

    position: absolute;
    width: ${t.avatar.sizes[0].size}px;
    height: ${t.avatar.sizes[0].size}px;
    right: -3px;
    bottom: -3px;
    border-radius: 50%;
  `}),of={initial:"blue",create:"blue",publish:"green",editLive:"green",editDraft:"yellow",unpublish:"orange",discardDraft:"orange",delete:"red",withinSelection:"magenta"},ox={minimal:!0,useTemporalPhrase:!0},ob=(0,eD.styled)(eR.Skeleton)(e=>{let t=(0,tQ.getTheme_v2)(e.theme);return eD.css`
    width: 6ch;
    height: ${t.font.text.sizes[0].lineHeight}px;
  `}),oy=e=>{let t,n,i,l=(0,s.c)(10),{userId:r}=e,[a,c]=(0,d.useUser)(r);return l[0]!==c||l[1]!==a?(t=(0,o.jsx)(eT.Box,{children:c||!a?(0,o.jsx)(d.AvatarSkeleton,{animated:!0}):(0,o.jsx)(d.UserAvatar,{user:a})}),l[0]=c,l[1]=a,l[2]=t):t=l[2],l[3]!==c||l[4]!==a?(n=(0,o.jsx)(eT.Box,{children:c||!a?.displayName?(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(ob,{animated:!0})}):(0,o.jsx)(eT.Text,{muted:!0,size:1,children:a.displayName})}),l[3]=c,l[4]=a,l[5]=n):n=l[5],l[6]!==t||l[7]!==n||l[8]!==r?(i=(0,o.jsxs)(eT.Flex,{align:"center",gap:2,padding:1,children:[t,n]},r),l[6]=t,l[7]=n,l[8]=r,l[9]=i):i=l[9],i},ov=e=>{let t,n,i,l,r=(0,s.c)(9),{collaborators:a}=e,{t:c}=(0,d.useTranslation)("studio");return r[0]!==c?(t=c("timeline.changes.title"),r[0]=c,r[1]=t):t=r[1],r[2]!==t?(n=(0,o.jsx)(eT.Box,{padding:1,paddingBottom:2,children:(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:t})}),r[2]=t,r[3]=n):n=r[3],r[4]!==a?(i=a.map(ow),r[4]=a,r[5]=i):i=r[5],r[6]!==n||r[7]!==i?(l=(0,o.jsxs)(eT.Stack,{paddingBottom:1,children:[n,i]}),r[6]=n,r[7]=i,r[8]=l):l=r[8],l};function oj(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x,b,y,v,j,w,S,_,I=(0,s.c)(55),{chunk:C,isSelected:T,onSelect:R,collaborators:P,optionsMenu:E}=e,{t:D}=(0,d.useTranslation)("studio"),{type:k,endTimestamp:F}=C;I[0]!==k?(t=os[k],I[0]=k,I[1]=t):t=I[1];let A=t;I[2]!==C.authors?(n=Array.from(C.authors),I[2]=C.authors,I[3]=n):n=I[3];let L=n;I[4]!==P?(i=P?Array.from(P):[],I[4]=P,I[5]=i):i=I[5];let V=i,M="delete"!==k;I[6]===Symbol.for("react.memo_cache_sentinel")?(l={dateStyle:"medium",timeStyle:"short"},I[6]=l):l=I[6];let O=(0,d.useDateTimeFormat)(l);I[7]!==F?(r=new Date(F),I[7]=F,I[8]=r):r=I[8];let z=(0,d.useRelativeTime)(r||"",ox);if(I[9]!==O||I[10]!==F){let e=new Date(F);a=O.format(e),I[9]=O,I[10]=F,I[11]=a}else a=I[11];let B=a;I[12]!==C||I[13]!==M||I[14]!==R?(c=e=>{e.preventDefault(),e.stopPropagation(),M&&R(C)},I[12]=C,I[13]=M,I[14]=R,I[15]=c):c=I[15];let N=c;I[16]===Symbol.for("react.memo_cache_sentinel")?(u={position:"relative"},I[16]=u):u=I[16],I[17]!==L?(p=(0,o.jsx)(oh,{maxLength:3,userIds:L,size:2}),I[17]=L,I[18]=p):p=I[18];let H=of[k];return I[19]!==A?(m=A&&(0,o.jsx)(A,{}),I[19]=A,I[20]=m):m=I[20],I[21]!==m?(h=(0,o.jsx)(eT.Text,{size:0,children:m}),I[21]=m,I[22]=h):h=I[22],I[23]!==H||I[24]!==h?(g=(0,o.jsx)(og,{align:"center",justify:"center",$color:H,children:h}),I[23]=H,I[24]=h,I[25]=g):g=I[25],I[26]!==g||I[27]!==p?(f=(0,o.jsxs)("div",{style:u,children:[p,g]}),I[26]=g,I[27]=p,I[28]=f):f=I[28],I[29]!==D||I[30]!==k?(x=D(om[k])||(0,o.jsx)("code",{children:k}),I[29]=D,I[30]=k,I[31]=x):x=I[31],I[32]!==x?(b=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:x}),I[32]=x,I[33]=b):b=I[33],I[34]!==B||I[35]!==F||I[36]!==z?(y=(0,o.jsx)(eT.Text,{as:"time",size:1,muted:!0,dateTime:F,title:B,children:z}),I[34]=B,I[35]=F,I[36]=z,I[37]=y):y=I[37],I[38]!==b||I[39]!==y?(v=(0,o.jsxs)(eT.Stack,{space:2,children:[b,y]}),I[38]=b,I[39]=y,I[40]=v):v=I[40],I[41]!==V?(j=V.length>0&&(0,o.jsx)(eT.Flex,{flex:1,justify:"flex-end",align:"center",children:(0,o.jsx)(eC.Tooltip,{placement:"top",content:(0,o.jsx)(ov,{collaborators:V}),portal:!0,children:(0,o.jsx)(eT.Box,{paddingLeft:2,paddingY:2,children:(0,o.jsx)(oh,{maxLength:3,userIds:V,size:0,withTooltip:!1})})})}),I[41]=V,I[42]=j):j=I[42],I[43]!==f||I[44]!==v||I[45]!==j?(w=(0,o.jsxs)(eT.Flex,{align:"center",gap:3,children:[f,v,j]}),I[43]=f,I[44]=v,I[45]=j,I[46]=w):w=I[46],I[47]!==C.id||I[48]!==N||I[49]!==T||I[50]!==w?(S=(0,o.jsx)(eT.Card,{as:"button",onClick:N,padding:2,pressed:T,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-id":C.id,children:w}),I[47]=C.id,I[48]=N,I[49]=T,I[50]=w,I[51]=S):S=I[51],I[52]!==E||I[53]!==S?(_=(0,o.jsxs)(eT.Flex,{align:"center",gap:1,children:[S,E]}),I[52]=E,I[53]=S,I[54]=_):_=I[54],_}function ow(e){return(0,o.jsx)(oy,{userId:e},e)}let oS=e=>"publish"!==e.type,o_=e=>"publish"===e.type,oI="timeline-list-wrapper",oC=e=>{let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j=(0,s.c)(51),{chunks:w,hasMoreChunks:S,lastChunk:_,onLoadMore:I,onSelect:C,listMaxHeight:T}=e,R=void 0===T?"calc(100vh - 280px)":T,[P,E]=(0,a.useState)(!1),{t:D}=(0,d.useTranslation)("studio"),k=_?.id;j[0]!==w?(t=function(e){let t=[];for(let n of e){if(o_(n)){t.push({...n,type:"publish",children:[],collaborators:new Set});continue}if(oS(n)){let e=function(e){let t=null;for(let n=e.length-1;n>=0;n--){let i=e[n];if(o_(i)){t=i;break}if("editDraft"!==i.type)break}return t}(t);if("editDraft"===n.type&&e?.type==="publish"){Array.from(n.authors).forEach(t=>{e.collaborators.add(t)}),e.children.push(n.id),t.push({...n,parentId:e.id});continue}}oS(n)&&t.push(n)}return t}(w),j[0]=w,j[1]=t):t=j[1];let F=t;j[2]!==F||j[3]!==k?(n=()=>{if(k){let e=F.find(e=>e.id===k);if(e&&oS(e)&&e.parentId)return new Set([e.parentId])}return new Set},j[2]=F,j[3]=k,j[4]=n):n=j[4];let[A,L]=(0,a.useState)(n);if(j[5]!==F||j[6]!==k?(i=()=>{if(k){let e=F.find(e=>e.id===k);if(e&&oS(e)&&e.parentId){let t=e.parentId;L(e=>{if(e.has(t))return e;let n=new Set(e);return n.add(t),n})}}},l=[F,k],j[5]=F,j[6]=k,j[7]=i,j[8]=l):(i=j[7],l=j[8]),(0,a.useEffect)(i,l),j[9]!==F||j[10]!==A){let e;j[12]!==A?(e=e=>!!o_(e)||!e.parentId||A.has(e.parentId),j[12]=A,j[13]=e):e=j[13],r=F.filter(e),j[9]=F,j[10]=A,j[11]=r}else r=j[11];let V=r;j[14]!==V.length||j[15]!==S||j[16]!==I?(c=()=>{V.length<16&&S&&I()},j[14]=V.length,j[15]=S,j[16]=I,j[17]=c):c=j[17],j[18]!==V||j[19]!==S||j[20]!==I?(u=[V,S,I],j[18]=V,j[19]=S,j[20]=I,j[21]=u):u=j[21],(0,a.useEffect)(c,u),j[22]===Symbol.for("react.memo_cache_sentinel")?(p=e=>()=>L(t=>{let n=new Set(t);return t.has(e)?n.delete(e):n.add(e),n}),j[22]=p):p=j[22];let M=p;j[23]!==V||j[24]!==k?(m=k?V.findIndex(e=>e.id===k):-1,j[23]=V,j[24]=k,j[25]=m):m=j[25];let O=m;j[26]!==w||j[27]!==C?(h=e=>{let t=w.find(t=>t.id===e.id);t?C(t):(console.error("TimelineItem: chunk not found"),C(e))},j[26]=w,j[27]=C,j[28]=h):h=j[28];let z=h;j[29]!==A||j[30]!==V.length||j[31]!==z||j[32]!==S||j[33]!==k?(g=(e,t)=>{let{activeIndex:n}=t;return(0,o.jsxs)(eT.Box,{paddingBottom:1,paddingTop:+(0===n),paddingRight:1,paddingLeft:oS(e)&&e.parentId?4:1,children:[(0,o.jsx)(oj,{chunk:e,isSelected:k===e.id,onSelect:z,collaborators:o_(e)?e.collaborators:void 0,optionsMenu:o_(e)&&e.children.length>0?(0,o.jsx)(od,{isExpanded:A.has(e.id),onExpand:M(e.id)}):null}),n===V.length-1&&S&&(0,o.jsx)(d.LoadingBlock,{})]})},j[29]=A,j[30]=V.length,j[31]=z,j[32]=S,j[33]=k,j[34]=g):g=j[34];let B=g;j[35]===Symbol.for("react.memo_cache_sentinel")?(f=()=>E(!0),x=[],j[35]=f,j[36]=x):(f=j[35],x=j[36]),(0,a.useEffect)(f,x);let N=!O||P;return j[37]!==V.length||j[38]!==D?(b=0===V.length&&(0,o.jsxs)(oc,{padding:3,space:3,children:[(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:D("timeline.error.no-document-history-title")}),(0,o.jsx)(eT.Text,{muted:!0,size:1,children:D("timeline.error.no-document-history-description")})]}),j[37]=V.length,j[38]=D,j[39]=b):b=j[39],j[40]!==V||j[41]!==R||j[42]!==I||j[43]!==B||j[44]!==O||j[45]!==D?(y=V.length>0&&(0,o.jsx)(ou,{direction:"column",$maxHeight:R,id:oI,children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:D("timeline.list.aria-label"),autoFocus:"list",initialIndex:O,initialScrollAlign:"center",itemHeight:57,items:V,onEndReached:I,onEndReachedIndexOffset:20,overscan:5,renderItem:B,wrapAround:!1})}),j[40]=V,j[41]=R,j[42]=I,j[43]=B,j[44]=O,j[45]=D,j[46]=y):y=j[46],j[47]!==N||j[48]!==b||j[49]!==y?(v=(0,o.jsxs)(op,{$visible:N,"data-ui":"timeline",children:[b,y]}),j[47]=N,j[48]=b,j[49]=y,j[50]=v):v=j[50],v};function oT(e){let t,n,i,l,r,a,c=(0,s.c)(14),{versionError:u}=e,{t:p}=(0,d.useTranslation)("studio");return c[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(d.TextWithTone,{tone:"critical",children:(0,o.jsx)(m.ErrorOutlineIcon,{})}),c[0]=t):t=c[0],c[1]!==p||c[2]!==u?(n=p(u?"timeline.error.load-document-changes-version-title":"timeline.error.load-document-changes-title"),c[1]=p,c[2]=u,c[3]=n):n=c[3],c[4]!==n?(i=(0,o.jsx)(d.TextWithTone,{size:1,tone:"critical",weight:"medium",children:n}),c[4]=n,c[5]=i):i=c[5],c[6]!==p||c[7]!==u?(l=p(u?"timeline.error.load-document-changes-version-description":"timeline.error.load-document-changes-description"),c[6]=p,c[7]=u,c[8]=l):l=c[8],c[9]!==l?(r=(0,o.jsx)(d.TextWithTone,{size:1,tone:"critical",children:l}),c[9]=l,c[10]=r):r=c[10],c[11]!==i||c[12]!==r?(a=(0,o.jsxs)(eT.Flex,{align:"flex-start",gap:3,padding:4,children:[t,(0,o.jsxs)(eT.Stack,{space:4,children:[i,r]})]}),c[11]=i,c[12]=r,c[13]=a):a=c[13],a}let oR=(0,eD.styled)(eC.Popover)`
  overflow: hidden;
  overflow: clip;
`,oP="timeline-menu";function oE(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(62),{chunk:S,mode:_,placement:I}=e,{setTimelineRange:C,timelineError:T,ready:R,timelineStore:P}=iN(),[E,D]=(0,a.useState)(!1),[k,F]=(0,a.useState)(null),[A,L]=(0,a.useState)(null),V=(0,eR.useToast)(),M=(0,d.useTimelineSelector)(P,oL),O=(0,d.useTimelineSelector)(P,oA),z=(0,d.useTimelineSelector)(P,oF),B=(0,d.useTimelineSelector)(P,ok),N=(0,d.useTimelineSelector)(P,oD),{t:H}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{D(!0)},w[0]=t):t=w[0];let $=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{D(!1)},w[1]=n):n=w[1];let U=n;w[2]!==k||w[3]!==E?(i=e=>{E&&("Escape"===e.key||"Tab"===e.key)&&(U(),k?.focus())},w[2]=k,w[3]=E,w[4]=i):i=w[4],(0,eT.useGlobalKeyDown)(i),w[5]!==k||w[6]!==A?(l=()=>[k,A],w[5]=k,w[6]=A,w[7]=l):l=w[7],(0,eT.useClickOutsideEvent)(E&&U,l),w[8]!==C||w[9]!==H||w[10]!==P||w[11]!==V?(r=e=>{try{(()=>{let[t,n]=P?.findRangeForRev(e)||[null,null];C(t,n)})()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:H("timeline.error.unable-to-load-revision")})}},w[8]=C,w[9]=H,w[10]=P,w[11]=V,w[12]=r):r=w[12];let G=r;w[13]!==C||w[14]!==H||w[15]!==P||w[16]!==V?(c=e=>{try{(()=>{let[t,n]=P?.findRangeForSince(e)||[null,null];C(t,n)})()}catch(e){V.push({closable:!0,description:e.message,status:"error",title:H("timeline.error.unable-to-load-revision")})}},w[13]=C,w[14]=H,w[15]=P,w[16]=V,w[17]=c):c=w[17];let q=c;w[18]!==O||w[19]!==P?(u=()=>{O||P?.loadMore()},w[18]=O,w[19]=P,w[20]=u):u=w[20];let W=u;e:{let e,t;if(T){let e;w[21]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oT,{}),w[21]=e):e=w[21],p=e;break e}if("rev"===_){let e;w[22]!==M||w[23]!==W||w[24]!==z||w[25]!==B||w[26]!==G?(e=(0,o.jsx)(oC,{chunks:M,hasMoreChunks:z,lastChunk:B,onLoadMore:W,onSelect:G}),w[22]=M,w[23]=W,w[24]=z,w[25]=B,w[26]=G,w[27]=e):e=w[27],p=e;break e}w[28]!==M||w[29]!==B?(e=B?M.filter(e=>e.index<B.index):M,w[28]=M,w[29]=B,w[30]=e):e=w[30];let n=e;w[31]!==n||w[32]!==W||w[33]!==z||w[34]!==q||w[35]!==N?(t=(0,o.jsx)(oC,{chunks:n,hasMoreChunks:z,lastChunk:N,onLoadMore:W,onSelect:q}),w[31]=n,w[32]=W,w[33]=z,w[34]=q,w[35]=N,w[36]=t):t=w[36],p=t}let K=p;if(w[37]!==S||w[38]!==H){let e={timestamp:{dateStyle:"medium",timeStyle:"short"}};h=S?H(om[S.type],{context:"timestamp",timestamp:new Date(S?.endTimestamp),formatParams:e}):H("timeline.latest-revision"),g=S?H("timeline.since",{timestamp:new Date(S?.endTimestamp),formatParams:e}):H("timeline.since-version-missing"),w[37]=S,w[38]=H,w[39]=h,w[40]=g}else h=w[39],g=w[40];let Y="rev"===_?h:g;w[41]!==A?(f={[oP]:A},w[41]=A,w[42]=f):f=w[42];let X=f,Q=E&&K,J=E?"timeline-menu-close-button":"timeline-menu-open-button",Z=!R,ee=E?U:$;return w[43]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[43]=x):x=w[43],w[44]!==Y||w[45]!==R||w[46]!==H?(b=R?Y:H("timeline.loading-history"),w[44]=Y,w[45]=R,w[46]=H,w[47]=b):b=w[47],w[48]!==E||w[49]!==J||w[50]!==Z||w[51]!==ee||w[52]!==b?(y=(0,o.jsx)(eT.Flex,{width:"fill",children:(0,o.jsx)(eC.Button,{"data-testid":J,disabled:Z,mode:"ghost",onClick:ee,ref:F,selected:E,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[48]=E,w[49]=J,w[50]=Z,w[51]=ee,w[52]=b,w[53]=y):y=w[53],w[54]!==E||w[55]!==I||w[56]!==Q||w[57]!==y?(v=(0,o.jsx)(oR,{"data-testid":"timeline-menu",constrainSize:!0,content:Q,"data-ui":"versionMenu",open:E,placement:I,matchReferenceWidth:!0,portal:!0,ref:L,children:y}),w[54]=E,w[55]=I,w[56]=Q,w[57]=y,w[58]=v):v=w[58],w[59]!==X||w[60]!==v?(j=(0,o.jsx)(eT.PortalProvider,{__unstable_elements:X,children:v}),w[59]=X,w[60]=v,w[61]=j):j=w[61],j}function oD(e){return e.sinceTime}function ok(e){return e.realRevChunk}function oF(e){return e.hasMoreChunks}function oA(e){return e.isLoading}function oL(e){return e.chunks}let oV=(0,eD.styled)(eF.motion.path)`
  transform-origin: center;
`,oM=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(eF.motion.circle,{fill:"none",r:"8",cx:"12.5",cy:"12.5",strokeWidth:"1.2",...e}),n[0]=e,n[1]=t):t=n[1],t},oO=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(oV,{fill:"none",d:"M14 17.5619L11.5 20.5L14.5 23.0619M11 7.43811L13.5 4.50001L10.5 1.93811",...e}),n[0]=e,n[1]=t):t=n[1],t},oz=e=>{let t,n=(0,s.c)(2);return n[0]!==e?(t=(0,o.jsx)(eF.motion.path,{d:"M9.5 12.1316L11.7414 14.5L16 10",...e}),n[0]=e,n[1]=t):t=n[1],t},oB=eD.keyframes`
  0% {
    transform: rotate(0);
  }
  100% {
    transform: rotate(360deg);
  }
`,oN=eD.styled.g`
  transform-origin: center;

  &[data-rotate] {
    animation: ${oB} 1s ease-in-out infinite;
  }
`,oH={syncing:{scale:1,transition:{duration:0}},saved:{scale:[1,.8,1.2,.9,1.1,.95,1.05,.99,1],transition:{duration:.5,delay:.2}},changes:{transition:{duration:0}}},o$={syncing:{strokeDasharray:"0, 0, 23, 3, 23, 3",strokeDashoffset:10,opacity:1,transition:{duration:0}},saved:{strokeDasharray:"0, 0, 23, 0, 23, 0",strokeDashoffset:10,opacity:1,transition:{duration:.2}},changes:{strokeDasharray:"0, 60, 23, 0, 23, 0",strokeDashoffset:0,opacity:0,transition:{duration:.5}}},oU={syncing:{opacity:1,transition:{duration:0}},saved:{opacity:0,transition:{duration:.2}},changes:{opacity:0}},oG={syncing:{pathLength:0,transition:{duration:0}},saved:{pathLength:1,transition:{delay:.4,duration:.3}},changes:{pathLength:0,transition:{duration:.2}}};function oq(e){let t,n,i,l,r,a=(0,s.c)(13),{status:d}=e;if(!d)return null;let c="changes"===d?void 0:"";return a[0]!==d?(t=(0,o.jsx)(oO,{variants:oU,initial:d,animate:d}),n=(0,o.jsx)(oM,{variants:o$,initial:d,animate:d}),a[0]=d,a[1]=t,a[2]=n):(t=a[1],n=a[2]),a[3]!==c||a[4]!==t||a[5]!==n?(i=(0,o.jsxs)(oN,{"data-rotate":c,children:[t,n]}),a[3]=c,a[4]=t,a[5]=n,a[6]=i):i=a[6],a[7]!==d?(l=(0,o.jsx)(oz,{variants:oG,initial:d,animate:d}),a[7]=d,a[8]=l):l=a[8],a[9]!==d||a[10]!==i||a[11]!==l?(r=(0,o.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",stroke:"currentColor",strokeWidth:"1.2","data-sanity-icon":"animated-status-icon",children:(0,o.jsxs)(eF.motion.g,{variants:oH,initial:d,animate:d,children:[i,l]})}),a[9]=d,a[10]=i,a[11]=l,a[12]=r):r=a[12],r}let oW={saved:{i18nKey:"status-bar.document-status-pulse.status.saved.text",tone:"positive"},syncing:{i18nKey:"status-bar.document-status-pulse.status.syncing.text",tone:"default"}},oK=e=>{let t,n,i,l,r,a=(0,s.c)(13),{status:c}=e,{t:u}=(0,d.useTranslation)(_);if("saved"!==c&&"syncing"!==c)return null;let p=oW[c];return a[0]!==c?(t=(0,o.jsx)(oq,{status:c}),a[0]=c,a[1]=t):t=a[1],a[2]!==p.tone||a[3]!==t?(n=(0,o.jsx)(d.TextWithTone,{size:1,tone:p.tone,children:t}),a[2]=p.tone,a[3]=t,a[4]=n):n=a[4],a[5]!==p.i18nKey||a[6]!==u?(i=u(p.i18nKey),a[5]=p.i18nKey,a[6]=u,a[7]=i):i=a[7],a[8]!==i?(l=(0,o.jsx)(eT.Text,{muted:!0,size:1,children:i}),a[8]=i,a[9]=l):l=a[9],a[10]!==n||a[11]!==l?(r=(0,o.jsxs)(eT.Flex,{align:"center",gap:2,"data-testid":"pane-footer-document-status-pulse",children:[n,l]}),a[10]=n,a[11]=l,a[12]=r):r=a[12],r},oY={minimal:!0,useTemporalPhrase:!0},oX=eF.motion.create(eT.Button),oQ=eF.motion.create(eT.Box);function oJ(e){return"timeline.operation.published"===e?"document-status.last-published":e}let oZ=()=>{let e,t,n=(0,s.c)(2);return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(d.AvatarSkeleton,{$size:0,animated:!0})}),n[0]=e):e=n[0],n[1]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsxs)(eT.Flex,{align:"center",gap:3,paddingLeft:1,paddingRight:2,paddingY:2,children:[e,(0,o.jsx)(eR.Skeleton,{animated:!0,style:{width:"80px",height:"15px"},radius:2})]}),n[1]=t):t=n[1],t},o0=e=>{let t,n,i,l,r,a,c,u,p=(0,s.c)(17),{author:m,translationKey:h,timestamp:g}=e,{onHistoryOpen:f,inspector:x,onHistoryClose:b}=iN(),{t:y}=(0,d.useTranslation)(),v=(0,d.useRelativeTime)(void 0===g?"":g,oY);p[0]===Symbol.for("react.memo_cache_sentinel")?(t={opacity:1},n={opacity:0},i={opacity:0},p[0]=t,p[1]=n,p[2]=i):(t=p[0],n=p[1],i=p[2]);let j=x?.name===iJ?b:f;return p[3]!==m?(l=m&&(0,o.jsx)("div",{style:{margin:-5},children:(0,o.jsx)(d.UserAvatar,{user:m,size:0})}),p[3]=m,p[4]=l):l=p[4],p[5]!==y||p[6]!==h?(r=y(h),p[5]=y,p[6]=h,p[7]=r):r=p[7],p[8]!==v||p[9]!==r?(a=(0,o.jsxs)(eT.Text,{muted:!0,size:1,children:[r," ",v]}),p[8]=v,p[9]=r,p[10]=a):a=p[10],p[11]!==l||p[12]!==a?(c=(0,o.jsxs)(eT.Flex,{align:"center",flex:"none",gap:3,children:[l,a]}),p[11]=l,p[12]=a,p[13]=c):c=p[13],p[14]!==j||p[15]!==c?(u=(0,o.jsx)(oX,{"data-testid":"pane-footer-document-status",animate:t,initial:n,exit:i,mode:"bleed",onClick:j,padding:2,muted:!0,children:c}),p[14]=j,p[15]=c,p[16]=u):u=p[16],u},o1=()=>{let e,t,n=(0,s.c)(6),{editState:i}=iN(),{selectedPerspective:l}=(0,d.usePerspective)();n[0]!==i||n[1]!==l?(e=(0,d.isPublishedPerspective)(l)&&i?.published?._updatedAt?{translationKey:d.TIMELINE_ITEM_I18N_KEY_MAPPING.published.createDocumentVersion,timestamp:i.published._updatedAt}:i?.version?._updatedAt?{translationKey:i.version._updatedAt===i.version._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.version.editDocumentVersion,timestamp:i.version._updatedAt}:i?.draft?._updatedAt?{translationKey:i.draft._updatedAt===i.draft._createdAt?d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.createDocumentVersion:d.TIMELINE_ITEM_I18N_KEY_MAPPING.draft.editDocumentVersion,timestamp:i.draft._updatedAt}:null,n[0]=i,n[1]=l,n[2]=e):e=n[2];let r=e;return r?(n[3]!==r.timestamp||n[4]!==r.translationKey?(t=(0,o.jsx)(o0,{author:"",translationKey:r.translationKey,timestamp:r.timestamp}),n[3]=r.timestamp,n[4]=r.translationKey,n[5]=t):t=n[5],t):null},o2=()=>{let e,t,n=(0,s.c)(8),{events:i,loading:l}=(0,d.useEvents)(),r=i?.[0];if(!r&&l){let e;return n[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oZ,{}),n[0]=e):e=n[0],e}if(!r){let e;return n[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o1,{}),n[1]=e):e=n[1],e}let a=r.author,c=d.TIMELINE_ITEM_I18N_KEY_MAPPING[r.documentVariantType][r.type];return n[2]!==c?(e=oJ(c),n[2]=c,n[3]=e):e=n[3],n[4]!==r.author||n[5]!==r.timestamp||n[6]!==e?(t=(0,o.jsx)(o0,{author:a,translationKey:e,timestamp:r.timestamp}),n[4]=r.author,n[5]=r.timestamp,n[6]=e,n[7]=t):t=n[7],t},o3=()=>{let e,t,n,i=(0,s.c)(10),{timelineStore:l}=iN(),r=(0,d.useTimelineSelector)(l,o5),a=(0,d.useTimelineSelector)(l,o6),c=r?.[0];if(!c&&a){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oZ,{}),i[0]=e):e=i[0],e}if(!c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(o1,{}),i[1]=e):e=i[1],e}i[2]!==c.authors?(e=Array.from(c.authors),i[2]=c.authors,i[3]=e):e=i[3];let u=e[0],p=om[c.type];return i[4]!==p?(t=oJ(p),i[4]=p,i[5]=t):t=i[5],i[6]!==u||i[7]!==c.endTimestamp||i[8]!==t?(n=(0,o.jsx)(o0,{author:u,translationKey:t,timestamp:c.endTimestamp}),i[6]=u,i[7]=c.endTimestamp,i[8]=t,i[9]=n):n=i[9],n};function o4(){let e,t,n,i,l,r,c,u=(0,s.c)(18),{documentId:p,documentType:m,editState:h,value:g}=iN(),[f,x]=(0,a.useState)(null),b=(0,d.useSource)().beta?.eventsAPI?.documents,y=(0,d.useSyncState)(p,m,h?.release),v=g?._updatedAt;return u[0]!==f||u[1]!==y.isSyncing?(e=()=>{if("syncing"===f&&!y.isSyncing){let e=setTimeout(()=>x("saved"),1e3);return()=>clearTimeout(e)}if("saved"===f){let e=setTimeout(()=>x(null),3e3);return()=>clearTimeout(e)}},u[0]=f,u[1]=y.isSyncing,u[2]=e):e=u[2],u[3]!==v||u[4]!==f||u[5]!==y.isSyncing?(t=[f,v,y.isSyncing],u[3]=v,u[4]=f,u[5]=y.isSyncing,u[6]=t):t=u[6],(0,a.useEffect)(e,t),u[7]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{x(null)},u[7]=n):n=u[7],u[8]!==p?(i=[p],u[8]=p,u[9]=i):i=u[9],(0,a.useLayoutEffect)(n,i),u[10]!==y.isSyncing?(l=()=>{y.isSyncing&&x("syncing")},u[10]=y.isSyncing,u[11]=l):l=u[11],u[12]!==v||u[13]!==y.isSyncing?(r=[y.isSyncing,v],u[12]=v,u[13]=y.isSyncing,u[14]=r):r=u[14],(0,a.useLayoutEffect)(l,r),u[15]!==b||u[16]!==f?(c=(0,o.jsx)(eA.AnimatePresence,{children:f?(0,o.jsx)(oQ,{paddingLeft:2,animate:{opacity:1},initial:{opacity:0},exit:{opacity:0},children:(0,o.jsx)(oK,{status:f||void 0})}):(0,o.jsx)(o.Fragment,{children:b?(0,o.jsx)(o2,{}):(0,o.jsx)(o3,{})})}),u[15]=b,u[16]=f,u[17]=c):c=u[17],c}function o5(e){return e.chunks}function o6(e){return e.isLoading}let o8=(0,eD.styled)(eT.Text)`
  color: var(--card-muted-fg-color);

  em {
    color: var(--card-fg-color);
    font-weight: 500;
    font-style: normal;
  }
`;function o7(){let e,t,n,i,l=(0,s.c)(9),{displayed:r,revisionNotFound:c}=iN(),p=(0,a.useContext)(u.EventsContext),h=p?.revision,g=p?.events.find(e=>e.id===h?.revisionId),{t:f}=(0,d.useTranslation)(),x=g?.timestamp||r?._updatedAt||r?._createdAt,b=x?(0,o.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-from",values:{date:(0,tX.format)(new Date(x),"MMM d, yyyy '@' pp")}}):null;l[0]!==b?(e={name:"revision",text:b,tone:"caution"},l[0]=b,l[1]=e):e=l[1];let y=e;return l[2]===Symbol.for("react.memo_cache_sentinel")?(t=(0,o.jsx)(eT.Box,{flex:"none",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(m.RestoreIcon,{})})}),l[2]=t):t=l[2],l[3]!==y||l[4]!==c||l[5]!==f?(n=c?(0,o.jsx)(d.Translate,{t:f,i18nKey:"document-status.revision-not-found"}):y.text,l[3]=y,l[4]=c,l[5]=f,l[6]=n):n=l[6],l[7]!==n?(i=(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(eT.Flex,{flex:1,gap:3,padding:2,children:[t,(0,o.jsx)(eT.Box,{flex:1,children:(0,o.jsx)(o8,{size:1,textOverflow:"ellipsis",children:n})})]})}),l[7]=n,l[8]=i):i=l[8],i}let o9=eF.motion.create(eT.Card);function se(e){let t,n,i,l,r,c,u,p,m=(0,s.c)(22),{actionsBoxRef:h,createLinkMetadata:g}=e,{editState:f,onChange:x,revisionNotFound:b}=iN(),{params:y}=lk(),v=void 0===y?iY:y,{selectedPerspective:j}=(0,d.usePerspective)(),{title:w}=i2(),S=(0,d.useSanityCreateConfig)().components?.documentLinkedActions,_=!!v.rev,[I,C]=(0,a.useState)(null),[T,R]=(0,a.useState)(null);m[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{C(e.contentRect.width<480)},m[0]=t):t=m[0];let P=t;m[1]!==T?(n={element:T,onResize:P},m[1]=T,m[2]=n):n=m[2],function(e){let t,n,i=(0,s.c)(4),{element:l,onResize:r}=e;i[0]!==l||i[1]!==r?(t=()=>(l&&d.resizeObserver.observe(l,r),()=>{l&&d.resizeObserver.unobserve(l)}),n=[l,r],i[0]=l,i[1]=r,i[2]=t,i[3]=n):(t=i[2],n=i[3]),(0,a.useLayoutEffect)(t,n)}(n);e:{let e=!!(f?.ready&&"boolean"==typeof I);if(j){if((0,d.isPublishedPerspective)(j)){i=e&&!!f?.published;break e}if((0,d.isReleaseDocument)(j)){i=e&&!!f?.version;break e}}i=e}let E=i;if(g&&(0,d.isSanityCreateLinked)(g)&&S){let e;m[3]!==S||m[4]!==g||m[5]!==x||m[6]!==w?(e=(0,o.jsx)(S,{metadata:g,panelPortalElementId:l6,onDocumentChange:x,documentTitle:w}),m[3]=S,m[4]=g,m[5]=x,m[6]=w,m[7]=e):e=m[7],l=e}else if(_){let e;m[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(ot,{}),m[8]=e):e=m[8],l=e}else{let e;m[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(r7,{}),m[9]=e):e=m[9],l=e}if(_&&b)return null;let D=_?"revision":"published";m[10]===Symbol.for("react.memo_cache_sentinel")?(r={opacity:.2},m[10]=r):r=m[10],m[11]===Symbol.for("react.memo_cache_sentinel")?(c={opacity:1,transition:{duration:.3}},m[11]=c):c=m[11];let k=_?"caution":void 0;return m[12]!==l||m[13]!==h||m[14]!==I||m[15]!==E||m[16]!==_?(u=E&&(0,o.jsxs)(eT.Flex,{align:"stretch",gap:1,justify:"space-between",paddingLeft:+!_,paddingRight:+!_,children:[(0,o.jsxs)(eT.Flex,{align:"center",flex:1,gap:I?2:3,wrap:"wrap",paddingRight:3,children:[(0,o.jsxs)(eT.Flex,{align:"center",children:[_?(0,o.jsx)(o7,{}):(0,o.jsx)(o4,{}),(0,o.jsx)(rO,{})]}),(0,o.jsx)(rH,{})]}),(0,o.jsxs)(eT.Flex,{align:"flex-start",justify:"flex-end",ref:h,style:{flexShrink:0,marginLeft:"auto"},children:[(0,o.jsx)(rO,{}),l]})]}),m[12]=l,m[13]=h,m[14]=I,m[15]=E,m[16]=_,m[17]=u):u=m[17],m[18]!==D||m[19]!==k||m[20]!==u?(p=(0,o.jsx)(o9,{initial:r,animate:c,tone:k,radius:3,ref:R,sizing:"border",padding:2,children:u},D),m[18]=D,m[19]=k,m[20]=u,m[21]=p):p=m[21],p}let st=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m,h,g,f,x=(0,s.c)(26);x[0]!==e?({actionsBoxElement:t,activeIndex:n,as:m,children:i,id:l,onActionStart:r,onKeyDown:a,rootRef:u,states:p,...c}=e,x[0]=e,x[1]=t,x[2]=n,x[3]=i,x[4]=l,x[5]=r,x[6]=a,x[7]=c,x[8]=u,x[9]=p,x[10]=m):(t=x[1],n=x[2],i=x[3],l=x[4],r=x[5],a=x[6],c=x[7],u=x[8],p=x[9],m=x[10]);let b=void 0===m?"div":m,y=p[n];x[11]!==r||x[12]!==a||x[13]!==p?(h=e=>{let t=p.filter(t=>t.shortcut&&(0,tC.isHotkey)(t.shortcut,e)),n=t[0];if(t.length>1&&console.warn(`Keyboard shortcut conflict: More than one document action matches the shortcut "${n.shortcut}"`),n&&!n.disabled&&n.onHandle){e.preventDefault(),n.onHandle(),r(p.indexOf(n));return}a&&a(e)},x[11]=r,x[12]=a,x[13]=p,x[14]=h):h=x[14];let v=h;return x[15]!==t||x[16]!==y?(g=y&&y.dialog&&(0,o.jsx)(d.LegacyLayerProvider,{zOffset:"paneFooter",children:(0,o.jsx)(rv,{dialog:y.dialog,referenceElement:t})}),x[15]=t,x[16]=y,x[17]=g):g=x[17],x[18]!==b||x[19]!==i||x[20]!==v||x[21]!==l||x[22]!==c||x[23]!==u||x[24]!==g?(f=(0,o.jsxs)(b,{id:l,onKeyDown:v,tabIndex:-1,...c,ref:u,children:[i,g]}),x[18]=b,x[19]=i,x[20]=v,x[21]=l,x[22]=c,x[23]=u,x[24]=g,x[25]=f):f=x[25],f}),sn=(0,a.memo)(e=>{let t,n,i,l,r,d,c=(0,s.c)(12);c[0]!==e?({actionsBoxElement:t,as:l,children:n,...i}=e,c[0]=e,c[1]=t,c[2]=n,c[3]=i,c[4]=l):(t=c[1],n=c[2],i=c[3],l=c[4]);let u=void 0===l?"div":l,[p,m]=(0,a.useState)(-1);c[5]===Symbol.for("react.memo_cache_sentinel")?(r=e=>{m(e)},c[5]=r):r=c[5];let h=r;return c[6]!==t||c[7]!==p||c[8]!==u||c[9]!==n||c[10]!==i?(d=(0,o.jsx)(aI,{children:e=>{let{states:l}=e;return(0,o.jsx)(st,{...i,activeIndex:p,actionsBoxElement:t,as:u,onActionStart:h,states:l,children:n})}}),c[6]=t,c[7]=p,c[8]=u,c[9]=n,c[10]=i,c[11]=d):d=c[11],d});sn.displayName="Memo(DocumentActionShortcuts)";let si=()=>{let e,t=(0,s.c)(1);return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(m.CheckmarkIcon,{style:{visibility:"hidden"}}),t[0]=e):e=t[0],e};function sl(e){let t,n,i,l,r,a,c,u=(0,s.c)(23),{documentType:p,value:m,currentMinWidth:h,paneKey:g,minWidth:f}=e,{t:x}=(0,d.useTranslation)();return u[0]!==p?(t={documentType:p},u[0]=p,u[1]=t):t=u[1],u[2]!==x||u[3]!==t?(n=(0,o.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.title",values:t}),u[2]=x,u[3]=t,u[4]=n):n=u[4],u[5]!==p||u[6]!==x?(i=p&&(0,o.jsx)(eT.Text,{as:"p",children:(0,o.jsx)(d.Translate,{t:x,i18nKey:"panes.document-pane.document-unknown-type.text",values:{documentType:p}})}),u[5]=p,u[6]=x,u[7]=i):i=u[7],u[8]!==p||u[9]!==x?(l=!p&&(0,o.jsx)(eT.Text,{as:"p",children:x("panes.document-pane.document-unknown-type.without-schema.text")}),u[8]=p,u[9]=x,u[10]=l):l=u[10],u[11]!==m?(r=d.isDev&&m&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eT.Text,{as:"p",children:"Here is the JSON representation of the document:"}),(0,o.jsx)(eT.Card,{padding:3,overflow:"auto",radius:2,shadow:1,tone:"inherit",children:(0,o.jsx)(eT.Code,{language:"json",size:[1,1,2],children:JSON.stringify(m,null,2)})})]}),u[11]=m,u[12]=r):r=u[12],u[13]!==i||u[14]!==l||u[15]!==r?(a=(0,o.jsxs)(eT.Stack,{space:4,children:[i,l,r]}),u[13]=i,u[14]=l,u[15]=r,u[16]=a):a=u[16],u[17]!==h||u[18]!==f||u[19]!==g||u[20]!==n||u[21]!==a?(c=(0,o.jsx)(iV,{currentMinWidth:h,flex:2.5,minWidth:f,paneKey:g,title:n,tone:"caution",children:a}),u[17]=h,u[18]=f,u[19]=g,u[20]=n,u[21]=a,u[22]=c):c=u[22],c}let sr=["fixed","fixed","absolute"];function so(e){let t,n,i,l,r,a,c=(0,s.c)(16),{documentPanelPortalElement:u,setFooterElement:p,setActionsBoxElement:m}=e,h=(0,d.useZIndex)(),{value:g}=iN();c[0]!==u?(t={[l6]:u},c[0]=u,c[1]=t):t=c[1];let f=t;c[2]!==g?(n=(0,d.getSanityCreateLinkMetadata)(g),c[2]=g,c[3]=n):n=c[3];let x=n;return c[4]!==x||c[5]!==m?(i=(0,o.jsx)(eC.TooltipDelayGroupProvider,{children:(0,o.jsx)(se,{actionsBoxRef:m,createLinkMetadata:x})}),c[4]=x,c[5]=m,c[6]=i):i=c[6],c[7]!==p||c[8]!==i?(l=(0,o.jsx)(iv,{ref:p,padding:1,children:i}),c[7]=p,c[8]=i,c[9]=l):l=c[9],c[10]!==l||c[11]!==h.portal?(r=(0,o.jsx)(eR.DialogProvider,{position:sr,zOffset:h.portal,children:l}),c[10]=l,c[11]=h.portal,c[12]=r):r=c[12],c[13]!==f||c[14]!==r?(a=(0,o.jsx)(eT.PortalProvider,{__unstable_elements:f,children:r}),c[13]=f,c[14]=r,c[15]=a):a=c[15],a}let ss=[],sa=["fixed","fixed","absolute"],sd=(0,eD.styled)(d.ChangeConnectorRoot)`
  flex: 1;
  display: flex;
  flex-direction: column;
  min-height: 0;
  min-width: 0;
`;function sc(){var e;let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,I,C,T,R,P=(0,s.c)(82),{changesOpen:E,displayed:D,documentId:k,documentType:F,editState:A,fieldActions:L,focusPath:V,inspectOpen:M,inspector:O,inspectors:z,onFocus:B,onHistoryOpen:N,onMenuAction:H,onPathOpen:$,paneKey:U,schemaType:G,value:q,previewUrl:W}=iN(),{stickyParams:K}=(0,eV.useRouter)(),{params:Y}=lk(),{features:X}=iK(),{t:Q}=(0,d.useTranslation)(_),{collapsed:J}=n9(),Z=(0,d.useZIndex)(),[ee,et]=(0,a.useState)(null),[en,ei]=(0,a.useState)(null),[el,er]=(0,a.useState)(null),[eo,es]=(0,a.useState)(null),[ea,ed]=(0,a.useState)(null);P[0]!==V||P[1]!==ee||P[2]!==q?(t={element:ee,focusPath:V,value:q},P[0]=V,P[1]=ee,P[2]=q,P[3]=t):t=P[3],(0,d.useGlobalCopyPasteElementHandler)(t),P[4]===Symbol.for("react.memo_cache_sentinel")?(n=[],P[4]=n):n=P[4];let[ec,eu]=(0,a.useState)(n);P[5]===Symbol.for("react.memo_cache_sentinel")?(i=[],P[5]=i):i=P[5];let[ep,em]=(0,a.useState)(i),eh=(0,eR.useElementRect)(en),eg=(0,eR.useElementRect)(el),ef=eh?.height,ex=eg?.height,eb=600+320*!!O,ey=320+320*!!O;P[6]!==O?.name||P[7]!==z?(l=z?.find(e=>e.name===O?.name),P[6]=O?.name,P[7]=z,P[8]=l):l=P[8];let ev=l;P[9]!==D||P[10]!==k||P[11]!==A?(r={displayed:D,documentId:k,editState:A},P[9]=D,P[10]=k,P[11]=A,P[12]=r):r=P[12];let ej=(0,d.useDocumentIdStack)(r),ew=!!q,eS="true"===K.displayInlineChanges;P[13]!==ev||P[14]!==ej||P[15]!==X||P[16]!==ew||P[17]!==ec||P[18]!==z||P[19]!==W||P[20]!==Q||P[21]!==eS?(T=function({currentInspector:e,hasValue:t,inspectors:n,inspectorMenuItems:i}){return n.map((n,l)=>{let r=i[l];return!r||r.hidden?null:{action:`${iX}${n.name}`,group:r.showAsAction?void 0:"inspectors",icon:r.icon,disabled:!t,selected:e?.name===n.name,shortcut:r.hotkeys?.join("+"),showAsAction:r.showAsAction,title:r.title,tone:r.tone}}).filter(Boolean)}(e={currentInspector:ev,features:X,hasValue:ew,inspectorMenuItems:ec,inspectors:z,previewUrl:W,documentIdStack:ej,t:Q,displayInlineChanges:eS}),R=[function({previewUrl:e,t}){return e?{action:"production-preview",group:"links",title:t("production-preview.menu-item.title"),icon:m.EarthAmericasIcon,shortcut:"Ctrl+Alt+O"}:null}(e),function({documentIdStack:e,t}){let n=typeof e?.previousId>"u"&&{reason:t("compare-versions.menu-item.disabled-reason")};return{action:"compareVersions",group:"inspectors",title:t("compare-versions.menu-item.title"),icon:m.TransferIcon,disabled:n}}(e),function({displayInlineChanges:e,t}){return{action:"toggleInlineChanges",group:"inspectors",title:t("toggle-inline-changes.menu-item.title"),icon:e?m.CheckmarkIcon:si}}(e)].filter(Boolean),c=[{action:"copy-document-url",showAsAction:!0,title:e.t("action.copy-document-url.label"),icon:m.LinkIcon},...T,function({hasValue:e,t}){return{action:"inspect",group:"inspectors",title:t("document-inspector.menu-item.title"),icon:m.JsonIcon,disabled:!e,shortcut:"Ctrl+Alt+I"}}(e),...R],P[13]=ev,P[14]=ej,P[15]=X,P[16]=ew,P[17]=ec,P[18]=z,P[19]=W,P[20]=Q,P[21]=eS,P[22]=c):c=P[22];let e_=c;P[23]!==e_||P[24]!==H?(u=e=>{for(let t of e_)if(t.shortcut&&(0,tC.isHotkey)(t.shortcut,e)){e.preventDefault(),e.stopPropagation(),H(t);return}},P[23]=e_,P[24]=H,P[25]=u):u=P[25];let eI=u;P[26]!==B||P[27]!==$?(p=e=>{$(e),B(e)},P[26]=B,P[27]=$,P[28]=p):p=P[28];let eC=p;if(!G){let e;return P[29]!==eb||P[30]!==F||P[31]!==ey||P[32]!==U||P[33]!==q?(e=(0,o.jsx)(sl,{currentMinWidth:eb,documentType:F,minWidth:ey,paneKey:U,value:q}),P[29]=eb,P[30]=F,P[31]=ey,P[32]=U,P[33]=q,P[34]=e):e=P[34],e}P[35]!==k||P[36]!==F||P[37]!==z?(h=z.length>0&&(0,o.jsx)(iZ,{documentId:k,documentType:F,inspectors:z,onMenuItems:eu}),P[35]=k,P[36]=F,P[37]=z,P[38]=h):h=P[38],P[39]!==k||P[40]!==F||P[41]!==L||P[42]!==G?(g=L.length>0&&G&&(0,o.jsx)(d.FieldActionsResolver,{actions:L,documentId:k,documentType:F,onActions:em,path:ss,schemaType:G}),P[39]=k,P[40]=F,P[41]=L,P[42]=G,P[43]=g):g=P[43],P[44]!==e_?(f=(0,o.jsx)(rF,{ref:er,menuItems:e_}),P[44]=e_,P[45]=f):f=P[45];let eP=J?void 0:"fill",eE=E&&Y?.changesInspectorTab==="review",eD=ef||null,ek=ex||null;return P[46]!==ea?(x=(0,o.jsx)(so,{documentPanelPortalElement:ea,setFooterElement:ei,setActionsBoxElement:es}),P[46]=ea,P[47]=x):x=P[47],P[48]!==M||P[49]!==ee||P[50]!==eD||P[51]!==ek||P[52]!==x?(b=(0,o.jsx)(ra,{footerHeight:eD,headerHeight:ek,isInspectOpen:M,rootElement:ee,setDocumentPanelPortalElement:ed,footer:x}),P[48]=M,P[49]=ee,P[50]=eD,P[51]=ek,P[52]=x,P[53]=b):b=P[53],P[54]!==eC||P[55]!==N||P[56]!==eE||P[57]!==b?(y=(0,o.jsx)(sd,{"data-testid":"change-connector-root",isReviewChangesOpen:eE,onOpenReviewChanges:N,onSetFocus:eC,children:b}),P[54]=eC,P[55]=N,P[56]=eE,P[57]=b,P[58]=y):y=P[58],P[59]!==eP||P[60]!==y?(v=(0,o.jsx)(eT.Flex,{direction:"column",flex:1,height:eP,children:y}),P[59]=eP,P[60]=y,P[61]=v):v=P[61],P[62]!==v||P[63]!==Z.paneDialog?(j=(0,o.jsx)(eR.DialogProvider,{position:sa,zOffset:Z.paneDialog,children:v}),P[62]=v,P[63]=Z.paneDialog,P[64]=j):j=P[64],P[65]===Symbol.for("react.memo_cache_sentinel")?(w=(0,o.jsx)(i4,{}),P[65]=w):w=P[65],P[66]!==eo||P[67]!==eb||P[68]!==eI||P[69]!==ey||P[70]!==U||P[71]!==f||P[72]!==j?(S=(0,o.jsxs)(sn,{actionsBoxElement:eo,as:il,currentMinWidth:eb,"data-testid":"document-pane",flex:2.5,id:U,minWidth:ey,onKeyUp:eI,rootRef:et,children:[f,j,w]}),P[66]=eo,P[67]=eb,P[68]=eI,P[69]=ey,P[70]=U,P[71]=f,P[72]=j,P[73]=S):S=P[73],P[74]!==ep||P[75]!==S?(I=(0,o.jsx)(iU,{children:(0,o.jsx)(d.FieldActionsProvider,{actions:ep,path:ss,children:S})}),P[74]=ep,P[75]=S,P[76]=I):I=P[76],P[77]!==g||P[78]!==I||P[79]!==h||P[80]!==q?(C=(0,o.jsxs)(d.GetFormValueProvider,{value:q,children:[h,g,I]}),P[77]=g,P[78]=I,P[79]=h,P[80]=q,P[81]=C):C=P[81],C}let su=(e,t)=>{let n,i,l,r,o=(0,s.c)(11),c=(0,d.useHistoryStore)(),[u,p]=(0,a.useState)(null),[m,h]=(0,a.useState)(!1);o[0]!==e||o[1]!==t?(n={documentId:e,documentType:t},o[0]=e,o[1]=t,o[2]=n):n=o[2];let g=(0,d.useTimelineStore)(n),f=(0,d.useTimelineSelector)(g,sp);return o[3]!==e||o[4]!==c||o[5]!==f?(i=()=>{f&&e?(h(!0),c.getDocumentAtRevision(e,f).then(e=>{p(e||null),h(!1)}).catch(()=>{p(null),h(!1)})):(p(null),h(!1))},l=[e,f,c],o[3]=e,o[4]=c,o[5]=f,o[6]=i,o[7]=l):(i=o[6],l=o[7]),(0,a.useEffect)(i,l),o[8]!==u||o[9]!==m?(r={lastRevisionDocument:u,loading:m},o[8]=u,o[9]=m,o[10]=r):r=o[10],r};function sp(e){return e.lastNonDeletedRevId}let sm=(0,tb.defineEvent)({name:"DocumentURLCopied",version:1,description:"User copied document URL to clipboard"}),sh=(0,tb.defineEvent)({name:"InlineChangesSwitchedOn",version:1,description:"User switched on display of inline changes"}),sg=(0,tb.defineEvent)({name:"InlineChangesSwitchedOff",version:1,description:"User switched off display of inline changes"});function sf(e){return e.name===iJ}function sx(e){let t=(0,d.isRecord)(e)&&"string"==typeof e.message?e.message:"Unknown error";throw Error(`An error was thrown while trying to get your preview url: ${t}`)}function sb(e){let t,n,i,l,r,p,m,h,g,f,x,b,y,v,j,w,S,I,C,T,R,P,E,D,k,F,A,L,V,M,O,z,B,N,H,$,U=(0,s.c)(205),{children:G,index:q,pane:W,paneKey:K,onFocusPath:Y,onSetMaximizedPane:X,maximized:Q,forcedVersion:J,historyStore:Z}=e,ee=void 0!==Q&&Q,{store:et,error:en,ready:ei,revisionDocument:el,onOlderRevision:er,sinceDocument:eo,isPristine:es,revisionId:ea,lastNonDeletedRevId:ed}=Z,ec=(0,d.useSchema)(),{setDocumentMeta:eu}=(0,d.useCopyPaste)(),{document:ep}=(0,d.useSource)(),{actions:em,badges:eh,unstable_fieldActions:eg,unstable_languageFilter:ef,drafts:ex}=ep,{enabled:eb}=ex,ey=(0,tx.useTelemetry)(),ev=(0,eV.useRouter)(),ej=lk(),ew=ej.setParams,{push:eS}=(0,eR.useToast)(),{options:e_,menuItemGroups:eI,title:eC,views:eT}=W,eP=void 0===eI?iQ:eI,eE=void 0===eC?null:eC;U[0]!==eT?(t=void 0===eT?[]:eT,U[0]=eT,U[1]=t):t=U[1];let eD=t,ek=(0,d.useUnique)(e_),eF=ek.id;U[2]!==eF?(n=(0,c.getPublishedId)(eF),U[2]=eF,U[3]=n):n=U[3];let eA=n,eM=e_.type,eO=(0,d.useUnique)(ej.params)||iY,{buildStudioUrl:ez}=(0,d.useStudioUrl)(),eB=(0,d.usePerspective)(),{document:eN,beta:eH}=(0,d.useWorkspace)(),{drafts:e$}=eN,{enabled:eU}=e$,eG=eH?.form?.enhancedObjectDialog?.enabled;e:{let e;if(J){i=J;break e}U[4]!==eB.selectedPerspectiveName||U[5]!==eB.selectedReleaseId?(e={selectedPerspectiveName:eB.selectedPerspectiveName,selectedReleaseId:eB.selectedReleaseId},U[4]=eB.selectedPerspectiveName,U[5]=eB.selectedReleaseId,U[6]=e):e=U[6],i=e}let{selectedReleaseId:eq,selectedPerspectiveName:eW}=i,eY=nV();U[7]!==eA||U[8]!==eM||U[9]!==ek||U[10]!==eO?(l={paneOptions:ek,documentId:eA,documentType:eM,params:eO},U[7]=eA,U[8]=eM,U[9]=ek,U[10]=eO,U[11]=l):l=U[11];let eQ=(e=>{var t;let n,i,l,r,o,a,c,u,p=(0,s.c)(13),{paneOptions:m,documentType:h,documentId:g,params:f}=e,x=(0,d.useTemplates)(),b=lk(),y=(0,d.useUnique)(b.payload);p[0]!==h||p[1]!==m.template||p[2]!==m.templateParameters||p[3]!==y||p[4]!==f.template||p[5]!==x?(l=(t={documentType:h,templateName:m.template,templateParams:m.templateParameters,panePayload:y,urlTemplate:f.template}).panePayload||{},r=t.templateName,t.urlTemplate&&r&&r!==t.urlTemplate&&console.warn(`Conflicting templates: URL says "${t.urlTemplate}", structure node says "${r}". Using "${r}".`),o=r||t.urlTemplate,a=x.filter(e=>e.schemaType===t.documentType),c={...t.templateParams,..."object"==typeof l&&l||{}},u=o,o||1!==a.length||(u=a[0].id),n={templateName:u,templateParams:c},p[0]=h,p[1]=m.template,p[2]=m.templateParameters,p[3]=y,p[4]=f.template,p[5]=x,p[6]=n):n=p[6];let{templateName:v,templateParams:j}=n;p[7]!==g||p[8]!==h||p[9]!==f.version||p[10]!==v||p[11]!==j?(i={documentId:g,documentType:h,templateName:v,templateParams:j,version:f.version},p[7]=g,p[8]=h,p[9]=f.version,p[10]=v,p[11]=j,p[12]=i):i=p[12];let w=(0,d.useInitialValue)(i);return(0,d.useUnique)(w)})(l),e0=eQ.loading;U[12]!==eA||U[13]!==eM||U[14]!==eO||U[15]!==ew?(r={documentId:eA,documentType:eM,params:eO,setParams:ew},U[12]=eA,U[13]=eM,U[14]=eO,U[15]=ew,U[16]=r):r=U[16];let{changesOpen:e1,currentInspector:e2,inspectors:e3,closeInspector:e4,openInspector:e5,handleHistoryClose:e6,handleHistoryOpen:e8,handleInspectorAction:e7,inspectOpen:te,handleLegacyInspectClose:tt}=function(e){let t,n,i,l,r,o,c,u,p,m,h,g,f,x,b=(0,s.c)(54),{documentId:y,documentType:v,params:j,setParams:w}=e,{features:S}=iK(),_=(0,d.useSource)().document.inspectors;b[0]!==y||b[1]!==v||b[2]!==_?(t=_({documentId:y,documentType:v}),b[0]=y,b[1]=v,b[2]=_,b[3]=t):t=b[3];let I=t;b[4]!==j.inspect?(n=()=>j.inspect||null,b[4]=j.inspect,b[5]=n):n=b[5];let[C,T]=(0,a.useState)(n),R=(0,a.useRef)(j.inspect);b[6]!==j.inspect?(i=()=>{R.current!==j.inspect&&(R.current=j.inspect,T(j.inspect||null))},l=[j.inspect],b[6]=j.inspect,b[7]=i,b[8]=l):(i=b[7],l=b[8]),(0,a.useEffect)(i,l),b[9]!==C||b[10]!==I?(r=I?.find(e=>e.name===C),b[9]=C,b[10]=I,b[11]=r):r=b[11];let P=r;b[12]!==I?(o=I.find(sf),b[12]=I,b[13]=o):o=b[13];let E=o,D=P?.name===iJ;b[14]!==P||b[15]!==I||b[16]!==j||b[17]!==w?(c=e=>{let t=e&&I.find(t=>t.name===e);if(e&&!t)return void console.warn(`No inspector named "${e}"`);if(P){if(t){let e=t.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0});return}if(P){let e=P.onClose?.({params:j})??{params:j};T(null),R.current=void 0,w({...e.params,inspect:void 0})}}},b[14]=P,b[15]=I,b[16]=j,b[17]=w,b[18]=c):c=b[18];let k=c;b[19]!==P||b[20]!==I||b[21]!==j||b[22]!==w?(u=(e,t)=>{let n=I.find(t=>t.name===e);if(!n)return void console.warn(`No inspector named "${e}"`);if(P?.name===n.name)return void w({...j,...t,inspect:n.name});let i=j;P&&(i=(n.onClose?.({params:i})??{params:i}).params);let l=n.onOpen?.({params:i})??{params:i};T(n.name),R.current=n.name,w({...l.params,...t,inspect:n.name})},b[19]=P,b[20]=I,b[21]=j,b[22]=w,b[23]=u):u=b[23];let F=u;b[24]!==k||b[25]!==E?(p=()=>{E&&k(E.name)},b[24]=k,b[25]=E,b[26]=p):p=b[26];let A=p;b[27]!==S.reviewChanges||b[28]!==E||b[29]!==F?(m=()=>{S.reviewChanges&&E&&F(E.name,{changesInspectorTab:"review"})},b[27]=S.reviewChanges,b[28]=E,b[29]=F,b[30]=m):m=b[30];let L=m,V="on"===j.inspect;b[31]!==V||b[32]!==j||b[33]!==w?(h=e=>{w((void 0===e?!V:e)?{...j,inspect:"on"}:{...j,inspect:void 0})},b[31]=V,b[32]=j,b[33]=w,b[34]=h):h=b[34];let M=h;b[35]!==M?(g=()=>M(!1),b[35]=M,b[36]=g):g=b[36];let O=g;b[37]!==k||b[38]!==C||b[39]!==I||b[40]!==F||b[41]!==M?(f=e=>{if("inspect"===e.action)return M(!0),!0;if("string"!=typeof e.action)return!1;let t=e.action.slice(iX.length),n=I.find(e=>e.name===t);return!!n&&(n.name===C?k(n.name):F(n.name),!0)},b[37]=k,b[38]=C,b[39]=I,b[40]=F,b[41]=M,b[42]=f):f=b[42];let z=f;return b[43]!==D||b[44]!==k||b[45]!==P||b[46]!==A||b[47]!==L||b[48]!==z||b[49]!==O||b[50]!==V||b[51]!==I||b[52]!==F?(x={changesOpen:D,currentInspector:P,inspectors:I,closeInspector:k,openInspector:F,handleHistoryClose:A,handleHistoryOpen:L,handleInspectorAction:z,handleLegacyInspectClose:O,inspectOpen:V},b[43]=D,b[44]=k,b[45]=P,b[46]=A,b[47]=L,b[48]=z,b[49]=O,b[50]=V,b[51]=I,b[52]=F,b[53]=x):x=b[53],x}(r),[tn,tr]=(0,a.useState)(!1),{lastRevisionDocument:to}=su(eA,eM);U[17]!==es||U[18]!==ei?(p=e=>!!ei&&!e?.draft&&!e?.published&&!e?.version&&!es,U[17]=es,U[18]=ei,U[19]=p):p=U[19];let ts=p;U[20]!==e1||U[21]!==eo?(m=e=>{let t=(0,d.selectUpstreamVersion)(e);return e1?eo||t:t||null},U[20]=e1,U[21]=eo,U[22]=m):m=U[22];let ta=m;U[23]!==eM||U[24]!==ec?(h=ec.get(eM),U[23]=eM,U[24]=ec,U[25]=h):h=U[25];let td=h;U[26]!==ts||U[27]!==tn||U[28]!==eU||U[29]!==eO.rev||U[30]!==eB.selectedPerspective||U[31]!==td?(g=e=>{let t=ts(e);return!!eO.rev||tn||t||!(0,d.isPerspectiveWriteable)({selectedPerspective:eB.selectedPerspective,isDraftModelEnabled:eU,schemaType:td}).result},U[26]=ts,U[27]=tn,U[28]=eU,U[29]=eO.rev,U[30]=eB.selectedPerspective,U[31]=td,U[32]=g):g=U[32];let tc=g;U[33]!==ed||U[34]!==to||U[35]!==er||U[36]!==el?(f=e=>er?el||{_id:e._id,_type:e._type}:!e._createdAt&&!e._updatedAt&&ed&&to?to:e,U[33]=ed,U[34]=to,U[35]=er,U[36]=el,U[37]=f):f=U[37];let tu=f;U[38]!==eO.path?(x=eO.path?(0,tg.fromString)(eO.path):d.EMPTY_ARRAY,U[38]=eO.path,U[39]=x):x=U[39];let tp="true"===ev.stickyParams.displayInlineChanges;U[40]!==e1||U[41]!==eA||U[42]!==eM||U[43]!==ta||U[44]!==tu||U[45]!==tc||U[46]!==eQ||U[47]!==Y||U[48]!==eW||U[49]!==eq||U[50]!==x||U[51]!==tp?(b={changesOpen:e1,documentType:eM,documentId:eA,initialValue:eQ,comparisonValue:ta,releaseId:eq,selectedPerspectiveName:eW,initialFocusPath:x,readOnly:tc,onFocusPath:Y,getFormDocumentValue:tu,displayInlineChanges:tp},U[40]=e1,U[41]=eA,U[42]=eM,U[43]=ta,U[44]=tu,U[45]=tc,U[46]=eQ,U[47]=Y,U[48]=eW,U[49]=eq,U[50]=x,U[51]=tp,U[52]=b):b=U[52];let{editState:tm,upstreamEditState:th,hasUpstreamVersion:tf,connectionState:tb,focusPath:ty,onChange:tv,validation:tj,ready:tw,value:tS,formState:t_,permissions:tI,onPathOpen:tC,isPermissionsLoading:tT,formStateRef:tR,onProgrammaticFocus:tP,collapsedFieldSets:tE,collapsedPaths:tD,onBlur:tk,onFocus:tF,onSetActiveFieldGroup:tA,onSetCollapsedPath:tL,onSetCollapsedFieldSet:tV,openPath:tM}=(0,d.useDocumentForm)(b),{data:tO}=(0,d.useActiveReleases)();U[53]!==tO?(y=void 0===tO?[]:tO,U[53]=tO,U[54]=y):y=U[54];let tz=y;U[55]!==eb||U[56]!==eO||U[57]!==tz||U[58]!==eW||U[59]!==eq||U[60]!==tS?(v=function(e,t,n,i,l,r){let o;switch(!0){case!!e?.rev:o="revision";break;case t&&(0,c.isVersionId)(n._id):{let e=r.find(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===t);o=e&&(0,d.isCardinalityOneRelease)(e)?"scheduled-draft":"version";break}case"published"===i:o="published";break;case l:o="draft";break;default:o="published"}return o}(eO,eq,tS,eW,eb,tz),U[55]=eb,U[56]=eO,U[57]=tz,U[58]=eW,U[59]=eq,U[60]=tS,U[61]=v):v=U[61];let tB=v;U[62]!==tB||U[63]!==eA||U[64]!==eM||U[65]!==eq?(j={schemaType:eM,documentId:eA,versionType:tB,releaseId:eq},U[62]=tB,U[63]=eA,U[64]=eM,U[65]=eq,U[66]=j):j=U[66];let tN=j;U[67]!==em||U[68]!==tN?(w=em(tN),U[67]=em,U[68]=tN,U[69]=w):w=U[69];let tH=w;U[70]!==eG||U[71]!==tC||U[72]!==eO||U[73]!==ew?(S=e=>{if(tC(e),eG){let t=(0,d.pathToString)(e);eO.path!==t&&ew({...eO,path:t})}},U[70]=eG,U[71]=tC,U[72]=eO,U[73]=ew,U[74]=S):S=U[74];let t$=S;U[75]!==eh||U[76]!==eA||U[77]!==eM?(I=eh({schemaType:eM,documentId:eA}),U[75]=eh,U[76]=eA,U[77]=eM,U[78]=I):I=U[78];let tU=I;U[79]!==eA||U[80]!==eM||U[81]!==ef?(C=ef({schemaType:eM,documentId:eA}),U[79]=eA,U[80]=eM,U[81]=ef,U[82]=C):C=U[82];let tG=C,tq=(0,d.useUnique)(eD),tW=eO.view||tq[0]&&tq[0].id||null,tK=function(e){let t,n,i,l,r=(0,s.c)(6),{resolveProductionUrl:o}=(0,d.useSource)().document;r[0]===Symbol.for("react.memo_cache_sentinel")?(t=new ti.BehaviorSubject(void 0),r[0]=t):t=r[0];let c=t;return r[1]!==e?(n=()=>{c.next(e)},i=[c,e],r[1]=e,r[2]=n,r[3]=i):(n=r[2],i=r[3]),(0,a.useEffect)(n,i),r[4]!==o?(l=c.asObservable().pipe((0,eJ.distinctUntilChanged)(),(0,eX.debounceTime)(500),(0,eZ.switchMap)(e=>(0,d.isRecord)(e)&&"string"==typeof e._id&&"string"==typeof e._type?(0,tl.from)(o({document:e})):(0,e9.of)(void 0)),(0,eJ.distinctUntilChanged)(),(0,eK.catchError)(sx)),r[4]=o,r[5]=l):l=r[5],(0,eL.useObservable)(l)}(tS),{t:tY}=(0,d.useTranslation)(_);U[83]!==eA||U[84]!==eM||U[85]!==eg||U[86]!==td?(T=td?eg({documentId:eA,documentType:eM,schemaType:td}):[],U[83]=eA,U[84]=eM,U[85]=eg,U[86]=td,U[87]=T):T=U[87];let tX=T,tQ=tw&&(!eO.rev||ei||!!en);U[88]!==tu||U[89]!==tS?(R=tu(tS),U[88]=tu,U[89]=tS,U[90]=R):R=U[90];let tJ=R;U[91]!==tJ||U[92]!==eA||U[93]!==tm?(P={strict:!0,displayed:tJ,documentId:eA,editState:tm},U[91]=tJ,U[92]=eA,U[93]=tm,U[94]=P):P=U[94];let{previousId:tZ}=(0,d.useDocumentIdStack)(P);U[95]!==eO||U[96]!==ew?(E=(e,t)=>{ew({...eO,since:e,rev:t||void 0})},U[95]=eO,U[96]=ew,U[97]=E):E=U[97];let t0=E;U[98]!==ej?(D=()=>ej.closeCurrent(),U[98]=ej,U[99]=D):D=U[99];let t1=D;U[100]!==ej?(k=()=>ej.duplicateCurrent(),U[100]=ej,U[101]=k):k=U[101];let t2=k;U[102]!==ev||U[103]!==ey?(F=()=>{let e="true"!==ev.stickyParams.displayInlineChanges;ey.log(e?sh:sg),ev.navigate({stickyParams:{displayInlineChanges:String(e)}})},U[102]=ev,U[103]=ey,U[104]=F):F=U[104];let t3=F;U[105]!==ez||U[106]!==eY||U[107]!==eA||U[108]!==eM||U[109]!==e8||U[110]!==e7||U[111]!==tK||U[112]!==tZ||U[113]!==eS||U[114]!==tY||U[115]!==ey||U[116]!==t3||U[117]!==tS._id?(A=async e=>{if("production-preview"===e.action&&tK)return window.open(tK),!0;if("copy-document-url"===e.action&&navigator){ey.log(sm);let e=ez({coreUi:e=>`${e}/intent/edit/id=${eA};type=${eM}`});return await navigator.clipboard.writeText(e),eS({id:"copy-document-url",status:"info",title:tY("panes.document-operation-results.operation-success_copy-url")}),!0}return"reviewChanges"===e.action?(e8(),!0):(("inspect"===e.action||"string"==typeof e.action&&e.action.startsWith(iX))&&e7(e),"compareVersions"===e.action&&"u">typeof tZ?(eY.navigateDiffView({mode:"version",previousDocument:{type:eM,id:tZ},nextDocument:{type:eM,id:tS._id}}),!0):"toggleInlineChanges"===e.action&&(t3(),!0))},U[105]=ez,U[106]=eY,U[107]=eA,U[108]=eM,U[109]=e8,U[110]=e7,U[111]=tK,U[112]=tZ,U[113]=eS,U[114]=tY,U[115]=ey,U[116]=t3,U[117]=tS._id,U[118]=A):A=U[118];let t4=A;U[119]!==eA||U[120]!==eM||U[121]!==tv||U[122]!==td||U[123]!==eu?(L=()=>{eu({documentId:eA,documentType:eM,schemaType:td,onChange:tv})},V=[eA,eM,td,tv,eu],U[119]=eA,U[120]=eM,U[121]=tv,U[122]=td,U[123]=eu,U[124]=L,U[125]=V):(L=U[124],V=U[125]),(0,a.useEffect)(L,V),U[126]!==ta||U[127]!==th?(M=ta(th),U[126]=ta,U[127]=th,U[128]=M):M=U[128];let t5=M,t6=ts(tm),t8=er&&!el&&tQ;t:{if(tm.version&&(0,d.isGoingToUnpublish)(tm.version)){O=tm.published;break t}O=tJ}let t7=O,t9=e2||null;U[129]!==eP?(z=eP||[],U[129]=eP,U[130]=z):z=U[130],U[131]!==tH||U[132]!==tW||U[133]!==tU||U[134]!==e1||U[135]!==e4||U[136]!==tE||U[137]!==tD||U[138]!==t5||U[139]!==tb||U[140]!==t7||U[141]!==eA||U[142]!==eF||U[143]!==eM||U[144]!==tm||U[145]!==tX||U[146]!==ty||U[147]!==t_||U[148]!==e6||U[149]!==e8||U[150]!==tt||U[151]!==t4||U[152]!==t1||U[153]!==t2||U[154]!==t$||U[155]!==tf||U[156]!==q||U[157]!==te||U[158]!==e3||U[159]!==t6||U[160]!==tn||U[161]!==e0||U[162]!==tT||U[163]!==tG||U[164]!==ed||U[165]!==to||U[166]!==ee||U[167]!==tk||U[168]!==tv||U[169]!==tF||U[170]!==tA||U[171]!==tV||U[172]!==tL||U[173]!==X||U[174]!==e5||U[175]!==tM||U[176]!==K||U[177]!==tI||U[178]!==tK||U[179]!==tQ||U[180]!==ea||U[181]!==t8||U[182]!==td||U[183]!==eq||U[184]!==t0||U[185]!==t9||U[186]!==z||U[187]!==en||U[188]!==et||U[189]!==eE||U[190]!==tj||U[191]!==tS||U[192]!==tq?(B={actions:tH,activeViewId:tW,badges:tU,changesOpen:e1,closeInspector:e4,collapsedFieldSets:tE,collapsedPaths:tD,compareValue:t5,connectionState:tb,displayed:t7,documentId:eA,documentIdRaw:eF,documentType:eM,editState:tm,fieldActions:tX,focusPath:ty,inspector:t9,inspectors:e3,onBlur:tk,onChange:tv,onFocus:tF,onPathOpen:t$,onHistoryClose:e6,onHistoryOpen:e8,onInspectClose:tt,onMenuAction:t4,onPaneClose:t1,onPaneSplit:t2,onSetActiveFieldGroup:tA,onSetCollapsedPath:tL,onSetCollapsedFieldSet:tV,onSetMaximizedPane:X,maximized:ee,openInspector:e5,openPath:tM,index:q,inspectOpen:te,validation:tj,menuItemGroups:z,paneKey:K,previewUrl:tK,ready:tQ,schemaType:td,hasUpstreamVersion:tf,isPermissionsLoading:tT,isInitialValueLoading:e0,permissions:tI,setTimelineRange:t0,setIsDeleting:tr,isDeleting:tn,isDeleted:t6,timelineError:en,timelineStore:et,title:eE,value:tS,selectedReleaseId:eq,views:tq,formState:t_,unstable_languageFilter:tG,revisionId:ea,revisionNotFound:t8,lastNonDeletedRevId:ed,lastRevisionDocument:to},U[131]=tH,U[132]=tW,U[133]=tU,U[134]=e1,U[135]=e4,U[136]=tE,U[137]=tD,U[138]=t5,U[139]=tb,U[140]=t7,U[141]=eA,U[142]=eF,U[143]=eM,U[144]=tm,U[145]=tX,U[146]=ty,U[147]=t_,U[148]=e6,U[149]=e8,U[150]=tt,U[151]=t4,U[152]=t1,U[153]=t2,U[154]=t$,U[155]=tf,U[156]=q,U[157]=te,U[158]=e3,U[159]=t6,U[160]=tn,U[161]=e0,U[162]=tT,U[163]=tG,U[164]=ed,U[165]=to,U[166]=ee,U[167]=tk,U[168]=tv,U[169]=tF,U[170]=tA,U[171]=tV,U[172]=tL,U[173]=X,U[174]=e5,U[175]=tM,U[176]=K,U[177]=tI,U[178]=tK,U[179]=tQ,U[180]=ea,U[181]=t8,U[182]=td,U[183]=eq,U[184]=t0,U[185]=t9,U[186]=z,U[187]=en,U[188]=et,U[189]=eE,U[190]=tj,U[191]=tS,U[192]=tq,U[193]=B):B=U[193];let ne=B,nt=(0,a.useRef)(void 0);return U[194]!==eG||U[195]!==tR||U[196]!==tP||U[197]!==ej||U[198]!==eO||U[199]!==tQ?(N=()=>{if(tQ&&eO.path){let{path:e,...t}=eO;e!==nt.current&&tP((0,tg.resolveKeyedPath)(tR.current?.value,(0,tg.fromString)(e))),eG||ej.setParams(t)}nt.current=eO.path},H=[tR,tP,ej,eO,tQ,eG],U[194]=eG,U[195]=tR,U[196]=tP,U[197]=ej,U[198]=eO,U[199]=tQ,U[200]=N,U[201]=H):(N=U[200],H=U[201]),(0,a.useEffect)(N,H),U[202]!==G||U[203]!==ne?($=(0,o.jsx)(u.DocumentPaneContext.Provider,{value:ne,children:G}),U[202]=G,U[203]=ne,U[204]=$):$=U[204],$}let sy=e=>{let t,n,i,l,r,a,u,p=(0,s.c)(37),{params:m}=lk(),h=void 0===m?iY:m,g=sA(e.pane.options,h),f=(0,d.useSchema)(),x=g.type,b=!!f.get(g.type)?.liveEdit,{selectedPerspectiveName:y,selectedReleaseId:v,selectedPerspective:j}=(0,d.usePerspective)(),{data:w}=(0,d.useArchivedReleases)();p[0]!==g.id?(t=(0,c.getPublishedId)(g.id),p[0]=g.id,p[1]=t):t=p[1];let S=(0,d.useEditState)(t,x,"default",v),_=b&&"drafts"===j&&!S?.draft,{rev:I,since:C}=h,T=h.historyVersion;e:{if(_){let e;p[2]!==g.id?(e=(0,c.getPublishedId)(g.id),p[2]=g.id,p[3]=e):e=p[3],n=e;break e}if(T&&w.some(e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===T)){let e;p[4]!==T||p[5]!==g.id?(e=(0,c.getVersionId)(g.id,T),p[4]=T,p[5]=g.id,p[6]=e):e=p[6],n=e;break e}if(typeof y>"u"){let e;p[7]!==g.id?(e=(0,c.getDraftId)(g.id),p[7]=g.id,p[8]=e):e=p[8],n=e;break e}if("published"===y){let e;p[9]!==g.id?(e=(0,c.getPublishedId)(g.id),p[9]=g.id,p[10]=e):e=p[10],n=e;break e}if(0!==y.length){let e;p[11]!==g.id||p[12]!==y?(e=(0,c.getVersionId)(g.id,y),p[11]=g.id,p[12]=y,p[13]=e):e=p[13],n=e;break e}n=g.id}let R=n;p[14]!==R||p[15]!==g.type||p[16]!==I||p[17]!==C?(i={documentId:R,documentType:g.type,rev:I,since:C},p[14]=R,p[15]=g.type,p[16]=I,p[17]=C,p[18]=i):i=p[18];let P=(0,d.useEventsStore)(i),E=P.error,D=P.revision?.revisionId||null,k=!!(I&&!P.revision?.loading),F=P.revision?.document||null,A=P.sinceRevision?.document||null,L=!P.loading,V=0===P.events.length;p[19]!==P.events?(l=P.events.find(sv)?.id||null,p[19]=P.events,p[20]=l):l=p[20],p[21]!==P.error||p[22]!==V||p[23]!==l||p[24]!==D||p[25]!==k||p[26]!==F||p[27]!==A||p[28]!==L?(r={error:E,revisionId:D,onOlderRevision:k,revisionDocument:F,sinceDocument:A,ready:L,isPristine:V,lastNonDeletedRevId:l},p[21]=P.error,p[22]=V,p[23]=l,p[24]=D,p[25]=k,p[26]=F,p[27]=A,p[28]=L,p[29]=r):r=p[29];let M=r;return p[30]!==M||p[31]!==T||p[32]!==e?(a=T?(0,o.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:T,excludedPerspectives:d.EMPTY_ARRAY,children:(0,o.jsx)(sb,{...e,historyStore:M})}):(0,o.jsx)(sb,{...e,historyStore:M}),p[30]=M,p[31]=T,p[32]=e,p[33]=a):a=p[33],p[34]!==a||p[35]!==P?(u=(0,o.jsx)(d.EventsProvider,{value:P,children:a}),p[34]=a,p[35]=P,p[36]=u):u=p[36],u};function sv(e){return!(0,d.isDeleteDocumentGroupEvent)(e)&&!(0,d.isDeleteDocumentVersionEvent)(e)}let sj=e=>{let t,n,i,l,r=(0,s.c)(20),{pane:u}=e,p=lk(),m=sA(u.options,p.params),h=p.params||iY,[g,f]=(0,a.useState)(null);r[0]!==m.id?(t=(0,c.getPublishedId)(m.id),r[0]=m.id,r[1]=t):t=r[1],r[2]!==m.type||r[3]!==h.rev||r[4]!==h.since||r[5]!==t?(n={documentId:t,documentType:m.type,onError:f,rev:h.rev,since:h.since},r[2]=m.type,r[3]=h.rev,r[4]=h.since,r[5]=t,r[6]=n):n=r[6];let x=(0,d.useTimelineStore)(n),b=(0,d.useTimelineSelector)(x,sw),y=(0,d.useTimelineSelector)(x,sS),v=(0,d.useTimelineSelector)(x,s_),j=(0,d.useTimelineSelector)(x,sI),w=(0,d.useTimelineSelector)(x,sC),S=(0,d.useTimelineSelector)(x,sT),_=(0,d.useTimelineSelector)(x,sR),I=y?.id||null,C=!!S;r[7]!==_||r[8]!==b||r[9]!==x||r[10]!==I||r[11]!==j||r[12]!==v||r[13]!==C||r[14]!==g||r[15]!==w?(i={store:x,error:g,revisionId:I,onOlderRevision:b,revisionDocument:j,sinceDocument:v,ready:w,isPristine:C,lastNonDeletedRevId:_},r[7]=_,r[8]=b,r[9]=x,r[10]=I,r[11]=j,r[12]=v,r[13]=C,r[14]=g,r[15]=w,r[16]=i):i=r[16];let T=i;return r[17]!==T||r[18]!==e?(l=(0,o.jsx)(sb,{...e,historyStore:T}),r[17]=T,r[18]=e,r[19]=l):l=r[19],l};function sw(e){return e.onOlderRevision}function sS(e){return e.revTime}function s_(e){return e.sinceAttributes}function sI(e){return e.timelineDisplayed}function sC(e){return e.timelineReady}function sT(e){return e.isPristine}function sR(e){return e.lastNonDeletedRevId}function sP(e){let t=(0,s.c)(4),{children:n}=e,i=lk(),{excludedPerspectives:l}=(0,d.usePerspective)(),{scheduledDraft:r}=i.params;if(r){let e;return t[0]!==n||t[1]!==l||t[2]!==r?(e=(0,o.jsx)(d.PerspectiveProvider,{selectedPerspectiveName:r,excludedPerspectives:l,children:n}),t[0]=n,t[1]=l,t[2]=r,t[3]=e):e=t[3],e}return n}let sE=(0,a.memo)(e=>{let t,n,i,l=(0,s.c)(9),r=(0,d.useSource)(),{setParams:a,params:c}=lk();l[0]!==c||l[1]!==a?(t=e=>{a({...c,scheduledDraft:e},{perspective:""})},l[0]=c,l[1]=a,l[2]=t):t=l[2];let u=t;return l[3]!==e||l[4]!==r.beta?.eventsAPI?.documents?(n=r.beta?.eventsAPI?.documents?(0,o.jsx)(sy,{...e}):(0,o.jsx)(sj,{...e}),l[3]=e,l[4]=r.beta?.eventsAPI?.documents,l[5]=n):n=l[5],l[6]!==u||l[7]!==n?(i=(0,o.jsx)(sP,{children:(0,o.jsx)(d.SingleDocReleaseProvider,{onSetScheduledDraftPerspective:u,children:n})}),l[6]=u,l[7]=n,l[8]=i):i=l[8],i});sE.displayName="Memo(DocumentPaneProviderWrapper)";let sD=(0,a.memo)(function(e){let t,n,i=(0,s.c)(5),{name:l}=(0,d.useSource)(),r=e.pane.source||l;return i[0]!==e?(t=(0,o.jsx)(d.CopyPasteProvider,{children:(0,o.jsx)(sk,{...e})}),i[0]=e,i[1]=t):t=i[1],i[2]!==r||i[3]!==t?(n=(0,o.jsx)(d.SourceProvider,{name:r,children:t}),i[2]=r,i[3]=t,i[4]=n):n=i[4],n});function sk(e){var t,n,i;let l,r,c,u,p,m,h,g,f,x,b,y,v=(0,s.c)(57),{pane:j,paneKey:w}=e,{resolveNewDocumentOptions:S}=(0,d.useSource)().document,{selectedPerspectiveName:I}=(0,d.usePerspective)(),C=lk(),T=sA(j.options,C.params),{documentType:R,isLoaded:P}=(0,d.useDocumentType)(T.id,T.type);!function(){let e,t,n,i,l,r=(0,s.c)(10),{params:o,setParams:c}=lk(),u=void 0===o?iY:o,{selectedPerspectiveName:p}=(0,d.usePerspective)(),m=(0,a.useRef)(!1);r[0]!==u||r[1]!==c?(e=e=>{["since","historyVersion","rev","preserveRev"].some(e=>u[e])&&c({...u,rev:"true"===u.preserveRev?u.rev:void 0,preserveRev:void 0,since:void 0,historyVersion:void 0})},r[0]=u,r[1]=c,r[2]=e):e=r[2];let h=(0,a.useEffectEvent)(e);r[3]!==p||r[4]!==h?(t=()=>{m.current&&h(p)},r[3]=p,r[4]=h,r[5]=t):t=r[5],r[6]!==p?(n=[p],r[6]=p,r[7]=n):n=r[7],(0,a.useEffect)(t,n),r[8]===Symbol.for("react.memo_cache_sentinel")?(i=()=>(m.current=!0,()=>{m.current=!1}),l=[],r[8]=i,r[9]=l):(i=r[8],l=r[9]),(0,a.useEffect)(i,l)}();let E=((y=(0,s.c)(1))[0]===Symbol.for("react.memo_cache_sentinel")?(b={pick:nX,defaultComponent:sc},y[0]=b):b=y[0],(0,d.useMiddlewareComponents)(b));v[0]!==T.id||v[1]!==T.type||v[2]!==S?(l=S({type:"document",documentId:T.id,schemaType:T.type}),v[0]=T.id,v[1]=T.type,v[2]=S,v[3]=l):l=v[3];let D=l;v[4]!==D?(r={templateItems:D},v[4]=D,v[5]=r):r=v[5];let[k,F]=(0,d.useTemplatePermissions)(r),A=P&&!F;v[6]!==R||v[7]!==A||v[8]!==T||v[9]!==e?(c=A&&R&&T.type!==R?(t=e,n=T,i=R,{...t,pane:{...t.pane,options:{...n,type:i}}}):e,v[6]=R,v[7]=A,v[8]=T,v[9]=e,v[10]=c):c=v[10];let L=c,{ReferenceChildLink:V,handleEditReference:M,groupIndex:O,routerPanesState:z}=C;v[11]!==O||v[12]!==z?(u=z[O+1]?.[0].params||{},v[11]=O,v[12]=z,v[13]=u):u=v[13];let B=u,N=z.length,{parentRefPath:H}=B;v[14]!==O||v[15]!==H||v[16]!==N?(p=H?{path:(0,tg.fromString)(H),state:O>=N-1?"none":O>=N-2?"selected":"pressed"}:{path:[],state:"none"},v[14]=O,v[15]=H,v[16]=N,v[17]=p):p=v[17];let $=p,{t:U}=(0,d.useTranslation)(_);if("*"===T.type&&!A){let e,t;return v[18]!==U?(e=U("panes.document-pane.document-not-found.loading"),v[18]=U,v[19]=e):e=v[19],v[20]!==w||v[21]!==e?(t=(0,o.jsx)(iB,{flex:2.5,minWidth:320,paneKey:w,title:e}),v[20]=w,v[21]=e,v[22]=t):t=v[22],t}if(!R){let e,t,n,i,l;return v[23]!==U?(e=U("panes.document-pane.document-not-found.title"),v[23]=U,v[24]=e):e=v[24],v[25]!==T.id?(t={id:T.id},v[25]=T.id,v[26]=t):t=v[26],v[27]===Symbol.for("react.memo_cache_sentinel")?(n={Code:sF},v[27]=n):n=v[27],v[28]!==U||v[29]!==t?(i=(0,o.jsx)(eT.Stack,{space:4,children:(0,o.jsx)(eT.Text,{as:"p",children:(0,o.jsx)(d.Translate,{t:U,i18nKey:"panes.document-pane.document-not-found.text",values:t,components:n})})}),v[28]=U,v[29]=t,v[30]=i):i=v[30],v[31]!==w||v[32]!==e||v[33]!==i?(l=(0,o.jsx)(iV,{flex:2.5,minWidth:320,paneKey:w,title:e,children:i}),v[31]=w,v[32]=e,v[33]=i,v[34]=l):l=v[34],l}let G=`${R}-${T.id}-${I||""}`;return v[35]!==E||v[36]!==T.id||v[37]!==T.type?(m=(0,o.jsx)(E,{documentId:T.id,documentType:T.type}),v[35]=E,v[36]=T.id,v[37]=T.type,v[38]=m):m=v[38],v[39]!==T.id||v[40]!==T.type||v[41]!==m?(h=(0,o.jsx)(iH,{documentId:T.id,documentType:T.type,children:m}),v[39]=T.id,v[40]=T.type,v[41]=m,v[42]=h):h=v[42],v[43]!==T.id||v[44]!==T.type||v[45]!==h?(g=(0,o.jsx)(n7,{documentId:T.id,documentType:T.type,children:h}),v[43]=T.id,v[44]=T.type,v[45]=h,v[46]=g):g=v[46],v[47]!==V||v[48]!==$||v[49]!==M||v[50]!==g||v[51]!==k?(f=(0,o.jsx)(d.ReferenceInputOptionsProvider,{EditReferenceLinkComponent:V,onEditReference:M,initialValueTemplateItems:k,activePath:$,children:g}),v[47]=V,v[48]=$,v[49]=M,v[50]=g,v[51]=k,v[52]=f):f=v[52],v[53]!==L||v[54]!==G||v[55]!==f?(x=(0,o.jsx)(sE,{...L,children:f},G),v[53]=L,v[54]=G,v[55]=f,v[56]=x):x=v[56],x}function sF(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function sA(e,t){let n,i,l=(0,s.c)(8);l[0]!==t?(n=void 0===t?{}:t,l[0]=t,l[1]=n):n=l[1];let r=n,o=(0,d.useTemplates)();e:{let t,n;if(e.type&&"*"!==e.type){i=e;break e}let s=e.template||r.template;l[2]!==s||l[3]!==o?(t=s?o.find(e=>e.id===s):void 0,l[2]=s,l[3]=o,l[4]=t):t=l[4];let a=t?.schemaType;if(!a){i=e;break e}l[5]!==a||l[6]!==e?(n={...e,type:a},l[5]=a,l[6]=e,l[7]=n):n=l[7],i=n}return i}let sL=(0,a.forwardRef)(function(e,t){let n,i,l,r=(0,s.c)(9),{routerPanesState:d,groupIndex:c}=(0,a.useContext)(u.PaneRouterContext);r[0]!==c||r[1]!==d?(n=d.slice(0,c),r[0]=c,r[1]=d,r[2]=n):n=r[2];let p=n;r[3]!==p?(i={panes:p},r[3]=p,r[4]=i):i=r[4];let m=i;return r[5]!==e||r[6]!==t||r[7]!==m?(l=(0,o.jsx)(eV.StateLink,{...e,ref:t,state:m}),r[5]=e,r[6]=t,r[7]=m,r[8]=l):l=r[8],l}),sV=(0,a.forwardRef)(function(e,t){let n,i,l,r,d,c,p=(0,s.c)(19);p[0]!==e?({childId:n,childPayload:l,childParameters:i,...r}=e,p[0]=e,p[1]=n,p[2]=i,p[3]=l,p[4]=r):(n=p[1],i=p[2],l=p[3],r=p[4]);let{routerPanesState:m,groupIndex:h}=(0,a.useContext)(u.PaneRouterContext);if(p[5]!==n||p[6]!==i||p[7]!==l||p[8]!==h||p[9]!==m){let e;p[11]!==n||p[12]!==i||p[13]!==l?(e=[{id:n,params:i,payload:l}],p[11]=n,p[12]=i,p[13]=l,p[14]=e):e=p[14],d={panes:[...m.slice(0,h+1),e]},p[5]=n,p[6]=i,p[7]=l,p[8]=h,p[9]=m,p[10]=d}else d=p[10];return p[15]!==t||p[16]!==r||p[17]!==d?(c=(0,o.jsx)(eV.StateLink,{...r,ref:t,state:d}),p[15]=t,p[16]=r,p[17]=d,p[18]=c):c=p[18],c}),sM=(0,a.forwardRef)(function(e,t){let n,i,l,r,c,p,m,h=(0,s.c)(20),{routerPanesState:g,groupIndex:f,siblingIndex:x}=(0,a.useContext)(u.PaneRouterContext);h[0]!==e?({params:n,payload:i,...l}=e,h[0]=e,h[1]=n,h[2]=i,h[3]=l):(n=h[1],i=h[2],l=h[3]);let b=(0,d.useUnique)(n),y=(0,d.useUnique)(i),v=g[f],j=v[x],w=b??j.params,S=y??j.payload;h[4]!==j||h[5]!==w||h[6]!==S?(r={...j,params:w,payload:S},h[4]=j,h[5]=w,h[6]=S,h[7]=r):r=h[7];let _=r;h[8]!==v||h[9]!==_||h[10]!==x?(c=[...v.slice(0,x),_,...v.slice(x+1)],h[8]=v,h[9]=_,h[10]=x,h[11]=c):c=h[11];let I=c;h[12]!==g||h[13]!==f||h[14]!==I?(p={panes:[...g.slice(0,f),I,...g.slice(f+1)]},h[12]=g,h[13]=f,h[14]=I,h[15]=p):p=h[15];let C=p;return h[16]!==C||h[17]!==t||h[18]!==l?(m=(0,o.jsx)(eV.StateLink,{ref:t,...l,state:C}),h[16]=C,h[17]=t,h[18]=l,h[19]=m):m=h[19],m}),sO=(0,a.forwardRef)(function(e,t){let n,i,l,r,a,d,u,p,m,h,g,f=(0,s.c)(24);f[0]!==e?({documentId:i,documentType:l,parentRefPath:r,children:n,template:d,...a}=e,f[0]=e,f[1]=n,f[2]=i,f[3]=l,f[4]=r,f[5]=a,f[6]=d):(n=f[1],i=f[2],l=f[3],r=f[4],a=f[5],d=f[6]),f[7]!==i?(u=(0,c.getPublishedId)(i),f[7]=i,f[8]=u):u=f[8];let x=d?.params;return f[9]!==r?(p=(0,tg.toString)(r),f[9]=r,f[10]=p):p=f[10],f[11]!==d?(m=d&&{template:d?.id},f[11]=d,f[12]=m):m=f[12],f[13]!==l||f[14]!==p||f[15]!==m?(h={type:l,parentRefPath:p,...m},f[13]=l,f[14]=p,f[15]=m,f[16]=h):h=f[16],f[17]!==n||f[18]!==t||f[19]!==a||f[20]!==u||f[21]!==x||f[22]!==h?(g=(0,o.jsx)(sV,{...a,ref:t,childId:u,childPayload:x,childParameters:h,children:n}),f[17]=n,f[18]=t,f[19]=a,f[20]=u,f[21]=x,f[22]=h,f[23]=g):g=f[23],g}),sz=[];function sB(e){let t,n,i,l,r,a,d,c,p,m,h,g,f,x=(0,s.c)(60),{children:b,flatIndex:y,index:v,params:j,payload:w,siblingIndex:S}=e,{navigate:_,navigateIntent:I,resolvePathFromState:C}=(0,eV.useRouter)(),T=(0,eV.useRouterState)(),{panes:R,expand:P}=n9(),E=T?.panes||sz,D=R?.[R.length-2],k=v-1;x[0]!==k||x[1]!==E||x[2]!==T||x[3]!==S?(t=e=>{let t=E[k]||[],n=t[S],i=e(t,n),l=[...E.slice(0,k),i,...E.slice(k+1)];return{...T,panes:l}},x[0]=k,x[1]=E,x[2]=T,x[3]=S,x[4]=t):t=x[4];let F=t;x[5]!==F||x[6]!==_?(n=(e,t)=>{let n=F(e);return setTimeout(()=>_(n,t?{stickyParams:t}:void 0),0),n},x[5]=F,x[6]=_,x[7]=n):n=x[7];let A=n;x[8]!==F||x[9]!==C||x[10]!==S?(i=e=>C(F((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)])),x[8]=F,x[9]=C,x[10]=S,x[11]=i):i=x[11];let L=i;x[12]!==A||x[13]!==S?(l=e=>{A((t,n)=>[...t.slice(0,S),{...n,payload:e},...t.slice(S+1)])},x[12]=A,x[13]=S,x[14]=l):l=x[14];let V=l;x[15]!==A||x[16]!==S?(r=(e,t)=>{A((t,n)=>[...t.slice(0,S),{...n,params:e},...t.slice(S+1)],t)},x[15]=A,x[16]=S,x[17]=r):r=x[17];let M=r;x[18]!==k||x[19]!==_||x[20]!==E?(a=e=>{let{id:t,parentRefPath:n,type:i,template:l,version:r}=e;_({panes:[...E.slice(0,k+1),[{id:t,params:{template:l.id,parentRefPath:(0,tg.toString)(n),type:i,version:r},payload:l.params}]]})},x[18]=k,x[19]=_,x[20]=E,x[21]=a):a=x[21];let O=a,z=!!E[k]&&E[k].length>1,B=E[k]?E[k].length:0,N=y?sL:void 0;x[22]!==A?(c=e=>{let t=void 0===e?{}:e;A(()=>[{id:t.id||"",payload:t.payload,params:t.params||{}}])},d=()=>{A(sN)},x[22]=A,x[23]=d,x[24]=c):(d=x[23],c=x[24]),x[25]!==P||x[26]!==k||x[27]!==D||x[28]!==_||x[29]!==E?(p=e=>{(void 0===e||e)&&D&&P(D.element),_({panes:E.slice(0,k)})},x[25]=P,x[26]=k,x[27]=D,x[28]=_,x[29]=E,x[30]=p):p=x[30],x[31]!==A||x[32]!==S?(m=e=>{A((t,n)=>{let i={...n,payload:e?.payload||n.payload,params:e?.params||n.params};return[...t.slice(0,S),i,...t.slice(S)]})},x[31]=A,x[32]=S,x[33]=m):m=x[33],x[34]!==j||x[35]!==M?(h=e=>{let t=(0,eN.omit)(j,"view");return M(e?{...t,view:e}:t)},x[34]=j,x[35]=M,x[36]=h):h=x[36],x[37]!==L||x[38]!==y||x[39]!==k||x[40]!==O||x[41]!==I||x[42]!==j||x[43]!==w||x[44]!==E||x[45]!==M||x[46]!==V||x[47]!==S||x[48]!==d||x[49]!==p||x[50]!==m||x[51]!==h||x[52]!==z||x[53]!==B||x[54]!==N||x[55]!==c?(g={index:y,groupIndex:k,siblingIndex:S,payload:w,params:j,hasGroupSiblings:z,groupLength:B,routerPanesState:E,ChildLink:sV,BackLink:N,ReferenceChildLink:sO,handleEditReference:O,ParameterizedLink:sM,replaceCurrent:c,closeCurrent:d,closeCurrentAndAfter:p,duplicateCurrent:m,setView:h,setParams:M,setPayload:V,createPathWithParams:L,navigateIntent:I},x[37]=L,x[38]=y,x[39]=k,x[40]=O,x[41]=I,x[42]=j,x[43]=w,x[44]=E,x[45]=M,x[46]=V,x[47]=S,x[48]=d,x[49]=p,x[50]=m,x[51]=h,x[52]=z,x[53]=B,x[54]=N,x[55]=c,x[56]=g):g=x[56];let H=g;return x[57]!==b||x[58]!==H?(f=(0,o.jsx)(u.PaneRouterContext.Provider,{value:H,children:b}),x[57]=b,x[58]=H,x[59]=f):f=x[59],f}function sN(e,t){return e.length>1?e.filter(e=>e!==t):e}function sH(e){let t,n,i,l,r,a=(0,s.c)(14),{isSelected:c,pane:u,paneKey:p}=e;a[0]!==u?(t=(0,d.isRecord)(u)&&u.type||null,a[0]=u,a[1]=t):t=a[1];let m=t,{t:h}=(0,d.useTranslation)(_);return a[2]!==h?(n=h("panes.unknown-pane-type.title"),a[2]=h,a[3]=n):n=a[3],a[4]!==n?(i=(0,o.jsx)(iC,{title:n}),a[4]=n,a[5]=i):i=a[5],a[6]!==h||a[7]!==m?(l=(0,o.jsx)(is,{children:(0,o.jsx)(eT.Box,{padding:4,children:"string"==typeof m?(0,o.jsx)(eT.Text,{as:"p",muted:!0,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.unknown-type.text",values:{type:m}})}):(0,o.jsx)(eT.Text,{as:"p",muted:!0,children:(0,o.jsx)(d.Translate,{t:h,i18nKey:"panes.unknown-pane-type.missing-type.text"})})})}),a[6]=h,a[7]=m,a[8]=l):l=a[8],a[9]!==c||a[10]!==p||a[11]!==i||a[12]!==l?(r=(0,o.jsxs)(il,{id:p,selected:c,children:[i,l]}),a[9]=c,a[10]=p,a[11]=i,a[12]=l,a[13]=r):r=a[13],r}let s$={component:(0,a.lazy)(()=>e.A(837894)),document:(0,a.lazy)(()=>Promise.resolve().then(function(){return cx})),documentList:(0,a.lazy)(()=>Promise.resolve().then(function(){return cb})),list:(0,a.lazy)(()=>e.A(328515))},sU=(0,a.memo)(function(e){let t,n,i,l,r=(0,s.c)(25),{active:d,childItemId:c,groupIndex:u,index:p,itemId:m,pane:h,paneKey:g,params:f,payload:x,path:b,selected:y,siblingIndex:v,maximized:j,onSetMaximizedPane:w}=e,S=s$[h.type]||sH;r[0]!==g||r[1]!==b||r[2]!==y?(t=(0,o.jsx)(iB,{paneKey:g,path:b,selected:y}),r[0]=g,r[1]=b,r[2]=y,r[3]=t):t=r[3];let _=c||"";return r[4]!==S||r[5]!==d||r[6]!==p||r[7]!==m||r[8]!==j||r[9]!==w||r[10]!==h||r[11]!==g||r[12]!==y||r[13]!==_?(n=(0,o.jsx)(S,{childItemId:_,index:p,itemId:m,isActive:d,isSelected:y,paneKey:g,pane:h,maximized:j,onSetMaximizedPane:w}),r[4]=S,r[5]=d,r[6]=p,r[7]=m,r[8]=j,r[9]=w,r[10]=h,r[11]=g,r[12]=y,r[13]=_,r[14]=n):n=r[14],r[15]!==t||r[16]!==n?(i=(0,o.jsx)(a.Suspense,{fallback:t,children:n}),r[15]=t,r[16]=n,r[17]=i):i=r[17],r[18]!==u||r[19]!==p||r[20]!==f||r[21]!==x||r[22]!==v||r[23]!==i?(l=(0,o.jsx)(sB,{flatIndex:p,index:u,params:f,payload:x,siblingIndex:v,children:i}),r[18]=u,r[19]=p,r[20]=f,r[21]=x,r[22]=v,r[23]=i,r[24]=l):l=r[24],l},({params:e={},payload:t=null,...n},{params:i={},payload:l=null,...r})=>{if(!(0,eH.isEqual)(e,i)||!(0,eH.isEqual)(t,l))return!1;for(let e of new Set([...Object.keys(n),...Object.keys(r)]))if(n[e]!==r[e])return!1;return!0});function sG(e){let t,n,i=(0,s.c)(10),{document:l}=e,r=(0,d.useSchema)().get(l._type),{t:a}=(0,d.useTranslation)(_),{title:c}=i2();if(!r){let e,t;return i[0]!==l._type||i[1]!==a?(e=a("doc-title.unknown-schema-type.text",{schemaType:l._type}),i[0]=l._type,i[1]=a,i[2]=e):e=i[2],i[3]!==e?(t=(0,o.jsx)("code",{children:e}),i[3]=e,i[4]=t):t=i[4],t}return i[5]!==a||i[6]!==c?(t=c||(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:a("doc-title.fallback.text")}),i[5]=a,i[6]=c,i[7]=t):t=i[7],i[8]!==t?(n=(0,o.jsx)(o.Fragment,{children:t}),i[8]=t,i[9]=n):n=i[9],n}let sq=(0,eD.styled)(eT.Box)`
  margin-left: auto;
`,sW=eD.styled.details`
  flex: none;

  &[open] ${sq} {
    transform: rotate(180deg);
  }
`,sK=eD.styled.summary`
  list-style: none;

  &::-webkit-details-marker {
    display: none;
  }
`,sY=eD.styled.table`
  width: 100%;
  text-align: left;
  padding: 0 ${({theme:e})=>(0,eT.rem)(e.sanity.space[2])};
  border-collapse: collapse;

  th {
    padding: ${({theme:e})=>(0,eT.rem)(e.sanity.space[1])};
  }

  td {
    padding: 0 ${({theme:e})=>(0,eT.rem)(e.sanity.space[1])};
  }

  tr > *:last-child {
    text-align: right;
  }
`,sX=(0,eD.styled)(eT.Flex)`
  min-height: 33px;
`,sQ=e=>{let t,n,i,l,r,a,c=(0,s.c)(13),{t:u}=(0,d.useTranslation)(_),p=e.totalCount-e.references.length;return p?(c[0]!==p||c[1]!==u?(t=u("confirm-delete-dialog.other-reference-count.title",{count:p}),c[0]=p,c[1]=u,c[2]=t):t=c[2],c[3]!==t?(n=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:t}),c[3]=t,c[4]=n):n=c[4],c[5]!==u?(i=u("confirm-delete-dialog.other-reference-count.tooltip"),c[5]=u,c[6]=i):i=c[6],c[7]===Symbol.for("react.memo_cache_sentinel")?(l=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:(0,o.jsx)(m.InfoOutlineIcon,{})}),c[7]=l):l=c[7],c[8]!==i?(r=(0,o.jsx)(eC.Tooltip,{portal:!0,placement:"top",content:i,children:l}),c[8]=i,c[9]=r):r=c[9],c[10]!==n||c[11]!==r?(a=(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsxs)(eT.Inline,{space:2,children:[n,r]})}),c[10]=n,c[11]=r,c[12]=a):a=c[12],a):null};function sJ(e){let t,n,i,l,r,a,c=(0,s.c)(27),{icon:u,layout:p,presence:m,schemaType:h,value:g}=e,f=(0,d.useDocumentVersionInfo)(g._id),{perspectiveStack:x}=(0,d.usePerspective)();c[0]!==x||c[1]!==e.documentPreviewStore||c[2]!==h||c[3]!==g._id?(t=(0,d.getPreviewStateObservable)(e.documentPreviewStore,h,g._id,x),c[0]=x,c[1]=e.documentPreviewStore,c[2]=h,c[3]=g._id,c[4]=t):t=c[4];let b=t;c[5]===Symbol.for("react.memo_cache_sentinel")?(n={snapshot:null,isLoading:!0,original:null},c[5]=n):n=c[5];let{snapshot:y,original:v,isLoading:j}=(0,eL.useObservable)(b,n);c[6]!==j||c[7]!==m||c[8]!==f.draft||c[9]!==f.published||c[10]!==f.versions?(i=j?null:(0,o.jsx)(eC.TooltipDelayGroupProvider,{children:(0,o.jsxs)(eT.Flex,{align:"center",gap:3,children:[m&&m.length>0&&(0,o.jsx)(d.DocumentPreviewPresence,{presence:m}),(0,o.jsx)(d.DocumentStatusIndicator,{draft:f.draft,published:f.published,versions:f.versions})]})}),c[6]=j,c[7]=m,c[8]=f.draft,c[9]=f.published,c[10]=f.versions,c[11]=i):i=c[11];let w=i;c[12]!==f.draft||c[13]!==f.published||c[14]!==f.versions?(l=(0,o.jsx)(d.DocumentStatus,{draft:f.draft,published:f.published,versions:f.versions}),c[12]=f.draft,c[13]=f.published,c[14]=f.versions,c[15]=l):l=c[15];let S=l;return c[16]!==v||c[17]!==y||c[18]!==g?(r=(0,d.getPreviewValueWithFallback)({snapshot:y,original:v,fallback:g}),c[16]=v,c[17]=y,c[18]=g,c[19]=r):r=c[19],c[20]!==u||c[21]!==j||c[22]!==p||c[23]!==w||c[24]!==r||c[25]!==S?(a=(0,o.jsx)(d.SanityDefaultPreview,{...r,isPlaceholder:j,icon:u,layout:p,status:w,tooltip:S}),c[20]=u,c[21]=j,c[22]=p,c[23]=w,c[24]=r,c[25]=S,c[26]=a):a=c[26],a}let sZ=[];function s0(e){let t,n,i,l,r=(0,s.c)(16),{onClick:a,type:u,value:p}=e,m=p?._id;r[0]!==m?(t=(0,c.getPublishedId)(m),r[0]=m,r[1]=t):t=r[1];let h=(0,d.useDocumentPresence)(t),g=(0,d.useDocumentPreviewStore)(),{ReferenceChildLink:f}=lk();r[2]!==f||r[3]!==u?.name||r[4]!==p?._id?(n=function(e){return(0,o.jsx)(f,{documentId:p?._id,documentType:u?.name,parentRefPath:sZ,...e})},r[2]=f,r[3]=u?.name,r[4]=p?._id,r[5]=n):n=r[5];let x=n,b=u?.icon,y=h?.length>0?h:sZ;return r[6]!==g||r[7]!==b||r[8]!==y||r[9]!==u||r[10]!==p?(i=(0,o.jsx)(sJ,{documentPreviewStore:g,icon:b,layout:"default",presence:y,schemaType:u,value:p}),r[6]=g,r[7]=b,r[8]=y,r[9]=u,r[10]=p,r[11]=i):i=r[11],r[12]!==a||r[13]!==x||r[14]!==i?(l=(0,o.jsx)(d.PreviewCard,{__unstable_focusRing:!0,as:x,"data-as":"a",onClick:a,radius:2,children:i}),r[12]=a,r[13]=x,r[14]=i,r[15]=l):l=r[15],l}let s1=(0,eD.styled)(eT.Text)`
  /* text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap; */
  max-width: 120px;
`,s2=e=>{let t,n,i,l,r,a,u,p,m,h,g,f,x,b,y=(0,s.c)(44),{versionId:v,schemaType:j}=e,{t:w}=(0,d.useTranslation)(),S=(0,d.useDocumentPreviewStore)();y[0]!==v?(t=(0,d.getDocumentVariantType)(v),y[0]=v,y[1]=t):t=y[1];let _=t,{data:I}=(0,d.useActiveReleases)();if(y[2]!==S||y[3]!==_||y[4]!==j||y[5]!==v){let e=["version"===_?(0,c.getVersionFromId)(v):"published"===_?"published":"drafts"];n=(0,d.getPreviewStateObservable)(S,j,(0,c.getPublishedId)(v),e),y[2]=S,y[3]=_,y[4]=j,y[5]=v,y[6]=n}else n=y[6];let C=n;y[7]===Symbol.for("react.memo_cache_sentinel")?(i={snapshot:null,isLoading:!0,original:null},y[7]=i):i=y[7];let{snapshot:T,original:R,isLoading:P}=(0,eL.useObservable)(C,i);e:{let e;if("version"!==_){l=void 0;break e}if(y[8]!==I||y[9]!==v){let t;y[11]!==v?(t=e=>(0,d.getReleaseIdFromReleaseDocumentId)(e._id)===(0,c.getVersionFromId)(v),y[11]=v,y[12]=t):t=y[12],e=I.find(t),y[8]=I,y[9]=v,y[10]=e}else e=y[10];l=e}let E=l;y[13]!==_||y[14]!==E?.metadata?.title||y[15]!==w||y[16]!==v?(r=()=>"version"===_?E?.metadata?.title||(0,c.getVersionFromId)(v):w("published"===_?"release.chip.published":"release.chip.draft"),y[13]=_,y[14]=E?.metadata?.title,y[15]=w,y[16]=v,y[17]=r):r=y[17];let D=r;y[18]!==_||y[19]!==E?(a=E?(0,d.getReleaseTone)(E):"published"===_?"positive":"caution",y[18]=_,y[19]=E,y[20]=a):a=y[20];let k=a;y[21]!==R||y[22]!==j.name||y[23]!==T||y[24]!==v?(u=(0,d.getPreviewValueWithFallback)({snapshot:T,original:R,fallback:{_id:v,_type:j.name}}),y[21]=R,y[22]=j.name,y[23]=T,y[24]=v,y[25]=u):u=y[25];let F=j.icon;return y[26]===Symbol.for("react.memo_cache_sentinel")?(p={backgroundColor:"transparent"},y[26]=p):p=y[26],y[27]!==k?(m=(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.ReleaseAvatarIcon,{tone:k})}),y[27]=k,y[28]=m):m=y[28],y[29]!==D?(h=D(),y[29]=D,y[30]=h):h=y[30],y[31]!==h?(g=(0,o.jsx)(s1,{size:1,weight:"medium",textOverflow:"ellipsis",children:h}),y[31]=h,y[32]=g):g=y[32],y[33]!==m||y[34]!==g?(f=(0,o.jsxs)(eT.Flex,{align:"center",gap:2,paddingY:2,paddingRight:3,paddingLeft:2,children:[m,g]}),y[33]=m,y[34]=g,y[35]=f):f=y[35],y[36]!==f||y[37]!==k?(x=(0,o.jsx)(eT.Card,{border:!0,radius:"full",children:(0,o.jsx)(eT.Card,{radius:"full",tone:k,style:p,children:f})}),y[36]=f,y[37]=k,y[38]=x):x=y[38],y[39]!==P||y[40]!==j.icon||y[41]!==x||y[42]!==u?(b=(0,o.jsx)(d.SanityDefaultPreview,{...u,isPlaceholder:P,icon:F,layout:"default",status:x}),y[39]=P,y[40]=j.icon,y[41]=x,y[42]=u,y[43]=b):b=y[43],b},s3=e=>{let t,n,i,l=(0,s.c)(8),{documentType:r,documentVersions:a}=e,c=(0,d.useSchema)();l[0]!==r||l[1]!==c?(t=c.get(r),l[0]=r,l[1]=c,l[2]=t):t=l[2];let u=t;if(!u)throw Error(`Schema type ${r} not found`);return l[3]!==a||l[4]!==u?(n=a?.map(e=>(0,o.jsx)(s2,{versionId:e,schemaType:u},e)),l[3]=a,l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,o.jsx)(eT.Card,{border:!0,padding:1,radius:2,children:(0,o.jsx)(eT.Stack,{children:n})}),l[6]=n,l[7]=i):i=l[7],i};function s4(e){let t,n,i,l,r,a,c,u,p,h,g,f,x,b,y,v,j,w,S,I=(0,s.c)(66),{crossDatasetReferences:C,internalReferences:T,documentTitle:R,totalCount:P,action:E,datasetNames:D,hasUnknownDatasetNames:k,documentId:F,documentType:A,onReferenceLinkClick:L,documentVersions:V}=e,M=(0,d.useSchema)(),O=(0,eR.useToast)(),{t:z}=(0,d.useTranslation)(_);I[0]!==L||I[1]!==M||I[2]!==z?(t=e=>{let t=M.get(e._type);return t?(0,o.jsx)(s0,{type:t,value:e,onClick:L}):(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsx)(d.SanityDefaultPreview,{icon:m.UnknownIcon,title:z("confirm-delete-dialog.preview-item.preview-unavailable.title"),subtitle:z("confirm-delete-dialog.preview-item.preview-unavailable.subtitle",{documentId:e._id}),layout:"default"})})},I[0]=L,I[1]=M,I[2]=z,I[3]=t):t=I[3];let B=t;I[4]!==E||I[5]!==R||I[6]!==A||I[7]!==V||I[8]!==z?(n=()=>(0,o.jsxs)(eT.Stack,{space:4,children:[(0,o.jsx)(eT.Text,{as:"p",size:1,children:(0,o.jsx)(d.Translate,{t:z,i18nKey:"confirm-delete-dialog.confirmation.text",context:E,components:{DocumentTitle:()=>(0,o.jsx)("strong",{children:R})}})}),"delete"===E&&(0,o.jsx)(s3,{documentType:A,documentVersions:V})]}),I[4]=E,I[5]=R,I[6]=A,I[7]=V,I[8]=z,I[9]=n):n=I[9];let N=n;if(T?.totalCount===0&&C?.totalCount===0){let e;return I[10]!==N?(e=N(),I[10]=N,I[11]=e):e=I[11],e}I[12]!==k?(i=k?["unavailable"]:[],I[12]=k,I[13]=i):i=I[13],I[14]!==D||I[15]!==i?(l=[...D,...i],I[14]=D,I[15]=i,I[16]=l):l=I[16];let H=l,$=H.length,U=H.join(", "),G=k&&H.length?"unavailable":"";I[17]!==H.length||I[18]!==z||I[19]!==U||I[20]!==G?(r=z("confirm-delete-dialog.cdr-summary.subtitle",{count:$,datasets:U,context:G}),I[17]=H.length,I[18]=z,I[19]=U,I[20]=G,I[21]=r):r=I[21];let q=r;return I[22]!==N?(a=N(),I[22]=N,I[23]=a):a=I[23],I[24]===Symbol.for("react.memo_cache_sentinel")?(c=(0,o.jsx)(eT.Card,{borderTop:!0,padding:1}),I[24]=c):c=I[24],I[25]===Symbol.for("react.memo_cache_sentinel")?(u=(0,o.jsx)(eT.Text,{"aria-hidden":"true",size:1,children:(0,o.jsx)(m.WarningOutlineIcon,{})}),I[25]=u):u=I[25],I[26]!==R?(p={DocumentTitle:()=>R},I[26]=R,I[27]=p):p=I[27],I[28]!==P?(h={count:P},I[28]=P,I[29]=h):h=I[29],I[30]!==z||I[31]!==p||I[32]!==h?(g=(0,o.jsxs)("div",{children:[c,(0,o.jsx)(eT.Card,{padding:3,radius:2,tone:"caution",flex:"none",children:(0,o.jsxs)(eT.Flex,{children:[u,(0,o.jsx)(eT.Box,{flex:1,marginLeft:3,children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-document-count.text",components:p,t:z,values:h})})})]})})]}),I[30]=z,I[31]=p,I[32]=h,I[33]=g):g=I[33],I[34]!==R?(f={DocumentTitle:()=>R},I[34]=R,I[35]=f):f=I[35],I[36]!==E||I[37]!==z||I[38]!==f?(x=(0,o.jsx)(eT.Box,{flex:"none",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referring-documents-descriptor.text",t:z,context:E,components:f})})}),I[36]=E,I[37]=z,I[38]=f,I[39]=x):x=I[39],I[40]!==T||I[41]!==B?(b=T.totalCount>0&&(0,o.jsxs)(eT.Stack,{as:"ul",space:2,"data-testid":"internal-references",children:[T?.references.map(e=>(0,o.jsx)(eT.Box,{as:"li",children:B(e)},e._id)),T.totalCount>T.references.length&&(0,o.jsx)(eT.Box,{as:"li",padding:3,children:(0,o.jsx)(sQ,{...T})})]}),I[40]=T,I[41]=B,I[42]=b):b=I[42],I[43]!==C||I[44]!==q||I[45]!==F||I[46]!==T.totalCount||I[47]!==H.length||I[48]!==z||I[49]!==O?(y=C.totalCount>0&&(0,o.jsxs)(sW,{"data-testid":"cross-dataset-references",style:{borderTop:T.totalCount>0?"1px solid var(--card-shadow-outline-color)":void 0},children:[(0,o.jsx)(sK,{children:(0,o.jsx)(eT.Card,{as:"a",marginTop:2*(T.totalCount>0),radius:2,shadow:1,paddingY:1,children:(0,o.jsxs)(eT.Flex,{align:"center",gap:3,paddingX:3,paddingY:1,children:[(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(m.DocumentsIcon,{})}),(0,o.jsxs)(eT.Stack,{space:2,children:[(0,o.jsx)(eT.Text,{textOverflow:"ellipsis",size:1,children:z("confirm-delete-dialog.cdr-summary.title",{count:H.length,documentCount:z("confirm-delete-dialog.cdr-summary.document-count",{count:C.totalCount})})}),(0,o.jsx)(eT.Text,{title:q,textOverflow:"ellipsis",size:1,muted:!0,children:q})]}),(0,o.jsx)(sq,{children:(0,o.jsx)(eT.Text,{muted:!0,size:1,children:(0,o.jsx)(m.ChevronDownIcon,{})})})]})})}),(0,o.jsxs)(eT.Box,{overflow:"auto",paddingTop:2,children:[(0,o.jsxs)(sY,{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:(0,o.jsx)(eT.Text,{muted:!0,size:1,style:{minWidth:"5rem"},weight:"medium",children:z("confirm-delete-dialog.cdr-table.project-id.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(eT.Text,{muted:!0,size:1,weight:"medium",children:z("confirm-delete-dialog.cdr-table.dataset.label")})}),(0,o.jsx)("th",{children:(0,o.jsx)(eT.Text,{muted:!0,size:1,weight:"medium",children:z("confirm-delete-dialog.cdr-table.document-id.label")})})]})}),(0,o.jsx)("tbody",{children:C.references.filter(s5).map((e,t)=>{let{projectId:n,datasetName:i,documentId:l}=e;return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{children:(0,o.jsx)(eT.Text,{size:1,children:n})}),(0,o.jsx)("td",{children:(0,o.jsx)(eT.Text,{size:1,children:i||"unavailable"})}),(0,o.jsx)("td",{children:(0,o.jsxs)(sX,{align:"center",gap:2,justify:"flex-end",children:[(0,o.jsx)(eT.Text,{textOverflow:"ellipsis",size:1,children:l||"unavailable"}),l&&(0,o.jsx)(eC.Button,{mode:"bleed",icon:m.CopyIcon,tooltipProps:{content:z("confirm-delete-dialog.cdr-table.copy-id-button.tooltip")},onClick:()=>{navigator.clipboard.writeText(l).catch(()=>{O.push({status:"error",title:z("confirm-delete-dialog.cdr-table.id-copied-toast.title-failed")})})}})]})})]},`${F}-${t}`)})})]}),(0,o.jsx)(sQ,{...C})]})]}),I[43]=C,I[44]=q,I[45]=F,I[46]=T.totalCount,I[47]=H.length,I[48]=z,I[49]=O,I[50]=y):y=I[50],I[51]!==b||I[52]!==y?(v=(0,o.jsx)(eT.Card,{radius:2,shadow:1,flex:"auto",padding:1,children:(0,o.jsxs)(eT.Flex,{direction:"column",children:[b,y]})}),I[51]=b,I[52]=y,I[53]=v):v=I[53],I[54]!==R?(j={DocumentTitle:()=>R},I[54]=R,I[55]=j):j=I[55],I[56]!==E||I[57]!==z||I[58]!==j?(w=(0,o.jsx)(eT.Box,{flex:"none",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{i18nKey:"confirm-delete-dialog.referential-integrity-disclaimer.text",t:z,context:E,components:j})})}),I[56]=E,I[57]=z,I[58]=j,I[59]=w):w=I[59],I[60]!==g||I[61]!==x||I[62]!==v||I[63]!==w||I[64]!==a?(S=(0,o.jsxs)(eT.Flex,{direction:"column",gap:4,children:[a,g,x,v,w]}),I[60]=g,I[61]=x,I[62]=v,I[63]=w,I[64]=a,I[65]=S):S=I[65],S}function s5(e){return"projectId"in e}let s6=()=>(t||(t=(0,tr.fromEvent)(document,"visibilitychange").pipe((0,eY.startWith)(null),(0,eW.map)(()=>"visible"===document.visibilityState),(0,eJ.distinctUntilChanged)(),(0,eZ.switchMap)(e=>e?(0,to.timer)(0,5e3):ts.EMPTY),(0,e0.shareReplay)({refCount:!0,bufferSize:1}))),t),s8=(0,d.createHookFromObservableFactory)(([e,t])=>t.listenQuery({fetch:'{"references":*[references($documentId)][0...100]{_id,_type},"totalCount":count(*[references($documentId)])}',listen:"*[references($documentId)]"},{documentId:e},{tag:"use-referring-documents",transitions:["appear","disappear"],throttleTime:5e3})),s7=(0,d.createHookFromObservableFactory)(([e,t])=>s6().pipe((0,eZ.switchMap)(()=>(function(e,t){let{versionedClient:n}=t;return s6().pipe((0,eZ.switchMap)(()=>(function(e,{versionedClient:t}){let n=(0,c.getDraftId)(e),i=(0,c.getPublishedId)(e),l={uri:t.getDataUrl("doc",`${n},${i}`),json:!0,query:{excludeContent:"true"},tag:"use-referring-documents.document-existence"};return t.observable.request(l).pipe((0,eW.map)(({omitted:e})=>{let t=e.filter(e=>"existence"===e.reason);if(2!==t.length)return 0===t.length||t.some(e=>e.id===n)?i:n}))})(e,t)),(0,eZ.switchMap)(e=>{if(!e)return(0,e9.of)({totalCount:0,references:[]});let t=n.config().dataset;return n.observable.request({url:`/data/references/${t}/documents/${e}/to?excludeInternalReferences=true&excludePaths=true`,tag:"use-referring-documents.external"}).pipe((0,eK.catchError)(e=>{if("object"==typeof e&&e&&"statusCode"in e&&"response"in e&&404===e.statusCode)return(0,e9.of)({totalCount:0,references:[]});throw e}))}))})(e,{versionedClient:t}))));function s9(e){return"string"!=typeof e.datasetName}function ae(e){return!!e&&""!==e}function at(e){return e?.datasetName||""}function an(e){return e.projectId}let ai=(0,eD.styled)(eT.Box)`
  box-sizing: border-box;
`,al=(0,eD.styled)(eT.Flex).attrs({align:"center",direction:"column",justify:"center"})`
  height: 110px;
`;function ar(e){let t,n,i,l,r,u,p,m,h,g,f,x,b=(0,s.c)(51),{id:y,type:v,action:j,onCancel:w,onConfirm:S}=e,I=void 0===j?"delete":j,{t:C}=(0,d.useTranslation)(_),T=`deletion-confirmation-${(0,a.useId)()}`,{internalReferences:R,crossDatasetReferences:P,isLoading:E,totalCount:D,projectIds:k,datasetNames:F,hasUnknownDatasetNames:A}=function(e){let t,n,i,l,r,o,a,u,p=(0,s.c)(24),m=(0,d.useClient)(d.DEFAULT_STUDIO_CLIENT_OPTIONS),h=(0,d.useDocumentStore)();p[0]!==e?(t=(0,c.getPublishedId)(e),p[0]=e,p[1]=t):t=p[1];let g=t;p[2]!==h||p[3]!==g?(n=[g,h],p[2]=h,p[3]=g,p[4]=n):n=p[4];let[f,x]=s8(n);p[5]!==g||p[6]!==m?(i=[g,m],p[5]=g,p[6]=m,p[7]=i):i=p[7];let[b,y]=s7(i);p[8]!==b?.references?(l=()=>Array.from(new Set(b?.references.map(an).filter(Boolean))).sort(),p[8]=b?.references,p[9]=l):l=p[9],p[10]!==l?(r=l(),p[10]=l,p[11]=r):r=p[11];let v=r;p[12]!==b?.references?(o=Array.from(new Set(b?.references.map(at).filter(ae))).sort(),p[12]=b?.references,p[13]=o):o=p[13];let j=o;p[14]!==b?.references?(a=()=>!!b?.references.some(s9),p[14]=b?.references,p[15]=a):a=p[15];let w=a(),S=(f?.totalCount||0)+(b?.totalCount||0),_=x||y;return p[16]!==b||p[17]!==j||p[18]!==w||p[19]!==f||p[20]!==v||p[21]!==S||p[22]!==_?(u={totalCount:S,projectIds:v,datasetNames:j,hasUnknownDatasetNames:w,internalReferences:f,crossDatasetReferences:b,isLoading:_},p[16]=b,p[17]=j,p[18]=w,p[19]=f,p[20]=v,p[21]=S,p[22]=_,p[23]=u):u=p[23],u}(y);b[0]!==y||b[1]!==v?(t={_id:y,_type:v},b[0]=y,b[1]=v,b[2]=t):t=b[2];let L=t;b[3]!==L?(n=(0,o.jsx)(sG,{document:L}),b[3]=L,b[4]=n):n=b[4];let V=n,M=!E;b[5]!==y?(i=(0,c.getPublishedId)(y),b[5]=y,b[6]=i):i=b[6],b[7]!==i?(l={documentId:i},b[7]=i,b[8]=l):l=b[8];let{data:O,loading:z}=(0,d.useDocumentVersions)(l);b[9]!==O||b[10]!==S?(r=()=>{S(O)},b[9]=O,b[10]=S,b[11]=r):r=b[11];let B=r;return b[12]!==I||b[13]!==C?(u=C("confirm-delete-dialog.header.text",{context:I}),b[12]=I,b[13]=C,b[14]=u):u=b[14],b[15]!==C?(p=C("confirm-delete-dialog.cancel-button.text"),b[15]=C,b[16]=p):p=b[16],b[17]!==w||b[18]!==p?(m={onClick:w,text:p},b[17]=w,b[18]=p,b[19]=m):m=b[19],b[20]!==I||b[21]!==B||b[22]!==M||b[23]!==C||b[24]!==D?(h=M?{text:C(D>0?"confirm-delete-dialog.confirm-anyway-button.text":"confirm-delete-dialog.confirm-button.text",{context:I}),onClick:B}:void 0,b[20]=I,b[21]=B,b[22]=M,b[23]=C,b[24]=D,b[25]=h):h=b[25],b[26]!==m||b[27]!==h?(g={cancelButton:m,confirmButton:h},b[26]=m,b[27]=h,b[28]=g):g=b[28],b[29]!==I||b[30]!==P||b[31]!==F||b[32]!==V||b[33]!==O||b[34]!==A||b[35]!==y||b[36]!==R||b[37]!==E||b[38]!==w||b[39]!==k||b[40]!==C||b[41]!==D||b[42]!==v||b[43]!==z?(f=(0,o.jsx)(ai,{children:P&&R&&!E&&!z?(0,o.jsx)(s4,{crossDatasetReferences:P,internalReferences:R,documentTitle:V,isLoading:E,totalCount:D,action:I,projectIds:k,datasetNames:F,hasUnknownDatasetNames:A,onReferenceLinkClick:w,documentId:y,documentType:v,documentVersions:O}):(0,o.jsx)(al,{"data-testid":"loading-container",children:(0,o.jsx)(d.LoadingBlock,{showText:!0,title:C("confirm-delete-dialog.loading.text")})})}),b[29]=I,b[30]=P,b[31]=F,b[32]=V,b[33]=O,b[34]=A,b[35]=y,b[36]=R,b[37]=E,b[38]=w,b[39]=k,b[40]=C,b[41]=D,b[42]=v,b[43]=z,b[44]=f):f=b[44],b[45]!==T||b[46]!==w||b[47]!==g||b[48]!==f||b[49]!==u?(x=(0,o.jsx)(eC.Dialog,{width:1,id:T,header:u,footer:g,onClose:w,onClickOutside:w,children:f}),b[45]=T,b[46]=w,b[47]=g,b[48]=f,b[49]=u,b[50]=x):x=b[50],x}function ao(e){let t,n,i=(0,s.c)(6),{t:l}=(0,d.useTranslation)(_),r=(0,a.useId)(),[c,u]=(0,a.useState)(null);i[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>u(null),i[0]=t):t=i[0];let p=t;return i[1]!==c||i[2]!==r||i[3]!==e||i[4]!==l?(n=c?(0,o.jsx)(eC.Dialog,{id:`dialog-error-${r}`,"data-testid":"confirm-delete-error-dialog",header:l("confirm-delete-dialog.error.title.text"),footer:{confirmButton:{text:l("confirm-delete-dialog.error.retry-button.text"),onClick:p,tone:"default"}},onClose:e.onCancel,children:(0,o.jsx)(eT.Box,{padding:4,children:(0,o.jsx)(eT.Text,{size:1,children:l("confirm-delete-dialog.error.message.text")})})}):(0,o.jsx)(eC.ErrorBoundary,{onCatch:u,children:(0,o.jsx)(ar,{...e})}),i[1]=c,i[2]=r,i[3]=e,i[4]=l,i[5]=n):n=i[5],n}let as=(0,a.forwardRef)(function(e,t){let n,i,l,r,d=(0,s.c)(10);d[0]!==e?({intent:n,...i}=e,d[0]=e,d[1]=n,d[2]=i):(n=d[1],i=d[2]),d[3]!==n?(l=(0,a.forwardRef)(function(e,t){return(0,o.jsx)(eV.IntentLink,{...e,intent:n.type,params:n.params,ref:t,searchParams:n.searchParams})}),d[3]=n,d[4]=l):l=d[4];let c=l;return d[5]!==c||d[6]!==e.disabled||d[7]!==t||d[8]!==i?(r=e.disabled?(0,o.jsx)(eC.Button,{...i,as:"a",role:"link","aria-disabled":"true"}):(0,o.jsx)(eC.Button,{...i,as:c,"data-as":"a",ref:t}),d[5]=c,d[6]=e.disabled,d[7]=t,d[8]=i,d[9]=r):r=d[9],r});function aa(e){let t,n,i,l=(0,s.c)(12),{reveal:r,context:a,loading:c,children:u}=e,p=(0,d.useCurrentUser)(),{t:m}=(0,d.useTranslation)(_);if(!r){let e;return l[0]!==u?(e=(0,o.jsx)(o.Fragment,{children:u}),l[0]=u,l[1]=e):e=l[1],e}return l[2]!==a||l[3]!==p||l[4]!==c||l[5]!==m?(t=c?m("insufficient-permissions-message-tooltip.loading-text"):(0,o.jsx)(d.InsufficientPermissionsMessage,{context:a,currentUser:p}),l[2]=a,l[3]=p,l[4]=c,l[5]=m,l[6]=t):t=l[6],l[7]!==u?(n=(0,o.jsx)("div",{children:u}),l[7]=u,l[8]=n):n=l[8],l[9]!==t||l[10]!==n?(i=(0,o.jsx)(eC.Tooltip,{content:t,portal:!0,children:n}),l[9]=t,l[10]=n,l[11]=i):i=l[11],i}let ad={constrainSize:!0,placement:"bottom",portal:!0},ac=(e,t,n)=>{let i=e.find(e=>e.id===t.templateId)?.schemaType;if(!i)return null;let l={template:t.templateId,type:i,version:n,id:t.initialDocumentId};return{type:"create",params:t.parameters?[l,t.parameters]:l,searchParams:n?[["perspective",n]]:void 0}};function au(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(60),{templateItems:g}=e,f=(0,d.useTemplates)(),{selectedReleaseId:x}=(0,d.usePerspective)(),{t:b}=(0,d.useTranslation)(_);h[0]!==g||h[1]!==f?(t=[...g,...f],h[0]=g,h[1]=f,h[2]=t):t=h[2];let y=(0,d.useGetI18nText)(t);h[3]!==g?(n={templateItems:g},h[3]=g,h[4]=n):n=h[4];let[v,j]=(0,d.useTemplatePermissions)(n),w=!j&&v?.length!==0&&v?.every(am);e:{let e;if(!v){let e;h[5]===Symbol.for("react.memo_cache_sentinel")?(e={},h[5]=e):e=h[5],i=e;break e}h[6]!==v?(e=v.reduce(ap,{}),h[6]=v,h[7]=e):e=h[7],i=e}let S=i;if(0===g.length)return null;if(w){let e,t,n;return h[8]!==b?(e=b("pane-header.disabled-created-button.aria-label"),h[8]=b,h[9]=e):e=h[9],h[10]!==e?(t=(0,o.jsx)(eC.Button,{"aria-label":e,icon:m.AddIcon,"data-testid":"action-intent-button",disabled:!0,mode:"bleed",tooltipProps:null}),h[10]=e,h[11]=t):t=h[11],h[12]!==j||h[13]!==t?(n=(0,o.jsx)(aa,{context:"create-document-type",reveal:!0,loading:j,children:t}),h[12]=j,h[13]=t,h[14]=n):n=h[14],n}if(1===g.length){let e,t,n,i,l,r,s=g[0],a=!S[s.id]?.granted;h[15]!==s||h[16]!==x||h[17]!==f?(e=ac(f,s,x),h[15]=s,h[16]=x,h[17]=f,h[18]=e):e=h[18];let d=e;if(!d)return null;h[19]!==s||h[20]!==y?(t=y(s),h[19]=s,h[20]=y,h[21]=t):t=h[21];let c=t.title,u=s.icon||m.AddIcon;return h[22]!==b?(n=b("pane-header.create-new-button.tooltip"),h[22]=b,h[23]=n):n=h[23],h[24]!==n?(i={content:n},h[24]=n,h[25]=i):i=h[25],h[26]!==a||h[27]!==d||h[28]!==t.title||h[29]!==u||h[30]!==i?(l=(0,o.jsx)(as,{"aria-label":c,icon:u,intent:d,mode:"bleed",disabled:a,"data-testid":"action-intent-button",tooltipProps:i}),h[26]=a,h[27]=d,h[28]=t.title,h[29]=u,h[30]=i,h[31]=l):l=h[31],h[32]!==a||h[33]!==j||h[34]!==l?(r=(0,o.jsx)(aa,{reveal:a,loading:j,context:"create-document-type",children:l}),h[32]=a,h[33]=j,h[34]=l,h[35]=r):r=h[35],r}if(h[36]!==b?(l=b("pane-header.create-new-button.tooltip"),h[36]=b,h[37]=l):l=h[37],h[38]!==l?(r=(0,o.jsx)(eC.Button,{icon:m.AddIcon,mode:"bleed","data-testid":"multi-action-intent-button",tooltipProps:{content:l}}),h[38]=l,h[39]=r):r=h[39],h[40]!==y||h[41]!==j||h[42]!==S||h[43]!==x||h[44]!==b||h[45]!==g||h[46]!==f){let e;h[48]!==y||h[49]!==j||h[50]!==S||h[51]!==x||h[52]!==b||h[53]!==f?(e=(e,t)=>{let n=!S[e.id]?.granted,i=ac(f,e,x),l=f.find(t=>t.id===e.templateId);if(!l||!i)return null;let r=(0,a.forwardRef)((e,t)=>n?(0,o.jsx)("button",{type:"button",disabled:!0,...e,ref:t}):(0,o.jsx)(eV.IntentLink,{...e,intent:i.type,params:i.params,searchParams:i.searchParams,ref:t}));r.displayName="Link";let{title:s}=y({...e,title:e.title||y(l).title});return(0,o.jsx)(aa,{context:"create-document-type",reveal:n,loading:j,children:(0,o.jsx)(eC.MenuItem,{as:r,"data-as":n?"button":"a",text:s,"aria-label":n?b("pane-header.disabled-created-button.aria-label"):s,disabled:n,"data-testid":`action-intent-button-${t}`})},e.id)},h[48]=y,h[49]=j,h[50]=S,h[51]=x,h[52]=b,h[53]=f,h[54]=e):e=h[54],c=g.map(e),h[40]=y,h[41]=j,h[42]=S,h[43]=x,h[44]=b,h[45]=g,h[46]=f,h[47]=c}else c=h[47];return h[55]!==c?(u=(0,o.jsx)(eT.Menu,{children:c}),h[55]=c,h[56]=u):u=h[56],h[57]!==r||h[58]!==u?(p=(0,o.jsx)(eC.MenuButton,{button:r,id:"create-menu",menu:u,popover:ad}),h[57]=r,h[58]=u,h[59]=p):p=h[59],p}function ap(e,t){return e[t.id]=t,e}function am(e){return!e.granted}function ah(e){return null!=e}let ag=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m,h=(0,s.c)(28),{initialValueTemplateItems:g,menuItems:f,menuItemGroups:x,actionHandlers:b}=e,y=void 0===g?d.EMPTY_ARRAY:g,v=void 0===f?d.EMPTY_ARRAY:f,j=void 0===x?d.EMPTY_ARRAY:x,w=void 0===b?d.EMPTY_OBJECT:b,S=(0,d.useTemplates)();h[0]!==w?(t=e=>{if("string"==typeof e.action&&!(e.action in w))return console.warn("No handler for action:",e.action),!1;let t="function"==typeof e.action?e.action:"string"==typeof e.action?w[e.action]:null;return!!t&&(t(e.params),!0)},h[0]=w,h[1]=t):t=h[1];let _=t;h[2]!==_||h[3]!==j||h[4]!==v?(n=rp({actionHandler:_,menuItemGroups:j,menuItems:v.filter(af)}),h[2]=_,h[3]=j,h[4]=v,h[5]=n):n=h[5];let I=n;h[6]!==I?(i=I.filter(rc),h[6]=I,h[7]=i):i=h[7];let C=i;h[8]!==I?(l=I.filter(ru),h[8]=I,h[9]=l):l=h[9];let T=l;if(h[10]!==v||h[11]!==S){let e;h[13]!==S?(e=(e,t)=>{if(e.intent?.type!=="create")return null;let{params:n}=e.intent;if(!n)return null;let i=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:void 0,r=i.template||i.type;if(!r)return null;let o=S.find(e=>e.id===r);return o?{item:e,template:o,templateParams:l,menuItemIndex:t,initialDocumentId:i.id}:null},h[13]=S,h[14]=e):e=h[14],r=v.map(e).filter(ah).map(ax),h[10]=v,h[11]=S,h[12]=r}else r=h[12];let R=r;h[15]!==R||h[16]!==y?(a=(0,e$.uniqBy)([...R,...y],ab),h[15]=R,h[16]=y,h[17]=a):a=h[17];let P=a;return h[18]!==P?(c=(0,o.jsx)(au,{templateItems:P}),h[18]=P,h[19]=c):c=h[19],h[20]!==C?(u=C.map(ay),h[20]=C,h[21]=u):u=h[21],h[22]!==T?(p=T.length>0&&(0,o.jsx)(ix,{nodes:T}),h[22]=T,h[23]=p):p=h[23],h[24]!==c||h[25]!==u||h[26]!==p?(m=(0,o.jsxs)(eT.Flex,{gap:1,children:[c,u,p]}),h[24]=c,h[25]=u,h[26]=p,h[27]=m):m=h[27],m});function af(e){return e.intent?.type!=="create"}function ax(e){let{initialDocumentId:t,item:n,template:i,menuItemIndex:l,templateParams:r}=e;return{id:`menuItem${l}`,initialDocumentId:t,templateId:i.id,type:"initialValueTemplateItem",title:n.title||i.title,i18n:n.i18n||i.i18n,icon:n.icon,description:i.description,parameters:r,schemaType:i.schemaType}}function ab(e){var t=[e.initialDocumentId,e.templateId,e.parameters];let n=e=>"object"==typeof e&&e?Array.isArray(e)?e.map(n):Object.entries(e).sort(([e],[t])=>e.localeCompare(t,"en")):e;return JSON.stringify(n(JSON.parse(JSON.stringify(t))))}function ay(e){return(0,o.jsx)(iR,{node:e},e.key)}function av(e){let t,n,i,l,r,a,c,u=(0,s.c)(16),{t:p}=(0,d.useTranslation)(_),{layout:m,value:h}=e;return u[0]===Symbol.for("react.memo_cache_sentinel")?(t={Code:"code"},u[0]=t):t=u[0],u[1]!==h._type?(n={documentType:h._type},u[1]=h._type,u[2]=n):n=u[2],u[3]!==p||u[4]!==n?(i=(0,o.jsx)("em",{children:(0,o.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.title",components:t,values:n})}),u[3]=p,u[4]=n,u[5]=i):i=u[5],u[6]===Symbol.for("react.memo_cache_sentinel")?(l={Code:"code"},u[6]=l):l=u[6],u[7]!==h._id?(r={documentId:h._id},u[7]=h._id,u[8]=r):r=u[8],u[9]!==p||u[10]!==r?(a=(0,o.jsx)(d.Translate,{t:p,i18nKey:"pane-item.missing-schema-type.subtitle",components:l,values:r}),u[9]=p,u[10]=r,u[11]=a):a=u[11],u[12]!==m||u[13]!==i||u[14]!==a?(c=(0,o.jsx)(d.SanityDefaultPreview,{title:i,subtitle:a,media:aj,layout:m}),u[12]=m,u[13]=i,u[14]=a,u[15]=c):c=u[15],c}function aj(){return(0,o.jsx)(m.WarningOutlineIcon,{})}function aw(e,t,n){return!1!==e&&(e||t&&t.icon||n||!1)}function aS(e){let t,n,i,l,r,c,u,p,h=(0,s.c)(42),{icon:g,id:f,layout:x,pressed:b,schemaType:y,selected:v,title:j,value:w,margin:S,marginBottom:_,marginTop:I}=e,C=void 0===x?"default":x,T=(0,d.useSchema)(),R=(0,d.useDocumentPreviewStore)(),{ChildLink:P}=lk(),E=(0,d.useDocumentPresence)(f),D=!!(y&&y.name&&T.get(y.name)),[k,F]=(0,a.useState)(!1);e:{let e,n,i,l;if(w&&(0,eP.isSanityDocument)(w)){let e,n;if(!y||!D){let e;h[0]!==w?(e=(0,o.jsx)(av,{value:w}),h[0]=w,h[1]=e):e=h[1],t=e;break e}h[2]!==g||h[3]!==y?(e=aw(g,y,m.DocumentIcon),h[2]=g,h[3]=y,h[4]=e):e=h[4],h[5]!==E||h[6]!==R||h[7]!==C||h[8]!==y||h[9]!==e||h[10]!==w?(n=(0,o.jsx)(sJ,{documentPreviewStore:R,icon:e,layout:C,schemaType:y,value:w,presence:E}),h[5]=E,h[6]=R,h[7]=C,h[8]=y,h[9]=e,h[10]=w,h[11]=n):n=h[11],t=n;break e}h[12]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:.5},h[12]=e):e=h[12],h[13]===Symbol.for("react.memo_cache_sentinel")?(n=(0,o.jsx)(eT.Box,{style:e,children:(0,o.jsx)(eT.Text,{muted:!0,size:1,children:(0,o.jsx)(m.ChevronRightIcon,{})})}),h[13]=n):n=h[13],h[14]!==g||h[15]!==y?(i=aw(g,y,m.FolderIcon),h[14]=g,h[15]=y,h[16]=i):i=h[16],h[17]!==i||h[18]!==j?(l=(0,o.jsx)(d.SanityDefaultPreview,{status:n,icon:i,layout:"compact",title:j}),h[17]=i,h[18]=j,h[19]=l):l=h[19],t=l}let A=t;h[20]===Symbol.for("react.memo_cache_sentinel")?(n=e=>{e.metaKey?F(!1):F(!0)},h[20]=n):n=h[20];let L=n;h[21]===Symbol.for("react.memo_cache_sentinel")?(i=()=>F(!1),h[21]=i):i=h[21],h[22]!==v?(l=[v],h[22]=v,h[23]=l):l=h[23],(0,a.useEffect)(i,l);let[V,M]=(0,a.useState)(!1),O=(0,a.useRef)(null);h[24]===Symbol.for("react.memo_cache_sentinel")?(r=()=>{O.current=setTimeout(()=>(0,a.startTransition)(()=>M(!0)),400)},h[24]=r):r=h[24];let z=r;h[25]===Symbol.for("react.memo_cache_sentinel")?(c=()=>{O.current&&clearTimeout(O.current),(0,a.startTransition)(()=>M(!1))},h[25]=c):c=h[25];let B=c,N=`pane-item-${j}`,H=v||k;return h[26]!==f||h[27]!==V||h[28]!==y||h[29]!==w?(u=V&&y?.name&&w&&(0,eP.isSanityDocument)(w)&&(0,o.jsx)(a_,{documentId:f,documentType:y.name}),h[26]=f,h[27]=V,h[28]=y,h[29]=w,h[30]=u):u=h[30],h[31]!==f||h[32]!==S||h[33]!==_||h[34]!==I||h[35]!==b||h[36]!==A||h[37]!==u||h[38]!==N||h[39]!==P||h[40]!==H?(p=(0,o.jsxs)(d.PreviewCard,{"data-testid":N,__unstable_focusRing:!0,as:P,childId:f,"data-as":"a",margin:S,marginBottom:_,marginTop:I,onClick:L,onMouseEnter:z,onMouseLeave:B,pressed:b,radius:2,selected:H,sizing:"border",tabIndex:-1,tone:"inherit",children:[A,u]}),h[31]=f,h[32]=S,h[33]=_,h[34]=I,h[35]=b,h[36]=A,h[37]=u,h[38]=N,h[39]=P,h[40]=H,h[41]=p):p=h[41],p}function a_(e){let t,n=(0,s.c)(2),{documentId:i,documentType:l}=e;return n[0]!==i?(t=(0,c.getPublishedId)(i),n[0]=i,n[1]=t):t=n[1],(0,d.useEditState)(t,l),null}a_.displayName="PreloadDocumentPane";let aI=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{children:i,group:l}=e,r=(0,a.useContext)(u.DocumentActionsStateContext);if(null===r)throw Error("DocumentActionsStateContext is not set. This should not happen.");return n[0]!==i||n[1]!==l||n[2]!==r?(t=i({states:l?r.filter(e=>(e.group||["default"]).includes(l)):r}),n[0]=i,n[1]=l,n[2]=r,n[3]=t):t=n[3],t});aI.displayName="Memo(RenderActionCollectionState)";let aC=(0,a.memo)(e=>{let t,n=(0,s.c)(4),{badges:i,children:l,badgeProps:r}=e;return n[0]!==r||n[1]!==i||n[2]!==l?(t=(0,o.jsx)(d.GetHookCollectionState,{hooks:i,args:r,children:l}),n[0]=r,n[1]=i,n[2]=l,n[3]=t):t=n[3],t});aC.displayName="Memo(RenderBadgeCollectionState)";let aT={by:[{field:"_updatedAt",direction:"desc"}]},aR={},aP=(0,eD.styled)(eT.Box)`
  position: relative;
  opacity: ${e=>e.$opacity||1};
  transition: opacity 0.4s;
`,aE=(0,eD.styled)(eT.Box)`
  position: absolute;
  left: 0;
  right: 0;
  top: 0;
  bottom: 0;
`,aD=[...Array(30).keys()];function ak(e){let t,n,i=(0,s.c)(4),{layout:l}=e;return i[0]!==l?(t=aD.map(e=>(0,o.jsx)(d.SanityDefaultPreview,{isPlaceholder:!0,layout:l},e)),i[0]=l,i[1]=t):t=i[1],i[2]!==t?(n=(0,o.jsx)(eT.Stack,{paddingX:3,paddingY:2,paddingTop:0,space:1,children:t}),i[2]=t,i[3]=n):n=i[3],n}function aF(e){let t,n,i,l,r,u,p,m=(0,s.c)(66),{childItemId:h,error:g,isRetrying:f,autoRetry:x,filterIsSimpleTypeConstraint:b,hasMaxItems:y,hasSearchQuery:v,isActive:j,isLazyLoading:w,muted:S,isLoading:I,isConnected:C,retryCount:T,canRetry:R,items:P,layout:E,loadingVariant:D,onEndReached:k,onRetry:F,paneTitle:A,searchInputElement:L,showIcons:V}=e,M=(0,d.useSchema)(),{collapsed:O}=n9(),{collapsed:z,index:B}=io(),[N,H]=(0,a.useState)(!z),{t:$}=(0,d.useTranslation)(_);m[0]!==k||m[1]!==N?(t=()=>{N&&k()},m[0]=k,m[1]=N,m[2]=t):t=m[2];let U=t;m[3]!==z?(n=()=>{if(z)return;let e=setTimeout(()=>{H(!0)},0);return()=>{clearTimeout(e)}},m[3]=z,m[4]=n):n=m[4],m[5]!==z||m[6]!==P?(i=[z,P],m[5]=z,m[6]=P,m[7]=i):i=m[7],(0,a.useEffect)(n,i),m[8]!==h||m[9]!==y||m[10]!==j||m[11]!==w||m[12]!==P.length||m[13]!==E||m[14]!==M||m[15]!==V||m[16]!==$?(l=(e,t)=>{let{activeIndex:n}=t,i=(0,c.getPublishedId)(e._id),l=h===i,r=!j&&l,s=j&&l,a=n===P.length-1,u=a&&w,p=a&&y;return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aS,{icon:!1!==V&&void 0,id:i,layout:E,marginBottom:1,pressed:r,schemaType:M.get(e._type),selected:s,value:e}),u&&(0,o.jsx)(d.LoadingBlock,{}),p&&(0,o.jsx)(eT.Box,{marginY:1,paddingX:3,paddingY:4,children:(0,o.jsx)(eT.Text,{align:"center",muted:!0,size:1,children:$("panes.document-list-pane.max-items.text",{limit:2e3})})})]})},m[8]=h,m[9]=y,m[10]=j,m[11]=w,m[12]=P.length,m[13]=E,m[14]=M,m[15]=V,m[16]=$,m[17]=l):l=m[17];let G=l;e:{let e,t;if(v){let e,t;m[18]!==$?(e=$("panes.document-list-pane.no-documents.text"),m[18]=$,m[19]=e):e=m[19],m[20]!==e?(t=(0,o.jsx)(eT.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(eT.Container,{width:1,children:(0,o.jsx)(eT.Box,{paddingX:4,paddingY:5,children:(0,o.jsx)(eT.Text,{align:"center",muted:!0,children:e})})})}),m[20]=e,m[21]=t):t=m[21],r=t;break e}m[22]!==b||m[23]!==$?(e=$(b?"panes.document-list-pane.no-documents-of-type.text":"panes.document-list-pane.no-matching-documents.text"),m[22]=b,m[23]=$,m[24]=e):e=m[24],m[25]!==e?(t=(0,o.jsx)(eT.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(eT.Container,{width:1,children:(0,o.jsx)(eT.Box,{paddingX:4,paddingY:5,children:(0,o.jsx)(eT.Text,{align:"center",muted:!0,children:e})})})}),m[25]=e,m[26]=t):t=m[26],r=t}let q=r;t:{let e,t;if(!N){u=null;break t}let n=window.navigator.onLine;if(g){let e,t,i,l,r,s,a;m[27]!==$?(e=$("panes.document-list-pane.error.title"),m[27]=$,m[28]=e):e=m[28],m[29]!==e?(t=(0,o.jsx)(eT.Heading,{as:"h3",children:e}),m[29]=e,m[30]=t):t=m[30],m[31]!==g||m[32]!==$?(i=d.isDev?(0,o.jsx)(d.Translate,{t:$,i18nKey:"panes.document-list-pane.error.text.dev",values:{error:g.message},components:{Code:aA}}):$(n?"panes.document-list-pane.error.text":"panes.document-list-pane.error.text.offline"),m[31]=g,m[32]=$,m[33]=i):i=m[33],m[34]!==i?(l=(0,o.jsx)(eT.Text,{as:"p",children:i}),m[34]=i,m[35]=l):l=m[35];let c=n&&R?F:void 0;m[36]!==g||m[37]!==f||m[38]!==c?(r=(0,o.jsx)(d.ErrorActions,{error:g,eventId:null,onRetry:c,isRetrying:f}),m[36]=g,m[37]=f,m[38]=c,m[39]=r):r=m[39],m[40]!==x||m[41]!==R||m[42]!==f||m[43]!==T||m[44]!==$?(s=R?(0,o.jsx)(eT.Text,{as:"p",muted:!0,size:1,children:f?$("panes.document-list-pane.error.retrying",{count:T}):x?$("panes.document-list-pane.error.will-retry-automatically",{count:T}):$("panes.document-list-pane.error.max-retries-attempted",{count:T})}):null,m[40]=x,m[41]=R,m[42]=f,m[43]=T,m[44]=$,m[45]=s):s=m[45],m[46]!==r||m[47]!==s||m[48]!==t||m[49]!==l?(a=(0,o.jsx)(eT.Flex,{align:"center",direction:"column",height:"fill",justify:"center",children:(0,o.jsx)(eT.Container,{width:1,children:(0,o.jsxs)(eT.Stack,{paddingX:4,paddingY:5,space:4,children:[t,l,r,s]})})}),m[46]=r,m[47]=s,m[48]=t,m[49]=l,m[50]=a):a=m[50],u=a;break t}if(C&&!I&&0===P.length){u=q;break t}if("initial"===D&&I){let e;m[51]!==E?(e=(0,o.jsx)(iM,{ms:300,children:(0,o.jsx)(ak,{layout:E})}),m[51]=E,m[52]=e):e=m[52],u=e;break t}if("spinner"===D&&I){u=null;break t}let i=`${B}-${z}`,l=S?.8:1;m[53]!==U||m[54]!==P||m[55]!==i||m[56]!==A||m[57]!==G||m[58]!==L?(e=(0,o.jsx)(aE,{children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:A,canReceiveFocus:!0,inputElement:L,itemHeight:51,items:P,onEndReached:U,onlyShowSelectionWhenActive:!0,overscan:10,paddingBottom:1,paddingX:3,renderItem:G,wrapAround:!1},i)}),m[53]=U,m[54]=P,m[55]=i,m[56]=A,m[57]=G,m[58]=L,m[59]=e):e=m[59],m[60]!==l||m[61]!==e?(t=(0,o.jsx)(aP,{overflow:"hidden",height:"fill",$opacity:l,children:e}),m[60]=l,m[61]=e,m[62]=t):t=m[62],u=t}let W=u,K=O||"initial"===D?"hidden":"auto";return m[63]!==W||m[64]!==K?(p=(0,o.jsx)(is,{"data-testid":"document-list-pane",overflow:K,children:W}),m[63]=W,m[64]=K,m[65]=p):p=m[65],p}function aA(e){let{children:t}=e;return(0,o.jsx)("code",{children:t})}function aL(e,t={}){try{let n=function e(t){switch(t.type){case"OpCall":{let{left:e,right:n}=t;switch(t.op){case"==":return"AccessAttribute"!==e.type||"_type"!==e.name||e.base?"AccessAttribute"!==n.type||"_type"!==n.name||n.base||"Value"!==e.type||"string"!=typeof e.value?null:new Set([e.value]):"Value"!==n.type||"string"!=typeof n.value?null:new Set([n.value]);case"in":{if("AccessAttribute"!==e.type||"_type"!==e.name||e.base||"Array"!==n.type)return null;let t=new Set;for(let e of n.elements){if(e.isSplat||"Value"!==e.value.type||"string"!=typeof e.value.value)return null;t.add(e.value.value)}return t.size?t:null}default:return null}}case"Group":return e(t.base);case"Or":{let n=e(t.left);if(!n)return null;let i=e(t.right);return i?new Set([...n,...i]):null}case"And":{let n=e(t.left),i=e(t.right);return n||i?new Set([...n||[],...i||[]]):null}default:return null}}((0,tJ.parse)(e,{params:t}));return n?Array.from(n).sort():null}catch{return null}}let aV=(0,d.createSWR)({maxSize:100});function aM(e){let{client:t,schema:n,sort:i,perspective:l,limit:r,params:o,filter:s,searchQuery:a,staticTypeNames:c,maxFieldDepth:u,searchStrategy:p}=e,m=i.by,h=i?.extendedProjection,g=(0,ta.defer)(()=>t.listen(`*[${s}]`,o,{events:["welcome","mutation","reconnect"],includeAllVersions:!0,includeResult:!1,visibility:"query",tag:"listen-search-query"})).pipe((0,e5.mergeMap)((e,t)=>{let n=0===t;return n&&"reconnect"===e.type?(0,td.throwError)(()=>Error("Failed to establish EventSource connection")):n&&"welcome"!==e.type?(0,td.throwError)(()=>Error(`Received unexpected type of first event "${e.type}"`)):(0,e9.of)(e)}),(0,e6.share)()),[f,x]=(0,tc.partition)(g,e=>"welcome"===e.type),b=JSON.stringify({fiilter:s,limit:r,params:o,searchQuery:a,perspective:l,sort:i,staticTypeNames:c});return(0,te.merge)(f,x.pipe((0,tu.throttleTime)(1e3,tp.asyncScheduler,{leading:!0,trailing:!0}))).pipe((0,t1.exhaustMapWithTrailing)(e=>(c?(0,e9.of)(c):t.observable.fetch(`array::unique(*[${s}][]._type)`,o)).pipe((0,e5.mergeMap)(g=>{let f=(0,d.getSearchableTypes)(n,c||[]).filter(e=>!!g.includes(e.name)&&(T(e,i.by,!0),!0)),x=(0,d.createSearch)(f,t,{filter:s,params:o,strategy:p,maxDepth:u}),b=()=>x({query:a||"",types:f},{__unstable_extendedProjection:h,comments:[`findability-source: ${a?"list-query":"list"}`],limit:r,skipSortByScore:!0,sort:m,perspective:l}).pipe((0,eW.map)(e=>e.hits.map(({hit:e})=>e)),(0,eW.map)(e=>({type:"result",documents:e})));return"mutation"===e.type&&"query"!==e.visibility?(0,to.timer)(1200).pipe((0,e5.mergeMap)(b)):"reconnect"===e.type?(0,e9.of)(e):b()}))),(0,e1.scan)((e,t)=>({connected:"reconnect"!==t.type,documents:"result"===t.type?t.documents:e?.documents||[]}),null),(0,e3.filter)(e=>null!==e),aV(b),(0,eW.map)(({fromCache:e,value:t})=>({fromCache:e,...t})))}let aO={error:null,isRetrying:!1,retryCount:0,autoRetry:!1,canRetry:!1,isLoading:!0,isLoadingFullList:!1,fromCache:!1,items:[]};function az(e,t){if("error"===t.type)return{...e,error:t.error,retryCount:t.retryCount,isRetrying:t.retrying,autoRetry:t.autoRetry,canRetry:t.canRetry};if("result"===t.type){var n;return{...e,error:null,isRetrying:!1,fromCache:t.result.fromCache,connected:t.result.connected,isLoading:!1,items:(n=t.result.documents,(0,d.collate)(n).map(e=>{let t=e.draft||e.published||e.versions[0],n=!!e.draft;return{...t,hasPublished:!!e.published,hasDraft:n}})),isLoadingFullList:!1}}if("loadFullList"===t.type)return{...e,error:null,isLoadingFullList:!0};throw Error(`Unexpected event type: ${t.type}`)}function aB(e){return{type:"result",result:e}}function aN(e){return{type:"result",result:e}}function aH(e){let[,t]=e;return t?.documents.length===100}function a$(){return(0,t0.observableCallback)()}function aU(){return(0,t0.observableCallback)()}let aG="[WARNING: This was thrown as a non-error. Only Error instances should be thrown]",aq=eD.keyframes`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,aW=eD.keyframes`
  0% {
    opacity: 0;
  }
  50% {
    opacity: 0.1;
  }
  100% {
    opacity: 0.4;
  }
`,aK=(0,eD.styled)(m.SpinnerIcon)`
  animation: ${aq} 500ms linear infinite;
`,aY=(0,eD.styled)(m.SpinnerIcon)`
  animation: ${aq} 1500ms linear infinite;
  opacity: 0.4;
`,aX=(0,eD.styled)(m.SpinnerIcon)`
  animation:
    ${aq} 1500ms linear infinite,
    ${aW} 1000ms linear;
  opacity: 0.4;
`,aQ=(0,a.memo)(function(e){var t;let n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,I,C,T,R,P=(0,s.c)(69),{childItemId:E,isActive:D,pane:k,paneKey:F,sortOrder:A,layout:L}=e,V=(0,d.useSchema)(),M=(0,d.useActiveReleases)(),{perspectiveStack:O}=(0,d.usePerspective)(),{displayOptions:z,options:B}=k,{apiVersion:N,filter:H}=B,$=dy(B.params||aR);e:{let e;P[0]!==H||P[1]!==$?(e=aL(H,$),P[0]=H,P[1]=$,P[2]=e):e=P[2];let t=e;if(t?.length===1){n=t[0];break e}n=null}let U=n,G=z?.showIcons!==!1,{t:q}=(0,d.useTranslation)(_),{title:W}=(0,d.useI18nText)(k),[K,Y]=(0,a.useState)(""),[X,Q]=(0,a.useState)(""),[J,Z]=(0,a.useState)(null);P[3]!==V||P[4]!==A||P[5]!==U?(i=U&&A?(t=V.get(U),(R=A.by.map(e=>{if(e.mapWith)return e;let n=function(e,t){let n=tg.fromString(t),i=e;for(let e of n){if(!i)return;if("string"==typeof e){i=function(e,t){if(!("fields"in e))return;let n=e.fields.find(e=>e.name===t);return n?n.type:void 0}(i,e);continue}if(!((0,eP.isKeySegment)(e)||(0,eP.isIndexSegment)(e))||"array"!==i.jsonType)return;let[t,n]=i.of||[];if(n||!t)return;if(!(0,eP.isReferenceSchemaType)(t)){i=t;continue}let[l,r]=t.to||[];if(r||!l)return;i=l}return i}(t,e.field);return n?!function(e,t){let n=e.type;for(;n;){if(n.name===t||!n.type&&n.jsonType===t)return!0;n=n.type}return!1}(n,"datetime")?"string"===n.jsonType?{...e,mapWith:"lower"}:e:{...e,mapWith:"dateTime"}:e})).every((e,t)=>e===A.by[t])?A:{...A,by:R}):A,P[3]=V,P[4]=A,P[5]=U,P[6]=i):i=P[6];let ee=(0,d.useUnique)(i),et=N||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;P[7]!==et?(l={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:et},P[7]=et,P[8]=l):l=P[8];let en=(0,d.useClient)(l);P[9]!==K?(r=K?.trim(),P[9]=K,P[10]=r):r=P[10],P[11]!==en||P[12]!==H||P[13]!==$||P[14]!==O||P[15]!==ee||P[16]!==r?(c={client:en,filter:H,perspective:O,params:$,searchQuery:r,sortOrder:ee},P[11]=en,P[12]=H,P[13]=$,P[14]=O,P[15]=ee,P[16]=r,P[17]=c):c=P[17];let{error:ei,isLoadingFullList:el,isLoading:er,items:eo,fromCache:es,isRetrying:ea,autoRetry:ed,canRetry:ec,retryCount:eu,connected:ep,onLoadFullList:em,onRetry:eh}=function(e){let t,n,i,l=(0,s.c)(31),{client:r,filter:o,params:c,sortOrder:u,searchQuery:p,perspective:m}=e,{strategy:h}=(0,d.useWorkspace)().search,g=(0,d.useSchema)(),f=(0,d.useSearchMaxFieldDepth)();l[0]!==c||l[1]!==o?(t=aL(o,c),l[0]=c,l[1]=o,l[2]=t):t=l[2];let x=t,[b]=(0,a.useState)(aU),[y,v]=b,[j]=(0,a.useState)(a$),[w,S]=j,_=p||"",I=u||aT;if(l[3]!==r||l[4]!==f||l[5]!==w||l[6]!==y||l[7]!==c||l[8]!==m||l[9]!==g||l[10]!==o||l[11]!==h||l[12]!==_||l[13]!==I||l[14]!==x){let e,t={client:r,filter:o,limit:100,params:c,schema:g,perspective:m,searchQuery:_,sort:I,staticTypeNames:x,maxFieldDepth:f,searchStrategy:h},i=aM(t).pipe((0,e0.shareReplay)({refCount:!0,bufferSize:1})),s=w.pipe((0,e2.withLatestFrom)(i),(0,e3.filter)(aH),(0,e4.take)(1),(0,e5.mergeMap)(()=>(0,tt.concat)((0,e9.of)({type:"loadFullList"}),aM({...t,limit:2e3}).pipe((0,eW.map)(aN)))),(0,e6.share)());l[16]!==y?(e=(e,t,n)=>{var i,l;let r=(l=e)instanceof Error?l:"object"==typeof l&&null!==l&&"message"in l&&"string"==typeof l.message?Error(`${l.message} ${aG}`):Error(`${String(l)} ${aG}`),o=window.navigator.onLine,s=o&&!((i=e)instanceof tZ.ChannelError)&&(i instanceof tZ.ServerError||!(i instanceof tZ.ClientError)||403===i.statusCode),a=t<10,d=(0,te.merge)(o?y:(0,tr.fromEvent)(window,"online"),o&&a?(0,to.timer)(1e3*t):tm.NEVER).pipe((0,e4.take)(1),(0,eZ.switchMap)(()=>(0,te.merge)((0,e9.of)({type:"error",error:r,retrying:!0,autoRetry:a,canRetry:s,retryCount:t}),n)));return(0,tt.concat)((0,e9.of)({type:"error",error:r,retrying:!1,autoRetry:a,canRetry:s,retryCount:t}),d)},l[16]=y,l[17]=e):e=l[17],n=(0,te.merge)(i.pipe((0,eW.map)(aB),(0,e8.takeUntil)(s)),s).pipe((0,d.catchWithCount)(e),(0,e1.scan)(az,aO)),l[3]=r,l[4]=f,l[5]=w,l[6]=y,l[7]=c,l[8]=m,l[9]=g,l[10]=o,l[11]=h,l[12]=_,l[13]=I,l[14]=x,l[15]=n}else n=l[15];let C=n,{error:T,items:R,isLoading:P,fromCache:E,connected:D,canRetry:k,isLoadingFullList:F,isRetrying:A,autoRetry:L,retryCount:V}=(0,eL.useObservable)(C,aO);return l[18]!==L||l[19]!==k||l[20]!==D||l[21]!==T||l[22]!==E||l[23]!==P||l[24]!==F||l[25]!==A||l[26]!==R||l[27]!==S||l[28]!==v||l[29]!==V?(i={error:T,onRetry:v,isLoading:P,items:R,isRetrying:A,canRetry:k,retryCount:V,autoRetry:L,connected:D,fromCache:E,onLoadFullList:S,isLoadingFullList:F},l[18]=L,l[19]=k,l[20]=D,l[21]=T,l[22]=E,l[23]=P,l[24]=F,l[25]=A,l[26]=R,l[27]=S,l[28]=v,l[29]=V,l[30]=i):i=l[30],i}(c),eg=er||M.loading;P[18]===Symbol.for("react.memo_cache_sentinel")?(u=e=>e.pipe((0,eW.map)(aJ),(0,eQ.tap)(Q),(0,th.debounce)(aZ),(0,eQ.tap)(Y)),P[18]=u):u=P[18];let ef=(0,eL.useObservableEvent)(u);P[19]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{Y(""),Q("")},P[19]=p):p=P[19];let ex=p;P[20]===Symbol.for("react.memo_cache_sentinel")?(h=e=>{"Escape"===e.key&&ex()},P[20]=h):h=P[20];let eb=h,[ey,ev]=(0,a.useState)();P[21]!==ey||P[22]!==eg||P[23]!==F?(f=()=>{ey||eg||ev(F)},g=[ey,eg,F],P[21]=ey,P[22]=eg,P[23]=F,P[24]=g,P[25]=f):(g=P[24],f=P[25]),(0,a.useEffect)(f,g),P[26]===Symbol.for("react.memo_cache_sentinel")?(x=()=>{ex(),ev()},P[26]=x):x=P[26],P[27]!==F?(b=[F,ex],P[27]=F,P[28]=b):b=P[28],(0,a.useEffect)(x,b);t:{if(ep&&eg&&ey===F){y="spinner";break t}if(ep&&es){y="subtle";break t}y="initial"}let ej=y;n:{if("spinner"===ej){v=aK;break n}if(X&&"subtle"===ej){v=aY;break n}v=m.SearchIcon}let ew=v;(0,d.useReconnectingToast)(!ep),P[29]!==q?(j=q("panes.document-list-pane.search-input.aria-label"),P[29]=q,P[30]=j):j=P[30];let eS=!!K;P[31]===Symbol.for("react.memo_cache_sentinel")?(w=[2,2,1],P[31]=w):w=P[31];let e_=ep&&("subtle"!==ej||X)?null:aX;P[32]!==q?(S=q("panes.document-list-pane.search-input.placeholder"),P[32]=q,P[33]=S):S=P[33],P[34]!==ef||P[35]!==X||P[36]!==j||P[37]!==eS||P[38]!==e_||P[39]!==S||P[40]!==ew?(I=(0,o.jsx)(eT.Box,{paddingX:3,paddingBottom:3,children:(0,o.jsx)(eT.TextInput,{"aria-label":j,autoComplete:"off",border:!1,clearButton:eS,fontSize:w,icon:ew,iconRight:e_,onChange:ef,onClear:ex,onKeyDown:eb,padding:2,placeholder:S,radius:2,ref:Z,spellCheck:!1,value:X})}),P[34]=ef,P[35]=X,P[36]=j,P[37]=eS,P[38]=e_,P[39]=S,P[40]=ew,P[41]=I):I=P[41];let eI=!!U,eC=2e3===eo.length,eR=!!K,eE="subtle"===ej;return P[42]!==ed||P[43]!==ec||P[44]!==E||P[45]!==ep||P[46]!==ei||P[47]!==D||P[48]!==eg||P[49]!==el||P[50]!==ea||P[51]!==eo||P[52]!==L||P[53]!==ej||P[54]!==em||P[55]!==eh||P[56]!==F||P[57]!==eu||P[58]!==J||P[59]!==G||P[60]!==eI||P[61]!==eC||P[62]!==eR||P[63]!==eE||P[64]!==W?(C=(0,o.jsx)(aF,{childItemId:E,error:ei,filterIsSimpleTypeConstraint:eI,hasMaxItems:eC,hasSearchQuery:eR,isActive:D,isLazyLoading:el,isLoading:eg,autoRetry:ed,canRetry:ec,retryCount:eu,isRetrying:ea,isConnected:ep,items:eo,layout:L,muted:eE,loadingVariant:ej,onEndReached:em,onRetry:eh,paneTitle:W,searchInputElement:J,showIcons:G},F),P[42]=ed,P[43]=ec,P[44]=E,P[45]=ep,P[46]=ei,P[47]=D,P[48]=eg,P[49]=el,P[50]=ea,P[51]=eo,P[52]=L,P[53]=ej,P[54]=em,P[55]=eh,P[56]=F,P[57]=eu,P[58]=J,P[59]=G,P[60]=eI,P[61]=eC,P[62]=eR,P[63]=eE,P[64]=W,P[65]=C):C=P[65],P[66]!==I||P[67]!==C?(T=(0,o.jsxs)(o.Fragment,{children:[I,C]}),P[66]=I,P[67]=C,P[68]=T):T=P[68],T});function aJ(e){return e.target.value}function aZ(e){return""===e?(0,e9.of)(""):(0,to.timer)(300)}let a0=(0,a.memo)(e=>{let t,n,i,l,r,a,d,c,u,p=(0,s.c)(27),{contentAfter:h,index:g,initialValueTemplates:f,menuItemGroups:x,menuItems:b,setLayout:y,setSortOrder:v,title:j}=e;p[0]!==f?(t=void 0===f?[]:f,p[0]=f,p[1]=t):t=p[1];let w=t;p[2]!==x?(n=void 0===x?[]:x,p[2]=x,p[3]=n):n=p[3];let S=n;p[4]!==b?(i=void 0===b?[]:b,p[4]=b,p[5]=i):i=p[5];let _=i,{features:I}=iK(),{collapsed:C,isLast:T}=io(),R=T&&!C?-1:0;p[6]!==y?(l=e=>{let{layout:t}=e;y(t)},p[6]=y,p[7]=l):l=p[7],p[8]!==v?(r=e=>{v(e)},p[8]=v,p[9]=r):r=p[9],p[10]!==l||p[11]!==r?(a={setLayout:l,setSortOrder:r},p[10]=l,p[11]=r,p[12]=a):a=p[12];let P=a;return p[13]!==P||p[14]!==w||p[15]!==S||p[16]!==_?(d=(0,o.jsx)(ag,{initialValueTemplateItems:w,actionHandlers:P,menuItemGroups:S,menuItems:_}),p[13]=P,p[14]=w,p[15]=S,p[16]=_,p[17]=d):d=p[17],p[18]!==I.backButton||p[19]!==g?(c=I.backButton&&g>0&&(0,o.jsx)(eC.Button,{as:sL,"data-as":"a",icon:m.ArrowLeftIcon,mode:"bleed",tooltipProps:{content:"Back"}}),p[18]=I.backButton,p[19]=g,p[20]=c):c=p[20],p[21]!==h||p[22]!==d||p[23]!==c||p[24]!==R||p[25]!==j?(u=(0,o.jsx)(eC.TooltipDelayGroupProvider,{children:(0,o.jsx)(iC,{actions:d,backButton:c,contentAfter:h,tabIndex:R,title:j})}),p[21]=h,p[22]=d,p[23]=c,p[24]=R,p[25]=j,p[26]=u):u=p[26],u});function a1(e){let{row:t,table:n}=e,{selectedAnchor:i,setSelectedAnchor:l}=n.options.meta||{},r=(0,a.useCallback)(e=>{if(e.shiftKey&&null!=i){let e=t.index,l=e<i?e:i,r=e<i?i:e,o=n.getRowModel().flatRows.slice(l,r+1).map(({id:e})=>e),s=n.getSelectedRowModel().rows.map(({id:e})=>e);n.setRowSelection(()=>[...o,...s].reduce((e,t)=>({...e,[t]:!0}),{}))}else l&&(l(t.getIsSelected()?null:t.index),t.toggleSelected())},[i,t,l,n]);return(0,o.jsx)(eT.Checkbox,{style:{paddingLeft:4},checked:e.row.getIsSelected(),disabled:!e.row.getCanSelect(),onChange:()=>null,onClick:r})}function a2(e){let t,n,i,l,r,d,c,p,m,h,g,f,x,b,y,v,j,w=(0,s.c)(49),{children:S,table:_}=e,[I,C]=(0,a.useState)(null);w[0]===Symbol.for("react.memo_cache_sentinel")?(t=[],w[0]=t):t=w[0];let[T,R]=(0,a.useState)(t);w[1]!==I?.state?(n=e=>{I?.state==="focused"&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),C(void 0===e?null:e),R([])},w[1]=I?.state,w[2]=n):n=w[2];let P=n;w[3]!==P?(i=()=>P(),w[3]=P,w[4]=i):i=w[4];let E=i;w[5]!==P||w[6]!==I||w[7]!==_?(l=e=>{if(!I)return;let t=_.getVisibleLeafColumns(),n=t.findIndex(e=>e.id===I.colId)+("left"===e?-1:1);n<0||n>=t.length||P({colId:t[n].id,rowIndex:I.rowIndex,state:"selected"})},w[5]=P,w[6]=I,w[7]=_,w[8]=l):l=w[8];let D=l;w[9]!==I?(r=e=>{I&&R(t=>{let{rowIndex:n}=I,i=t=>t+("down"===e?1:-1);if(!t.length){let e=i(n);return e<0?[]:[e]}let l=i(t[t.length-1]);return l<0?t:l===n?[]:t.includes(l)?t.slice(0,-1):[...t,l]})},w[9]=I,w[10]=r):r=w[10];let k=r;w[11]!==P?(d=(e,t)=>{P({colId:e,rowIndex:t,state:"selected"})},w[11]=P,w[12]=d):d=w[12];let F=d;w[13]!==P||w[14]!==I||w[15]!==T.length?(c=()=>{I&&(T.length?R([]):P("selected"===I.state?null:{...I,state:"selected"}))},w[13]=P,w[14]=I,w[15]=T.length,w[16]=c):c=w[16];let A=c;w[17]!==k||w[18]!==I||w[19]!==F?(p=(e,t)=>{if(!I)return;let n="ArrowDown"===t?"down":"up",i="down"===n?1:-1;if(e)k(n);else{let e=I.rowIndex+i;if(e<0)return;F(I.colId,e)}},w[17]=k,w[18]=I,w[19]=F,w[20]=p):p=w[20];let L=p;w[21]!==D||w[22]!==A||w[23]!==L||w[24]!==I?(m=e=>{if(!I)return;let{key:t,shiftKey:n}=e;switch(t){case"Shift":break;case"Escape":A();break;case"ArrowDown":case"ArrowUp":e.preventDefault(),L(n,t);break;case"ArrowLeft":case"ArrowRight":"selected"===I.state&&(e.preventDefault(),D("ArrowLeft"===t?"left":"right"))}},w[21]=D,w[22]=A,w[23]=L,w[24]=I,w[25]=m):m=w[25];let V=m;w[26]!==E||w[27]!==I?(h=e=>{I&&(document.getElementById(`cell-${I.colId}-${I.rowIndex}`)?.contains(e.target)||E())},w[26]=E,w[27]=I,w[28]=h):h=w[28];let M=h;w[29]!==M||w[30]!==V||w[31]!==I?(g=()=>(I&&(document.addEventListener("keydown",V),document.addEventListener("click",M)),()=>{I&&(document.removeEventListener("keydown",V),document.removeEventListener("click",M))}),f=[M,V,I],w[29]=M,w[30]=V,w[31]=I,w[32]=g,w[33]=f):(g=w[32],f=w[33]),(0,a.useEffect)(g,f),w[34]===Symbol.for("react.memo_cache_sentinel")?(x=()=>C(a3),w[34]=x):x=w[34];let O=x;w[35]!==I||w[36]!==T?(b=(e,t)=>I?.colId!==e?null:I.rowIndex===t?"focused"===I.state?"focused":"selectedAnchor":T.includes(t)?"selectedRange":null,w[35]=I,w[36]=T,w[37]=b):b=w[37];let z=b;w[38]!==P||w[39]!==I?(y=()=>{I&&P({colId:I.colId,rowIndex:I.rowIndex+1,state:"selected"})},w[38]=P,w[39]=I,w[40]=y):y=w[40];let B=y;w[41]!==z||w[42]!==E||w[43]!==F||w[44]!==B?(v={focusAnchorCell:O,resetFocusSelection:E,setSelectedAnchorCell:F,getStateByCellId:z,submitFocusedCell:B},w[41]=z,w[42]=E,w[43]=F,w[44]=B,w[45]=v):v=w[45];let N=v;return w[46]!==S||w[47]!==N?(j=(0,o.jsx)(u.DocumentSheetListContext.Provider,{value:N,children:S}),w[46]=S,w[47]=N,w[48]=j):j=w[48],j}function a3(e){return e?{...e,state:"focused"}:null}a0.displayName="Memo(PaneHeader)";let a4=eD.styled.td`
  display: flex;
  overflow: hidden;
  box-sizing: border-box;
  width: ${({width:e})=>e}px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-bg-color);
`,a5=(0,eD.styled)(a4)`
  position: sticky;
  z-index: 2;
`;function a6(e){let{getValue:t,column:n,row:i,fieldType:l}=e,r=`cell-${n.id}-${i.index}`,[s,d]=(0,a.useState)(()=>t()),[c,p]=(0,a.useState)(!1),m=(0,a.useRef)(null),{focusAnchorCell:h,resetFocusSelection:g,setSelectedAnchorCell:f,getStateByCellId:x,submitFocusedCell:b}=(()=>{let e=(0,a.useContext)(u.DocumentSheetListContext);if(void 0===e)throw Error("useDocumentSheetListContext must be used within an DocumentSheetListProvider");return e})(),y=x(n.id,i.index),v=(0,a.useCallback)(()=>{f(n.id,i.index),h()},[n.id,h,i.index,f]),{patchDocument:j}=e.table.options.meta||{},w=()=>{m.current?.focus(),m.current instanceof HTMLInputElement&&m.current.select()},S=(0,a.useCallback)(e=>{let{key:t}=e;"Enter"===t&&("selectedAnchor"===y&&w(),"focused"===y&&b())},[y,b]),_=(0,a.useCallback)(e=>{let t=e.clipboardData?.getData("Text");("string"==typeof t||"number"==typeof t)&&(d(t),j?.(i.id,n.id,t))},[n.id,j,i.id]),I=(0,a.useCallback)(()=>navigator.clipboard.writeText(s.toString()),[s]);(0,a.useEffect)(()=>(("selectedAnchor"===y||"focused"===y)&&document.addEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.addEventListener("paste",_),"selectedAnchor"===y&&document.addEventListener("copy",I),()=>{("selectedAnchor"===y||"focused"===y)&&document.removeEventListener("keydown",S),("selectedAnchor"===y||"selectedRange"===y)&&document.removeEventListener("paste",_),"selectedAnchor"===y&&document.removeEventListener("copy",I)}),[r,y,n.id,x,I,S,_,i.index]);let C=()=>"focused"===y?"2px solid blue":"selectedRange"===y?"1px solid green":"selectedAnchor"===y?"1px solid blue":"1px solid transparent",T={onFocus:v,onBlur:()=>{c&&(j?.(i.id,n.id,s),p(!1)),g()},onMouseDown:e=>{2===e.detail?w():(e.preventDefault(),f(n.id,i.index))},"aria-selected":!!y,"data-testid":r,id:r,ref:e=>{m.current=e}};return"boolean"===l.name?(0,o.jsxs)(eT.Select,{...T,onChange:()=>null,radius:0,style:{boxShadow:"none",border:C(),padding:0},value:JSON.stringify(s),children:[(0,o.jsx)("option",{value:"True",children:"True"}),(0,o.jsx)("option",{value:"False",children:"False"})]}):(0,o.jsx)(eT.TextInput,{...T,size:0,radius:0,border:!1,style:{border:C(),padding:"22px 16px"},value:"string"==typeof s||"number"==typeof s?s:JSON.stringify(s),onChange:e=>{p(!0),d(e.target.value)}})}function a8(e){let t=e.column.getIsPinned(),n=t&&e.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(t?a5:a4,{style:{left:e.column.getStart("left")??void 0,borderRight:`${n}px solid var(--card-border-color)`},width:e.column.getSize(),children:nk(e.column.columnDef.cell,e.getContext?.())},e.row.original._id+e.id)}let a7=e=>{let{documentPreviewStore:t,row:n,schemaType:i}=e,l=(0,a.useMemo)(()=>(0,d.getPreviewStateObservable)(t,i,n.original._id),[t,n.original._id,i]),r=(0,d.useDocumentVersionInfo)(n.original._id),{snapshot:s,isLoading:c}=(0,eL.useObservable)(l,{snapshot:null,isLoading:!0});if(c)return(0,o.jsx)(eT.Text,{size:1,muted:!0,children:"Loading..."});let u=s?.title??"Untitled";return(0,o.jsxs)(eT.Flex,{align:"center",gap:3,children:[(0,o.jsx)(d.DocumentStatusIndicator,{draft:r.draft,published:r.published,versions:void 0}),(0,o.jsx)(eT.Text,{size:1,children:u})]})},a9=(e,t)=>"function"==typeof e?{...t,accessorFn:e}:{...t,accessorKey:e},de=["string","number","boolean"],dt=(e,t)=>e.fields.reduce((e,n)=>{let{type:i,name:l}=n;return de.includes(i.name)?[...e,a9(t?`${t}.${n.name}`:n.name,{id:t?`${t}_${n.name}`:n.name,header:n.type.title,enableHiding:!0,cell:e=>(0,o.jsx)(a6,{...e,fieldType:i})})]:"object"===i.name&&(0,eP.isObjectSchemaType)(i)&&!t?[...e,{header:l,columns:dt(i,n.name)}]:e},[]),dn=e=>e.flatMap(e=>"accessorKey"in e?e:"columns"in e&&e.columns?dn(e.columns):[]);function di({table:e}){let{t}=(0,d.useTranslation)(),n=e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length>=5,i=(0,a.useCallback)(()=>{e.resetColumnVisibility()},[e]);return(0,o.jsx)(eC.MenuButton,{button:(0,o.jsx)(eC.Button,{mode:"bleed",text:t("sheet-list.edit-columns")}),id:"columns-control",menu:(0,o.jsx)(eT.Menu,{padding:3,paddingTop:4,style:{width:240},children:(0,o.jsxs)(eT.Flex,{direction:"column",height:"fill",gap:3,children:[(0,o.jsx)(eT.Text,{weight:"semibold",size:1,children:t("sheet-list.select-fields")}),(0,o.jsx)(eT.Flex,{style:{flex:"1 1 auto",maxHeight:320,overflowY:"scroll"},children:(0,o.jsx)(eT.Stack,{children:e.getAllLeafColumns().filter(e=>e.getCanHide()).map(t=>{let i,l,r=t.id.replace(/ /g,"-");return(0,o.jsxs)(eT.Flex,{marginY:2,align:"center",children:[(0,o.jsx)(eT.Checkbox,{readOnly:(i=t.getIsVisible(),l=1===e.getVisibleLeafColumns().filter(e=>e.getCanHide()).length,n&&!i||l&&i),checked:t.getIsVisible(),onChange:()=>{t.toggleVisibility()},id:`col-visibility-${r}`,style:{display:"block"}}),(0,o.jsx)(eT.Box,{flex:1,paddingLeft:3,children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)("label",{htmlFor:`col-visibility-${r}`,children:t.columnDef.header?.toString()})})})]},t.id)})})}),(0,o.jsx)(eC.Button,{width:"fill",mode:"ghost",text:t("sheet-list.reset-columns"),onClick:i})]})}),placement:"bottom",popover:{portal:!0}})}let dl=(0,eD.styled)(eT.Flex)`
  flex-shrink: 0;
`;function dr(){let e,t,n,i=(0,s.c)(5),{state:l}=(0,d.useSearchState)(),{filtersVisible:r}=l;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.SearchHeader,{}),i[0]=e):e=i[0],i[1]!==r?(t=r&&(0,o.jsx)(d.Filters,{showTypeFilter:!1}),i[1]=r,i[2]=t):t=i[2],i[3]!==t?(n=(0,o.jsxs)(dl,{children:[e,t]}),i[3]=t,i[4]=n):n=i[4],n}let ds=eD.styled.th`
  margin: 16px;
  z-index: 1;
  padding: 22px 0px;
  border-top: 1px solid var(--card-border-color);
  background-color: var(--card-badge-default-bg-color);
  box-sizing: border-box;
  text-align: left;
  width: ${({width:e})=>e}px;
  max-width: ${({width:e})=>e}px;
`,da=(0,eD.styled)(ds)`
  position: sticky;
  z-index: 2;
`,dd=eD.styled.div`
  visibility: hidden;

  ${ds}:hover & {
    visibility: visible;
  }
`;function dc(e){let{header:t,headerGroup:n}=e,{t:i}=(0,d.useTranslation)(),l=t.column.getIsPinned(),r=n.depth>0&&!t.column.parent?null:(0,o.jsx)(eT.Text,{size:1,weight:"semibold",textOverflow:"ellipsis",children:nk(t.column.columnDef.header,t.getContext())}),s=t.column.getCanHide()&&(0===n.depth?!t.column.columns.length:t.column.parent),a=l&&t.column.getIsLastColumn("left")?2:1;return(0,o.jsx)(l?da:ds,{style:{left:t.column.getStart("left")??void 0,borderRight:`${a}px solid var(--card-border-color)`},"data-testid":`header-${t.id}`,width:t.getSize(),children:(0,o.jsxs)(eT.Flex,{justify:"space-between",marginX:2,align:"baseline",children:[(0,o.jsx)(eC.Tooltip,{delay:500,content:r,children:(0,o.jsx)(eT.Box,{style:{boxSizing:"border-box"},marginLeft:3,marginRight:3,children:r})}),s&&(0,o.jsx)(dd,{children:(0,o.jsx)(eC.MenuButton,{button:(0,o.jsx)(eC.Button,{tooltipProps:{content:"Open field menu"},mode:"bleed",icon:m.EllipsisHorizontalIcon,"data-testid":"field-menu-button"}),id:"field menu",popover:{placement:"bottom-end"},menu:(0,o.jsx)(eT.Menu,{children:(0,o.jsx)(eC.MenuItem,{text:i("sheet-list.hide-field"),icon:m.CloseIcon,onClick:()=>t.column.toggleVisibility()})})})})]})},t.id)}function du({table:e}){return(0,o.jsx)(eC.TooltipDelayGroupProvider,{children:(0,o.jsxs)(eT.Flex,{gap:3,align:"center",children:[(0,o.jsx)(eC.Button,{onClick:()=>e.setPageIndex(0),disabled:!e.getCanPreviousPage(),icon:m.DoubleChevronLeftIcon,tooltipProps:{content:"Go to first page"}}),(0,o.jsx)(eC.Button,{onClick:()=>e.previousPage(),disabled:!e.getCanPreviousPage(),icon:m.ChevronLeftIcon,tooltipProps:{content:"Go to previous page"}}),(0,o.jsxs)(eT.Text,{style:{whiteSpace:"nowrap"},children:[e.getState().pagination.pageIndex+1," of ",e.getPageCount()]}),(0,o.jsx)(eC.Button,{onClick:()=>e.nextPage(),disabled:!e.getCanNextPage(),icon:m.ChevronRightIcon,tooltipProps:{content:"Go to next page"}}),(0,o.jsx)(eC.Button,{onClick:()=>e.setPageIndex(e.getPageCount()-1),disabled:!e.getCanNextPage(),icon:m.DoubleChevronRightIcon,tooltipProps:{content:"Go to last page"}}),(0,o.jsx)("select",{value:e.getState().pagination.pageSize,onChange:t=>{e.setPageSize(Number(t.target.value))},children:[25,50,100].map(e=>(0,o.jsx)("option",{value:e,children:e},e))})]})})}function dp(e,t){switch(t.type){case"DOCUMENTS_SET":{let n=t.documents.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,documents:n}}case"DOCUMENT_RECEIVED":{let n=t.payload;return{...e,documents:{...e.documents,[n._id]:n}}}case"DOCUMENT_DELETED":{let{[t.id]:n,...i}=e.documents;return{...e,documents:i}}case"DOCUMENT_UPDATED":{let n=t.payload,i=n._id,l={...e.documents[i],...n};return{...e,documents:{...e.documents,[i]:l}}}default:return e}}let dm={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query",includeAllVersions:!0,tag:"document-sheet-list-store"},dh=(0,eD.styled)(eT.Flex)`
  height: 100%;
`,dg=eD.styled.div`
  overflow: auto; //our scrollable table container
  position: relative; //needed for sticky header
`,df=eD.styled.table`
  border-collapse: separate;
  border-spacing: 0;
  font-family: arial, sans-serif;
  white-space: nowrap;
  width: 100%;
  border: 1px solid lightgray;

  thead {
    display: grid;
    position: sticky;
    top: 0;
    z-index: 10;
  }
  tr {
    padding: 0;
  }
  tr:last-child {
    border-bottom: none;
  }
`;function dx({documentSchemaType:e}){let{dispatch:t,state:n}=(0,d.useSearchState)(),{columns:i,initialColumnsVisibility:l}=function(e){let t=(0,d.useDocumentPreviewStore)(),n=(0,a.useMemo)(()=>e?[{id:"selected",enableHiding:!1,header:e=>(0,o.jsxs)(eT.Box,{children:[(0,o.jsx)(eT.Checkbox,{style:{paddingLeft:4},indeterminate:e.table.getIsSomeRowsSelected(),onChange:e.table.getToggleAllPageRowsSelectedHandler()}),e.table.getSelectedRowModel().rows.length," selected"]}),cell:a1},a9("Preview",{enableHiding:!1,id:"Preview",cell:n=>(0,o.jsx)(a7,{...n,documentPreviewStore:t,schemaType:e})}),...dt(e)]:[],[t,e]),[i]=(0,a.useMemo)(()=>dn(n).reduce(([e,t],n)=>{if(!n.id)throw Error("Column must have an id");let i=n.id;return n.enableHiding?5===t?[{...e,[i]:!1},t]:[{...e,[i]:!0},t+1]:[{...e,[i]:!0},t]},[{},0]),[n]);return{columns:n,initialColumnsVisibility:i}}(e),{data:r}=function(e){let t,n,i,l,r=(0,s.c)(12),{typeName:o}=e,{state:u}=(0,d.useSearchState)();r[0]!==u.result.hits?(t=new Map,u.result.hits.forEach(e=>t.set((0,c.getPublishedId)(e.hit._id),e.hit)),r[0]=u.result.hits,r[1]=t):t=r[1];let p=t,m=`_type == "${o}"`;r[2]!==m?(n={filter:m},r[2]=m,r[3]=n):n=r[3];let{data:h,isLoading:g}=function(e){let t,n,i,l,r,o,u,p,m,h,g=(0,s.c)(27),{filter:f,params:x,apiVersion:b}=e,y=`*[${f}][0...2000]`,v=b||d.DEFAULT_STUDIO_CLIENT_OPTIONS.apiVersion;g[0]!==v?(t={...d.DEFAULT_STUDIO_CLIENT_OPTIONS,apiVersion:v},g[0]=v,g[1]=t):t=g[1];let j=(0,d.useClient)(t);g[2]===Symbol.for("react.memo_cache_sentinel")?(n={documents:{}},g[2]=n):n=g[2];let[w,S]=(0,a.useReducer)(dp,n),[_,I]=(0,a.useState)(null!==j),[C,T]=(0,a.useState)(null);g[3]!==y||g[4]!==j||g[5]!==x?(i=async()=>{if(!j)return void I(!1);try{let e=await j.fetch(y,x);S({type:"DOCUMENTS_SET",documents:e}),I(!1)}catch(e){T(e)}},g[3]=y,g[4]=j,g[5]=x,g[6]=i):i=g[6];let R=i;g[7]!==R?(l=async e=>{if("welcome"===e.type&&(I(!0),await R(),I(!1)),"reconnect"===e.type&&I(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&S({type:"DOCUMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&S({type:"DOCUMENT_UPDATED",payload:t})}}},g[7]=R,g[8]=l):l=g[8];let P=l;e:{let e;if(!j){let e;g[9]===Symbol.for("react.memo_cache_sentinel")?(e=(0,e9.of)(),g[9]=e):e=g[9],r=e;break e}if(g[10]!==y||g[11]!==j.observable||g[12]!==x){let t;g[14]===Symbol.for("react.memo_cache_sentinel")?(t=e=>(T(e),(0,e9.of)(e)),g[14]=t):t=g[14],e=j.observable.listen(y,x,dm).pipe((0,eK.catchError)(t)),g[10]=y,g[11]=j.observable,g[12]=x,g[13]=e}else e=g[13];r=e}let E=r;g[15]!==P||g[16]!==E?(o=()=>{let e=E.subscribe(P);return()=>{e?.unsubscribe()}},u=[P,E],g[15]=P,g[16]=E,g[17]=o,g[18]=u):(o=g[17],u=g[18]),(0,a.useEffect)(o,u),g[19]!==w.documents?(p=Object.keys(w.documents).reduce((e,t)=>{let n=w.documents[t],i=n._id===(0,c.getDraftId)(n._id),l=i?n._id:(0,c.getDraftId)(n._id);return e[l]&&!i||(e[l]=n),e},{}),g[19]=w.documents,g[20]=p):p=g[20];let D=p;g[21]!==D?(m=Object.values(D),g[21]=D,g[22]=m):m=g[22];let k=m;return g[23]!==k||g[24]!==C||g[25]!==_?(h={data:k,isLoading:_,error:C},g[23]=k,g[24]=C,g[25]=_,g[26]=h):h=g[26],h}(n);if(r[4]!==h||r[5]!==p){let e;r[7]!==p?(e=e=>p.has((0,c.getPublishedId)(e._id)),r[7]=p,r[8]=e):e=r[8],i=h.filter(e),r[4]=h,r[5]=p,r[6]=i}else i=r[6];let f=i;return r[9]!==f||r[10]!==g?(l={data:f,isLoading:g},r[9]=f,r[10]=g,r[11]=l):l=r[11],l}({typeName:e.name}),[u,p]=(0,a.useState)(null),m=n.result.hits.length,h=function(e){let t={state:{},onStateChange:()=>{},renderFallbackValue:null,...e},[n]=a.useState(()=>({current:function(e){var t,n;let i=[...nD,...null!=(t=e._features)?t:[]],l={_features:i},r=l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultOptions?void 0:t.getDefaultOptions(l)),{}),o={...null!=(n=e.initialState)?n:{}};l._features.forEach(e=>{var t;o=null!=(t=null==e.getInitialState?void 0:e.getInitialState(o))?t:o});let s=[],a=!1,d={_features:i,options:{...r,...e},initialState:o,_queue:e=>{s.push(e),a||(a=!0,Promise.resolve().then(()=>{for(;s.length;)s.shift()();a=!1}).catch(e=>setTimeout(()=>{throw e})))},reset:()=>{l.setState(l.initialState)},setOptions:e=>{var t;t=t2(e,l.options),l.options=l.options.mergeOptions?l.options.mergeOptions(r,t):{...r,...t}},getState:()=>l.options.state,setState:e=>{null==l.options.onStateChange||l.options.onStateChange(e)},_getRowId:(e,t,n)=>{var i;return null!=(i=null==l.options.getRowId?void 0:l.options.getRowId(e,t,n))?i:`${n?[n.id,t].join("."):t}`},getCoreRowModel:()=>(l._getCoreRowModel||(l._getCoreRowModel=l.options.getCoreRowModel(l)),l._getCoreRowModel()),getRowModel:()=>l.getPaginationRowModel(),getRow:(e,t)=>{let n=(t?l.getPrePaginationRowModel():l.getRowModel()).rowsById[e];if(!n&&!(n=l.getCoreRowModel().rowsById[e]))throw Error();return n},_getDefaultColumnDef:t5(()=>[l.options.defaultColumn],e=>{var t;return e=null!=(t=e)?t:{},{header:e=>{let t=e.header.column.columnDef;return t.accessorKey?t.accessorKey:t.accessorFn?t.id:null},cell:e=>{var t,n;return null!=(t=null==(n=e.renderValue())||null==n.toString?void 0:n.toString())?t:null},...l._features.reduce((e,t)=>Object.assign(e,null==t.getDefaultColumnDef?void 0:t.getDefaultColumnDef()),{}),...e}},t6(e,"debugColumns","_getDefaultColumnDef")),_getColumnDefs:()=>l.options.columns,getAllColumns:t5(()=>[l._getColumnDefs()],e=>{let t=function(e,n,i){return void 0===i&&(i=0),e.map(e=>{let r=function(e,t,n,i){var l,r;let o,s={...e._getDefaultColumnDef(),...t},a=s.accessorKey,d=null!=(l=null!=(r=s.id)?r:a?"function"==typeof String.prototype.replaceAll?a.replaceAll(".","_"):a.replace(/\./g,"_"):void 0)?l:"string"==typeof s.header?s.header:void 0;if(s.accessorFn?o=s.accessorFn:a&&(o=a.includes(".")?e=>{let t=e;for(let e of a.split(".")){var n;t=null==(n=t)?void 0:n[e]}return t}:e=>e[s.accessorKey]),!d)throw Error();let c={id:`${String(d)}`,accessorFn:o,parent:i,depth:n,columnDef:s,columns:[],getFlatColumns:t5(()=>[!0],()=>{var e;return[c,...null==(e=c.columns)?void 0:e.flatMap(e=>e.getFlatColumns())]},t6(e.options,"debugColumns","column.getFlatColumns")),getLeafColumns:t5(()=>[e._getOrderColumnsFn()],e=>{var t;return null!=(t=c.columns)&&t.length?e(c.columns.flatMap(e=>e.getLeafColumns())):[c]},t6(e.options,"debugColumns","column.getLeafColumns"))};for(let t of e._features)null==t.createColumn||t.createColumn(c,e);return c}(l,e,i,n);return r.columns=e.columns?t(e.columns,r,i+1):[],r})};return t(e)},t6(e,"debugColumns","getAllColumns")),getAllFlatColumns:t5(()=>[l.getAllColumns()],e=>e.flatMap(e=>e.getFlatColumns()),t6(e,"debugColumns","getAllFlatColumns")),_getAllFlatColumnsById:t5(()=>[l.getAllFlatColumns()],e=>e.reduce((e,t)=>(e[t.id]=t,e),{}),t6(e,"debugColumns","getAllFlatColumnsById")),getAllLeafColumns:t5(()=>[l.getAllColumns(),l._getOrderColumnsFn()],(e,t)=>t(e.flatMap(e=>e.getLeafColumns())),t6(e,"debugColumns","getAllLeafColumns")),getColumn:e=>l._getAllFlatColumnsById()[e]};Object.assign(l,d);for(let e=0;e<l._features.length;e++){let t=l._features[e];null==t||null==t.createTable||t.createTable(l)}return l}(t)})),[i,l]=a.useState(()=>n.current.initialState);return n.current.setOptions(t=>({...t,...e,state:{...i,...e.state},onStateChange:t=>{l(t),null==e.onStateChange||e.onStateChange(t)}})),n.current}({data:r,columns:i,getCoreRowModel:e=>t5(()=>[e.options.data],t=>{let n={rows:[],flatRows:[],rowsById:{}},i=function(t,l,r){void 0===l&&(l=0);let o=[];for(let a=0;a<t.length;a++){let d=ne(e,e._getRowId(t[a],a,r),t[a],a,l,void 0,null==r?void 0:r.id);if(n.flatRows.push(d),n.rowsById[d.id]=d,o.push(d),e.options.getSubRows){var s;d.originalSubRows=e.options.getSubRows(t[a],a),null!=(s=d.originalSubRows)&&s.length&&(d.subRows=i(d.originalSubRows,l+1,d))}}return o};return n.rows=i(t),n},t6(e.options,"debugTable","getRowModel",()=>e._autoResetPageIndex())),getFilteredRowModel:e=>t5(()=>[e.getPreFilteredRowModel(),e.getState().columnFilters,e.getState().globalFilter],(t,n,i)=>{var l,r,o,s,a,d,c,u,p,m;let h,g,f,x,b,y,v,j,w,S;if(!t.rows.length||!(null!=n&&n.length)&&!i){for(let e=0;e<t.flatRows.length;e++)t.flatRows[e].columnFilters={},t.flatRows[e].columnFiltersMeta={};return t}let _=[],I=[];(null!=n?n:[]).forEach(t=>{var n;let i=e.getColumn(t.id);if(!i)return;let l=i.getFilterFn();l&&_.push({id:t.id,filterFn:l,resolvedValue:null!=(n=null==l.resolveFilterValue?void 0:l.resolveFilterValue(t.value))?n:t.value})});let C=(null!=n?n:[]).map(e=>e.id),T=e.getGlobalFilterFn(),R=e.getAllLeafColumns().filter(e=>e.getCanGlobalFilter());i&&T&&R.length&&(C.push("__global__"),R.forEach(e=>{var t;I.push({id:e.id,filterFn:T,resolvedValue:null!=(t=null==T.resolveFilterValue?void 0:T.resolveFilterValue(i))?t:i})}));for(let e=0;e<t.flatRows.length;e++){let n=t.flatRows[e];if(n.columnFilters={},_.length)for(let e=0;e<_.length;e++){let t=(h=_[e]).id;n.columnFilters[t]=h.filterFn(n,t,h.resolvedValue,e=>{n.columnFiltersMeta[t]=e})}if(I.length){for(let e=0;e<I.length;e++){let t=(g=I[e]).id;if(g.filterFn(n,t,g.resolvedValue,e=>{n.columnFiltersMeta[t]=e})){n.columnFilters.__global__=!0;break}}!0!==n.columnFilters.__global__&&(n.columnFilters.__global__=!1)}}return l=t.rows,r=e=>{for(let t=0;t<C.length;t++)if(!1===e.columnFilters[C[t]])return!1;return!0},e.options.filterFromLeafRows?(o=l,s=r,f=[],x={},b=null!=(d=(a=e).options.maxLeafRowFilterDepth)?d:100,{rows:(y=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){var i;let r=e[l],o=ne(a,r.id,r.original,r.index,r.depth,void 0,r.parentId);if(o.columnFilters=r.columnFilters,null!=(i=r.subRows)&&i.length&&t<b){if(o.subRows=y(r.subRows,t+1),s(r=o)&&!o.subRows.length||s(r)||o.subRows.length){n.push(r),x[r.id]=r,f.push(r);continue}}else s(r=o)&&(n.push(r),x[r.id]=r,f.push(r))}return n})(o),flatRows:f,rowsById:x}):(c=l,u=r,v=[],j={},w=null!=(m=(p=e).options.maxLeafRowFilterDepth)?m:100,{rows:(S=function(e,t){void 0===t&&(t=0);let n=[];for(let l=0;l<e.length;l++){let r=e[l];if(u(r)){var i;if(null!=(i=r.subRows)&&i.length&&t<w){let e=ne(p,r.id,r.original,r.index,r.depth,void 0,r.parentId);e.subRows=S(r.subRows,t+1),r=e}n.push(r),v.push(r),j[r.id]=r}}return n})(c),flatRows:v,rowsById:j})},t6(e.options,"debugTable","getFilteredRowModel",()=>e._autoResetPageIndex())),getPaginationRowModel:e=>t5(()=>[e.getState().pagination,e.getPrePaginationRowModel(),e.options.paginateExpandedRows?void 0:e.getState().expanded],(t,n)=>{let i;if(!n.rows.length)return n;let{pageSize:l,pageIndex:r}=t,{rows:o,flatRows:s,rowsById:a}=n,d=l*r;if(o=o.slice(d,d+l),e.options.paginateExpandedRows)i={rows:o,flatRows:s,rowsById:a};else{var c;let e,t;c={rows:o,flatRows:s,rowsById:a},e=[],t=n=>{var i;e.push(n),null!=(i=n.subRows)&&i.length&&n.getIsExpanded()&&n.subRows.forEach(t)},c.rows.forEach(t),i={rows:e,flatRows:c.flatRows,rowsById:c.rowsById}}i.flatRows=[];let u=e=>{i.flatRows.push(e),e.subRows.length&&e.subRows.forEach(u)};return i.rows.forEach(u),i},t6(e.options,"debugTable","getPaginationRowModel")),autoResetPageIndex:!1,initialState:{columnPinning:{left:["selected","Preview"]},pagination:{pageSize:25},columnVisibility:l},getRowId:e=>e._id,meta:{selectedAnchor:u,setSelectedAnchor:p,patchDocument:(e,t,n)=>null}}),{rows:g}=h.getRowModel();(0,a.useEffect)(()=>(t({type:"TERMS_TYPE_ADD",schemaType:e}),()=>{t({type:"TERMS_TYPE_REMOVE",schemaType:e})}),[e,t]);let f=(0,a.useCallback)(e=>(0,o.jsx)(eT.Box,{as:"tr",paddingY:2,style:{display:"flex",width:"100%"},children:e.getVisibleCells().map(t=>(0,o.jsx)(a8,{...t},e.original._id+t.id))},e.original._id+e.id),[]),x=`Total: ${m} rows, showing ${g.length} rows`;return(0,o.jsxs)(dh,{direction:"column",paddingX:3,"data-testid":"document-sheet-list-pane",children:[(0,o.jsxs)(eT.Flex,{direction:"row",align:"center",paddingY:3,paddingX:1,justify:"space-between",children:[(0,o.jsxs)(eT.Flex,{direction:"row",align:"center",children:[(0,o.jsx)(dr,{}),(0,o.jsx)(eT.Text,{size:0,muted:!0,children:x})]}),(0,o.jsx)(di,{table:h})]}),(0,o.jsx)(dg,{children:(0,o.jsx)(a2,{table:h,children:(0,o.jsxs)(df,{children:[(0,o.jsx)("thead",{children:h.getHeaderGroups().map(e=>(0,o.jsx)(eT.Box,{as:"tr",children:e.headers.map(t=>(0,o.jsx)(dc,{header:t,headerGroup:e},t.id))},e.id))}),(0,o.jsx)("tbody",{children:h.getRowModel().rows.map(f)})]})})}),(0,o.jsx)(eT.Flex,{justify:"flex-end",padding:3,gap:4,paddingY:5,children:(0,o.jsx)(du,{table:h})})]})}function db(e){let t,n,i,l=(0,s.c)(7),r=(0,d.useSchema)(),a=e.pane.schemaTypeName;if(l[0]!==r||l[1]!==a?(n=!(t=r.get(a))||!(0,eP.isDocumentSchemaType)(t),l[0]=r,l[1]=a,l[2]=t,l[3]=n):(t=l[2],n=l[3]),n)throw Error(`Schema type "${a}" not found or not a document schema`);return l[4]!==e||l[5]!==t?(i=(0,o.jsx)(d.SearchProvider,{children:(0,o.jsx)(dx,{...e,documentSchemaType:t})}),l[4]=e,l[5]=t,l[6]=i):i=l[6],i}function dy(e){let[t,n]=(0,a.useState)(e);return(0,eU.default)(t,e)?t:(n(e),e)}let dv=(0,a.memo)(function(e){let t,n,i,l,r,a,c,u,p,m=(0,s.c)(36),{index:h,isSelected:g,pane:f,paneKey:x}=e,{name:b}=(0,d.useSource)(),{defaultLayout:y,initialValueTemplates:v,menuItemGroups:j,menuItems:w,options:S}=f,_=void 0===v?d.EMPTY_ARRAY:v,{defaultOrdering:I,filter:C}=S,T=void 0===I?d.EMPTY_ARRAY:I,R=dy(S.params||aR),P=f.source;e:{let e;m[0]!==C||m[1]!==R?(e=aL(C,R),m[0]=C,m[1]=R,m[2]=e):e=m[2];let n=e;if(n?.length===1){t=n[0];break e}t=null}let E=t,[D,k]=i7("layout",E??f.id,void 0===y?"default":y),{title:F}=(0,d.useI18nText)(f);m[3]!==T?(n=T?.length>0?{by:T}:aT,m[3]=T,m[4]=n):n=m[4];let A=n,[L,V]=i7("sort-order",E??f.id,A);m[5]!==D||m[6]!==w||m[7]!==L?(i=(e=>{let{menuItems:t,sortOrderRaw:n,layout:i}=e;return t?.map(e=>e.params?.layout?{...e,selected:i===e.params?.layout}:e?.params?.by?{...e,selected:(0,eH.isEqual)(n?.by,e?.params?.by||d.EMPTY_ARRAY)}:{...e,selected:!1})})({menuItems:w,sortOrderRaw:L,layout:D}),m[5]=D,m[6]=w,m[7]=L,m[8]=i):i=m[8];let M=i,O="sheetList"===D;m[9]!==O||m[10]!==D||m[11]!==e||m[12]!==L?(l=O?(0,o.jsx)(db,{...e},e.pane.id):(0,o.jsx)(aQ,{...e,sortOrder:L,layout:D}),m[9]=O,m[10]=D,m[11]=e,m[12]=L,m[13]=l):l=m[13];let z=l,B=P||b;return m[14]!==O?(r=O?{}:{currentMaxWidth:350,maxWidth:640},m[14]=O,m[15]=r):r=m[15],m[16]!==f.source?(a=!1,m[16]=f.source,m[17]=a):a=m[17],m[18]!==h||m[19]!==_||m[20]!==j||m[21]!==M||m[22]!==k||m[23]!==V||m[24]!==F?(c=(0,o.jsx)(a0,{index:h,initialValueTemplates:_,menuItemGroups:j,menuItems:M,setLayout:k,setSortOrder:V,title:F}),m[18]=h,m[19]=_,m[20]=j,m[21]=M,m[22]=k,m[23]=V,m[24]=F,m[25]=c):c=m[25],m[26]!==g||m[27]!==x||m[28]!==z||m[29]!==c||m[30]!==r||m[31]!==a?(u=(0,o.jsxs)(il,{"data-ui":"DocumentListPane",id:x,minWidth:320,...r,selected:g,children:[a,c,z]}),m[26]=g,m[27]=x,m[28]=z,m[29]=c,m[30]=r,m[31]=a,m[32]=u):u=m[32],m[33]!==u||m[34]!==B?(p=(0,o.jsx)(d.SourceProvider,{name:B,children:u}),m[33]=u,m[34]=B,m[35]=p):p=m[35],p});dv.displayName="Memo(PaneContainer)";let dj=e=>{let{liveEditSchemaType:t,version:n}=e;return t&&!n?{label:"Live",color:"danger"}:null};dj.displayName="LiveEditBadge";let dw={activePanes:[]};function dS(e){dw.activePanes=e}function d_(e,t,n,i){let l=n?.panes||[],r=dw.activePanes||[],o=t.id||(0,eE.uuid)();for(let n=r.length-1;n>=0;n--){let s=r[n];if("object"==typeof s&&(s.canHandleIntent?.(e,t,{pane:s,index:n})||"documentList"===s.type&&s.schemaTypeName===t.type&&"_type == $type"===s.options.filter)){let r=function(e,{template:t,version:n,inspect:i,comment:l,task:r}){switch(e){case"create":return{template:t,version:n};case"edit":return{inspect:i,comment:l,task:r};default:return l4}}(e,t);return{panes:l.slice(0,n).concat([[{id:o,params:r,payload:i}]])}}}return{intent:e,params:t,payload:i}}let dI=(0,eD.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dC=(0,eD.styled)(eT.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`;function dT(e){let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(39),{showChanges:b}=e,{documentId:y,schemaType:v,timelineError:j,timelineStore:w,value:S}=iN(),{selectedReleaseId:I}=(0,d.usePerspective)(),[C,T]=(0,a.useState)(null),R=(0,d.useTimelineSelector)(w,dF),P=(0,d.useTimelineSelector)(w,dk),E=(0,d.useTimelineSelector)(w,dD),D=(0,d.useTimelineSelector)(w,dE),k=(0,d.useTimelineSelector)(w,dP),F="loading"===D,A=!E,{t:L}=(0,d.useTranslation)(_);x[0]!==P||x[1]!==y||x[2]!==A||x[3]!==v||x[4]!==S?(t={documentId:y,schemaType:v,FieldWrapper:dR,rootDiff:P,isComparingCurrent:A,value:S,showFromValue:!0},x[0]=P,x[1]=y,x[2]=A,x[3]=v,x[4]=S,x[5]=t):t=x[5];let V=t;if(I){let e;return x[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(eT.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(eT.Card,{flex:1,padding:2,paddingTop:0,children:(0,o.jsx)(oT,{versionError:!0})})}),x[6]=e):e=x[6],e}return x[7]!==L?(n=L("changes.from.label"),x[7]=L,x[8]=n):n=x[8],x[9]!==n?(i=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:n}),x[9]=n,x[10]=i):i=x[10],x[11]!==k?(l=(0,o.jsx)(oE,{mode:"since",chunk:k,placement:"bottom-start"}),x[11]=k,x[12]=l):l=x[12],x[13]!==L?(r=L("changes.to.label"),x[13]=L,x[14]=r):r=x[14],x[15]!==r?(c=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:r}),x[15]=r,x[16]=c):c=x[16],x[17]!==R?(u=(0,o.jsx)(oE,{chunk:R,mode:"rev",placement:"bottom-end"}),x[17]=R,x[18]=u):u=x[18],x[19]!==i||x[20]!==l||x[21]!==c||x[22]!==u?(p=(0,o.jsx)(eT.Box,{padding:3,children:(0,o.jsxs)(dC,{paddingX:2,paddingBottom:2,children:[i,l,c,u]})}),x[19]=i,x[20]=l,x[21]=c,x[22]=u,x[23]=p):p=x[23],x[24]!==P||x[25]!==V||x[26]!==F||x[27]!==v||x[28]!==b||x[29]!==j?(m=b&&(0,o.jsx)(dA,{diff:P,documentContext:V,error:j,loading:F,schemaType:v}),x[24]=P,x[25]=V,x[26]=F,x[27]=v,x[28]=b,x[29]=j,x[30]=m):m=x[30],x[31]!==m?(h=(0,o.jsx)(dI,{"data-ui":"Scroller",ref:T,children:(0,o.jsx)(eT.Box,{flex:1,paddingX:3,height:"fill",children:m})}),x[31]=m,x[32]=h):h=x[32],x[33]!==C||x[34]!==h?(g=(0,o.jsx)(eT.Card,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(eT.BoundaryElementProvider,{element:C,children:h})}),x[33]=C,x[34]=h,x[35]=g):g=x[35],x[36]!==g||x[37]!==p?(f=(0,o.jsxs)(eT.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[p,g]}),x[36]=g,x[37]=p,x[38]=f):f=x[38],f}function dR(e){return(0,o.jsx)(d.ChangeFieldWrapper,{...e,hasRevertHover:!1})}function dP(e){return e.sinceTime}function dE(e){return e.selectionState}function dD(e){return e.onOlderRevision}function dk(e){return e.diff}function dF(e){return e.revTime}function dA(e){let t,n,i=(0,s.c)(9),{error:l,diff:r,documentContext:a,loading:c,schemaType:p}=e;if(l){let e;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.NoChanges,{}),i[0]=e):e=i[0],e}if(c){let e;return i[1]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.LoadingBlock,{showText:!0}),i[1]=e):e=i[1],e}if(!r){let e;return i[2]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.NoChanges,{}),i[2]=e):e=i[2],e}return i[3]!==r||i[4]!==p?(t=(0,o.jsx)(d.ChangeList,{diff:r,schemaType:p}),i[3]=r,i[4]=p,i[5]=t):t=i[5],i[6]!==a||i[7]!==t?(n=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:a,children:t}),i[6]=a,i[7]=t,i[8]=n):n=i[8],n}function dL(e){let t,n,i,l,r,a,c,u,p=(0,s.c)(27),{event:m,isSelected:h,onSelect:g,optionsMenu:f}=e,{t:x}=(0,d.useTranslation)("studio");p[0]!==m?(t=!(0,d.isDeleteDocumentVersionEvent)(m)&&!(0,d.isDeleteDocumentGroupEvent)(m)&&!(0,d.isUnpublishDocumentEvent)(m)&&!(0,d.isScheduleDocumentVersionEvent)(m)&&!(0,d.isUnscheduleDocumentVersionEvent)(m),p[0]=m,p[1]=t):t=p[1];let b=t;p[2]!==m||p[3]!==b||p[4]!==g?(n=e=>{e.preventDefault(),e.stopPropagation(),b&&g(m)},p[2]=m,p[3]=b,p[4]=g,p[5]=n):n=p[5];let y=n;p[6]!==b||p[7]!==x?(i=b?"":x("changes.not-selectable"),p[6]=b,p[7]=x,p[8]=i):i=p[8];let v=b?"button":"div",j=b?"pointer":"default";return p[9]!==j?(l={cursor:j,width:"100%"},p[9]=j,p[10]=l):l=p[10],p[11]!==m?(r=(0,o.jsx)(d.Event,{event:m,showChangesBy:"tooltip"}),p[11]=m,p[12]=r):r=p[12],p[13]!==m.timestamp||p[14]!==y||p[15]!==h||p[16]!==v||p[17]!==l||p[18]!==r?(a=(0,o.jsx)(eT.Card,{as:v,onClick:y,padding:2,pressed:h,radius:2,"data-ui":"timelineItem","data-testid":"timeline-item-button","data-chunk-timestamp":m.timestamp,style:l,children:r}),p[13]=m.timestamp,p[14]=y,p[15]=h,p[16]=v,p[17]=l,p[18]=r,p[19]=a):a=p[19],p[20]!==b||p[21]!==i||p[22]!==a?(c=(0,o.jsx)(eC.Tooltip,{content:i,disabled:b,children:a}),p[20]=b,p[21]=i,p[22]=a,p[23]=c):c=p[23],p[24]!==f||p[25]!==c?(u=(0,o.jsxs)(eT.Flex,{gap:1,children:[c,f]}),p[24]=f,p[25]=c,p[26]=u):u=p[26],u}function dV(e){let t,n,i,l,r,a,u,p,m,h,g,f,x=(0,s.c)(44),{event:b}=e,{t:y}=(0,d.useTranslation)(_),{t:v}=(0,d.useTranslation)(),j=(0,eT.usePortal)(),{params:w,setParams:S}=lk(),I=(0,d.useSetPerspective)(),{document:C}=(0,d.useWorkspace)(),{drafts:T}=C,{enabled:R}=T;x[0]!==b.id||x[1]!==b.versionId||x[2]!==b.versionRevisionId||x[3]!==w||x[4]!==S?(t=()=>{S({...w,rev:b.versionRevisionId||"@lastPublished",since:void 0,historyEvent:b.id,historyVersion:(0,c.getVersionFromId)(b.versionId)})},x[0]=b.id,x[1]=b.versionId,x[2]=b.versionRevisionId,x[3]=w,x[4]=S,x[5]=t):t=x[5];let P=t;x[6]!==b.versionRevisionId||x[7]!==R||x[8]!==w||x[9]!==S||x[10]!==I?(n=()=>{S({...w,rev:b.versionRevisionId,preserveRev:"true",since:void 0}),setTimeout(()=>{I(R?"drafts":"published")},100)},x[6]=b.versionRevisionId,x[7]=R,x[8]=w,x[9]=S,x[10]=I,x[11]=n):n=x[11];let E=n;x[12]!==b.release?(i=e=>{let{children:t}=e;return(0,o.jsx)(d.VersionInlineBadge,{$tone:b.release?(0,d.isReleaseDocument)(b.release)?(0,d.getReleaseTone)(b.release):"default":void 0,children:t})},x[12]=b.release,x[13]=i):i=x[13];let D=i;x[14]!==b.release?(l=b.release&&!(0,d.isReleaseDocument)(b.release),x[14]=b.release,x[15]=l):l=x[15];let k=l,F=`timeline-item-menu-button-${b.versionId}`;x[16]!==y?(r=y("timeline-item.menu-button.aria-label"),x[16]=y,x[17]=r):r=x[17],x[18]!==b.release||x[19]!==k||x[20]!==y?(a=k?y("timeline-item.not-found-release.tooltip",{releaseId:b.release?._id?(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id):void 0}):y("timeline-item.menu-button.tooltip"),x[18]=b.release,x[19]=k,x[20]=y,x[21]=a):a=x[21],x[22]!==a?(u={content:a},x[22]=a,x[23]=u):u=x[23],x[24]!==k||x[25]!==r||x[26]!==u?(p=(0,o.jsx)(d.ContextMenuButton,{"aria-label":r,tooltipProps:u,disabled:k}),x[24]=k,x[25]=r,x[26]=u,x[27]=p):p=x[27],x[28]!==D||x[29]!==b.release||x[30]!==b.versionRevisionId||x[31]!==E||x[32]!==P||x[33]!==y||x[34]!==v?(m=(0,o.jsx)(eT.Menu,{padding:1,children:b.release?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eV.IntentLink,{intent:d.RELEASES_INTENT,params:{id:(0,d.getReleaseIdFromReleaseDocumentId)(b.release._id)},style:{textDecoration:"none"},children:(0,o.jsx)(eT.MenuItem,{padding:3,children:(0,o.jsx)(eT.Flex,{align:"center",justify:"flex-start",children:(0,o.jsx)(eT.Text,{size:1,style:{textDecoration:"none"},children:(0,o.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(D,{children:t})}},i18nKey:"events.open.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})}),(0,o.jsx)(eT.MenuItem,{onClick:P,children:(0,o.jsx)(eT.Flex,{align:"center",justify:"flex-start",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{components:{VersionBadge:e=>{let{children:t}=e;return(0,o.jsx)(D,{children:t})}},i18nKey:"events.inspect.release",values:{releaseTitle:b.release.metadata?.title||v("release.placeholder-untitled-release")},t:y})})})})]}):(0,o.jsx)(eT.MenuItem,{onClick:E,disabled:!b.versionRevisionId,children:(0,o.jsx)(eT.Flex,{align:"center",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{components:{VersionBadge:dM},i18nKey:"events.open.draft",t:y})})})})}),x[28]=D,x[29]=b.release,x[30]=b.versionRevisionId,x[31]=E,x[32]=P,x[33]=y,x[34]=v,x[35]=m):m=x[35];let A=!j.elements?.[oP]||oP;return x[36]===Symbol.for("react.memo_cache_sentinel")?(h=["bottom-end","bottom-start"],x[36]=h):h=x[36],x[37]!==A?(g={portal:A,placement:"bottom",fallbackPlacements:h},x[37]=A,x[38]=g):g=x[38],x[39]!==p||x[40]!==m||x[41]!==g||x[42]!==F?(f=(0,o.jsx)(eC.MenuButton,{id:F,button:p,menu:m,popover:g}),x[39]=p,x[40]=m,x[41]=g,x[42]=F,x[43]=f):f=x[43],f}function dM(e){let{children:t}=e;return(0,o.jsx)(d.VersionInlineBadge,{$tone:"caution",children:t})}let dO=eF.motion.create(eT.Box),dz={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},dB=e=>{let t,n,i,l,r,c,u,p,m,h,g,f,x=(0,s.c)(38),{events:b,hasMoreEvents:y,selectedEventId:v,onLoadMore:j,onSelect:w,listMaxHeight:S,fetchEventChildren:_}=e,I=void 0===S?"calc(100vh - 280px)":S,[C,T]=(0,a.useState)(!1),{t:R}=(0,d.useTranslation)("studio");x[0]!==b||x[1]!==v?(t=()=>{if(v){let e=b.find(e=>e.id===v);if(e&&"parentId"in e&&e.parentId)return new Set([e.parentId])}return new Set},x[0]=b,x[1]=v,x[2]=t):t=x[2];let[P,E]=(0,a.useState)(t);x[3]===Symbol.for("react.memo_cache_sentinel")?(n=new Set,x[3]=n):n=x[3];let[D,k]=(0,a.useState)(n);x[4]!==b||x[5]!==P?(i=b.filter(e=>(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId?b[b.length-1].id===e.id||P.has(e.parentId):!(0,d.isEditDocumentVersionEvent)(e)||!e.parentId||P.has(e.parentId)),x[4]=b,x[5]=P,x[6]=i):i=x[6];let F=i;x[7]!==_?(l=e=>async()=>{let t=e.id,n=!1;E(e=>{let i=new Set(e);return e.has(t)?i.delete(t):(n=!0,i.add(t)),i}),n&&(k(e=>{let n=new Set(e);return n.add(t),n}),await _(e),k(e=>{let n=new Set(e);return n.delete(t),n}))},x[7]=_,x[8]=l):l=x[8];let A=l;x[9]!==w?(r=e=>{w(e)},x[9]=w,x[10]=r):r=x[10];let L=r;x[11]!==P||x[12]!==A?(c=e=>{let t=(0,d.getDocumentVariantType)(e.documentId);return(0,d.isPublishDocumentVersionEvent)(e)&&"published"===t?(0,o.jsx)(dV,{event:e}):(0,d.isPublishDocumentVersionEvent)(e)&&"draft"===t&&e.creationEvent||(0,d.isDeleteDocumentVersionEvent)(e)&&e.creationEvent?(0,o.jsx)(od,{isExpanded:P.has(e.id),onExpand:A(e)}):null},x[11]=P,x[12]=A,x[13]=c):c=x[13];let V=c;x[14]!==F.length||x[15]!==D||x[16]!==L||x[17]!==y||x[18]!==V||x[19]!==v?(u=(e,t)=>{let{activeIndex:n}=t,i=(0,d.isCreateDocumentVersionEvent)(e)&&e.parentId&&D.has(e.parentId),l=n===F.length-1;return i?(0,o.jsx)(dO,{animate:{opacity:1},initial:{opacity:0},transition:{duration:.2,delay:.2},children:(0,o.jsx)(eT.Flex,{align:"center",justify:"center",style:{height:57},children:(0,o.jsx)(eT.Spinner,{})})}):(0,o.jsxs)(dO,{paddingBottom:1,paddingRight:1,animate:"animate",exit:"exit",initial:"initial",variants:"parentId"in e?dz:void 0,paddingLeft:((0,d.isEditDocumentVersionEvent)(e)||(0,d.isCreateDocumentVersionEvent)(e))&&e.parentId&&!l?4:1,children:[(0,o.jsx)(dL,{event:e,isSelected:e.id===v,onSelect:L,optionsMenu:V(e)}),l&&y&&(0,o.jsx)(d.LoadingBlock,{})]},e.timestamp)},x[14]=F.length,x[15]=D,x[16]=L,x[17]=y,x[18]=V,x[19]=v,x[20]=u):u=x[20];let M=u;if(x[21]===Symbol.for("react.memo_cache_sentinel")?(m=()=>T(!0),p=[],x[21]=p,x[22]=m):(p=x[21],m=x[22]),(0,a.useEffect)(m,p),x[23]!==F||x[24]!==v){let e;x[26]!==v?(e=e=>e.id===v,x[26]=v,x[27]=e):e=x[27],h=F.findIndex(e),x[23]=F,x[24]=v,x[25]=h}else h=x[25];let O=h,z=!O||C;return x[28]!==F||x[29]!==I||x[30]!==j||x[31]!==M||x[32]!==O||x[33]!==R?(g=F.length>0?(0,o.jsx)(ou,{direction:"column",$maxHeight:I,id:"timeline-list-wrapper",children:(0,o.jsx)(d.CommandList,{activeItemDataAttr:"data-hovered",ariaLabel:R("timeline.list.aria-label"),autoFocus:"list",initialIndex:O,initialScrollAlign:"center",itemHeight:57,items:F,onEndReached:j,onEndReachedIndexOffset:20,overscan:5,renderItem:M,wrapAround:!1})}):(0,o.jsxs)(eT.Stack,{padding:3,space:3,children:[(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:R("timeline.error.no-document-history-title")}),(0,o.jsx)(eT.Text,{muted:!0,size:1,children:R("timeline.error.no-document-history-description")})]}),x[28]=F,x[29]=I,x[30]=j,x[31]=M,x[32]=O,x[33]=R,x[34]=g):g=x[34],x[35]!==z||x[36]!==g?(f=(0,o.jsx)(op,{$visible:z,"data-ui":"timeline",children:g}),x[35]=z,x[36]=g,x[37]=f):f=x[37],f};dB.displayName="EventsTimeline";let dN=(0,eD.styled)(eC.Popover)`
  overflow: hidden;
  overflow: clip;
`,dH={timestamp:{dateStyle:"medium",timeStyle:"short"}};function d$(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w=(0,s.c)(58),{event:S,events:_,mode:I,placement:C}=e,{setTimelineRange:T}=iN(),[R,P]=(0,a.useState)(!1),[E,D]=(0,a.useState)(null),[k,F]=(0,a.useState)(null),A=(0,eR.useToast)(),{nextCursor:L,loading:V,error:M,findRangeForRevision:O,findRangeForSince:z,loadMoreEvents:B,expandEvent:N}=(0,d.useEvents)(),{t:H}=(0,d.useTranslation)("studio");w[0]===Symbol.for("react.memo_cache_sentinel")?(t=()=>{P(!0)},w[0]=t):t=w[0];let $=t;w[1]===Symbol.for("react.memo_cache_sentinel")?(n=()=>{P(!1)},w[1]=n):n=w[1];let U=n;w[2]!==E||w[3]!==R?(i=e=>{R&&("Escape"===e.key||"Tab"===e.key)&&(U(),E?.focus())},w[2]=E,w[3]=R,w[4]=i):i=w[4],(0,eT.useGlobalKeyDown)(i),w[5]!==E||w[6]!==k?(l=()=>[E,k],w[5]=E,w[6]=k,w[7]=l):l=w[7],(0,eT.useClickOutsideEvent)(R&&U,l),w[8]!==O||w[9]!==T||w[10]!==H||w[11]!==A?(r=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=O(e?.id);T(t,n),U()})()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:H("timeline.error.unable-to-load-revision")})}},w[8]=O,w[9]=T,w[10]=H,w[11]=A,w[12]=r):r=w[12];let G=r;w[13]!==z||w[14]!==T||w[15]!==H||w[16]!==A?(c=e=>{try{let[t,n]=z(e.id);T(t,n),U()}catch(e){A.push({closable:!0,description:e.message,status:"error",title:H("timeline.error.unable-to-load-revision")})}},w[13]=z,w[14]=T,w[15]=H,w[16]=A,w[17]=c):c=w[17];let q=c;w[18]!==B||w[19]!==V||w[20]!==L?(u=()=>{!V&&L&&B()},w[18]=B,w[19]=V,w[20]=L,w[21]=u):u=w[21];let W=u;e:{let e;if(M){let e;w[22]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(oT,{}),w[22]=e):e=w[22],p=e;break e}let t=!!L,n=S?.id,i="rev"===I?G:q;w[23]!==_||w[24]!==N||w[25]!==W||w[26]!==n||w[27]!==i||w[28]!==t?(e=(0,o.jsx)(dB,{events:_,fetchEventChildren:N,hasMoreEvents:t,selectedEventId:n,onLoadMore:W,onSelect:i}),w[23]=_,w[24]=N,w[25]=W,w[26]=n,w[27]=i,w[28]=t,w[29]=e):e=w[29],p=e}let K=p;w[30]!==S||w[31]!==H?(h=S?H(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dH}):H("timeline.latest-revision"),w[30]=S,w[31]=H,w[32]=h):h=w[32];let Y=h;w[33]!==S||w[34]!==_||w[35]!==H?(g=S?H(d.TIMELINE_ITEM_I18N_KEY_MAPPING[S.documentVariantType][S.type],{context:"timestamp",timestamp:new Date(S.timestamp),formatParams:dH}):_.length>0?H("timeline.since-version-missing"):H("timeline.no-previous-events"),w[33]=S,w[34]=_,w[35]=H,w[36]=g):g=w[36];let X="rev"===I?Y:g;w[37]!==k?(f={"timeline-menu":k},w[37]=k,w[38]=f):f=w[38];let Q=f,J=R&&K,Z=R?"timeline-menu-close-button":"timeline-menu-open-button",ee=V||!_.length,et=R?U:$;return w[39]===Symbol.for("react.memo_cache_sentinel")?(x={maxWidth:"100%"},w[39]=x):x=w[39],w[40]!==X||w[41]!==V||w[42]!==H?(b=V?H("timeline.loading-history"):X,w[40]=X,w[41]=V,w[42]=H,w[43]=b):b=w[43],w[44]!==R||w[45]!==Z||w[46]!==ee||w[47]!==et||w[48]!==b?(y=(0,o.jsx)(eT.Flex,{width:"fill",children:(0,o.jsx)(eC.Button,{"data-testid":Z,disabled:ee,mode:"ghost",onClick:et,ref:D,selected:R,width:"fill",tooltipProps:null,justify:"space-between",style:x,iconRight:m.ChevronDownIcon,text:b})}),w[44]=R,w[45]=Z,w[46]=ee,w[47]=et,w[48]=b,w[49]=y):y=w[49],w[50]!==R||w[51]!==C||w[52]!==J||w[53]!==y?(v=(0,o.jsx)(dN,{"data-testid":"timeline-menu",constrainSize:!0,content:J,"data-ui":"versionMenu",open:R,placement:C,matchReferenceWidth:!0,portal:!0,ref:F,children:y}),w[50]=R,w[51]=C,w[52]=J,w[53]=y,w[54]=v):v=w[54],w[55]!==Q||w[56]!==v?(j=(0,o.jsx)(eT.PortalProvider,{__unstable_elements:Q,children:v}),w[55]=Q,w[56]=v,w[57]=j):j=w[57],j}let dU=(0,eD.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`,dG=(0,eD.styled)(eT.Box)`
  &:not([hidden]) {
    display: grid;
  }
  grid-template-columns: 48px 1fr;
  align-items: center;
  gap: 0.25em;
`,dq=(0,eD.styled)(eT.Flex)`
  width: 100%;
  position: absolute;
  bottom: -4px;
`,dW={diff:null,loading:!0,error:null},dK=()=>{let e,t,n,i,l,r,a,c,p,m,h,g=(0,s.c)(31),{documentId:f,schemaType:x,editState:b,displayed:y}=iN(),{selectedPerspective:v,selectedPerspectiveName:j,selectedReleaseId:w}=(0,d.usePerspective)(),{t:S}=(0,d.useTranslation)(_);g[0]!==y||g[1]!==b?.published?(e=(0,ek.diffInput)((0,ek.wrap)(b?.published??{},{author:""}),(0,ek.wrap)(y??{},{author:""})),g[0]=y,g[1]=b?.published,g[2]=e):e=g[2];let I=e;return(!w||b?.version)&&("drafts"!==v||b?.draft)&&"published"!==j&&y?._rev?(g[3]!==S?(t=S("events.compare-with-published.title"),g[3]=S,g[4]=t):t=g[4],g[5]!==t?(n=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:t}),g[5]=t,g[6]=n):n=g[6],g[7]!==v?(i=(0,d.isReleaseDocument)(v)?v.metadata?.title:"draft",g[7]=v,g[8]=i):i=g[8],g[9]!==i?(l={version:i},g[9]=i,g[10]=l):l=g[10],g[11]!==S||g[12]!==l?(r=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:(0,o.jsx)(d.Translate,{i18nKey:"events.compare-with-published.description",t:S,values:l})}),g[11]=S,g[12]=l,g[13]=r):r=g[13],g[14]!==n||g[15]!==r?(a=(0,o.jsx)(eT.Card,{borderBottom:!0,paddingBottom:3,children:(0,o.jsxs)(eT.Stack,{space:3,paddingTop:1,children:[n,r]})}),g[14]=n,g[15]=r,g[16]=a):a=g[16],g[17]!==y||g[18]!==f||g[19]!==I||g[20]!==x?(c={documentId:f,schemaType:x,rootDiff:I,isComparingCurrent:!0,FieldWrapper:dZ,value:y,showFromValue:!0},g[17]=y,g[18]=f,g[19]=I,g[20]=x,g[21]=c):c=g[21],g[22]!==I||g[23]!==x?(p=(0,o.jsx)(eT.Box,{paddingY:1,children:(0,o.jsx)(d.ChangeList,{diff:I,schemaType:x})}),g[22]=I,g[23]=x,g[24]=p):p=g[24],g[25]!==c||g[26]!==p?(m=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:c,children:p}),g[25]=c,g[26]=p,g[27]=m):m=g[27],g[28]!==a||g[29]!==m?(h=(0,o.jsxs)(eT.Stack,{space:2,marginBottom:3,children:[a,m]}),g[28]=a,g[29]=m,g[30]=h):h=g[30],h):null};function dY(e){let t,n,i,l,r,c,u,p,m,h,g,f,x,b,y,v,j,w,S,_=(0,s.c)(83),{showChanges:I}=e,{documentId:C,schemaType:T,timelineError:R,value:P,formState:E}=iN(),[D,k]=(0,a.useState)(null),{events:F,revision:A,sinceRevision:L,getChangesList:V}=(0,d.useEvents)(),M=!A?.revisionId;_[0]!==V?(t=V(),_[0]=V,_[1]=t):t=_[1];let O=t,{diff:z,loading:B,error:N}=(0,eL.useObservable)(O,dW),{t:H}=(0,d.useTranslation)("studio");_[2]!==z||_[3]!==C||_[4]!==E?.readOnly||_[5]!==M||_[6]!==T||_[7]!==P?(n=()=>({documentId:C,schemaType:T,FieldWrapper:dX,rootDiff:z,isComparingCurrent:M&&!E?.readOnly,value:P,showFromValue:!0}),_[2]=z,_[3]=C,_[4]=E?.readOnly,_[5]=M,_[6]=T,_[7]=P,_[8]=n):n=_[8],_[9]!==n?(i=n(),_[9]=n,_[10]=i):i=_[10];let $=i;e:{let e,t,n;if(!F){let e;_[11]===Symbol.for("react.memo_cache_sentinel")?(e=[null,null],_[11]=e):e=_[11],l=e;break e}_[12]!==F||_[13]!==L?.revisionId?(e=F.find(e=>e.id===L?.revisionId)||null,_[12]=F,_[13]=L?.revisionId,_[14]=e):e=_[14],_[15]!==F||_[16]!==A?.revisionId?(t=F.find(e=>e.id===A?.revisionId)||F[0],_[15]=F,_[16]=A?.revisionId,_[17]=t):t=_[17],_[18]!==e||_[19]!==t?(n=[e,t],_[18]=e,_[19]=t,_[20]=n):n=_[20],l=n}let[U,G]=l;t:{let e;if(!G){let e;_[21]!==F?(e=F.slice(1),_[21]=F,_[22]=e):e=_[22],r=e;break t}if(_[23]!==F||_[24]!==G){let t;_[26]!==G?(t=e=>"parentId"in G&&"parentId"in e&&e.parentId===G.parentId||"parentId"in e&&G.id===e.parentId?{...e,parentId:void 0}:e,_[26]=G,_[27]=t):t=_[27],e=F.slice(F.indexOf(G)+1).map(t),_[23]=F,_[24]=G,_[25]=e}else e=_[25];r=e}let q=r;if(!F.length){let e,t,n,i,l;return _[28]!==H?(e=H("timeline.error.no-document-history-title"),_[28]=H,_[29]=e):e=_[29],_[30]!==e?(t=(0,o.jsx)(eT.Text,{size:1,weight:"medium",children:e}),_[30]=e,_[31]=t):t=_[31],_[32]!==H?(n=H("timeline.error.no-document-history-description"),_[32]=H,_[33]=n):n=_[33],_[34]!==n?(i=(0,o.jsx)(eT.Text,{muted:!0,size:1,children:n}),_[34]=n,_[35]=i):i=_[35],_[36]!==t||_[37]!==i?(l=(0,o.jsx)(eT.Box,{paddingX:2,children:(0,o.jsxs)(eT.Stack,{padding:3,space:3,children:[t,i]})}),_[36]=t,_[37]=i,_[38]=l):l=_[38],l}_[39]===Symbol.for("react.memo_cache_sentinel")?(c={position:"relative"},_[39]=c):c=_[39],_[40]!==H?(u=H("changes.inspector.from-label"),_[40]=H,_[41]=u):u=_[41],_[42]!==u?(p=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:u}),_[42]=u,_[43]=p):p=_[43];let W=U||null;_[44]!==q||_[45]!==W?(m=(0,o.jsx)(d$,{event:W,events:q,mode:"since",placement:"bottom-start"}),_[44]=q,_[45]=W,_[46]=m):m=_[46],_[47]!==H?(h=H("changes.inspector.to-label"),_[47]=H,_[48]=h):h=_[48],_[49]!==h?(g=(0,o.jsx)(eT.Text,{size:1,muted:!0,children:h}),_[49]=h,_[50]=g):g=_[50];let K=G||null;return _[51]!==F||_[52]!==K?(f=(0,o.jsx)(d$,{event:K,events:F,mode:"rev",placement:"bottom-end"}),_[51]=F,_[52]=K,_[53]=f):f=_[53],_[54]!==m||_[55]!==g||_[56]!==f||_[57]!==p?(x=(0,o.jsxs)(dG,{paddingX:2,paddingBottom:2,children:[p,m,g,f]}),_[54]=m,_[55]=g,_[56]=f,_[57]=p,_[58]=x):x=_[58],_[59]!==B||_[60]!==H?(b=B&&(0,o.jsx)(eF.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsxs)(dq,{justify:"center",align:"center",gap:2,children:[(0,o.jsx)(eT.Text,{muted:!0,size:0,children:H("changes.loading-changes")}),(0,o.jsx)(eT.Spinner,{size:0})]})}),_[59]=B,_[60]=H,_[61]=b):b=_[61],_[62]!==x||_[63]!==b?(y=(0,o.jsxs)(eT.Box,{padding:3,style:c,children:[x,b]}),_[62]=x,_[63]=b,_[64]=y):y=_[64],_[65]!==N||_[66]!==$||_[67]!==A?.loading||_[68]!==T||_[69]!==I||_[70]!==U||_[71]!==L?.loading||_[72]!==R||_[73]!==G?.id?(v=I&&(0,o.jsx)(dQ,{documentContext:$,error:R||N,loading:A?.loading||L?.loading||!1,schemaType:T,sameRevisionSelected:U?.id===G?.id,sinceEvent:U}),_[65]=N,_[66]=$,_[67]=A?.loading,_[68]=T,_[69]=I,_[70]=U,_[71]=L?.loading,_[72]=R,_[73]=G?.id,_[74]=v):v=_[74],_[75]!==v?(j=(0,o.jsx)(dU,{"data-ui":"Scroller",ref:k,children:(0,o.jsx)(eT.Box,{flex:1,paddingX:3,height:"fill",children:v})}),_[75]=v,_[76]=j):j=_[76],_[77]!==D||_[78]!==j?(w=(0,o.jsx)(eT.Card,{flex:1,paddingX:2,paddingY:2,children:(0,o.jsx)(eT.BoundaryElementProvider,{element:D,children:j})}),_[77]=D,_[78]=j,_[79]=w):w=_[79],_[80]!==y||_[81]!==w?(S=(0,o.jsxs)(eT.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",overflow:"hidden",children:[y,w]}),_[80]=y,_[81]=w,_[82]=S):S=_[82],S}function dX(e){return e.path.length>0?(0,o.jsx)(d.ChangeFieldWrapper,{...e}):e.children}function dQ(e){let t,n,i=(0,s.c)(15),{error:l,documentContext:r,loading:a,schemaType:c,sameRevisionSelected:p,sinceEvent:m}=e;if(l){let e,t,n;return i[0]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(dK,{}),i[0]=e):e=i[0],i[1]!==l||i[2]!==m?.type?(t=m?.type!=="historyCleared"&&(0,o.jsx)(d.ChangesError,{error:l}),i[1]=l,i[2]=m?.type,i[3]=t):t=i[3],i[4]!==t?(n=(0,o.jsxs)(o.Fragment,{children:[e,t]}),i[4]=t,i[5]=n):n=i[5],n}if(a){let e;return i[6]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(d.LoadingBlock,{showText:!0}),i[6]=e):e=i[6],e}if(p){let e;return i[7]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(dJ,{}),i[7]=e):e=i[7],e}if(!r.rootDiff){let e;return i[8]===Symbol.for("react.memo_cache_sentinel")?(e=(0,o.jsx)(eF.motion.div,{animate:{opacity:1},initial:{opacity:0},transition:{delay:.2,duration:.2},children:(0,o.jsx)(d.NoChanges,{})}),i[8]=e):e=i[8],e}return i[9]!==r.rootDiff||i[10]!==c?(t=(0,o.jsx)(eT.Box,{paddingY:1,children:(0,o.jsx)(d.ChangeList,{diff:r.rootDiff,schemaType:c})}),i[9]=r.rootDiff,i[10]=c,i[11]=t):t=i[11],i[12]!==r||i[13]!==t?(n=(0,o.jsx)(u.DocumentChangeContext.Provider,{value:r,children:t}),i[12]=r,i[13]=t,i[14]=n):n=i[14],n}function dJ(){let e,t,n,i,l,r,a,c=(0,s.c)(12),{t:u}=(0,d.useTranslation)("");return c[0]===Symbol.for("react.memo_cache_sentinel")?(e={opacity:1},t={opacity:0},n={delay:.2,duration:.2},c[0]=e,c[1]=t,c[2]=n):(e=c[0],t=c[1],n=c[2]),c[3]!==u?(i=u("changes.same-revision-selected-title"),c[3]=u,c[4]=i):i=c[4],c[5]!==i?(l=(0,o.jsx)(eT.Text,{size:1,weight:"medium",as:"h3",children:i}),c[5]=i,c[6]=l):l=c[6],c[7]!==u?(r=(0,o.jsx)(eT.Text,{as:"p",size:1,muted:!0,children:(0,o.jsx)(d.Translate,{i18nKey:"changes.same-revision-selected-description",t:u})}),c[7]=u,c[8]=r):r=c[8],c[9]!==l||c[10]!==r?(a=(0,o.jsx)(eF.motion.div,{animate:e,initial:t,transition:n,children:(0,o.jsxs)(eT.Stack,{space:3,paddingTop:2,children:[l,r]})}),c[9]=l,c[10]=r,c[11]=a):a=c[11],a}function dZ(e){return e.children}let d0=(0,eD.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function d1(e){let t,n,i,l=(0,s.c)(21),{showList:r}=e,[c,u]=(0,a.useState)(null),[p,m]=(0,a.useState)(0),{setTimelineRange:h}=iN();l[0]!==p?(t=e=>{!p&&e&&(m(e.clientHeight?e.clientHeight-1:0),u(e))},l[0]=p,l[1]=t):t=l[1];let g=t,{events:f,nextCursor:x,loading:b,error:y,revision:v,loadMoreEvents:j,findRangeForRevision:w,expandEvent:S}=(0,d.useEvents)(),{t:_}=(0,d.useTranslation)("studio"),I=(0,eR.useToast)();l[2]!==w||l[3]!==h||l[4]!==_||l[5]!==I?(n=e=>{try{(()=>{if((0,d.isDeleteDocumentVersionEvent)(e)||(0,d.isDeleteDocumentGroupEvent)(e)||(0,d.isUnpublishDocumentEvent)(e)||(0,d.isScheduleDocumentVersionEvent)(e)||(0,d.isUnscheduleDocumentVersionEvent)(e))return console.error("Event is not selectable");let[t,n]=w(e.id);h(t,n)})()}catch(e){I.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},l[2]=w,l[3]=h,l[4]=_,l[5]=I,l[6]=n):n=l[6];let C=n,T=b&&!f.length;return l[7]!==y||l[8]!==f||l[9]!==S||l[10]!==g||l[11]!==T||l[12]!==p||l[13]!==j||l[14]!==b||l[15]!==x||l[16]!==v?.revisionId||l[17]!==c||l[18]!==C||l[19]!==r?(i=(0,o.jsx)(eT.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(eT.Card,{flex:1,padding:2,paddingTop:0,children:y?(0,o.jsx)(oT,{}):(0,o.jsx)(eT.BoundaryElementProvider,{element:c,children:(0,o.jsxs)(d0,{"data-ui":"Scroller",ref:g,children:[p&&r&&!T?(0,o.jsx)(dB,{events:f,fetchEventChildren:S,hasMoreEvents:!!x,selectedEventId:v?.revisionId||f[0]?.id,onLoadMore:j,onSelect:C,listMaxHeight:`${p}px`}):null,b&&(0,o.jsx)(d.LoadingBlock,{})]})})})}),l[7]=y,l[8]=f,l[9]=S,l[10]=g,l[11]=T,l[12]=p,l[13]=j,l[14]=b,l[15]=x,l[16]=v?.revisionId,l[17]=c,l[18]=C,l[19]=r,l[20]=i):i=l[20],i}let d2=(0,eD.styled)(d.ScrollContainer)`
  height: 100%;
  overflow: auto;
  position: relative;
  scroll-behavior: smooth;
`;function d3(e){let t,n,i,l,r=(0,s.c)(20),{showList:c}=e,{timelineError:u,setTimelineRange:p,timelineStore:m}=iN(),{selectedReleaseId:h}=(0,d.usePerspective)(),[g,f]=(0,a.useState)(null),[x,b]=(0,a.useState)(0);r[0]===Symbol.for("react.memo_cache_sentinel")?(t=e=>{e?.clientHeight&&(b(e.clientHeight-1),f(e))},r[0]=t):t=r[0];let y=t,v=(0,d.useTimelineSelector)(m,d8),j=(0,d.useTimelineSelector)(m,d6),w=(0,d.useTimelineSelector)(m,d5),S=(0,d.useTimelineSelector)(m,d4),{t:_}=(0,d.useTranslation)("studio"),I=(0,eR.useToast)();r[1]!==p||r[2]!==_||r[3]!==m||r[4]!==I?(n=e=>{try{(()=>{let[t,n]=m?.findRangeForRev(e)||[null,null];p(t,n)})()}catch(e){I.push({closable:!0,description:e.message,status:"error",title:_("timeline.error.unable-to-load-revision")})}},r[1]=p,r[2]=_,r[3]=m,r[4]=I,r[5]=n):n=r[5];let C=n;r[6]!==S||r[7]!==m?(i=()=>{S||m?.loadMore()},r[6]=S,r[7]=m,r[8]=i):i=r[8];let T=i;return r[9]!==v||r[10]!==T||r[11]!==w||r[12]!==x||r[13]!==j||r[14]!==g||r[15]!==C||r[16]!==h||r[17]!==c||r[18]!==u?(l=(0,o.jsx)(eT.Flex,{"data-testid":"review-changes-pane",direction:"column",height:"fill",children:(0,o.jsx)(eT.Card,{flex:1,padding:2,paddingTop:0,children:u||h?(0,o.jsx)(oT,{versionError:!!h}):(0,o.jsx)(eT.BoundaryElementProvider,{element:g,children:(0,o.jsx)(d2,{"data-ui":"Scroller",ref:y,children:x&&c?(0,o.jsx)(oC,{chunks:v,hasMoreChunks:w,lastChunk:j,onLoadMore:T,onSelect:C,listMaxHeight:`${x}px`}):null})})})}),r[9]=v,r[10]=T,r[11]=w,r[12]=x,r[13]=j,r[14]=g,r[15]=C,r[16]=h,r[17]=c,r[18]=u,r[19]=l):l=r[19],l}function d4(e){return e.isLoading}function d5(e){return e.hasMoreChunks}function d6(e){return e.realRevChunk}function d8(e){return e.chunks}let d7=(0,eD.styled)(eT.Flex)`
  opacity: 0;
  transition: opacity 200ms;
  &[data-ready] {
    opacity: 1;
  }
`,d9=["history","review"],ce={error:m.ErrorOutlineIcon,warning:m.WarningOutlineIcon,info:m.InfoOutlineIcon},ct={error:"critical",warning:"caution",info:"primary"};function cn(e){let t,n,i,l,r=(0,s.c)(17),{marker:d,onOpen:c,schemaType:u,value:p}=e;r[0]!==d.path||r[1]!==c?(t=()=>c(d.path),r[0]=d.path,r[1]=c,r[2]=t):t=r[2];let m=t,[h,g]=(0,a.useState)(null),f=ce[d.level];return r[3]!==h?(n=h&&(0,o.jsx)(eT.Card,{padding:3,radius:2,tone:"critical",children:(0,o.jsx)(eT.Text,{size:1,children:h.error.message})}),r[3]=h,r[4]=n):n=r[4],r[5]!==f||r[6]!==h||r[7]!==m||r[8]!==d.level||r[9]!==d.message||r[10]!==d.path||r[11]!==u||r[12]!==p?(i=!h&&(0,o.jsx)(eT.Card,{__unstable_focusRing:!0,as:"button",onClick:m,padding:3,radius:2,tone:ct[d.level],children:(0,o.jsxs)(eT.Flex,{align:"flex-start",gap:3,children:[(0,o.jsx)(eT.Box,{flex:"none",children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(f,{})})}),(0,o.jsxs)(eT.Stack,{flex:1,space:2,children:[(0,o.jsx)(ci,{path:d.path,schemaType:u,value:p}),(0,o.jsx)(eT.Text,{muted:!0,size:1,children:d.message})]})]})}),r[5]=f,r[6]=h,r[7]=m,r[8]=d.level,r[9]=d.message,r[10]=d.path,r[11]=u,r[12]=p,r[13]=i):i=r[13],r[14]!==n||r[15]!==i?(l=(0,o.jsxs)(eC.ErrorBoundary,{onCatch:g,children:[n,i]}),r[14]=n,r[15]=i,r[16]=l):l=r[16],l}function ci(e){let t,n,i,l=(0,s.c)(8),{path:r,schemaType:a,value:c}=e;e:{try{let e;l[0]!==r||l[1]!==a||l[2]!==c?(e=function(e){let{path:t,schemaType:n,value:i}=e,l=[],r=n,o=i;for(let e of t){if("string"==typeof e){if(!(0,d.isRecord)(o)&&void 0!==o)throw Error(`Parent value is not an object, cannot get path segment: .${e}`);if("object"!==r.jsonType)throw Error(`Parent type is not an object schema type, cannot get path segment: .${e}`);o=o?.[e];let t=r.fields.find(t=>t.name===e);if(!t)return l.push({name:e}),l;r=t.type,l.push(r);continue}if("number"==typeof e){if(!(0,d.isArray)(o)&&void 0!==o)throw Error(`Parent value is not an array, cannot get path segment: [${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: [${e}]`);o=o?.[e];let t=r.of.find(e=>"string"==typeof o?"string"===e.jsonType:"number"==typeof o?"number"===e.jsonType:"boolean"==typeof o?"boolean"===e.jsonType:!!(0,d.isRecord)(o)&&e.name===o?._type);if(!t)throw Error(`Item type not found: [${e}]`);r=t,l.push(r);continue}if((0,d.isRecord)(e)&&e._key){if(typeof o>"u")return l;if(!(0,d.isArray)(o))throw Error(`Parent value is not an array, cannot get path segment: [_key == ${e}]`);if("array"!==r.jsonType)throw Error(`Parent type is not an array schema type, cannot get path segment: .${e}`);if(typeof(o=(o??[]).find(t=>(0,d.isRecord)(t)&&t._key===e._key))>"u")return l;if(!(0,d.isRecord)(o))throw Error(`Array item not found: [_key == ${e._key}]`);let t=r.of.find(e=>(0,d.isRecord)(o)&&e.name===o?._type);if(!t)throw Error(`Array item type not found: .${o?._type}`);r=t,l.push(r);continue}throw Error(`Invalid path segment: ${JSON.stringify(e)}`)}return l}({path:r,schemaType:a,value:c}),l[0]=r,l[1]=a,l[2]=c,l[3]=e):e=l[3],t=e;break e}catch(e){console.error(e)}t=null}let u=t;return u?.length?(l[4]!==u?(n=u.map(cl),l[4]=u,l[5]=n):n=l[5],l[6]!==n?(i=(0,o.jsx)(eT.Text,{size:1,children:n}),l[6]=n,l[7]=i):i=l[7],i):null}function cl(e,t){return(0,o.jsxs)(a.Fragment,{children:[t>0&&(0,o.jsx)("span",{style:{color:"var(--card-muted-fg-color)",opacity:.5},children:" / "}),(0,o.jsx)("span",{style:{fontWeight:500},children:e.title||e.name})]},t)}function cr(e){return{level:e.level,message:e.message,path:e.path}}let co={},cs=eV.route.create("/",[eV.route.intents("/intent"),eV.route.create("/edit/:type/:editDocumentId",[eV.route.create({path:"/:params",transform:{params:{toState:function(e){try{return JSON.parse(decodeURIComponent(e))}catch{return console.warn("Failed to parse JSON parameters"),{}}},toPath:function(e){return JSON.stringify(e)}}}})]),eV.route.create({path:"/:panes",children:[eV.route.create("/:action",eV.route.create("/:legacyEditDocumentId"))],transform:{panes:{toState:function(e){var t;return -1!==(t=decodeURIComponent(e)).indexOf(",{")?function(e){let t=[],n=e;for(;n.length;){let[e,i,l]=n.match(ca)||[];if(!e){n=n.slice(1);continue}let r=l&&function(e){try{return JSON.parse(e)}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(l);t.push({id:i,payload:r}),n=n.slice(e.length)}return[t]}(t):t.split(";").map(e=>{let[t,...n]=e.split("|").map(e=>{let t,[n,...i]=e.split(",");return t={id:n,params:co,payload:void 0},i.reduce((e,t)=>{if(/^[a-z0-9]+=[^=]+/i.test(t)){let n=t.slice(0,t.indexOf("=")),i=t.slice(n.length+1);e.params={...e.params,[decodeURIComponent(n)]:decodeURIComponent(i)}}else/^[A-Za-z0-9\-_]+(?:={0,2})$/.test(t)?e.payload=function(e){try{return e?(0,eV.decodeJsonParams)(e):void 0}catch(e){console.warn(`Failed to parse parameters: ${e.message}`);return}}(t):console.warn("Unknown pane segment: %s - skipping",t);return e},t)});return[t,...n.map(e=>({...t,...e,id:e.id||t.id,params:{...(0,eN.omit)(t.params,cd),...e.params},payload:e.payload||t.payload}))]}).filter(e=>e.length>0)},toPath:function(e){return(e||[]).map(e=>e.map(cu).join("|")).map(encodeURIComponent).join(";")}}}})]),ca=/^([.a-z0-9_-]+),?({.*?})?(?:(;|$))/i,cd=["view","since","rev","inspect","comment"],cc=Boolean;function cu(e,t,n){let{payload:i,params:l={},id:r}=e,[o]=n,s=e===o,a=0!==t&&r===o.id,d=typeof i>"u"?void 0:(0,eV.encodeJsonParams)(i),c=Object.entries(l).filter(e=>{let[t,n]=e;return!!n&&(!!s||!(n===o.params?.[t]&&!cd.includes(t)))}).map(([e,t])=>`${encodeURIComponent(e)}=${encodeURIComponent(t)}`);return[a?"":r].concat([c.length>0&&c,d].filter(cc).flat()).join(",")||","}let cp=[r4,r6,rY,rQ,rq,rd],cm=["delete","discardChanges"],ch=[dj],cg=[{name:"sanity/structure/validation",component:function(e){let t,n,i,l,r,a,c,u=(0,s.c)(23),{onClose:p}=e,{onFocus:m,onPathOpen:h,schemaType:g,validation:f,value:x,editState:b}=iN(),{t:y}=(0,d.useTranslation)("validation");u[0]!==m||u[1]!==h?(t=e=>{h(e),m(e)},u[0]=m,u[1]=h,u[2]=t):t=u[2];let v=t;u[3]!==b?(n=b&&b.version&&(0,d.isGoingToUnpublish)(b.version),u[3]=b,u[4]=n):n=u[4];let j=n;return u[5]!==y?(i=y("panel.close-button-aria-label"),u[5]=y,u[6]=i):i=u[6],u[7]!==y?(l=y("panel.title"),u[7]=y,u[8]=l):l=u[8],u[9]!==p||u[10]!==i||u[11]!==l?(r=(0,o.jsx)(i6,{as:"header",closeButtonLabel:i,flex:"none",onClose:p,title:l}),u[9]=p,u[10]=i,u[11]=l,u[12]=r):r=u[12],u[13]!==v||u[14]!==j||u[15]!==g||u[16]!==y||u[17]!==f||u[18]!==x?(a=(0,o.jsx)(eT.Card,{flex:1,overflow:"auto",padding:3,children:j?(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsx)(eT.Text,{muted:!0,size:1,children:y("panel.unpublish-message")})}):(0,o.jsxs)(o.Fragment,{children:[0===f.length&&(0,o.jsx)(eT.Box,{padding:2,children:(0,o.jsx)(eT.Text,{muted:!0,size:1,children:y("panel.no-errors-message")})}),f.length>0&&(0,o.jsx)(eT.Stack,{space:2,children:f.map((e,t)=>(0,o.jsx)(cn,{marker:e,onOpen:v,schemaType:g,value:x},t))})]})}),u[13]=v,u[14]=j,u[15]=g,u[16]=y,u[17]=f,u[18]=x,u[19]=a):a=u[19],u[20]!==r||u[21]!==a?(c=(0,o.jsxs)(eT.Flex,{direction:"column",height:"fill",overflow:"hidden",children:[r,a]}),u[20]=r,u[21]=a,u[22]=c):c=u[22],c},useMenuItem:function(e){let t,n,i,l,r,o,a=(0,s.c)(11),{documentType:c}=e,{t:u}=(0,d.useTranslation)("validation"),{selectedReleaseId:p}=(0,d.usePerspective)(),{value:h}=iN(),{validation:g}=(0,d.useValidationStatus)(h._id,c,!p);a[0]!==g?(t=g.map(cr),a[0]=g,a[1]=t):t=a[1];let f=t,x=f.some(eP.isValidationError),b=f.some(eP.isValidationWarning);a[2]!==h?(n=(0,d.isGoingToUnpublish)(h),a[2]=h,a[3]=n):n=a[3];let y=n;e:{if(x){i=m.ErrorOutlineIcon;break e}if(b){i=m.WarningOutlineIcon;break e}i=m.CheckmarkCircleIcon}let v=i;t:{if(x){l="critical";break t}if(b){l="caution";break t}l="positive"}let j=l,w=0===f.length||y;return a[4]!==u?(r=u("panel.title"),a[4]=u,a[5]=r):r=a[5],a[6]!==v||a[7]!==w||a[8]!==r||a[9]!==j?(o={hidden:w,icon:v,title:r,tone:j,showAsAction:!0},a[6]=v,a[7]=w,a[8]=r,a[9]=j,a[10]=o):o=a[10],o}},{name:iJ,useMenuItem:()=>{let{features:e}=iK(),{t}=(0,d.useTranslation)();return{hidden:!e.reviewChanges,icon:m.RestoreIcon,title:t("changes.title")}},component:function(e){let t,n,i,l,r,c,u,p,h,g,f,x,b,y,v,j,w,S,I,C,T,R,P,E,D,k,F,A=(0,s.c)(72),{params:L,setParams:V}=lk(),M=(0,d.useSource)(),[O,z]=(0,a.useState)(null),{t:B}=(0,d.useTranslation)(_),N=L?.inspect===iJ,{selectedPerspective:H}=(0,d.usePerspective)();A[0]!==L?(t=(F=L?.changesInspectorTab)&&d9.includes(F)?L.changesInspectorTab:d9[0],A[0]=L,A[1]=t):t=A[1];let $=t;A[2]!==L||A[3]!==V?(n=e=>V({...L,changesInspectorTab:e,since:"history"===e?void 0:L?.since}),A[2]=L,A[3]=V,A[4]=n):n=A[4];let U=n,G=N?"":void 0;A[5]!==B?(i=B("changes.tab.history"),A[5]=B,A[6]=i):i=A[6],A[7]!==U?(l=()=>U("history"),A[7]=U,A[8]=l):l=A[8];let q="history"===$;A[9]!==i||A[10]!==l||A[11]!==q?(r=(0,o.jsx)(eC.Tab,{"aria-controls":"history-panel",id:"history-tab",label:i,onClick:l,selected:q}),A[9]=i,A[10]=l,A[11]=q,A[12]=r):r=A[12],A[13]!==B?(c=B("changes.tab.review-changes"),A[13]=B,A[14]=c):c=A[14],A[15]!==U?(u=()=>U("review"),A[15]=U,A[16]=u):u=A[16];let W="review"===$;A[17]!==c||A[18]!==u||A[19]!==W?(p=(0,o.jsx)(eC.Tab,{"aria-controls":"review-changes-panel",id:"changes-tab",label:c,onClick:u,selected:W}),A[17]=c,A[18]=u,A[19]=W,A[20]=p):p=A[20],A[21]!==p||A[22]!==r?(h=(0,o.jsxs)(eT.TabList,{space:1,flex:1,children:[r,p]}),A[21]=p,A[22]=r,A[23]=h):h=A[23],A[24]!==B?(g=B("changes.action.close-label"),A[24]=B,A[25]=g):g=A[25];let K=e.onClose;A[26]!==B?(f=B("document-inspector.close-button.tooltip"),A[26]=B,A[27]=f):f=A[27],A[28]!==f?(x={content:f},A[28]=f,A[29]=x):x=A[29],A[30]!==e.onClose||A[31]!==g||A[32]!==x?(b=(0,o.jsx)(eC.Button,{"aria-label":g,icon:m.CloseIcon,mode:"bleed",onClick:K,tooltipProps:x}),A[30]=e.onClose,A[31]=g,A[32]=x,A[33]=b):b=A[33],A[34]!==h||A[35]!==b?(y=(0,o.jsx)(eT.Card,{paddingBottom:1,children:(0,o.jsxs)(eT.Flex,{align:"center",padding:3,gap:2,children:[h,b]})}),A[34]=h,A[35]=b,A[36]=y):y=A[36],A[37]!==B?(v=(0,o.jsx)(eT.Box,{flex:1,padding:1,children:(0,o.jsx)(eT.Text,{size:1,children:(0,o.jsx)(d.Translate,{t:B,i18nKey:"changes.banner.tooltip"})})}),A[37]=B,A[38]=v):v=A[38],A[39]===Symbol.for("react.memo_cache_sentinel")?(j=(0,o.jsx)(eT.Text,{size:0,muted:!0,children:(0,o.jsx)(m.InfoOutlineIcon,{fontSize:1})}),A[39]=j):j=A[39],A[40]!==O||A[41]!==v?(w=(0,o.jsx)(eC.Tooltip,{portal:!0,placement:"bottom-end",boundaryElement:O,content:v,children:j}),A[40]=O,A[41]=v,A[42]=w):w=A[42],A[43]!==H||A[44]!==B?(S=function(e,{t}){return(0,d.isReleaseDocument)(e)?e.metadata.title??e._id:"drafts"===e?t("compare-versions.status.draft"):"published"===e?t("compare-versions.status.published"):e}(H,{t:B}),A[43]=H,A[44]=B,A[45]=S):S=A[45],A[46]!==S?(I={perspective:S},A[46]=S,A[47]=I):I=A[47],A[48]!==B||A[49]!==I?(C=(0,o.jsx)(eT.Text,{size:0,muted:!0,children:(0,o.jsx)(d.Translate,{t:B,values:I,i18nKey:"changes.banner.description"})}),A[48]=B,A[49]=I,A[50]=C):C=A[50],A[51]!==w||A[52]!==C?(T=(0,o.jsx)(eT.Card,{padding:2,marginBottom:3,marginX:3,tone:"neutral",border:!0,radius:3,children:(0,o.jsxs)(eT.Flex,{gap:2,align:"flex-start",children:[w,C]})}),A[51]=w,A[52]=C,A[53]=T):T=A[53];let Y="history"!==$;A[54]!==$||A[55]!==M.beta?.eventsAPI?.documents?(R=M.beta?.eventsAPI?.documents?(0,o.jsx)(d1,{showList:"history"===$}):(0,o.jsx)(d3,{showList:"history"===$}),A[54]=$,A[55]=M.beta?.eventsAPI?.documents,A[56]=R):R=A[56],A[57]!==Y||A[58]!==R?(P=(0,o.jsx)(eR.TabPanel,{"aria-labelledby":"history-tab",height:"fill",hidden:Y,id:"history-panel",children:R}),A[57]=Y,A[58]=R,A[59]=P):P=A[59];let X="review"!==$;return A[60]!==$||A[61]!==M.beta?.eventsAPI?.documents?(E=M.beta?.eventsAPI?.documents?(0,o.jsx)(o.Fragment,{children:"review"===$?(0,o.jsx)(dY,{showChanges:"review"===$}):null}):(0,o.jsx)(dT,{showChanges:"review"===$}),A[60]=$,A[61]=M.beta?.eventsAPI?.documents,A[62]=E):E=A[62],A[63]!==X||A[64]!==E?(D=(0,o.jsx)(eR.TabPanel,{"aria-labelledby":"review-tab",hidden:X,id:"review-panel",height:"fill",children:E}),A[63]=X,A[64]=E,A[65]=D):D=A[65],A[66]!==y||A[67]!==G||A[68]!==T||A[69]!==P||A[70]!==D?(k=(0,o.jsxs)(d7,{direction:"column",padding:0,height:"fill","data-ready":G,ref:z,children:[y,T,P,D]}),A[66]=y,A[67]=G,A[68]=T,A[69]=P,A[70]=D,A[71]=k):k=A[71],k},onClose:({params:e})=>({params:{...e,since:void 0,rev:void 0,changesInspectorTab:void 0,historyVersion:void 0}}),onOpen:({params:e})=>({params:{...e,since:"@lastPublished"}})}],cf=(0,d.definePlugin)(t=>{let n=t?.icon||m.MasterDetailIcon;return{name:"sanity/structure",document:{actions:(e,t)=>{let n=Array.from(new Set([...e,...cp])),i=n.filter(e=>cm.includes(e.action)),l=n.filter(e=>!cm.includes(e.action));return"published"===t.versionType?[...[...l].sort((e,t)=>"unpublish"===e.action?-1:+("unpublish"===t.action)),...i]:[...l,...i]},badges:e=>Array.from(new Set([...e,...ch])),inspectors:e=>Array.from(new Set([...e,...cg]))},tools:[{name:t?.name||"structure",title:t?.title||"Structure",icon:n,component:(0,a.lazy)(()=>e.A(962237)),canHandleIntent:(e,t)=>{var n;return"create"===e?function(e){if(!("type"in e))return!1;let t={};return"mode"in e&&(t.mode="structure"===e.mode),"template"in e&&(t.template=!0),!Object.keys(t).length||t}(t):"edit"===e&&"id"in(n=t)&&(!("mode"in n)||{mode:"structure"===n.mode})},getIntentState:d_,controlsDocumentTitle:!0,options:t,router:cs,__internalApplicationType:"sanity/structure"}],i18n:{bundles:[I]}}});var cx=Object.freeze({__proto__:null,default:sD}),cb=Object.freeze({__proto__:null,default:dv});e.s(["BackLink",()=>sL,"ConfirmDeleteDialogContainer",()=>ao,"DocumentInspectorHeader",()=>i6,"DocumentPane",()=>sD,"DocumentPaneProviderWrapper",()=>sE,"LOADING_PANE",()=>l5,"LoadingPane",()=>iB,"Pane",()=>il,"PaneContainer",()=>dv,"PaneContent",()=>is,"PaneHeader",()=>iC,"PaneHeaderActions",()=>ag,"PaneItem",()=>aS,"PaneLayout",()=>iA,"StructureToolPane",()=>sU,"_DEBUG",()=>!1,"setActivePanes",()=>dS,"structureTool",()=>cf,"useDocumentLastRev",()=>su,"useDocumentPane",()=>iN,"useDocumentTitle",()=>i2,"usePane",()=>io,"usePaneLayout",()=>n9,"usePaneRouter",()=>lk,"useStructureTool",()=>iK],126047)}]);